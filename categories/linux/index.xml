<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux on Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢</title><link>https://wayneblog.ga/categories/linux/</link><description>Recent content in Linux on Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Fri, 03 Feb 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://wayneblog.ga/categories/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>3 ç¨®ä½¿ç”¨ Regex æ­£å‰‡è¡¨é”å¼å°è³‡æ–™å¤¾ä¸­çš„æ–‡å­—æª”é€²è¡Œæœå°‹èˆ‡å–ä»£çš„æ–¹æ³•</title><link>https://wayneblog.ga/2023-02-03/replace-using-regex-in-3-ways/</link><pubDate>Fri, 03 Feb 2023 00:00:00 +0000</pubDate><guid>https://wayneblog.ga/2023-02-03/replace-using-regex-in-3-ways/</guid><description>&lt;img src="https://live.staticflickr.com/65535/52666393963_8b2453a1b5_o.jpg" alt="Featured image of post 3 ç¨®ä½¿ç”¨ Regex æ­£å‰‡è¡¨é”å¼å°è³‡æ–™å¤¾ä¸­çš„æ–‡å­—æª”é€²è¡Œæœå°‹èˆ‡å–ä»£çš„æ–¹æ³•" />&lt;style>
.article-content p code {
background-color: #f5f5f5;
color: #ff3860;
}
.focus {
background: #f1e2e2;
color: #d62c2c;
padding: 0 5px;
}
&lt;/style>
&lt;p>&lt;a class="link" href="https://officeguide.cc/linux-sed-find-and-replace-text-in-file-tutorial-examples/" target="_blank" rel="noopener"
>åƒè€ƒç¶²ç«™&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/adamreisnz/replace-in-file" target="_blank" rel="noopener"
>åƒè€ƒç¶²ç«™&lt;/a>&lt;br>
&lt;a class="link" href="https://www.npmjs.com/package/replace-in-file" target="_blank" rel="noopener"
>åƒè€ƒç¶²ç«™&lt;/a>&lt;br>
&lt;a class="link" href="https://man7.org/linux/man-pages/man1/sed.1.html" target="_blank" rel="noopener"
>åƒè€ƒç¶²ç«™&lt;/a>&lt;br>
&lt;a class="link" href="https://blog.miniasp.com/post/2023/02/02/How-to-search-and-replace-using-regex-in-3-ways" target="_blank" rel="noopener"
>åƒè€ƒç¶²ç«™&lt;/a>&lt;/p>
&lt;p>åœ¨æ•´ç†é–‹ç™¼ç’°å¢ƒçš„æ™‚å€™ï¼Œç¶“å¸¸æœƒæœ‰æ‰¹æ¬¡èª¿æ•´æª”æ¡ˆå…§å®¹çš„éœ€æ±‚ï¼Œæˆ‘ä»Šå¤©ç‰¹åˆ¥æ•´ç†äº† 3 ç¨®ä¸åŒçš„è§£æ±ºæ–¹æ¡ˆï¼Œé€™äº›æ–¹æ³•éƒ½å¯ä»¥çœ‹æƒ…æ³ä½¿ç”¨ï¼&lt;/p>
&lt;hr>
&lt;h2 id="linux--wsl">Linux / WSL&lt;/h2>
&lt;p>åœ¨ Linux ç’°å¢ƒä¸‹ä½¿ç”¨ &lt;code>find&lt;/code> èˆ‡ &lt;code>sed&lt;/code> å¹¾ä¹æ˜¯æ¨™æº–æ–¹æ¡ˆï¼Œé€™å¥—çµ„åˆæ‹³ç¢ºå¯¦å¿«é€Ÿåˆå¼·å¤§ï¼ğŸ‘&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">find src -name &lt;span class="s1">&amp;#39;*.ts&amp;#39;&lt;/span> -type f -exec sed -i &lt;span class="s1">&amp;#39;s/pattern\([s]\)/replacement\1/g&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€é &lt;code>sed&lt;/code> ä¾†å–ä»£å…§å®¹çš„è©±ï¼Œåœ¨ &lt;strong>Regex&lt;/strong> èªæ³•ä¸Šç¨å¾®æœ‰é»ä¸åŒï¼Œå·¦é‚Šçš„å°æ‹¬å¼§è¦åŠ ä¸Šåæ–œç·šè·³è„« ( &lt;code>\(&lt;/code> æˆ– &lt;code>\)&lt;/code> )ï¼Œè€Œ backreference ä¹Ÿè¦ç”¨åæ–œç·šä¾†è¡¨é” ( &lt;code>\1&lt;/code>ã€&lt;code>\2&lt;/code>ã€&amp;hellip; )&lt;/p>
&lt;hr>
&lt;h2 id="windows-powershell">Windows (PowerShell)&lt;/h2>
&lt;p>åœ¨ Windows ä¸Šé¢ä½¿ç”¨ PowerShell ä¾†å¯«è…³æœ¬ï¼Œå¯è®€æ€§æœƒæ¯”è¼ƒå¥½ï¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Get-ChildItem -Path &lt;span class="s1">&amp;#39;src&amp;#39;&lt;/span> -Include &lt;span class="s1">&amp;#39;*.ts&amp;#39;&lt;/span> -Recurse -Exclude reparsepoint &lt;span class="p">|&lt;/span> ForEach-Object &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$current_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nv">$_&lt;/span>.FullName&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$replace_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nv">$_&lt;/span>.FullName&lt;span class="k">)&lt;/span>&lt;span class="s2">.new&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># é€™è£¡ Get-Content å‰å¾Œçš„å°æ‹¬å¼§å¾ˆé‡è¦ï¼Œä¸€å®šè¦åŠ ä¸Šæ‰èƒ½å¾—åˆ° String çš„çµæœï¼ŒæŒ‡å®š utf8 ç·¨ç¢¼ä¹Ÿååˆ†é‡è¦ï¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Get-Content -LiteralPath &lt;span class="nv">$current_file&lt;/span> -Encoding utf8&lt;span class="o">)&lt;/span> -replace &lt;span class="s1">&amp;#39;pattern([s])&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;replacement$1&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Out-File -Encoding utf8 -LiteralPath &lt;span class="nv">$replace_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Move-Item -LiteralPath &lt;span class="nv">$replace_file&lt;/span> -Destination &lt;span class="nv">$current_file&lt;/span> -Force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="nodejs">Node.js&lt;/h2>
&lt;p>å¦‚æœæˆ‘å€‘è¦åœ¨å‰ç«¯å°ˆæ¡ˆä¸­æ•´åˆå­—ä¸²å–ä»£çš„å·¥ä½œï¼Œåœ¨ &lt;strong>package.json&lt;/strong> çš„ &lt;strong>scripts&lt;/strong> ç›´æ¥å–ä»£æª”æ¡ˆï¼ŒåŒæ™‚åˆè¦å…¼é¡§è·¨å¹³å°çš„è©±ï¼Œæ¡ç”¨æ—¢æœ‰çš„ npm å¥—ä»¶å°±æœƒä¾†çš„æ–¹ä¾¿è¨±å¤šã€‚é€™è£¡æˆ‘æ‰¾äº†å€‹ &lt;a class="link" href="https://www.npmjs.com/package/replace-in-file" target="_blank" rel="noopener"
>replace-in-file&lt;/a> å¥—ä»¶é‚„ä¸éŒ¯ï¼ğŸ‘&lt;/p>
&lt;ol>
&lt;li>å…ˆå®‰è£åˆ°å°ˆæ¡ˆä¸­ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install -D replace-in-file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å–ä»£å…§å®¹å¯ä»¥é€™æ¨£å¯«ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¶…å¥½ç”¨çš„ Glob èªæ³•(e.g. &lt;code>src/**/*.ts&lt;/code>)ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npx replace-in-file &lt;span class="s2">&amp;#34;/pattern([s])/g&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;replacement&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> src/**/*.ts --isRegex --encoding&lt;span class="o">=&lt;/span>utf-8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>