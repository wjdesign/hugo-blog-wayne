<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="油猴插件為輕量化腳本提供了一個平台，在線編輯器中編寫油猴腳本即時生效，通過 Github、GreasyFork 快速分發。"><meta name=keywords content="Tampermonkey,javascript,js,瀏覽器腳本,browser extension,油猴,油猴腳本,tamper monkey"><title>【Tampermonkey】輕鬆上手 - 油猴腳本開發</title><link rel=canonical href=https://wayne-blog.com/2022-12-15/tampermonkey-userscript-tutorial/><link rel=stylesheet href=https://wayne-blog.com/scss/style.min.e3f888c5dd2d8234c7284a9b45d1b5916903fb544644cac31c873b6488e8d7a0.css><script>!function(e,t,n,s,o,i,a){if(e.fbq)return;o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],i=t.createElement(n),i.async=!0,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","843131703668116"),fbq("track","PageView")</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=843131703668116&ev=PageView&noscript=1"></noscript><meta property="og:title" content="【Tampermonkey】輕鬆上手 - 油猴腳本開發"><meta property="og:description" content="油猴插件為輕量化腳本提供了一個平台，在線編輯器中編寫油猴腳本即時生效，通過 Github、GreasyFork 快速分發。"><meta property="og:url" content="https://wayne-blog.com/2022-12-15/tampermonkey-userscript-tutorial/"><meta property="og:site_name" content="Wayne's blog | 偉恩的部落格 | 技術博客"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="tampermonkey"><meta property="article:tag" content="javascript"><meta property="article:published_time" content="2022-12-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-15T00:00:00+00:00"><meta property="og:image" content="https://live.staticflickr.com/65535/52564977913_09952966be_o.jpg"><meta name=twitter:site content="@4006wayne"><meta name=twitter:creator content="@4006wayne"><meta name=twitter:title content="【Tampermonkey】輕鬆上手 - 油猴腳本開發"><meta name=twitter:description content="油猴插件為輕量化腳本提供了一個平台，在線編輯器中編寫油猴腳本即時生效，通過 Github、GreasyFork 快速分發。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://live.staticflickr.com/65535/52564977913_09952966be_o.jpg"><link rel="shortcut icon" href=https://live.staticflickr.com/65535/52275825736_808b1fd4a8_o.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-FG6KQD7H6C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FG6KQD7H6C",{anonymize_ip:!1})}</script><link rel=stylesheet type=text/css href=./toastify/style.min.css><script type=text/javascript src=./toastify/index.js></script><script>const hackKey="hack",author="Wayne (偉恩)",link="https://wayne-blog.com/",source="Wayne's blog | 偉恩的部落格 | 技術博客",warningText="請重視著作權，商業轉載請聯繫作者獲得授權，非商業轉載請註明出處。",warningBackgroundColor="linear-gradient(to right, rgb(108 47 87), rgb(191 86 86))",successBackgroundColor="linear-gradient(to right, rgb(47 151 127), rgb(69 195 137))",ignoreTagNames=["INPUT"];window.addEventListener("keyup",function(e){if(document.activeElement&&ignoreTagNames.includes(document.activeElement.tagName))return;if(e.key&&e.key.toLowerCase()==="h"){let e={text:"",duration:1e3,destination:"",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!1,style:{borderRadius:"50em"}};const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(n.has(hackKey)){e.text="Hack模式已關閉",e.style.background=warningBackgroundColor,Toastify(e).showToast(),n.delete(hackKey),t.search=n.toString(),window.history.replaceState(null,"",t.toString());return}e.text="Hack模式已開啟",e.style.background=successBackgroundColor,Toastify(e).showToast(),n.set(hackKey,"1"),t.search=n.toString(),window.history.replaceState(null,"",t.toString())}}),window.addEventListener("copy",function(e){const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(!n.has(hackKey)){e.preventDefault();const t=document.getSelection();e.clipboardData.setData("text/plain",`${t.toString()}

作者：${author}
連結：${link}
來源：${source}
${warningText}`)}})</script><style>:root{--zh-font-family:"Microsoft JhengHei", "微軟正黑體";--code-font-family:Menlo, Monaco, Consolas, "Courier New"}</style><meta name=theme-color content="#57BCB9"><link rel=manifest href=./manifest.json><link rel=apple-touch-icon sizes=57x57 href=./apple-touch-icon-57x57.webp><link rel=apple-touch-icon sizes=114x114 href=./apple-touch-icon-114x114.webp><link rel=apple-touch-icon sizes=120x120 href=./apple-touch-icon-120x120.webp><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon-180x180.webp><link rel=apple-touch-icon sizes=192x192 href=./apple-touch-icon-192x192.webp><link rel=apple-touch-icon sizes=512x512 href=./apple-touch-icon-512x512.png><meta name=msvalidate.01 content="D1D0687C3DAA5A891295FC82A5EDD3B0"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切換選單>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=https://wayne-blog.com/><img src=https://wayne-blog.com/img/avatar2d.webp width=256 height=256 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>🧧</span></figure><div class=site-meta><h1 class=site-name><a href=https://wayne-blog.com/>Wayne (偉恩)</a></h1><h2 class=site-description>軟體開發 | 網路工程 | 技術博客</h2></div></header><ol class=social-menu><li><a href=https://4006wayne.bobaboba.me target=_blank title=Bobaboba rel=me><svg width="16" height="25" viewBox="0 0 108 156" fill="none" xmlns="http://www.w3.org/2000/svg" class="ant-menu-item-icon"><g id="Frame" clip-path="url(#clip0_1286_9119)"><path id="Vector" d="M103.092 68.82c3.923-10.88 3.425-22.877-1.386-33.3898-4.8113-10.5128-13.5473-18.6939-24.3139-22.7695C66.6255 8.58519 54.6963 8.94396 44.1907 13.6589 33.6852 18.3738 25.4501 27.065 21.2715 37.848L103.092 68.82z" fill="#e3e7f5"/><path id="Vector_2" d="M20.6297 41.1675.0942412 133.077C-.0317631 133.774.0878744 134.493.432471 135.11.777068 135.727 1.325 136.203 1.98169 136.457L52.9429 155.789C53.6062 156.055 54.3425 156.073 55.0179 155.84 55.6933 155.607 56.2629 155.137 56.6233 154.517L101.337 71.7598C101.535 71.3808 101.649 70.9635 101.672 70.5363 101.694 70.109 101.626 69.6817 101.47 69.2836 101.314 68.8855 101.075 68.5258 100.769 68.2289 100.463 67.932 100.096 67.705 99.6951 67.5631L24.4802 39.0787C24.0918 38.9392 23.6786 38.8833 23.2674 38.9148 22.8561 38.9462 22.456 39.0642 22.093 39.2611S21.4122 39.7294 21.1601 40.0578 20.7273 40.7643 20.6297 41.1675z" fill="#f2f2f2"/><path id="Vector_3" d="M82.9934.252578 82.9758.245884C80.9074-.537125 78.5998.515063 77.8216 2.59602L48.9735 79.7314C48.1953 81.8123 49.2411 84.134 51.3094 84.917L51.3271 84.9237C53.3954 85.7067 55.703 84.6545 56.4813 82.5736L85.3293 5.43823C86.1076 3.35727 85.0618 1.03559 82.9934.252578z" fill="#ced8ed"/><path id="Vector_4" d="M104.866 63.6606 24.7538 33.3326C22.2172 32.3723 19.3869 33.6626 18.4324 36.2147L18.4258 36.2325C17.4713 38.7846 18.7541 41.632 21.2907 42.5923L101.403 72.9204C103.94 73.8806 106.77 72.5902 107.724 70.0381L107.731 70.0203C108.685 67.4682 107.403 64.6209 104.866 63.6606z" fill="#cbd3e8"/><path id="Vector_5" d="M89.6538 93.0834 56.7178 154.572C56.3574 155.192 55.7878 155.662 55.1124 155.895 54.437 156.129 53.7006 156.111 53.0374 155.844L2.07618 136.513C1.41948 136.259.87155 135.782.526954 135.165.182357 134.548.0627193 133.829.188724 133.133L15.4204 64.9219 89.6538 93.0834z" fill="#f8e0be"/><path id="Vector_6" d="M74.3088 11.125C77.2135 11.8219 79.9953 12.9619 82.5572 14.5052L69.2128 50.1868 60.2285 46.7876S74.6297 11.2579 74.3088 11.125z" fill="#e3e7f5"/><path id="Vector_7" d="M15.1374 125.272C17.7851 125.272 19.9315 123.112 19.9315 120.448 19.9315 117.784 17.7851 115.625 15.1374 115.625S10.3433 117.784 10.3433 120.448C10.3433 123.112 12.4897 125.272 15.1374 125.272z" fill="#d79b7a"/><path id="Vector_8" d="M15.3261 108.756C17.9738 108.756 20.1202 106.597 20.1202 103.933 20.1202 101.269 17.9738 99.1094 15.3261 99.1094S10.532 101.269 10.532 103.933C10.532 106.597 12.6784 108.756 15.3261 108.756z" fill="#d79b7a"/><path id="Vector_9" d="M23.0837 141.303c2.6477.0 4.7941-2.16 4.7941-4.82300000000001C27.8778 133.816 25.7314 131.656 23.0837 131.656S18.2896 133.816 18.2896 136.48C18.2896 139.143 20.436 141.303 23.0837 141.303z" fill="#d79b7a"/><path id="Vector_10" d="M58.9829 119.678c2.6477.0 4.7941-2.16 4.7941-4.82299999999999.0-2.664-2.1464-4.824-4.7941-4.824-2.6478.0-4.7942 2.16-4.7942 4.824C54.1887 117.518 56.3351 119.678 58.9829 119.678z" fill="#d79b7a"/><path id="Vector_11" d="M59.9643 138.022C62.612 138.022 64.7584 135.862 64.7584 133.198 64.7584 130.534 62.612 128.375 59.9643 128.375S55.1702 130.534 55.1702 133.198C55.1702 135.862 57.3166 138.022 59.9643 138.022z" fill="#d79b7a"/><path id="Vector_12" d="M41.3351 136.631C43.9829 136.631 46.1293 134.472 46.1293 131.808c0-2.66399999999999-2.1464-4.824-4.7942-4.824C38.6874 126.984 36.541 129.144 36.541 131.808 36.541 134.472 38.6874 136.631 41.3351 136.631z" fill="#d79b7a"/><path id="Vector_13" d="M50.5837 150.701C53.2314 150.701 55.3778 148.542 55.3778 145.878 55.3778 143.214 53.2314 141.055 50.5837 141.055S45.7896 143.214 45.7896 145.878C45.7896 148.542 47.936 150.701 50.5837 150.701z" fill="#d79b7a"/><path id="Vector_14" d="M35.7106 121.381C38.3584 121.381 40.5048 119.222 40.5048 116.558 40.5048 113.894 38.3584 111.734 35.7106 111.734 33.0629 111.734 30.9165 113.894 30.9165 116.558 30.9165 119.222 33.0629 121.381 35.7106 121.381z" fill="#d79b7a"/><path id="Vector_15" d="M68.8354 37.6381C67.5686 37.1053 66.5083 36.1721 65.8153 34.9795 65.7527 34.8551 65.7394 34.7115 65.778 34.5775 65.8165 34.4436 65.9042 34.3294 66.0231 34.2579 66.1435 34.1884 66.2861 34.1695 66.4203 34.205 66.5545 34.2405 66.6695 34.3277 66.7404 34.4477 66.7404 34.5996 68.7787 37.9797 72.0251 36.4985 72.0885 36.4533 72.1611 36.4229 72.2375 36.409 72.314 36.3952 72.3924 36.3984 72.4675 36.4185 72.5425 36.4387 72.6122 36.4755 72.6716 36.5259 72.731 36.5762 72.7785 36.6392 72.811 36.7102 72.8435 36.7812 72.86 36.8585 72.8594 36.9366 72.8588 37.0148 72.8409 37.0917 72.8073 37.1622 72.7737 37.2326 72.7251 37.2947 72.6649 37.3442 72.6047 37.3936 72.5345 37.429 72.4592 37.448 71.8991 37.7239 71.2894 37.8829 70.6666 37.9156 70.0439 37.9482 69.421 37.8539 68.8354 37.6381z" fill="#42210b"/><path id="Vector_16" d="M52.3767 34.5824c3.4921.0 6.3229-2.8481 6.3229-6.3615s-2.8308-6.3615-6.3229-6.3615-6.323 2.8481-6.323 6.3615 2.8309 6.3615 6.323 6.3615z" fill="#f2f2f2"/><path id="Vector_17" d="M46.3936 25.979C46.6783 25.1869 47.1165 24.4595 47.6829 23.8392 48.2493 23.2188 48.9326 22.7179 49.6929 22.3653 50.4533 22.0128 51.2757 21.8156 52.1124 21.7854 52.949 21.7551 53.7833 21.8922 54.5668 22.1889 55.3504 22.4857 56.0677 22.9361 56.6768 23.5139 57.286 24.0918 57.7751 24.7855 58.1157 25.555 58.4563 26.3245 58.6416 27.1543 58.6608 27.9964 58.6801 28.8385 58.5329 29.6761 58.2279 30.4605" fill="#51260e"/><path id="Vector_18" d="M53.4147 28.5224C53.2968 29.0523 53.0675 29.5504 52.742 29.9835 52.4164 30.4166 52.0024 30.7745 51.5277 31.0329 51.0531 31.2913 50.5289 31.4443 49.9905 31.4817 49.4521 31.519 48.9121 31.4396 48.4067 31.2492 47.9014 31.0587 47.4424 30.7614 47.0609 30.3773 46.6795 29.9933 46.3841 29.5315 46.1951 29.0229 46.0061 28.5143 45.9277 27.9709 45.9652 27.4292 46.0026 26.8875 46.1552 26.3602 46.4124 25.8828" fill="#47220d"/><path id="Vector_19" d="M87.4079 47.8559C90.9 47.8559 93.7309 45.0077 93.7309 41.4943 93.7309 37.981 90.9 35.1328 87.4079 35.1328c-3.492.0-6.3229 2.8482-6.3229 6.3615.0 3.5134 2.8309 6.3616 6.3229 6.3616z" fill="#f2f2f2"/><path id="Vector_20" d="M81.4246 39.2313C82.0304 37.6734 83.222 36.4183 84.741 35.7378 86.26 35.0572 87.9843 35.0059 89.5405 35.5952 91.0967 36.1845 92.3595 37.3671 93.0555 38.8864S93.8245 42.1397 93.2589 43.7129" fill="#51260e"/><path id="Vector_21" d="M88.446 41.8148C88.0132 42.6263 87.302 43.2519 86.445 43.5752 85.5879 43.8985 84.6434 43.8975 83.787 43.5724 82.9307 43.2473 82.2208 42.62 81.7897 41.8077 81.3586 40.9953 81.2355 40.0531 81.4434 39.1562" fill="#47220d"/></g><defs><clipPath id="clip0_1286_9119"><rect width="108" height="156" fill="#fff"/></clipPath></defs></svg></a></li><li><a href=https://www.facebook.com/wayne.blog.ga/ target=_blank title=Facebook rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><linearGradient id="CXanuwD9EGkBgTn76_1mxa" x1="9.993" x2="40.615" y1="-299.993" y2="-330.615" gradientTransform="matrix(1 0 0 -1 0 -290)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2aa4f4"/><stop offset="1" stop-color="#007ad9"/></linearGradient><path fill="url(#CXanuwD9EGkBgTn76_1mxa)" d="M24 4C12.954 4 4 12.954 4 24c0 10.028 7.379 18.331 17.004 19.777C21.981 43.924 22.982 41 24 41c.919.0 1.824 2.938 2.711 2.818C36.475 42.495 44 34.127 44 24 44 12.954 35.046 4 24 4z"/><path d="M27.707 21.169c0-1.424.305-3.121 1.757-3.121h4.283l-.001-5.617-.05-.852-.846-.114c-.608-.082-1.873-.253-4.206-.253-5.569.0-8.636 3.315-8.636 9.334v2.498H15.06v7.258h4.948V43.6C21.298 43.861 22.633 44 24 44c1.268.0 2.504-.131 3.707-.357V30.301h5.033l1.122-7.258h-6.155V21.169z" opacity=".05"/><path d="M27.207 21.169c0-1.353.293-3.621 2.257-3.621h3.783V12.46l-.026-.44-.433-.059c-.597-.081-1.838-.249-4.143-.249-5.323.0-8.136 3.055-8.136 8.834v2.998H15.56v6.258h4.948v13.874C21.644 43.876 22.806 44 24 44c1.094.0 2.16-.112 3.207-.281V29.801h5.104l.967-6.258h-6.072V21.169z" opacity=".05"/><path fill="#fff" d="M26.707 29.301h5.176l.813-5.258h-5.989v-2.874c0-2.184.714-4.121 2.757-4.121h3.283V12.46c-.577-.078-1.797-.248-4.102-.248-4.814.0-7.636 2.542-7.636 8.334v3.498H16.06v5.258h4.948v14.475C21.988 43.923 22.981 44 24 44c.921.0 1.82-.062 2.707-.182V29.301z"/></svg></a></li><li><a href=https://github.com/wjdesign target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/4006wayne target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://wayne-blog.com/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>關於本站</span></a></li><li><a href=https://wayne-blog.com/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>文章卷宗</span></a></li><li><a href=https://wayne-blog.com/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜尋檢索</span></a></li><li><a href=https://wayne-blog.com/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>相關連結</span></a></li><li><a href=https://wayne-blog.com/categories/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg><span>分類檢索</span></a></li><li><a href=https://wayne-blog.com/tags/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><span>標籤檢索</span></a></li><li><a href=https://wayne-blog.com/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS Feed</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://wayne-blog.com/ selected>繁體中文</option><option value=https://wayne-blog.com/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>夜晚模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目錄</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#瀏覽器插件browser-extension瀏覽器的擴展應用>瀏覽器插件(Browser Extension)：瀏覽器的擴展應用</a></li><li><a href=#油猴插件tampermonkey>油猴插件(Tampermonkey)</a></li><li><a href=#tampermonkey-api>Tampermonkey API</a><ol><li><a href=#頭部>頭部</a></li><li><a href=#核心邏輯>核心邏輯</a></li></ol></li><li><a href=#實踐打印-hello-world>實踐：打印 &ldquo;Hello, World&rdquo;</a></li><li><a href=#搭建舒適的開發環境>搭建舒適的開發環境</a><ol><li><a href=#create-tampermonkey-啟動項目><strong>create-tampermonkey</strong> 啟動項目</a><ol><li><a href=#初始化項目>初始化項目</a></li><li><a href=#初始化完畢後進入目錄安裝依賴>初始化完畢後，進入目錄安裝依賴。</a></li><li><a href=#到瀏覽器中打開-devuserjs自動進入-tampermonkey-腳本安裝界面>到瀏覽器中打開 <code>dev.user.js</code>，自動進入 Tampermonkey 腳本安裝界面。</a></li><li><a href=#最後一步配置油猴插件>最後一步：配置油猴插件</a></li></ol></li></ol></li><li><a href=#實踐掘金簽到功能>實踐：掘金簽到功能</a><ol><li><a href=#定位請求>定位請求</a></li><li><a href=#調試接口>調試接口</a></li><li><a href=#獲取參數>獲取參數</a><ol><li></li></ol></li></ol></li><li><a href=#發布腳本>發布腳本</a></li><li><a href=#開發技巧>開發技巧</a><ol><li><a href=#調試油猴腳本>調試油猴腳本</a><ol><li><a href=#調試-background-script>調試 <code>background script</code></a></li><li><a href=#調試-content-script>調試 <code>content script</code></a></li></ol></li><li><a href=#獲取-userid-等信息>獲取 <code>userId</code> 等信息</a></li><li><a href=#目標-dom-節點未掛載怎麼辦>目標 DOM 節點未掛載怎麼辦？</a></li><li><a href=#查看插件源碼>查看插件源碼</a></li></ol></li><li><a href=#總結>總結</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><a class=btnBack href=javascript:void(0) onclick=backEvent()><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-back" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l-4 4 4 4m-4-4h11a4 4 0 000-8h-1"/></svg><span class=btnBackText>BACK</span></a>
<script>function backEvent(){if(document.referrer.indexOf(window.location.host)!==-1){history.go(-1);return}window.location.href=window.location.origin}</script><header class=article-header><div class=article-image><a href=https://wayne-blog.com/2022-12-15/tampermonkey-userscript-tutorial/><img src=https://live.staticflickr.com/65535/52564977913_09952966be_o.jpg loading=lazy alt="Featured image of post 【Tampermonkey】輕鬆上手 - 油猴腳本開發"></a></div><div class=article-details><header class=article-category><a href=https://wayne-blog.com/categories/tampermonkey/ style=background-color:#222;color:#fff>Tampermonkey</a>
<a href=https://wayne-blog.com/categories/javascript/ style=background-color:#f7b41b;color:#fff>Javascript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=https://wayne-blog.com/2022-12-15/tampermonkey-userscript-tutorial/>【Tampermonkey】輕鬆上手 - 油猴腳本開發</a></h2><h3 class=article-subtitle>油猴插件為輕量化腳本提供了一個平台，在線編輯器中編寫油猴腳本即時生效，通過 Github、GreasyFork 快速分發。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Dec 15, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>閱讀時間: 5 分鐘</time></div></footer></div></header><section class=article-content><style>.article-content p code{background-color:#f5f5f5;color:#ff3860}.focus{background:#f1e2e2;color:#d62c2c;padding:0 5px}</style><p><a class=link href=https://juejin.cn/post/7138346293042085924 target=_blank rel=noopener>參考網站</a><br><a class=link href=https://juejin.cn/post/7022654292880424991 target=_blank rel=noopener>參考網站</a></p><p>油猴腳本運行於<a class=link href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-TW" target=_blank rel=noopener>油猴插件</a>之上，<a class=link href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-TW" target=_blank rel=noopener>油猴插件</a>本質上對瀏覽器能力的再封裝。既然如此，我們先來簡單了解一下瀏覽器插件。</p><hr><h2 id=瀏覽器插件browser-extension瀏覽器的擴展應用>瀏覽器插件(Browser Extension)：瀏覽器的擴展應用</h2><p>說的直白一點，就是拿著瀏覽器開放的能力(插件API)，去實現一些小型應用。</p><p>瀏覽器插件主要由四部分構成：background scripts、content scripts、全局 UI 元素、options page。</p><ul><li><strong>background scrips</strong>: 後台腳本，一個後台腳本是一個獨立線程，是游離於各個頁面之外的"上帝之眼"。具有訪問各類插件 API 的能力，但同時也喪失了直接操作頁面的能力。</li><li><strong>content scripts</strong>：內容腳本，具有直接操作頁面的能力。其實就是在頁面中運行 js 腳本，可以使用 DOM API。<code>content script</code> 只能直接訪問少量插件 API，但能和 <code>background script</code> 進行雙向通信完成數據交換。</li><li><strong>全局 UI 元素</strong>：瀏覽器層的UI 交互，包括：<ul><li>在 Toolbar 顯示 icon，定義點擊 icon 後顯示的 Popup 或其他效果</li><li>增加右鍵選項</li><li>增加全局快捷鍵</li><li>改造新Tab 頁、歷史記錄頁、書籤頁</li></ul></li><li><strong>options page</strong>：插件配置頁。</li></ul><p>瀏覽器插件的核心機制可以用下圖簡單概括：</p><p><img src=https://live.staticflickr.com/65535/52564900330_0ebd02f71f_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>想必，大家最好奇的還是有哪些 API 以及能用這些 API 做什麼，這裡例舉幾個：</p><ul><li><strong>contextMenus</strong>：增加右鍵選項。<ul><li>使用選中文本，例如：劃詞翻譯、文本收集</li><li>快速調用插件功能，例如：打開 DevTool，頁面剪藏</li></ul></li><li><strong>cookies</strong>：增刪改查 cookie(任意域名)，直接拿著本地 cookie 發送請求，不必再做授權。同時由於後台腳本不是 Web 頁面，在發送請求時沒有跨域限制。<ul><li>多平台信息聚合</li><li>多平台信息分發</li></ul></li><li><strong>devtools.panels</strong>：增加 Devtool 面板，這個對前端開發者來說應該很熟悉，React Developer Tools、Vue.js devtools。</li><li><strong>notifications</strong>：瀏覽器通知，未打開頁面的情況下進行通知，可以輔助一些工具類應用。</li><li><strong>storage</strong>：全局保存數據，可跟隨瀏覽器帳戶同步。</li></ul><p>這裡例舉的只是我常用的一些，只是滄海一粟，更多 API 可以查閱：</p><ul><li><a class=link href=https://developer.chrome.com/docs/extensions/reference/ target=_blank rel=noopener>Chrome Extension API Reference</a></li><li><a class=link href=https://learn.microsoft.com/zh-cn/microsoft-edge/extensions-chromium/developer-guide/api-support target=_blank rel=noopener>支持用於擴展Microsoft Edge API</a></li><li><a class=link href=https://developer.mozilla.org/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API target=_blank rel=noopener>Mozilla WebExtensions API</a></li></ul><p>瀏覽器插件就簡單介紹到這裡，如果有興趣繼續了解，推薦：<a class=link href=https://developer.chrome.com/docs/extensions/mv3/getstarted/ target=_blank rel=noopener>Chrome</a>、<a class=link href=https://learn.microsoft.com/zh-cn/microsoft-edge/extensions-chromium/getting-started/ target=_blank rel=noopener>Edge</a>、<a class=link href=https://developer.mozilla.org/zh-CN/docs/Mozilla/Add-ons/WebExtensions target=_blank rel=noopener>Mozilla</a>三家的文檔。</p><hr><h2 id=油猴插件tampermonkey>油猴插件(Tampermonkey)</h2><p>瀏覽器插件可以實現各式各樣的功能，但有時候開發者只是想對某一個站點加一點點小功能，如果這也要構建環境打包上架分發，未免就太麻煩了一些；從應用市場角度來看，充斥著顆粒化的應用，市場也會擁擠繁雜不堪。</p><p>油猴插件為輕量化腳本提供了一個平台，在線編輯器中編寫油猴腳本即時生效，通過 Github、GreasyFork 快速分發。</p><p>在油猴插件中，<code>content script</code> 起到非常重要的角色，它將用戶編寫的代碼運行在頁面中，同時提供 <code>GM_xxxx</code> 函數封裝瀏覽器的部分能力。封裝的內部實現是和 <code>background script</code> 通信，驅動 <code>background script</code> 調用插件API。</p><p>對油猴插件簡單了解之後，來看看如何編寫油猴腳本。</p><hr><h2 id=tampermonkey-api>Tampermonkey API</h2><p>油猴腳本由<strong>頭部</strong>和<strong>核心邏輯</strong>兩部分組成。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ==UserScript==
</span></span></span><span class=line><span class=cl><span class=c1>// @name         New Userscript
</span></span></span><span class=line><span class=cl><span class=c1>// @namespace    http://tampermonkey.net/
</span></span></span><span class=line><span class=cl><span class=c1>// @version      0.1
</span></span></span><span class=line><span class=cl><span class=c1>// @description  try to take over the world!
</span></span></span><span class=line><span class=cl><span class=c1>// @author       You
</span></span></span><span class=line><span class=cl><span class=c1>// @match        https://www.tampermonkey.net/documentation.php?ext=dhdg
</span></span></span><span class=line><span class=cl><span class=c1>// @icon         https://www.google.com/s2/favicons?domain=tampermonkey.net
</span></span></span><span class=line><span class=cl><span class=c1>// @grant        none
</span></span></span><span class=line><span class=cl><span class=c1>// ==/UserScript==
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Your code here...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>})();</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=頭部>頭部</h3><p><strong>頭部</strong>是腳本的一些元信息、更新方式、指定運行頁面、權限聲明，逐一解釋一下：</p><div class=table-wrapper><table><thead><tr><th>配置名</th><th>作用</th><th>使用技巧</th></tr></thead><tbody><tr><td><strong>@name</strong></td><td>腳本顯示的名稱</td><td>加後綴實現國際化，例如：<br><strong>@name:zh-CN</strong> 指定在瀏覽器語言為中文時顯示的名稱</td></tr><tr><td><strong>@namespace</strong></td><td>腳本的命名空間，可以理解為腳本的標識</td><td>為了避免衝突一般使用 Github 倉庫地址</td></tr><tr><td><strong>@version</strong></td><td>與更新相關，當前版本</td><td></td></tr><tr><td><strong>@updateURL</strong></td><td>檢查腳本是否更新地址</td><td>配合 <strong>@version</strong> 和自動更新使用</td></tr><tr><td><strong>@downloadURL</strong></td><td>檢測到更新時，去哪下載腳本</td><td></td></tr><tr><td><strong>@supportURL</strong></td><td>遇到問題時，用戶去哪反饋</td><td></td></tr><tr><td><strong>@include</strong></td><td>腳本在哪些頁面運行</td><td>可使用正則，不支持 hashtag，多個頁面的地址聲明多個 <strong>@include</strong> 即可</td></tr><tr><td><strong>@match</strong></td><td>與 <strong>@include</strong> 類似</td><td></td></tr><tr><td><strong>@exclude</strong></td><td>腳本禁止在哪些頁面運行，優先於 <strong>@include</strong></td><td></td></tr><tr><td><strong>@require</strong></td><td>在腳本運行前引入外部 JavaScript 文件</td><td>例如：引入 jQuery</td></tr><tr><td><strong>@resource</strong></td><td>聲明外部資源文件，搭配 <strong>GM_getResourceText</strong> 使用</td><td>例如：引入 html、icon</td></tr><tr><td><strong>@connect</strong></td><td>聲明 <strong>GM_xmlhttpRequest</strong> 可訪問的域</td><td>必須指定才能正常請求</td></tr><tr><td><strong>@grant</strong></td><td>聲明 <strong>GM_xxx</strong> 函數的使用列表</td><td>必須先指定權限才能正常使用</td></tr><tr><td><strong>@run-at</strong></td><td>指定腳本運行時機</td><td>document-start：盡快執行<br>document-body：當 body 掛載時執行<br>document-end：DOMContentLoaded 觸發時執行<br>document-idle：DOMContentLoaded 觸發後執行，也是默認設置項<br>context-menu: 右鍵菜單項被點擊時執行</td></tr><tr><td><strong>@author</strong></td><td>作者名</td><td></td></tr><tr><td><strong>@description</strong></td><td>簡短介紹</td><td>同樣可以加後綴實現國際化，例如：<br><strong>@description:zh-CN</strong></td></tr><tr><td><strong>@homepage</strong></td><td>主頁地址</td><td>如果未設置並且 <strong>@namespace</strong> 是倉庫地址，默認導向倉庫地址</td></tr><tr><td><strong>@icon</strong></td><td>腳本 icon</td><td></td></tr><tr><td><strong>@icon64</strong></td><td>64x64 像素的腳本 icon</td><td></td></tr><tr><td><strong>@antifeature</strong></td><td>腳本是否有廣告、挖礦、數據收集等商業行為</td><td></td></tr><tr><td><strong>@noframes</strong></td><td>聲明腳本不在 iframe 中運行</td><td></td></tr></tbody></table></div><h3 id=核心邏輯>核心邏輯</h3><p><strong>核心邏輯</strong>通過一個立即執行函數包裹，避免和全局作用域相互干擾。Tampermonkey 將瀏覽器的部分能力封裝為 <code>GM_XXX</code> 函數以供調用：</p><div class=table-wrapper><table><thead><tr><th>API</th><th>作用</th><th>使用技巧</th></tr></thead><tbody><tr><td><strong>unsafeWindow</strong></td><td>訪問頁面的 Window 對象</td><td></td></tr><tr><td><strong>GM_addStyle(css)</strong></td><td>創建全局樣式的快捷方式，向頁面插入 style 元素</td><td>也可以用 DOM 操作手動創建</td></tr><tr><td><strong>GM_addElement(tag_name, attributes)</strong><br><strong>GM_addElement(parent_node, tag_name, attributes)</strong></td><td>向 DOM 新建元素的快捷方式</td><td>也可以用 DOM 操作手動創建</td></tr><tr><td><strong>GM_log(message)</strong></td><td>在 Console 中打印信息</td><td>console.log 的快捷方式</td></tr><tr><td><strong>GM_getValue(name, defaultValue)</strong></td><td>從存儲體中獲取數據</td><td></td></tr><tr><td><strong>GM_deleteValue(name)</strong></td><td>從存儲體中刪除數據</td><td></td></tr><tr><td><strong>GM_listValues()</strong></td><td>列舉存儲體中所有數據項</td><td></td></tr><tr><td><strong>GM_addValueChangeListener</strong></td><td>監聽數據更新</td><td>例如要使 Tab 間數據同步，可以用監聽 value 達成同步</td></tr><tr><td><strong>GM_removeValueChangeListener</strong></td><td>移除監聽</td><td></td></tr><tr><td><strong>GM_getResourceText(name)</strong></td><td>獲取 <strong>@resource</strong> 中已聲明的資源</td><td></td></tr><tr><td><strong>GM_getResourceURL(name)</strong></td><td>獲取 <strong>@resource</strong> 中已聲明的資源(base64 URI 形式)</td><td></td></tr><tr><td><strong>GM_registerMenuCommand(name, fn, accessKey)</strong></td><td>在 Tampermonkey 的 popup 中增加選項</td><td></td></tr><tr><td><strong>GM_unregisterMenuCommand(menuCmdId)</strong></td><td>移除選項</td><td></td></tr><tr><td><strong>GM_openInTab(url, options)</strong></td><td>新開一個 tab 頁</td><td></td></tr><tr><td><strong>GM_xmlhttpRequest(details)</strong></td><td>使用後台腳本進行請求，自動帶上 cookie，無跨域問題，目標域需要在 <strong>@connect</strong> 中提前聲明</td><td></td></tr><tr><td><strong>GM_download(details)</strong></td><td>下載資源到本地</td><td></td></tr><tr><td><strong>GM_getTab(callback)</strong></td><td>獲取當前 tab 的 object 對象</td><td></td></tr><tr><td><strong>GM_saveTab(tab)</strong></td><td>通過 tab 的 object 對象重新打開一個 tab</td><td></td></tr><tr><td><strong>GM_getTabs(callback)</strong></td><td>獲取當前存活的所有 tab 的對象，以便和其他腳本實例溝通</td><td></td></tr><tr><td><strong>GM_notification</strong></td><td>使用插件 notification API 彈出桌面通知</td><td></td></tr><tr><td><strong>GM_setClipboard</strong></td><td>複製內容到剪貼板</td><td></td></tr><tr><td><strong>GM_info</strong></td><td>獲取腳本的油猴插件的信息</td><td></td></tr></tbody></table></div><p>完整的說明文檔：<a class=link href=https://www.tampermonkey.net/documentation.php target=_blank rel=noopener>Tampermonkey documentation</a></p><h2 id=實踐打印-hello-world>實踐：打印 &ldquo;Hello, World&rdquo;</h2><p>做一個非常簡單的小練習：創建一個名為 &ldquo;Hello&rdquo; 的腳本，當進入掘金和知乎頁面時，在 Console 中打印 &ldquo;Hello, World&rdquo;。</p><p><img src=https://live.staticflickr.com/65535/52564900350_360ca23caf_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ol><li>新建腳本</li><li>修改腳本名稱</li><li>指定運行地址 <code>@match</code> 或 <code>@include</code></li><li>直接使用 <code>console.log</code> 或者聲明權限調用 <code>GM_log</code></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ==UserScript==
</span></span></span><span class=line><span class=cl><span class=c1>// @name         Hello
</span></span></span><span class=line><span class=cl><span class=c1>// @namespace    http://tampermonkey.net/hello
</span></span></span><span class=line><span class=cl><span class=c1>// @version      0.1
</span></span></span><span class=line><span class=cl><span class=c1>// @description  try to take over the world!
</span></span></span><span class=line><span class=cl><span class=c1>// @author       You Name
</span></span></span><span class=line><span class=cl><span class=c1>// @match        https://zhihu.com/*
</span></span></span><span class=line><span class=cl><span class=c1>// @match        https://juejin.cn/*
</span></span></span><span class=line><span class=cl><span class=c1>// @grant        GM_log
</span></span></span><span class=line><span class=cl><span class=c1>// ==/UserScript==
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>GM_log</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=搭建舒適的開發環境>搭建舒適的開發環境</h2><p>使用在線編輯器小試牛刀之後，或許你也發現在線編輯器：</p><ul><li>缺少語法補全和自動提示</li><li>難以格式化代碼</li></ul><p>不免懷念起 VSCode。</p><p>或許你還會有更深遠的考慮，在線編輯器編輯完成後：</p><ul><li>怎麼同步到遠程倉庫，怎麼做代碼分發</li><li>如果要用到新語法，怎麼保證跨瀏覽器兼容性</li><li>如果代碼越寫越多，沒有模塊化怎麼管理</li><li>沒有 TS，很難保證長期維護</li></ul><p>這些坑我已經踩過了，並且抽出一個腳手架工具 <a class=link href=https://www.npmjs.com/package/create-tampermonkey target=_blank rel=noopener>create-tampermonkey - npm (npmjs.com)</a>，一鍵搭建舒適的油猴腳本開發環境。</p><p><img src=https://live.staticflickr.com/65535/52564900355_5c5dab79e3_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>腳手架集成 rollup + babel + eslint + typescript，支持：</p><ul><li>自動生成 UserScript Header</li><li>語法和類型系統：ESNext、ES Module、TypeScript</li><li>樣式系統：CSS Modules，以及 scss、sass、less、stylus (需安裝對應依賴)</li><li>靜態資源：導入圖片、SVG 轉換為 Base64，同時支持 SVG Sprite 多語言</li><li>擴展：基於 Rollup，可以按需安裝插件進行擴展</li></ul><h3 id=create-tampermonkey-啟動項目><strong>create-tampermonkey</strong> 啟動項目</h3><h4 id=初始化項目>初始化項目</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx create-tampermonkey demo-userscript
</span></span><span class=line><span class=cl><span class=c1># 或者</span>
</span></span><span class=line><span class=cl>npm init tampermonkey demo-userscript
</span></span><span class=line><span class=cl><span class=c1># 或者</span>
</span></span><span class=line><span class=cl>yarn create tampermonkey demo-userscript
</span></span></code></pre></td></tr></table></div></div><h4 id=初始化完畢後進入目錄安裝依賴>初始化完畢後，進入目錄安裝依賴。</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run dev <span class=c1># 跑起開發模式</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52563988282_f3f5fd5df6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=到瀏覽器中打開-devuserjs自動進入-tampermonkey-腳本安裝界面>到瀏覽器中打開 <code>dev.user.js</code>，自動進入 Tampermonkey 腳本安裝界面。</h4><p><img src=https://live.staticflickr.com/65535/52563988297_351ae5b113_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=最後一步配置油猴插件>最後一步：配置油猴插件</h4><p>訪問 <a class=link href=chrome://extension><code>chrome://extension</code></a>，找到油猴插件的卡片，點擊 <strong>Details</strong> 進入配置界面。</p><p><img src=https://live.staticflickr.com/65535/52564447881_bf4223c421_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>勾選 <strong>Allow acess to file URLs</strong>。</p><p><img src=https://live.staticflickr.com/65535/52564447906_3a3c7d450d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>刷新頁面，出現彈窗，一切就緒。</p><p><img src=https://live.staticflickr.com/65535/52564726624_5f584154d4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>用 VSCode 打開項目，這時右下角會推薦一些輔助插件，建議安裝。</p><p>代碼中使用到的 <code>GM_xxx</code> 會自動提取到 UserScript Header 中，當然也可以在 <code>src/meta.json</code> 中自定義。</p><p>代碼的默認入口是 <code>src/main.js</code> 文件。</p><hr><h2 id=實踐掘金簽到功能>實踐：掘金簽到功能</h2><p>基於上面初始化的項目 <code>demo-userscript</code> 做一個小功能：掘金簽到功能。</p><h3 id=定位請求>定位請求</h3><p>&ldquo;掘金簽到"本質是調用接口，我們的實現思路是追踪點擊"立即簽到"按鈕時請求發送情況，定位到</p><p><img src=https://live.staticflickr.com/65535/52564978003_bab32df628_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=調試接口>調試接口</h3><p>打開 Postman 做一下調試，這裡有一個導入小技巧：右鍵拷貝 <strong>cURL</strong>。</p><p><img src=https://live.staticflickr.com/65535/52564447981_d70749ea73_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>到 Postman 中通過 curl 導入整個請求：點擊左側面板中的 import 按鈕，選擇 Raw text 貼上上一步複製的內容即可。</p><p><img src=https://live.staticflickr.com/65535/52564726689_b0091f3b75_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=獲取參數>獲取參數</h3><p><img src=https://live.staticflickr.com/65535/52564978043_fe3c0edc6f_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>在 Postman 中發現請求需要 <code>aid</code>、<code>uuid</code>、<code>_signature</code> 三個參數，試試看不帶參數能否請求成功，先確定好必不可少的參數和請求頭。</p><p>簡單嘗試後，發現這裡並不需要帶 <code>aid</code>、<code>uuid</code>、<code>_signature</code> 三個參數，主要是依賴 <code>cookie</code>，使用 <code>GM_xmlhttpRequest</code> 會自動帶上對應的 <code>cookie</code>，事情變得簡單。</p><p>修改 <code>src/main.js</code> 的代碼：</p><h5 id=srcmainjs>src/main.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>GM_xmlhttpRequest</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>url</span><span class=o>:</span> <span class=s2>&#34;https://api.juejin.cn/growth_api/v1/check_in&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>method</span><span class=o>:</span> <span class=s2>&#34;POST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;content-type&#34;</span><span class=o>:</span> <span class=s2>&#34;application/json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user-agent&#34;</span><span class=o>:</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>userAgent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>responseType</span><span class=o>:</span> <span class=s2>&#34;json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>onload</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>response</span><span class=p>.</span><span class=nx>response</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span> <span class=o>===</span> <span class=s2>&#34;success&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;簽到成功&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>err_msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>刷新頁面測試一下。在其他站點刷新一下居然也可以發送請求，這就是插件沒有跨域限制的優勢了。</p><p>再做一下節流優化。利用 <code>GM_setValue</code> 和 <code>GM_getValue</code> 做持續存儲。</p><h5 id=srcmainjs-1>src/main.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>storageKey</span> <span class=o>=</span> <span class=s2>&#34;last_sign_timestamp&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 取得上一次簽到的日子
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>lastSignNumberOfDays</span> <span class=o>=</span> <span class=nx>GM_getValue</span><span class=p>(</span><span class=nx>storageKey</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 計算現在所在的日子
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>currentNumberOfDays</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>valueOf</span><span class=p>()</span> <span class=o>/</span> <span class=mi>1000</span> <span class=o>/</span> <span class=mi>60</span> <span class=o>/</span> <span class=mi>60</span> <span class=o>/</span> <span class=mi>24</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 如果今天已经請求過，不再請求
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=nx>currentNumberOfDays</span> <span class=o>!==</span> <span class=nx>lastSignNumberOfDays</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>GM_xmlhttpRequest</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span><span class=o>:</span> <span class=s2>&#34;https://api.juejin.cn/growth_api/v1/check_in&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>method</span><span class=o>:</span> <span class=s2>&#34;POST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;content-type&#34;</span><span class=o>:</span> <span class=s2>&#34;application/json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;user-agent&#34;</span><span class=o>:</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>userAgent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>responseType</span><span class=o>:</span> <span class=s2>&#34;json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>onload</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>response</span><span class=p>.</span><span class=nx>response</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span> <span class=o>===</span> <span class=s2>&#34;success&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;簽到成功&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>alert</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>err_msg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 更新最近一次簽到的日子
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>GM_setValue</span><span class=p>(</span><span class=nx>storageKey</span><span class=p>,</span> <span class=nx>currentNumberOfDays</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>難免會遇到需要獲取數據的情況，可訪問的數據一般有三種：</p><ol><li>頁面中包含數據，通過DOM 獲取</li><li>通過接口請求得到</li><li>存儲在本地存儲中，localStorage 或 cookie 之類</li></ol><p>確定方式很粗暴：</p><ol><li>複製參數或參數值到Element 中搜索</li><li>查看前面幾個請求，看看是否有跡可循</li><li>到 localStorage 或 cookie 中搜索</li></ol><hr><h2 id=發布腳本>發布腳本</h2><p>在本地開發完腳本之後，<code>npm run build</code> 構建生產版本並上傳代碼到 Github 或 Gitee。</p><p>用 Github/Gitee 上文件的 <strong>Raw URL</strong> 就能直接實現分發。如果在 package.json 中設置好 <code>repository</code>，<code>create-tampermonkey</code> 會自動生成 <strong>Raw URL</strong> 並賦給 <code>downloadURL</code>、<code>updateURL</code>。</p><p>但這樣分發存在的問題是無法統計下載量、從網絡訪問的角度考慮同時維護 Github 和 Gitee 兩個倉庫。</p><p>另一種分發方式是上傳到腳本平台 <a class=link href=https://greasyfork.org/zh-CN target=_blank rel=noopener>greasyfork.org/</a>，登錄後即可發布新腳本，如果代碼託管在 Github 或 GitLab 還可以使用 <strong>Webhooks</strong> 實現自動更新。</p><hr><h2 id=開發技巧>開發技巧</h2><h3 id=調試油猴腳本>調試油猴腳本</h3><p>油猴腳本的運行依託於 <code>background script</code> 和 <code>content script</code>，在調試前需要對運行環境有所區分，例如 <code>GM_xmlhttpRequest</code> 請求是 <code>background script</code> 發出的，DOM 處理和腳本邏輯是 <code>content script</code> 執行的。</p><p>確定環境之後，就可以使用對應的調試方式進行調試了。</p><h4 id=調試-background-script>調試 <code>background script</code></h4><p>還是訪問 <a class=link href=chrome://extension>chrome://extension</a>，找到油猴插件的卡片：</p><p><img src=https://live.staticflickr.com/65535/52564726704_a5c5a856d5_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><code>inspect views</code> 後面有個 <code>background.html</code>，點擊一下彈出 <code>background script</code> 的調試彈窗。</p><h4 id=調試-content-script>調試 <code>content script</code></h4><p>在網頁inspect -> Sources -> Page 下找到 <code>Tampermonkey</code> 目錄，頁面中運行的油猴腳本代碼都在這了，選擇目標，斷點調試即可。</p><p><img src=https://live.staticflickr.com/65535/52564726729_292f203646_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=獲取-userid-等信息>獲取 <code>userId</code> 等信息</h3><p>有時候需要拿一些額外信息做請求，一般有三種方式：</p><ol><li>看看能不能在頁面中搜索到，通過 DOM 獲取</li><li>看看有沒有接口可以調用獲取</li><li>看看本地存儲裡有沒有</li></ol><h3 id=目標-dom-節點未掛載怎麼辦>目標 DOM 節點未掛載怎麼辦？</h3><p>如果節點是在首屏加載的，粗暴的方法是使用 <code>setTimeout</code> 做一下延時。</p><p>但如果是在交互過程中有DOM 更新，就只能引入監聽機制了，使用 <code>MutationObserver</code> 來實現。</p><p>具體的實例可以看<a class=link href=https://juejin.cn/post/7012565266827739150 target=_blank rel=noopener>【開發記錄】掘金"破圈行動&rdquo; 輔助腳本- 掘金(juejin.cn)</a></p><h3 id=查看插件源碼>查看插件源碼</h3><p>瀏覽器插件安裝之後，插件包被下載到本地目錄中，可通過下述方法訪問。</p><p>訪問 <a class=link href=chrome://version>chrome://version</a>，找到 Profile path(存放用戶數據的路徑)</p><p><img src=https://live.staticflickr.com/65535/52563988382_afd8393105_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>訪問 <a class=link href=chrome://extensions/>chrome://extensions/</a>，找到目標插件的ID</p><p><img src=https://live.staticflickr.com/65535/52564900305_7278510b37_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>將 Profile Path 和插件 ID 拼裝在一起 <code>${Prifile Path}/Extensions/${Extension Id}</code>，便是插件包的路徑了。友情提示，通過命令行訪問時需要在空格前加個 <code>\</code> 轉義一下。</p><hr><h2 id=總結>總結</h2><p>瀏覽器插件利用瀏覽器能力進行功能擴展，具有跨域請求、讀取 cookie、管理歷史記錄、註冊右鍵項等能力。</p><p>瀏覽器插件的能力很豐富，能夠實現複雜的功能。但如果只是做一些針對頁面的操作，只需要依賴基礎能力，完全可以使用油猴腳本實現，開發更便捷分發更迅速。</p><p>開發油猴腳本，主要是使用 Tampermonkey API 和 JavaScript。</p><p><a class=link href=https://www.npmjs.com/package/create-tampermonkey target=_blank rel=noopener>create-tampermonkey</a> 腳手架提供一個全面的油猴腳本開發環境，依托這個環境，可以使用最新的 ES 語法、TypeScript、CSS Modules，在 VSCode 中進行模塊化開發，大大提高開發效率。</p><p>開發完畢的油猴腳本可通過 Github/Gitee Raw URL 或 <a class=link href=https://greasyfork.org/zh-CN target=_blank rel=noopener>Greasy Fork</a> 平台分發。</p><p>瀏覽器插件的主要分工為 <code>background script</code> 和 <code>content script</code> 兩部分，在調試油猴腳本時需要思考清楚是哪一部分出現的問題，再採用對應的調試方式。</p><p>實現了兩個小實踐，走出第一步，接下來盡情發揮創造力吧，玩得開心～</p><blockquote><p>最後分享一下<a class=link href=https://github.com/wjdesign/TampermonkeyScripts target=_blank rel=noopener>我的 Tampermonkey UserScripts 清單</a>，持續更新，需要的歡迎下載來使用！</p></blockquote><hr></section><footer class=article-footer><section class=article-tags><a href=https://wayne-blog.com/tags/tampermonkey/>tampermonkey</a>
<a href=https://wayne-blog.com/tags/javascript/>javascript</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相關文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=https://wayne-blog.com/2023-04-11/k6-introduction/><div class=article-image><img src=https://live.staticflickr.com/65535/52808880406_c06b18a888_o.png loading=lazy data-key=k6-introduction data-hash=https://live.staticflickr.com/65535/52808880406_c06b18a888_o.png></div><div class=article-details><h2 class=article-title>【K6】壓力測試工具介紹</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-03-27/js-functional-programming/><div class=article-image><img src=https://live.staticflickr.com/65535/52774306416_350deb7178_o.png loading=lazy data-key=js-functional-programming data-hash=https://live.staticflickr.com/65535/52774306416_350deb7178_o.png></div><div class=article-details><h2 class=article-title>【Javascript】關於 Functional Programming 函數式編程</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-03-16/js-function-currying/><div class=article-image><img src=https://live.staticflickr.com/65535/52750230342_4ddafe10aa_o.jpg loading=lazy data-key=js-function-currying data-hash=https://live.staticflickr.com/65535/52750230342_4ddafe10aa_o.jpg></div><div class=article-details><h2 class=article-title>【Function Currying】Javascript 函數柯里化</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-03-10/petite-vue-introduction/><div class=article-image><img src=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg loading=lazy data-key=petite-vue-introduction data-hash=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg></div><div class=article-details><h2 class=article-title>【Petite-Vue】大小只有 ~6KB 的 mini Vue！</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-02-22/js-require-vs-import/><div class=article-image><img src=https://live.staticflickr.com/65535/52703536702_73aed5647c_o.jpg loading=lazy data-key=js-require-vs-import data-hash=https://live.staticflickr.com/65535/52703536702_73aed5647c_o.jpg></div><div class=article-details><h2 class=article-title>【Javascript】Require 與 Import 的區別</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-blog-wayne.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Wayne's blog | 偉恩的部落格 | 技術博客</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=https://wayne-blog.com/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>"serviceWorker"in navigator&&(console.log("Check service worker register?"),navigator.serviceWorker.register("./service-worker.js").then(function(){console.log("service worker registed.")}).catch(function(e){console.log("service worker registed fail. This happened: ",e)}));function toggleBtnScrollTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=document.getElementById("btnScrollTop");if(t){e&&!e.classList.contains("show")&&e.classList.add("show");return}e&&e.classList.contains("show")&&e.classList.remove("show")}window.addEventListener("scroll",toggleBtnScrollTop),document.addEventListener("DOMContentLoaded",toggleBtnScrollTop);function clickToScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}function clickToMessenger(){window.open("//m.me/100278986238046","_blank")}</script><button id=btnScrollTop onclick=clickToScrollTop() title=回到頁頂>
<img src=https://wayne-blog.com/img/top_huf0c1dc16de3f1372c70e7aced5d60e6d_660_30x0_resize_box_3.png alt=scroll-top></button>
<button id=btnMessenger onclick=clickToMessenger() title="Facebook Messenger">
<img src=https://wayne-blog.com/img/messenger_hu3f63590c9d474cc4c51a145f9812597b_7669_50x0_resize_box_3.png alt="facebook messenger"></button></body></html>