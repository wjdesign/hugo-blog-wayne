<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼ç¶²ç«™å¯èƒ½æœƒé¢è‡¨éœ€è¦åš SEO çš„æƒ…å¢ƒï¼Œç‚ºäº†è§£æ±ºè©²æƒ…å¢ƒå•é¡Œï¼Œä½ å¯èƒ½æœƒæ‰¾åˆ°ä½¿ç”¨ Vite åšé æ¸²æŸ“æˆ–å…¶ä»–æ–¹å¼ï¼ŒNuxt 3 ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œä¸”æœ‰æ›´å¤šå¼·å¤§çš„åŠŸèƒ½ï¼Œç›®å‰ Nuxt 3 å·²ç¶“æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆï¼Œå°±è®“æˆ‘å€‘é–‹å§‹å˜—é®®ä¸Šæ‰‹å§ï¼æœ¬ç¯‡æœƒè‘—é‡åœ¨ Nuxt 3 çš„ç‰¹è‰²èˆ‡åŠŸèƒ½å­¸ç¿’ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€å…·å‚™äº› Vue 3 åŸºç¤ï¼Œæˆ‘å°‡å¾æ­å»º Nuxt 3 é–‹ç™¼ç’°å¢ƒã€é é¢è·¯ç”±èˆ‡ä½ˆå±€ä¸€ç›´åˆ°ä½¿ç”¨ Nuxt 3 å»ºç«‹ SEO æ‰€éœ€çš„è³‡è¨Šåšäº›ç­†è¨˜åŠä»‹ç´¹ï¼Œè®“ä½ æœ‰å€‹æ¦‚å¿µä¸¦å˜—è©¦ç”¨ Nuxt 3 ä¾†åš SSR æˆ– SSGï¼Œé€²è€Œè§£æ±º Vue 3 SPA ä¸å¥½åš SEO çš„å•é¡Œã€‚"><meta name=keywords content="javascript,typescript,vue,nuxt3,nuxt,ssr,spa,ssr+spa,ssg,nodejs"><title>ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜</title><link rel=canonical href=https://wayneblog.ga/2023-01-14/nuxt-try-nuxt3/><link rel=stylesheet href=https://wayneblog.ga/scss/style.min.500a9027405aec36a424dd29f18c89ede2aef02d12c577ed94fe7a53d759fe1f.css><script>!function(e,t,n,s,o,i,a){if(e.fbq)return;o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],i=t.createElement(n),i.async=!0,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","843131703668116"),fbq("track","PageView")</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=843131703668116&ev=PageView&noscript=1"></noscript><meta property="og:title" content="ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜"><meta property="og:description" content="åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼ç¶²ç«™å¯èƒ½æœƒé¢è‡¨éœ€è¦åš SEO çš„æƒ…å¢ƒï¼Œç‚ºäº†è§£æ±ºè©²æƒ…å¢ƒå•é¡Œï¼Œä½ å¯èƒ½æœƒæ‰¾åˆ°ä½¿ç”¨ Vite åšé æ¸²æŸ“æˆ–å…¶ä»–æ–¹å¼ï¼ŒNuxt 3 ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œä¸”æœ‰æ›´å¤šå¼·å¤§çš„åŠŸèƒ½ï¼Œç›®å‰ Nuxt 3 å·²ç¶“æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆï¼Œå°±è®“æˆ‘å€‘é–‹å§‹å˜—é®®ä¸Šæ‰‹å§ï¼æœ¬ç¯‡æœƒè‘—é‡åœ¨ Nuxt 3 çš„ç‰¹è‰²èˆ‡åŠŸèƒ½å­¸ç¿’ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€å…·å‚™äº› Vue 3 åŸºç¤ï¼Œæˆ‘å°‡å¾æ­å»º Nuxt 3 é–‹ç™¼ç’°å¢ƒã€é é¢è·¯ç”±èˆ‡ä½ˆå±€ä¸€ç›´åˆ°ä½¿ç”¨ Nuxt 3 å»ºç«‹ SEO æ‰€éœ€çš„è³‡è¨Šåšäº›ç­†è¨˜åŠä»‹ç´¹ï¼Œè®“ä½ æœ‰å€‹æ¦‚å¿µä¸¦å˜—è©¦ç”¨ Nuxt 3 ä¾†åš SSR æˆ– SSGï¼Œé€²è€Œè§£æ±º Vue 3 SPA ä¸å¥½åš SEO çš„å•é¡Œã€‚"><meta property="og:url" content="https://wayneblog.ga/2023-01-14/nuxt-try-nuxt3/"><meta property="og:site_name" content="Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="javascript"><meta property="article:tag" content="typescript"><meta property="article:tag" content="vue"><meta property="article:tag" content="nuxt"><meta property="article:published_time" content="2023-01-14T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-14T00:00:00+00:00"><meta property="og:image" content="https://live.staticflickr.com/65535/52616698791_b7b8bbce05_o.jpg"><meta name=twitter:site content="@4006wayne"><meta name=twitter:creator content="@4006wayne"><meta name=twitter:title content="ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜"><meta name=twitter:description content="åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼ç¶²ç«™å¯èƒ½æœƒé¢è‡¨éœ€è¦åš SEO çš„æƒ…å¢ƒï¼Œç‚ºäº†è§£æ±ºè©²æƒ…å¢ƒå•é¡Œï¼Œä½ å¯èƒ½æœƒæ‰¾åˆ°ä½¿ç”¨ Vite åšé æ¸²æŸ“æˆ–å…¶ä»–æ–¹å¼ï¼ŒNuxt 3 ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œä¸”æœ‰æ›´å¤šå¼·å¤§çš„åŠŸèƒ½ï¼Œç›®å‰ Nuxt 3 å·²ç¶“æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆï¼Œå°±è®“æˆ‘å€‘é–‹å§‹å˜—é®®ä¸Šæ‰‹å§ï¼æœ¬ç¯‡æœƒè‘—é‡åœ¨ Nuxt 3 çš„ç‰¹è‰²èˆ‡åŠŸèƒ½å­¸ç¿’ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€å…·å‚™äº› Vue 3 åŸºç¤ï¼Œæˆ‘å°‡å¾æ­å»º Nuxt 3 é–‹ç™¼ç’°å¢ƒã€é é¢è·¯ç”±èˆ‡ä½ˆå±€ä¸€ç›´åˆ°ä½¿ç”¨ Nuxt 3 å»ºç«‹ SEO æ‰€éœ€çš„è³‡è¨Šåšäº›ç­†è¨˜åŠä»‹ç´¹ï¼Œè®“ä½ æœ‰å€‹æ¦‚å¿µä¸¦å˜—è©¦ç”¨ Nuxt 3 ä¾†åš SSR æˆ– SSGï¼Œé€²è€Œè§£æ±º Vue 3 SPA ä¸å¥½åš SEO çš„å•é¡Œã€‚"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://live.staticflickr.com/65535/52616698791_b7b8bbce05_o.jpg"><link rel="shortcut icon" href=https://live.staticflickr.com/65535/52275825736_808b1fd4a8_o.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-FG6KQD7H6C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FG6KQD7H6C",{anonymize_ip:!1})}</script><link rel=stylesheet type=text/css href=./toastify/style.min.css><script type=text/javascript src=./toastify/index.js></script><script>const hackKey="hack",author="Wayne (å‰æ©)",link="https://wayneblog.ga/",source="Wayne\u0027s blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢",warningText="è«‹é‡è¦–è‘—ä½œæ¬Šï¼Œå•†æ¥­è½‰è¼‰è«‹è¯ç¹«ä½œè€…ç²å¾—æˆæ¬Šï¼Œéå•†æ¥­è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ã€‚",warningBackgroundColor="linear-gradient(to right, rgb(108 47 87), rgb(191 86 86))",successBackgroundColor="linear-gradient(to right, rgb(47 151 127), rgb(69 195 137))",ignoreTagNames=["INPUT"];window.addEventListener("keyup",function(e){if(document.activeElement&&ignoreTagNames.includes(document.activeElement.tagName))return;if(e.key&&e.key.toLowerCase()==="h"){let e={text:"",duration:1e3,destination:"",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!1,style:{borderRadius:"50em"}};const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(n.has(hackKey)){e.text="Hackæ¨¡å¼å·²é—œé–‰",e.style.background=warningBackgroundColor,Toastify(e).showToast(),n.delete(hackKey),t.search=n.toString(),window.history.replaceState(null,"",t.toString());return}e.text="Hackæ¨¡å¼å·²é–‹å•Ÿ",e.style.background=successBackgroundColor,Toastify(e).showToast(),n.set(hackKey,"1"),t.search=n.toString(),window.history.replaceState(null,"",t.toString())}}),window.addEventListener("copy",function(e){const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(!n.has(hackKey)){e.preventDefault();const t=document.getSelection();e.clipboardData.setData("text/plain",`${t.toString()}

ä½œè€…ï¼š${author}
é€£çµï¼š${link}
ä¾†æºï¼š${source}
${warningText}`)}})</script><style>:root{--zh-font-family:"Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”";--code-font-family:Menlo, Monaco, Consolas, "Courier New"}</style><meta name=theme-color content="#57BCB9"><link rel=manifest href=./manifest.json><link rel=apple-touch-icon sizes=57x57 href=./apple-touch-icon-57x57.webp><link rel=apple-touch-icon sizes=114x114 href=./apple-touch-icon-114x114.webp><link rel=apple-touch-icon sizes=120x120 href=./apple-touch-icon-120x120.webp><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon-180x180.webp><link rel=apple-touch-icon sizes=192x192 href=./apple-touch-icon-192x192.webp><link rel=apple-touch-icon sizes=512x512 href=./apple-touch-icon-512x512.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ›é¸å–®>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=https://wayneblog.ga/><img src=https://wayneblog.ga/img/avatar2d.webp width=256 height=256 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ§§</span></figure><div class=site-meta><h1 class=site-name><a href=https://wayneblog.ga/>Wayne (å‰æ©)</a></h1><h2 class=site-description>è»Ÿé«”é–‹ç™¼ | ç¶²è·¯å·¥ç¨‹ | æŠ€è¡“åšå®¢</h2></div></header><ol class=social-menu><li><a href=https://www.facebook.com/wayne.blog.ga/ target=_blank title=Facebook rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><linearGradient id="CXanuwD9EGkBgTn76_1mxa" x1="9.993" x2="40.615" y1="-299.993" y2="-330.615" gradientTransform="matrix(1 0 0 -1 0 -290)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2aa4f4"/><stop offset="1" stop-color="#007ad9"/></linearGradient><path fill="url(#CXanuwD9EGkBgTn76_1mxa)" d="M24 4C12.954 4 4 12.954 4 24c0 10.028 7.379 18.331 17.004 19.777C21.981 43.924 22.982 41 24 41c.919.0 1.824 2.938 2.711 2.818C36.475 42.495 44 34.127 44 24 44 12.954 35.046 4 24 4z"/><path d="M27.707 21.169c0-1.424.305-3.121 1.757-3.121h4.283l-.001-5.617-.05-.852-.846-.114c-.608-.082-1.873-.253-4.206-.253-5.569.0-8.636 3.315-8.636 9.334v2.498H15.06v7.258h4.948V43.6C21.298 43.861 22.633 44 24 44c1.268.0 2.504-.131 3.707-.357V30.301h5.033l1.122-7.258h-6.155V21.169z" opacity=".05"/><path d="M27.207 21.169c0-1.353.293-3.621 2.257-3.621h3.783V12.46l-.026-.44-.433-.059c-.597-.081-1.838-.249-4.143-.249-5.323.0-8.136 3.055-8.136 8.834v2.998H15.56v6.258h4.948v13.874C21.644 43.876 22.806 44 24 44c1.094.0 2.16-.112 3.207-.281V29.801h5.104l.967-6.258h-6.072V21.169z" opacity=".05"/><path fill="#fff" d="M26.707 29.301h5.176l.813-5.258h-5.989v-2.874c0-2.184.714-4.121 2.757-4.121h3.283V12.46c-.577-.078-1.797-.248-4.102-.248-4.814.0-7.636 2.542-7.636 8.334v3.498H16.06v5.258h4.948v14.475C21.988 43.923 22.981 44 24 44c.921.0 1.82-.062 2.707-.182V29.301z"/></svg></a></li><li><a href=https://github.com/wjdesign target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.instagram.com/huai_lin/ target=_blank title=Instagram rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><path fill="#304ffe" d="M41.67 13.48c-.4.26-.97.5-1.21.77-.09.09-.14.19-.12.29v1.03l-.3 1.01-.3 1-.33 1.1-.68 2.25-.66 2.22-.5 1.67c0 .26-.01.52-.03.77-.07.96-.27 1.88-.59 2.74-.19.53-.42 1.04-.7 1.52-.1.19-.22.38-.34.56-.4.63-.88 1.21-1.41 1.72-.41.41-.86.79-1.35 1.11h-.01c-.08.07-.17.13-.27.18-.31.21-.64.39-.98.55-.23.12-.46.22-.7.31-.05.03-.11.05-.16.07-.57.27-1.23.45-1.89.54-.04.01-.07.01-.11.02-.4.07-.79.13-1.19.16-.18.02-.37.03-.55.03l-.71-.04-3.42-.18c0-.01-.01.0-.01.0l-1.72-.09c-.13.0-.27.0-.4-.01-.54-.02-1.06-.08-1.58-.19h-.01c-.95-.18-1.86-.5-2.71-.93-.47-.24-.93-.51-1.36-.82-.18-.13-.35-.27-.52-.42-.48-.4-.91-.83-1.31-1.27-.06-.06-.11-.12-.16-.18-.06-.06-.12-.13-.17-.19-.38-.48-.7-.97-.96-1.49-.24-.46-.43-.95-.58-1.49-.06-.19-.11-.37-.15-.57-.01-.01-.02-.03-.02-.05-.1-.41-.19-.84-.24-1.27-.06-.33-.09-.66-.09-1-.02-.13-.02-.27-.02-.4l1.91-2.95 1.87-2.88.85-1.31.77-1.18.26-.41v-1.03c.02-.23.03-.47.02-.69-.01-.7-.15-1.38-.38-2.03-.22-.69-.53-1.34-.85-1.94-.38-.69-.78-1.31-1.11-1.87C14 7.4 13.66 6.73 13.75 6.26 14.47 6.09 15.23 6 16 6h16c4.18.0 7.78 2.6 9.27 6.26C41.43 12.65 41.57 13.06 41.67 13.48z"/><path fill="#4928f4" d="M42 16v.27l-1.38.8-.88.51-.97.56-1.94 1.13-1.9 1.1-1.94 1.12-.77.45c0 .48-.12.92-.34 1.32-.31.58-.83 1.06-1.49 1.47-.67.41-1.49.74-2.41.98.0.0.0-.01-.01.0-3.56.92-8.42.5-10.78-1.26-.66-.49-1.12-1.09-1.32-1.78-.06-.23-.09-.48-.09-.73v-7.19c.01-.15-.09-.3-.27-.45-.54-.43-1.81-.84-3.23-1.25-1.11-.31-2.3-.62-3.3-.92-.79-.24-1.46-.48-1.86-.71.18-.35.39-.7.61-1.03 1.4-2.05 3.54-3.56 6.02-4.13C14.47 6.09 15.23 6 16 6h10.8c5.37.94 10.32 3.13 14.47 6.26.16.39.3.8.4 1.22.18.66.29 1.34.32 2.05C42 15.68 42 15.84 42 16z"/><path fill="#6200ea" d="M42 16v4.41l-.22.68-.75 2.33-.78 2.4-.41 1.28-.38 1.19-.37 1.13-.36 1.12-.19.59-.25.78c0 .76-.02 1.43-.07 2-.01.06-.02.12-.02.18-.06.53-.14.98-.27 1.36-.01.06-.03.12-.05.17-.26.72-.65 1.18-1.23 1.48-.14.08-.3.14-.47.2-.53.18-1.2.27-2.02.32-.6.04-1.29.05-2.07.05H31.4l-1.19-.05L30 37.61l-2.17-.09-2.2-.09-7.25-.3-1.88-.08h-.26c-.78-.01-1.45-.06-2.03-.14-.84-.13-1.49-.35-1.98-.68-.7-.45-1.11-1.11-1.35-2.03-.06-.22-.11-.45-.14-.7-.1-.58-.15-1.25-.18-2 0-.15.0-.3-.01-.46-.01-.01.0-.01.0-.01v-.58c-.01-.29-.01-.59-.01-.9l.05-1.61.03-1.15.04-1.34v-.19l.07-2.46.07-2.46.07-2.31.06-2.27.02-.6c0-.31-1.05-.49-2.22-.64-.93-.12-1.95-.23-2.56-.37.05-.23.1-.46.16-.68.18-.72.45-1.4.79-2.05.18-.35.39-.7.61-1.03 2.16-.95 4.41-1.69 6.76-2.17 2.06-.43 4.21-.66 6.43-.66 7.36.0 14.16 2.49 19.54 6.69.52.4 1.03.83 1.53 1.28C42 15.68 42 15.84 42 16z"/><path fill="#673ab7" d="M42 18.37v4.54l-.55 1.06-1.05 2.05-.56 1.08-.51.99-.22.43c0 .31.0.61-.02.9.0.43-.02.84-.05 1.22-.04.45-.1.86-.16 1.24-.15.79-.36 1.47-.66 2.03-.04.07-.08.14-.12.2-.11.18-.24.35-.38.51-.18.22-.38.41-.61.57-.34.26-.74.47-1.2.63-.57.21-1.23.35-2.01.43-.51.05-1.07.08-1.68.08l-.42.02-2.08.12h-.01L27.5 36.6l-2.25.13-3.1.18-3.77.22-.55.03c-.51.0-.99-.03-1.45-.09-.05-.01-.09-.02-.14-.02-.68-.11-1.3-.29-1.86-.54-.68-.3-1.27-.7-1.77-1.18-.44-.43-.82-.92-1.13-1.47-.07-.13-.14-.25-.2-.39-.3-.59-.54-1.25-.72-1.97-.03-.12-.06-.25-.08-.38-.06-.23-.11-.47-.14-.72-.11-.64-.17-1.32-.2-2.03v-.01c-.01-.29-.02-.57-.02-.87l-.49-1.17-.07-.18L9.5 25.99 8.75 24.2l-.12-.29-.72-1.73-.8-1.93H7.1L6.29 18.3 6 17.59V16c0-.63.06-1.25.17-1.85.05-.23.1-.46.16-.68.85-.49 1.74-.94 2.65-1.34 2.08-.93 4.31-1.62 6.62-2.04 1.72-.31 3.51-.48 5.32-.48 7.31.0 13.94 2.65 19.12 6.97.2.16.39.32.58.49C41.09 17.48 41.55 17.91 42 18.37z"/><path fill="#8e24aa" d="M42 21.35v5.14l-.57 1.19-1.08 2.25-.01.03c0 .43-.02.82-.05 1.17-.1 1.15-.38 1.88-.84 2.33-.33.34-.74.53-1.25.63-.03.01-.07.01-.1.02-.16.03-.33.05-.51.05-.62.06-1.35.02-2.19-.04-.09.0-.19-.01-.29-.02-.61-.04-1.26-.08-1.98-.11-.39-.01-.8-.02-1.22-.02h-.02l-1.01.08h-.01l-2.27.16-2.59.2-.38.03-3.03.22-1.57.12-1.55.11c-.27.0-.53.0-.79-.01.0.0-.01-.01-.01.0-1.13-.02-2.14-.09-3.04-.26-.83-.14-1.56-.36-2.18-.69-.64-.31-1.17-.75-1.6-1.31-.41-.55-.71-1.24-.9-2.07v-.01c-.14-.67-.22-1.45-.22-2.33l-.15-.27L9.7 26.35l-.13-.22L9.5 25.99l-.93-1.65-.46-.83-.58-1.03-1-1.79L6 19.75v-3.68c.88-.58 1.79-1.09 2.73-1.55 1.14-.58 2.32-1.07 3.55-1.47 1.34-.44 2.74-.79 4.17-1.02 1.45-.24 2.94-.36 4.47-.36 6.8.0 13.04 2.43 17.85 6.47.22.17.43.36.64.54.84.75 1.64 1.56 2.37 2.41C41.86 21.18 41.94 21.26 42 21.35z"/><path fill="#c2185b" d="M42 24.71v7.23c-.24-.14-.57-.31-.98-.49-.22-.11-.47-.22-.73-.32-.38-.17-.79-.33-1.25-.49-.1-.04-.2-.07-.31-.1-.18-.07-.37-.13-.56-.19-.59-.18-1.24-.35-1.92-.5-.26-.05-.53-.1-.8-.14-.87-.15-1.8-.24-2.77-.25-.08-.01-.17-.01-.25-.01l-2.57.02-3.5.02h-.01l-7.49.06c-2.38.0-3.84.57-4.72.8.0.0-.01.0-.01.01-.93.24-1.22.09-1.3-1.54-.02-.45-.03-1.03-.03-1.74l-.56-.43-.98-.74-.6-.46-.12-.09L8.88 24.1l-.25-.19-.52-.4-.96-.72L6 21.91v-3.4c.1-.08.19-.15.29-.21 1.45-1 3-1.85 4.64-2.54 1.46-.62 3-1.11 4.58-1.46.43-.09.87-.18 1.32-.24 1.33-.23 2.7-.34 4.09-.34 6.01.0 11.53 2.09 15.91 5.55.66.52 1.3 1.07 1.9 1.66.82.78 1.59 1.61 2.3 2.49.14.18.28.36.42.55C41.64 24.21 41.82 24.46 42 24.71z"/><path fill="#d81b60" d="M42 28.72V32c0 .65-.06 1.29-.18 1.91-.18.92-.49 1.8-.91 2.62-.22.05-.47.05-.75.01-.63-.11-1.37-.44-2.17-.87-.04-.01-.08-.03-.11-.05-.25-.13-.51-.27-.77-.43-.53-.29-1.09-.61-1.65-.91-.12-.06-.24-.12-.35-.18-.64-.33-1.3-.63-1.96-.86h-.01c-.14-.05-.29-.1-.44-.14-.57-.16-1.15-.26-1.71-.26l-1.1-.32-4.87-1.41h-.01l-2.99-.87h-.01l-1.3-.38c-3.76.0-6.07 1.6-7.19.99-.44-.23-.7-.81-.79-1.95-.03-.32-.04-.68-.04-1.1l-1.17-.57-.05-.02h-.01l-.84-.42L9.7 26.35l-.07-.03-.17-.09L7.5 25.28 6 24.55v-3.43c.17-.15.35-.29.53-.43.19-.15.38-.29.57-.44h.01c1.18-.85 2.43-1.6 3.76-2.22 1.55-.74 3.2-1.31 4.91-1.68.25-.06.51-.12.77-.16 1.42-.27 2.88-.41 4.37-.41 5.27.0 10.11 1.71 14.01 4.59 1.13.84 2.18 1.77 3.14 2.78.79.83 1.52 1.73 2.18 2.67.05.07.1.14.15.2.37.54.71 1.09 1.03 1.66C41.64 28.02 41.82 28.37 42 28.72z"/><path fill="#f50057" d="M41.82 33.91c-.18.92-.49 1.8-.91 2.62-.19.37-.4.72-.63 1.06-.14.21-.29.41-.44.6-.36-.14-.89-.34-1.54-.56v-.01c-.49-.17-1.05-.35-1.65-.52-.17-.05-.34-.1-.52-.15-.71-.19-1.45-.36-2.17-.46-.6-.1-1.19-.16-1.74-.16l-.46-.13h-.01l-2.42-.7-1.49-.43-1.66-.48h-.01l-.54-.15-6.53-1.88-1.88-.54-1.4-.33-2.28-.54-.28-.07h-.01l-2.29-.53v-.01l-.41-.09-.21-.05-1.67-.39-.19-.05-1.42-1.17L6 27.9v-4.08c.37-.36.75-.7 1.15-1.03.12-.11.25-.21.38-.31.12-.1.25-.2.38-.3.91-.69 1.87-1.31 2.89-1.84 1.3-.7 2.68-1.26 4.13-1.66.28-.09.56-.17.85-.23 1.64-.41 3.36-.62 5.14-.62 4.47.0 8.63 1.35 12.07 3.66 1.71 1.15 3.25 2.53 4.55 4.1.66.79 1.26 1.62 1.79 2.5.05.07.09.13.13.2.32.53.62 1.08.89 1.64.25.5.47 1 .67 1.52C41.34 32.25 41.6 33.07 41.82 33.91z"/><path fill="#ff1744" d="M40.28 37.59c-.14.21-.29.41-.44.6-.44.55-.92 1.05-1.46 1.49-.47.39-.97.74-1.5 1.04-.2-.05-.4-.11-.61-.19-.66-.23-1.35-.61-1.99-1.01-.96-.61-1.79-1.27-2.16-1.57-.14-.12-.21-.18-.21-.18l-1.7-.15L30 37.6l-2.2-.19-2.28-.2-3.37-.3-5.34-.47-.02-.01-1.88-.91-1.9-.92-1.53-.74-.33-.16-.41-.2-1.42-.69L7.43 31.9l-.59-.29L6 31.35v-4.47c.47-.56.97-1.09 1.5-1.6.34-.32.7-.64 1.07-.94.06-.05.12-.1.18-.14.04-.05.09-.08.13-.1.59-.48 1.21-.91 1.85-1.3.74-.47 1.52-.89 2.33-1.24.87-.39 1.78-.72 2.72-.97 1.63-.46 3.36-.7 5.14-.7 4.08.0 7.85 1.24 10.96 3.37 1.99 1.36 3.71 3.08 5.07 5.07.45.64.85 1.32 1.22 2.02.13.26.26.52.37.78.12.25.23.5.34.75.21.52.4 1.04.57 1.58.32 1 .56 2.02.71 3.08C40.21 36.89 40.25 37.24 40.28 37.59z"/><path fill="#ff5722" d="M38.39 39.42c0 .08.0.17-.01.26-.47.39-.97.74-1.5 1.04-.22.12-.44.24-.67.34-.23.11-.46.21-.7.3-.34-.18-.8-.4-1.29-.61-.69-.31-1.44-.59-2.02-.68-.14-.03-.27-.04-.39-.04l-1.64-.21h-.02l-2.04-.27-2.06-.27-.96-.12-7.56-.98c-.49.0-1.01-.03-1.55-.1-.66-.06-1.35-.16-2.04-.3-.68-.12-1.37-.28-2.03-.45-.69-.16-1.37-.35-2-.53-.73-.22-1.41-.43-1.98-.62-.47-.15-.87-.29-1.18-.4-.18-.43-.33-.88-.44-1.34C6.1 33.66 6 32.84 6 32v-1.67c.32-.53.67-1.05 1.06-1.54.71-.94 1.52-1.8 2.4-2.56.03-.04.07-.07.1-.09l.01-.01c.31-.28.63-.53.97-.77.04-.04.08-.07.12-.1.16-.12.33-.24.51-.35 1.43-.97 3.01-1.73 4.7-2.24 1.6-.48 3.29-.73 5.05-.73 3.49.0 6.75 1.03 9.47 2.79 2.01 1.29 3.74 2.99 5.06 4.98.16.23.31.46.46.7.69 1.17 1.26 2.43 1.68 3.75.05.15.09.3.13.46.08.27.15.55.21.83.02.07.04.14.06.22.14.63.24 1.29.31 1.95v.01C38.36 38.22 38.39 38.82 38.39 39.42z"/><path fill="#ff6f00" d="M36.33 39.42c0 .35-.02.73-.06 1.11-.02.18-.04.36-.06.53-.23.11-.46.21-.7.3-.45.17-.91.31-1.38.41-.32.07-.65.13-.98.16h-.01c-.31-.19-.67-.42-1.04-.68-.67-.47-1.37-1-1.93-1.43-.01-.01-.01-.01-.02-.02-.59-.45-1.01-.79-1.01-.79l-1.06.04-2.04.07-.95.04-3.82.14-3.23.12c-.21.01-.46.01-.77.0h-.01c-.42-.01-.92-.04-1.47-.09-.64-.05-1.34-.11-2.05-.18-.69-.08-1.39-.16-2.06-.24-.74-.08-1.44-.17-2.04-.25-.47-.06-.88-.11-1.21-.15-.28-.32-.53-.65-.77-1.01-.36-.54-.67-1.11-.91-1.72-.18-.43-.33-.88-.44-1.34.29-.89.67-1.73 1.12-2.54.36-.66.78-1.29 1.24-1.89.45-.59.94-1.14 1.47-1.64v-.01c.15-.15.3-.29.45-.42.28-.26.57-.5.87-.73h.01c.01-.02.02-.02.03-.03.24-.19.49-.36.74-.53 1.48-1.01 3.15-1.76 4.95-2.2 1.19-.29 2.44-.45 3.73-.45 2.54.0 4.94.61 7.05 1.71h.01c1.81.93 3.41 2.21 4.7 3.75.71.82 1.32 1.72 1.82 2.67.35.64.65 1.31.9 1.99.02.06.04.11.06.16.17.5.32 1.02.45 1.54.09.37.16.75.22 1.13.02.12.04.23.05.35C36.28 37.99 36.33 38.7 36.33 39.42z"/><path fill="#ff9800" d="M34.28 39.42v.1c0 .34-.03.77-.06 1.23-.03.34-.06.69-.09 1.02-.32.07-.65.13-.98.16h-.01C32.76 41.98 32.39 42 32 42h-1.75l-.38-.11-1.97-.6-2-.6-4.63-1.39-2-.6s-.83.33-2 .72h-.01c-.45.15-.94.31-1.46.47-.65.19-1.34.38-2.02.53-.7.16-1.39.28-2.01.33-.19.02-.38.03-.55.03-.56-.31-1.1-.68-1.59-1.09-.43-.36-.83-.75-1.2-1.18-.28-.32-.53-.65-.77-1.01.07-.45.15-.89.27-1.32.3-1.19.77-2.33 1.39-3.37.34-.59.72-1.16 1.16-1.69.01-.03.04-.06.07-.08-.01-.01.0-.01.0-.01.13-.17.27-.33.41-.48v-.01c.41-.44.83-.86 1.29-1.25.16-.13.31-.26.48-.39.03-.03.06-.05.1-.08 2.25-1.72 5.06-2.76 8.09-2.76 3.44.0 6.57 1.29 8.94 3.41 1.14 1.03 2.11 2.26 2.84 3.63.06.1.12.21.17.32.09.18.18.37.26.57.33.72.59 1.48.77 2.26.02.08.04.16.06.24.08.37.15.75.2 1.13C34.24 38.21 34.28 38.81 34.28 39.42z"/><path fill="#ffc107" d="M32.22 39.42c0 .2-.01.42-.02.65-.02.37-.05.77-.1 1.18-.02.25-.06.5-.1.75h-5.48l-1.06-.17-4.14-.66-.59-.09-1.35-.22c-.59.0-1.87.26-3.22.51-.71.13-1.43.27-2.08.36-.08.01-.16.02-.23.03h-.01c-.7-.15-1.38-.38-2.02-.68-.2-.09-.4-.19-.6-.3-.56-.31-1.1-.68-1.59-1.09-.01-.12-.02-.22-.02-.27.0-.26.01-.51.03-.76.04-.64.13-1.26.27-1.86.22-.91.54-1.79.97-2.6.08-.17.17-.34.27-.5.04-.08.09-.15.13-.23.18-.29.38-.57.58-.85.42-.55.89-1.07 1.39-1.54h.01c.04-.04.08-.08.12-.11.05-.04.09-.09.14-.12.2-.18.4-.34.61-.49.0-.01.01-.01.01-.01 1.89-1.41 4.23-2.24 6.78-2.24 1.98.0 3.82.5 5.43 1.38h.01c1.38.76 2.58 1.79 3.53 3.03.37.48.7.99.98 1.53h.01c.05.1.1.2.15.3.3.59.54 1.21.72 1.85h.01c.01.05.03.1.04.15.12.43.22.87.29 1.32.01.09.02.19.03.28C32.19 38.43 32.22 38.92 32.22 39.42z"/><path fill="#ffd54f" d="M30.17 39.31c0 .16.0.33-.02.49v.01.01c-.02.72-.12 1.43-.28 2.07.0.04-.01.07-.03.11h-4.67l-3.85-.83-.51-.11-.08.02-4.27.88L16.27 42H16c-.64.0-1.27-.06-1.88-.18-.09-.02-.18-.04-.27-.06h-.01c-.7-.15-1.38-.38-2.02-.68-.02-.11-.04-.22-.05-.33-.07-.43-.1-.88-.1-1.33.0-.17.0-.34.01-.51.03-.54.11-1.07.23-1.58.08-.38.19-.75.32-1.1.11-.31.24-.61.38-.9.12-.25.26-.49.4-.73.14-.23.29-.45.45-.67.4-.55.87-1.06 1.39-1.51.3-.26.63-.51.97-.73 1.46-.96 3.21-1.52 5.1-1.52.37.0.73.02 1.08.07h.02c1.07.12 2.07.42 2.99.87h.01c1.45.71 2.68 1.78 3.58 3.1.15.22.3.46.43.7.11.19.21.39.3.59.14.31.27.64.38.97h.01c.11.37.21.74.28 1.13v.01C30.11 38.16 30.17 38.73 30.17 39.31z"/><path fill="#ffe082" d="M28.11 39.52v.03c0 .59-.07 1.17-.21 1.74-.05.24-.12.48-.21.71h-4.48l-2.29-.63L18.63 42H16c-.64.0-1.27-.06-1.88-.18-.02-.03-.03-.06-.04-.09-.14-.43-.25-.86-.3-1.31-.04-.29-.06-.59-.06-.9.0-.12.0-.25.02-.37.01-.47.08-.93.2-1.37.06-.3.15-.59.27-.87.04-.14.1-.27.17-.4.15-.34.33-.67.53-.99.22-.32.46-.62.73-.9.32-.36.68-.69 1.09-.96.7-.51 1.5-.89 2.37-1.1.58-.16 1.19-.24 1.82-.24 2 0 3.79.8 5.09 2.09.05.05.11.11.16.18h.01c.14.15.27.3.4.47.37.47.68.98.92 1.54.12.26.22.53.3.81.01.04.02.07.03.11.14.49.23 1 .25 1.53C28.1 39.2 28.11 39.36 28.11 39.52z"/><path fill="#ffecb3" d="M26.06 39.52c0 .41-.05.8-.16 1.17-.1.4-.25.78-.44 1.14-.03.06-.1.17-.1.17h-8.88c-.01-.01-.02-.03-.02-.04-.12-.19-.22-.38-.3-.59-.2-.46-.32-.96-.36-1.48-.02-.12-.02-.25-.02-.37.0-.06.0-.13.01-.19.01-.44.07-.86.19-1.25.1-.36.23-.69.4-1.01.0.0.01-.01.01-.02.12-.21.25-.42.4-.62.49-.66 1.14-1.2 1.89-1.55h.01c.24-.12.49-.22.75-.29h.01c.46-.14.96-.21 1.47-.21.59.0 1.16.09 1.68.28.19.05.37.13.55.22h.01c.86.41 1.59 1.05 2.09 1.85.1.15.19.31.27.48.04.07.08.15.11.22.23.52.37 1.09.41 1.69.01.05.01.1.01.16C26.06 39.36 26.06 39.44 26.06 39.52z"/><g><path fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M30 11H18c-3.9.0-7 3.1-7 7v12c0 3.9 3.1 7 7 7h12c3.9.0 7-3.1 7-7V18c0-3.9-3.1-7-7-7z"/><circle cx="31" cy="16" r="1" fill="#fff"/></g><g><circle cx="24" cy="24" r="6" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/></g></svg></a></li><li><a href=https://twitter.com/4006wayne target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://wayneblog.ga/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>é—œæ–¼æœ¬ç«™</span></a></li><li><a href=https://wayneblog.ga/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>æ–‡ç« å·å®—</span></a></li><li><a href=https://wayneblog.ga/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æœå°‹æª¢ç´¢</span></a></li><li><a href=https://wayneblog.ga/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>ç›¸é—œé€£çµ</span></a></li><li><a href=https://wayneblog.ga/categories/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg><span>åˆ†é¡æª¢ç´¢</span></a></li><li><a href=https://wayneblog.ga/tags/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><span>æ¨™ç±¤æª¢ç´¢</span></a></li><li><a href=https://wayneblog.ga/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS Feed</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://wayneblog.ga/ selected>ç¹é«”ä¸­æ–‡</option><option value=https://wayneblog.ga/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>å¤œæ™šæ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®éŒ„</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#nuxt-3-ä»‹ç´¹>Nuxt 3 ä»‹ç´¹</a><ol><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#isomorphic-javascript-èˆ‡-universal-javascript>Isomorphic JavaScript èˆ‡ Universal JavaScript</a><ol><li><a href=#isomorphic-javascript>Isomorphic JavaScript</a></li><li><a href=#universal-javascript>Universal JavaScript</a></li></ol></li><li><a href=#nuxt-3>Nuxt 3</a><ol><li><a href=#nuxt-3-çš„æ–°ç‰¹æ€§>Nuxt 3 çš„æ–°ç‰¹æ€§</a></li><li><a href=#nitro>Nitro</a></li><li><a href=#nuxt-3-æ¸²æŸ“æ¨¡å¼>Nuxt 3 æ¸²æŸ“æ¨¡å¼</a></li><li><a href=#nuxt-3-çš„å»ºæ§‹å·¥å…·>Nuxt 3 çš„å»ºæ§‹å·¥å…·</a></li></ol></li></ol></li><li><a href=#ä½¿ç”¨-nuxi-å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ>ä½¿ç”¨ nuxi å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ</a><ol><li><a href=#ç·šä¸Šç©ç©çœ‹>ç·šä¸Šç©ç©çœ‹</a></li><li><a href=#é–‹å§‹å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ>é–‹å§‹å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ</a><ol><li><a href=#å…ˆæ±ºæ¢ä»¶>å…ˆæ±ºæ¢ä»¶</a></li><li><a href=#ä½¿ç”¨-nuxi-å»ºç«‹-nuxt-3-å°ˆæ¡ˆ>ä½¿ç”¨ nuxi å»ºç«‹ Nuxt 3 å°ˆæ¡ˆ</a></li></ol></li><li><a href=#nuxt-cli-å¸¸ç”¨æŒ‡ä»¤>Nuxt CLI å¸¸ç”¨æŒ‡ä»¤</a><ol><li><a href=#nuxi-init>nuxi init</a></li><li><a href=#nuxi-dev>nuxi dev</a></li><li><a href=#nuxi-cleanup>nuxi cleanup</a></li><li><a href=#nuxi-upgrade>nuxi upgrade</a></li></ol></li></ol></li><li><a href=#nuxt-3--typescript--eslint--prettier-ç’°å¢ƒå»ºç½®>Nuxt 3 + TypeScript + ESLint + Prettier ç’°å¢ƒå»ºç½®</a><ol><li><a href=#typescript-é¡å‹æª¢æŸ¥>TypeScript é¡å‹æª¢æŸ¥</a><ol><li><a href=#step-1-å®‰è£-vs-code-æ’ä»¶>Step 1. å®‰è£ VS Code æ’ä»¶</a></li><li><a href=#step-2-å®‰è£-vue-é¡å‹æª¢æŸ¥å¥—ä»¶>Step 2. å®‰è£ Vue é¡å‹æª¢æŸ¥å¥—ä»¶</a></li><li><a href=#step-3-èª¿æ•´-nuxtconfigts-è¨­å®š>Step 3. èª¿æ•´ nuxt.config.ts è¨­å®š</a></li><li><a href=#step-4-é‡æ–°å•Ÿå‹•é–‹ç™¼ç’°å¢ƒæœå‹™>Step 4. é‡æ–°å•Ÿå‹•é–‹ç™¼ç’°å¢ƒæœå‹™</a></li><li><a href=#çœ‹çœ‹æ•ˆæœ>çœ‹çœ‹æ•ˆæœ</a></li></ol></li><li><a href=#eslint-è¨­ç½®-linter>ESLint è¨­ç½® Linter</a><ol><li><a href=#step-1-å®‰è£-eslint-å¥—ä»¶>Step 1. å®‰è£ ESLint å¥—ä»¶</a></li><li><a href=#step-2-é…ç½®-eslint-è¨­å®šæª”>Step 2. é…ç½® ESLint è¨­å®šæª”</a></li><li><a href=#ç”¨-eslint-ä¾†å˜—è©¦æª¢æŸ¥>ç”¨ ESLint ä¾†å˜—è©¦æª¢æŸ¥</a></li></ol></li><li><a href=#åœ¨-packagejson-è¨­ç½®è…³æœ¬>åœ¨ package.json è¨­ç½®è…³æœ¬</a></li><li><a href=#åœ¨-vs-code-ä¸­é¡¯ç¤º-eslint-éŒ¯èª¤æˆ–è­¦å‘Š>åœ¨ VS Code ä¸­é¡¯ç¤º ESLint éŒ¯èª¤æˆ–è­¦å‘Š</a></li><li><a href=#åœ¨-vs-code-ä¸­è‡ªå‹•ä¿®æ­£-eslint-éŒ¯èª¤æˆ–è­¦å‘Š>åœ¨ VS Code ä¸­è‡ªå‹•ä¿®æ­£ ESLint éŒ¯èª¤æˆ–è­¦å‘Š</a><ol><li><a href=#æ‰‹å‹•å¿«é€Ÿä¿®æ­£>æ‰‹å‹•å¿«é€Ÿä¿®æ­£</a></li><li><a href=#å­˜æ“‹è‡ªå‹•ä¿®æ­£>å­˜æ“‹è‡ªå‹•ä¿®æ­£</a></li></ol></li><li><a href=#prettier-è¨­ç½®>Prettier è¨­ç½®</a><ol><li><a href=#step-1-å®‰è£-prettier-å¥—ä»¶>Step 1. å®‰è£ Prettier å¥—ä»¶</a></li><li><a href=#step-2-é…ç½®-prettier-è¨­å®šæª”æ¡ˆ>Step 2. é…ç½® Prettier è¨­å®šæª”æ¡ˆ</a></li><li><a href=#step-3-é…ç½®-eslint-è¨­å®šæª”æ¡ˆ>Step 3. é…ç½® ESLint è¨­å®šæª”æ¡ˆ</a></li><li><a href=#step-4-å®‰è£-vs-code-çš„-prettier-æ’ä»¶>Step 4. å®‰è£ VS Code çš„ Prettier æ’ä»¶</a></li></ol></li></ol></li><li><a href=#ä½¿ç”¨-tailwind-css>ä½¿ç”¨ Tailwind CSS</a><ol><li><a href=#ä½¿ç”¨-nuxt-tailwind-æ¨¡çµ„>ä½¿ç”¨ Nuxt Tailwind æ¨¡çµ„</a><ol><li><a href=#step-1-å®‰è£ç›¸é—œå¥—ä»¶>Step 1. å®‰è£ç›¸é—œå¥—ä»¶</a></li><li><a href=#step-2-æ·»åŠ æ¨¡çµ„è‡³-nuxtconfigts>Step 2. æ·»åŠ æ¨¡çµ„è‡³ nuxt.config.ts</a></li><li><a href=#step-3-é‡å•Ÿ-nuxt-æœå‹™>Step 3. é‡å•Ÿ Nuxt æœå‹™</a></li><li><a href=#æ“´å……æˆ–è¦†å¯«-nuxtjstailwindcss-é…ç½®>æ“´å……æˆ–è¦†å¯« @nuxtjs/tailwindcss é…ç½®</a></li></ol></li><li><a href=#tailwind-css-å®˜æ–¹æŒ‡å¼•æ­¥é©Ÿ>Tailwind CSS å®˜æ–¹æŒ‡å¼•æ­¥é©Ÿ</a><ol><li><a href=#step-1-å®‰è£ç›¸é—œå¥—ä»¶-1>Step 1. å®‰è£ç›¸é—œå¥—ä»¶</a></li><li><a href=#step-2-å»ºç«‹-tailwindconfigjs>Step 2. å»ºç«‹ tailwind.config.js</a></li><li><a href=#step-3-èª¿æ•´-tailwindconfigjs>Step 3. èª¿æ•´ tailwind.config.js</a></li><li><a href=#step-4-å»ºç«‹-tailwindcss>Step 4. å»ºç«‹ tailwind.css</a></li><li><a href=#step-5-é…ç½®å…¨åŸŸå…±ç”¨-css>Step 5. é…ç½®å…¨åŸŸå…±ç”¨ CSS</a></li><li><a href=#step-6-é‡å•Ÿ-nuxt-æœå‹™>Step 6. é‡å•Ÿ Nuxt æœå‹™</a></li></ol></li><li><a href=#é–‹å§‹æ„Ÿå—-tailwind-css-çš„é­…åŠ›>é–‹å§‹æ„Ÿå— Tailwind CSS çš„é­…åŠ›</a></li><li><a href=#è‡ªå‹•æ’åº-tailwind-css-çš„-class>è‡ªå‹•æ’åº Tailwind CSS çš„ Class</a></li><li><a href=#tailwind-x-prettier>Tailwind x Prettier</a><ol><li><a href=#step-1-å®‰è£æ’ä»¶>Step 1. å®‰è£æ’ä»¶</a></li><li><a href=#step-2-é…ç½®è¨­å®šæª”>Step 2. é…ç½®è¨­å®šæª”</a></li><li><a href=#step-3-è‡ªå‹•ä¿®æ­£æ•ˆæœ>Step 3. è‡ªå‹•ä¿®æ­£æ•ˆæœ</a></li></ol></li><li><a href=#å°çµ>å°çµ</a></li></ol></li><li><a href=#ä½¿ç”¨-pug>ä½¿ç”¨ Pug</a><ol><li><a href=#å®‰è£-vite-plugin-pug>å®‰è£ @vite-plugin-pug</a></li><li><a href=#ç›´æ¥é–‹å§‹é«”é©—-pug>ç›´æ¥é–‹å§‹é«”é©— Pug</a></li></ol></li><li><a href=#ç›®éŒ„çµæ§‹èˆ‡è‡ªå‹•è¼‰å…¥-auto-imports>ç›®éŒ„çµæ§‹èˆ‡è‡ªå‹•è¼‰å…¥ (Auto Imports)</a><ol><li><a href=#nuxt-3-çš„ç›®éŒ„çµæ§‹>Nuxt 3 çš„ç›®éŒ„çµæ§‹</a></li><li><a href=#nuxt-3-é è¨­çš„ç›®éŒ„çµæ§‹>Nuxt 3 é è¨­çš„ç›®éŒ„çµæ§‹</a><ol><li><a href=#nuxt-ç›®éŒ„>.nuxt ç›®éŒ„</a></li><li><a href=#output-ç›®éŒ„>.output ç›®éŒ„</a></li><li><a href=#assets-ç›®éŒ„>assets ç›®éŒ„</a></li><li><a href=#components-ç›®éŒ„>components ç›®éŒ„</a></li><li><a href=#composables-ç›®éŒ„>composables ç›®éŒ„</a></li><li><a href=#content-ç›®éŒ„>content ç›®éŒ„</a></li><li><a href=#layouts-ç›®éŒ„>layouts ç›®éŒ„</a></li><li><a href=#middleware-ç›®éŒ„>middleware ç›®éŒ„</a></li><li><a href=#node_modules-ç›®éŒ„>node_modules ç›®éŒ„</a></li><li><a href=#pages-ç›®éŒ„>pages ç›®éŒ„</a></li><li><a href=#plugins-ç›®éŒ„>plugins ç›®éŒ„</a></li><li><a href=#server-ç›®éŒ„>server ç›®éŒ„</a></li><li><a href=#gitignore-æª”æ¡ˆ>.gitignore æª”æ¡ˆ</a></li><li><a href=#nuxtignore-æª”æ¡ˆ>.nuxtignore æª”æ¡ˆ</a></li><li><a href=#appconfigts-æª”æ¡ˆ>app.config.ts æª”æ¡ˆ</a></li><li><a href=#appvue-æª”æ¡ˆ>app.vue æª”æ¡ˆ</a></li><li><a href=#nuxtconfigts-æª”æ¡ˆ>nuxt.config.ts æª”æ¡ˆ</a></li><li><a href=#packagejson-æª”æ¡ˆ>package.json æª”æ¡ˆ</a></li><li><a href=#tsconfigjson-æª”æ¡ˆ>tsconfig.json æª”æ¡ˆ</a></li></ol></li><li><a href=#è‡ªè¨‚ç›®éŒ„åç¨±>è‡ªè¨‚ç›®éŒ„åç¨±</a></li><li><a href=#è‡ªå‹•è¼‰å…¥-auto-imports>è‡ªå‹•è¼‰å…¥ (Auto Imports)</a><ol><li><a href=#nuxt-å¸¸ç”¨å…ƒä»¶èˆ‡å‡½æ•¸çš„è‡ªå‹•è¼‰å…¥>Nuxt å¸¸ç”¨å…ƒä»¶èˆ‡å‡½æ•¸çš„è‡ªå‹•è¼‰å…¥</a></li><li><a href=#vue-3-api-çš„è‡ªå‹•è¼‰å…¥>Vue 3 API çš„è‡ªå‹•è¼‰å…¥</a></li><li><a href=#åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥>åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥</a></li></ol></li><li><a href=#å»ºç«‹ä¸€å€‹è‡ªå‹•å°å…¥çš„å…ƒä»¶>å»ºç«‹ä¸€å€‹è‡ªå‹•å°å…¥çš„å…ƒä»¶</a><ol><li></li></ol></li><li><a href=#é—œé–‰è‡ªå‹•è¼‰å…¥>é—œé–‰è‡ªå‹•è¼‰å…¥</a><ol><li></li></ol></li><li><a href=#é¡¯å¼è¼‰å…¥-explicit-imports>é¡¯å¼è¼‰å…¥ (Explicit Imports)</a></li></ol></li><li><a href=#é é¢-pages-èˆ‡è·¯ç”±-routing>é é¢ (Pages) èˆ‡è·¯ç”± (Routing)</a><ol><li><a href=#åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±-file-based-routing>åŸºæ–¼æª”æ¡ˆçš„è·¯ç”± (File-based Routing)</a><ol><li><a href=#å»ºç«‹ç¬¬ä¸€å€‹é é¢>å»ºç«‹ç¬¬ä¸€å€‹é é¢</a></li></ol></li><li><a href=#å¤šå€‹è·¯ç”±é é¢>å¤šå€‹è·¯ç”±é é¢</a><ol><li><a href=#å»ºç«‹å¤šå€‹è·¯ç”±é é¢>å»ºç«‹å¤šå€‹è·¯ç”±é é¢</a></li><li><a href=#è‡ªå‹•ç”¢ç”Ÿçš„è·¯ç”±>è‡ªå‹•ç”¢ç”Ÿçš„è·¯ç”±</a></li></ol></li><li><a href=#å»ºç«‹è·¯ç”±é€£çµ>å»ºç«‹è·¯ç”±é€£çµ</a><ol><li></li></ol></li><li><a href=#ç´„å®šå¼è·¯ç”±ä¸­çš„-indexvue>ç´„å®šå¼è·¯ç”±ä¸­çš„ index.vue</a></li><li><a href=#å¸¶åƒæ•¸çš„å‹•æ…‹è·¯ç”±åŒ¹é…>å¸¶åƒæ•¸çš„å‹•æ…‹è·¯ç”±åŒ¹é…</a><ol><li></li></ol></li><li><a href=#åŒ¹é…æ‰€æœ‰å±¤ç´šçš„è·¯ç”±>åŒ¹é…æ‰€æœ‰å±¤ç´šçš„è·¯ç”±</a><ol><li></li></ol></li><li><a href=#å»ºç«‹-404-not-found-é é¢>å»ºç«‹ 404 Not Found é é¢</a><ol><li></li></ol></li><li><a href=#å»ºç«‹å¤šå±¤çš„ç›®éŒ„çµæ§‹>å»ºç«‹å¤šå±¤çš„ç›®éŒ„çµæ§‹</a><ol><li></li></ol></li><li><a href=#å·¢ç‹€è·¯ç”±-nested-routes>å·¢ç‹€è·¯ç”± (Nested Routes)</a><ol><li></li></ol></li></ol></li><li><a href=#å¸ƒå±€æ¨¡æ¿-layouts>å¸ƒå±€æ¨¡æ¿ (Layouts)</a><ol><li><a href=#å»ºç«‹ä¸€å€‹é è¨­çš„å¸ƒå±€æ¨¡æ¿>å»ºç«‹ä¸€å€‹é è¨­çš„å¸ƒå±€æ¨¡æ¿</a><ol><li><a href=#step-1-å»ºç«‹é è¨­å¸ƒå±€æ¨¡æ¿>Step 1. å»ºç«‹é è¨­å¸ƒå±€æ¨¡æ¿</a></li><li><a href=#step-2-æ·»åŠ -å…ƒä»¶>Step 2. æ·»åŠ  å…ƒä»¶</a></li></ol></li><li><a href=#å¸ƒå±€æ¨¡æ¿ä¸­çš„æ’æ§½>å¸ƒå±€æ¨¡æ¿ä¸­çš„æ’æ§½</a><ol><li></li></ol></li><li><a href=#åœ¨å¸ƒå±€æ¨¡æ¿ä¸­å»ºç«‹å¤šå€‹æ’æ§½>åœ¨å¸ƒå±€æ¨¡æ¿ä¸­å»ºç«‹å¤šå€‹æ’æ§½</a><ol><li><a href=#step-1-å»ºç«‹å…©å€‹å…·åçš„æ’æ§½-slotåˆ†åˆ¥ç‚º-header-èˆ‡-footer>Step 1. å»ºç«‹å…©å€‹å…·åçš„æ’æ§½ (Slot)ï¼Œåˆ†åˆ¥ç‚º <strong>header</strong> èˆ‡ <strong>footer</strong></a></li><li><a href=#step-2-å°‡ä¸åŒå…§å®¹é¡¯ç¤ºæ–¼æŒ‡å®šçš„æ’æ§½ä½ç½®>Step 2. å°‡ä¸åŒå…§å®¹ï¼Œé¡¯ç¤ºæ–¼æŒ‡å®šçš„æ’æ§½ä½ç½®ã€‚</a></li></ol></li><li><a href=#å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢>å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢</a></li><li><a href=#å»ºç«‹å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢>å»ºç«‹å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢</a><ol><li><a href=#step-1-èª¿æ•´-appvue-å…¥å£é»>Step 1. èª¿æ•´ app.vue å…¥å£é»</a></li><li><a href=#step-2-å»ºç«‹è·¯ç”±é é¢>Step 2. å»ºç«‹è·¯ç”±é é¢</a></li></ol></li><li><a href=#å¤šå€‹è·¯ç”±é é¢å…±ç”¨é è¨­å¸ƒå±€æ¨¡æ¿>å¤šå€‹è·¯ç”±é é¢å…±ç”¨é è¨­å¸ƒå±€æ¨¡æ¿</a><ol><li><a href=#step-1-æ–°å¢è·¯ç”±é é¢>Step 1. æ–°å¢è·¯ç”±é é¢</a></li><li><a href=#step-2-æ–°å¢è·¯ç”±é€£çµ>Step 2. æ–°å¢è·¯ç”±é€£çµ</a></li></ol></li><li><a href=#å»ºç«‹å¤šå€‹å¸ƒå±€æ¨¡æ¿>å»ºç«‹å¤šå€‹å¸ƒå±€æ¨¡æ¿</a><ol><li><a href=#step-1-å»ºç«‹æ–°çš„å¸ƒå±€æ¨¡æ¿>Step 1. å»ºç«‹æ–°çš„å¸ƒå±€æ¨¡æ¿</a></li><li><a href=#step-2-æ–°å¢ä¸€å€‹è·¯ç”±é é¢>Step 2. æ–°å¢ä¸€å€‹è·¯ç”±é é¢</a></li><li><a href=#step-3-ä½¿ç”¨æŒ‡å®šå¸ƒå±€æ¨¡æ¿>Step 3. ä½¿ç”¨æŒ‡å®šå¸ƒå±€æ¨¡æ¿</a></li></ol></li><li><a href=#æ›´é€²éšçš„æŒ‡å®šå¸ƒå±€æ¨¡æ¿>æ›´é€²éšçš„æŒ‡å®šå¸ƒå±€æ¨¡æ¿</a><ol><li></li></ol></li></ol></li><li><a href=#å…ƒä»¶-components>å…ƒä»¶ (Components)</a><ol><li><a href=#å…ƒä»¶è‡ªå‹•è¼‰å…¥>å…ƒä»¶è‡ªå‹•è¼‰å…¥</a><ol><li><a href=#å»ºç«‹èˆ‡ä½¿ç”¨å…ƒä»¶>å»ºç«‹èˆ‡ä½¿ç”¨å…ƒä»¶</a></li></ol></li><li><a href=#å…ƒä»¶åç¨±>å…ƒä»¶åç¨±</a><ol><li><a href=#å…ƒä»¶åç¨±çš„å‘½åè¦å‰‡>å…ƒä»¶åç¨±çš„å‘½åè¦å‰‡</a></li></ol></li><li><a href=#å‹•æ…‹å…ƒä»¶-dynamic-components>å‹•æ…‹å…ƒä»¶ (Dynamic Components)</a></li><li><a href=#å»ºç«‹å‹•æ…‹å…ƒä»¶>å»ºç«‹å‹•æ…‹å…ƒä»¶</a><ol><li><a href=#step-1-å»ºç«‹å…ƒä»¶>Step 1. å»ºç«‹å…ƒä»¶</a></li><li><a href=#step-2-ä½¿ç”¨-resolvecomponent>Step 2. ä½¿ç”¨ resolveComponent()</a></li></ol></li><li><a href=#å‹•æ…‹è¼‰å…¥-dynamic-imports>å‹•æ…‹è¼‰å…¥ (Dynamic Imports)</a><ol><li><a href=#å»ºç«‹ä¸€å€‹å‹•æ…‹è¼‰å…¥çš„æŒ‰éˆ•>å»ºç«‹ä¸€å€‹å‹•æ…‹è¼‰å…¥çš„æŒ‰éˆ•</a></li><li><a href=#step-1-å»ºç«‹æŒ‰éˆ•å…ƒä»¶>Step 1. å»ºç«‹æŒ‰éˆ•å…ƒä»¶</a></li><li><a href=#step-2-æ·»åŠ -lazy-å‰ç¶´>Step 2. æ·»åŠ  Lazy å‰ç¶´</a></li></ol></li><li><a href=#æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶>æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶</a><ol><li><a href=#clientonly-å…ƒä»¶><code>&lt;ClientOnly></code> å…ƒä»¶</a></li><li><a href=#client-èˆ‡-server>.client èˆ‡ .server</a></li><li><a href=#æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶ç¯„ä¾‹>æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶ç¯„ä¾‹</a></li></ol></li></ol></li><li><a href=#çµ„åˆå¼å‡½æ•¸-composables>çµ„åˆå¼å‡½æ•¸ (Composables)</a><ol><li><a href=#options-api-èˆ‡-composition-api>Options API èˆ‡ Composition API</a></li><li><a href=#mixins-èˆ‡-composables>Mixins èˆ‡ Composables</a></li><li><a href=#çµ„åˆå¼å‡½æ•¸-composables-1>çµ„åˆå¼å‡½æ•¸ (Composables)</a><ol><li><a href=#å»ºç«‹çµ„åˆå¼å‡½æ•¸>å»ºç«‹çµ„åˆå¼å‡½æ•¸</a></li></ol></li><li><a href=#composables-çµ„åˆå¼å‡½æ•¸çš„åç¨±>Composables çµ„åˆå¼å‡½æ•¸çš„åç¨±</a><ol><li><a href=#1-ä½¿ç”¨é è¨­åŒ¯å‡º-default-export>1. ä½¿ç”¨é è¨­åŒ¯å‡º (Default export)</a></li><li><a href=#2-ä½¿ç”¨å…·ååŒ¯å‡º-named-export>2. ä½¿ç”¨å…·ååŒ¯å‡º (Named export)</a></li></ol></li><li><a href=#composables-è‡ªå‹•è¼‰å…¥çš„è¦å‰‡>Composables è‡ªå‹•è¼‰å…¥çš„è¦å‰‡</a><ol><li><a href=#ä¸€é‡æ–°åŒ¯å‡º-span-classfocusæ¨è–¦span>ä¸€ã€é‡æ–°åŒ¯å‡º <span class=focus>[æ¨è–¦]</span></a></li><li><a href=#äºŒé…ç½®æƒæå·¢ç‹€ç›®éŒ„>äºŒã€é…ç½®æƒæå·¢ç‹€ç›®éŒ„</a></li></ol></li></ol></li><li><a href=#æ’ä»¶-plugins>æ’ä»¶ (Plugins)</a><ol><li><a href=#nuxt-3-æ’ä»¶ç›®éŒ„>Nuxt 3 æ’ä»¶ç›®éŒ„</a></li><li><a href=#å¦‚ä½•å»ºç«‹æ’ä»¶>å¦‚ä½•å»ºç«‹æ’ä»¶</a></li><li><a href=#åœ¨æ’ä»¶ä¸­ä½¿ç”¨çµ„åˆå¼å‡½æ•¸-composables>åœ¨æ’ä»¶ä¸­ä½¿ç”¨çµ„åˆå¼å‡½æ•¸ (Composables)</a><ol><li><a href=#æ’ä»¶çš„è¼‰å…¥é †åº>æ’ä»¶çš„è¼‰å…¥é †åº</a></li><li><a href=#ä¾è³´-vue-çš„ç”Ÿå‘½é€±æœŸ>ä¾è³´ Vue çš„ç”Ÿå‘½é€±æœŸ</a></li></ol></li><li><a href=#automatically-providing-helpers>Automatically Providing Helpers</a><ol><li></li><li><a href=#åƒ…é™ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ä¸­ä½¿ç”¨>åƒ…é™ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ä¸­ä½¿ç”¨</a></li></ol></li><li><a href=#vue-æ’ä»¶èˆ‡æŒ‡ä»¤>Vue æ’ä»¶èˆ‡æŒ‡ä»¤</a></li><li><a href=#nuxt-3-ä¸­ä½¿ç”¨-vue-gtag-æ’ä»¶>Nuxt 3 ä¸­ä½¿ç”¨ vue-gtag æ’ä»¶</a><ol><li><a href=#step-1-å®‰è£å¥—ä»¶>Step 1. å®‰è£å¥—ä»¶</a></li><li><a href=#step-2-å»ºç«‹-nuxt-æ’ä»¶>Step 2. å»ºç«‹ Nuxt æ’ä»¶</a></li><li><a href=#å®Œæˆæ•ˆæœ>å®Œæˆæ•ˆæœ</a></li></ol></li><li><a href=#nuxt-3-ä¸­å»ºç«‹-vue-æŒ‡ä»¤>Nuxt 3 ä¸­å»ºç«‹ Vue æŒ‡ä»¤</a><ol><li></li></ol></li></ol></li><li><a href=#æ¨¡çµ„-modules>æ¨¡çµ„ (Modules)</a><ol><li><a href=#nuxt-3-ä¸­æ’ä»¶èˆ‡æ¨¡çµ„çš„å·®ç•°>Nuxt 3 ä¸­æ’ä»¶èˆ‡æ¨¡çµ„çš„å·®ç•°</a></li><li><a href=#nuxt-3-å®‰è£ä½¿ç”¨æ¨¡çµ„>Nuxt 3 å®‰è£ä½¿ç”¨æ¨¡çµ„</a></li><li><a href=#nuxt-3-æ¨¡çµ„åˆ—è¡¨>Nuxt 3 æ¨¡çµ„åˆ—è¡¨</a></li><li><a href=#ä½¿ç”¨-nuxt-icon-æ¨¡çµ„>ä½¿ç”¨ Nuxt Icon æ¨¡çµ„</a><ol><li><a href=#step-1-å®‰è£å¥—ä»¶-1>Step 1. å®‰è£å¥—ä»¶</a></li><li><a href=#step-2-é…ç½®ä½¿ç”¨æ¨¡çµ„>Step 2. é…ç½®ä½¿ç”¨æ¨¡çµ„</a></li><li><a href=#step-3-é–‹å§‹ä½¿ç”¨>Step 3. é–‹å§‹ä½¿ç”¨</a></li></ol></li><li><a href=#å¦‚ä½•å»ºç«‹-nuxt-æ¨¡çµ„>å¦‚ä½•å»ºç«‹ Nuxt æ¨¡çµ„</a></li><li><a href=#æ¨¡çµ„çš„è¼‰å…¥>æ¨¡çµ„çš„è¼‰å…¥</a></li></ol></li><li><a href=#ä¸­é–“ä»¶ç›®éŒ„-middleware-directory>ä¸­é–“ä»¶ç›®éŒ„ (Middleware Directory)</a><ol><li><a href=#vue-router-çš„å°èˆªå®ˆè¡›-navigation-guards>Vue Router çš„å°èˆªå®ˆè¡› (Navigation Guards)</a></li><li><a href=#å…¨åŸŸ>å…¨åŸŸ</a><ol><li><a href=#å…¨åŸŸå‰ç½®å®ˆè¡›-global-before-guards>å…¨åŸŸå‰ç½®å®ˆè¡› (Global Before Guards)</a></li><li><a href=#å…¨åŸŸè§£æå®ˆè¡›-global-resolve-guards>å…¨åŸŸè§£æå®ˆè¡› (Global Resolve Guards)</a></li><li><a href=#å…¨åŸŸå¾Œç½®-hooks-global-after-hooks>å…¨åŸŸå¾Œç½® Hooks (Global After Hooks)</a></li></ol></li><li><a href=#è·¯ç”±ç¨æœ‰å®ˆè¡›-per-route-guard>è·¯ç”±ç¨æœ‰å®ˆè¡› (Per-Route Guard)</a></li><li><a href=#å…ƒä»¶å…§çš„å®ˆè¡›>å…ƒä»¶å…§çš„å®ˆè¡›</a></li></ol></li><li><a href=#nuxt-3-è·¯ç”±ä¸­é–“ä»¶>Nuxt 3 è·¯ç”±ä¸­é–“ä»¶</a><ol><li><a href=#è·¯ç”±ä¸­é–“ä»¶æ ¼å¼>è·¯ç”±ä¸­é–“ä»¶æ ¼å¼</a></li><li><a href=#è·¯ç”±ä¸­é–“ä»¶çš„å›å‚³>è·¯ç”±ä¸­é–“ä»¶çš„å›å‚³</a><ol><li><a href=#navigatetoto-options>navigateTo(to, options)</a></li><li><a href=#abortnavigationerr>abortNavigation(err)</a></li></ol></li><li><a href=#è·¯ç”±ä¸­é–“ä»¶çš„ç¨®é¡>è·¯ç”±ä¸­é–“ä»¶çš„ç¨®é¡</a><ol><li><a href=#åŒ¿åæˆ–è€…æ˜¯è¡Œå…§çš„è·¯ç”±ä¸­é–“ä»¶>åŒ¿åæˆ–è€…æ˜¯è¡Œå…§çš„è·¯ç”±ä¸­é–“ä»¶</a></li><li><a href=#å…·åçš„è·¯ç”±ä¸­é–“ä»¶>å…·åçš„è·¯ç”±ä¸­é–“ä»¶</a></li><li><a href=#å…¨åŸŸçš„è·¯ç”±ä¸­é–“ä»¶>å…¨åŸŸçš„è·¯ç”±ä¸­é–“ä»¶</a></li><li><a href=#å‹•æ…‹æ·»åŠ è·¯ç”±ä¸­é–“ä»¶>å‹•æ…‹æ·»åŠ è·¯ç”±ä¸­é–“ä»¶</a></li></ol></li></ol></li><li><a href=#server-api-èˆ‡-nitro-engine>Server API èˆ‡ Nitro Engine</a><ol><li><a href=#nitro-engine>Nitro Engine</a></li><li><a href=#nuxt-3-çš„-server-ç›®éŒ„>Nuxt 3 çš„ Server ç›®éŒ„</a></li><li><a href=#å»ºç«‹ç¬¬ä¸€å€‹ä¼ºæœå™¨-api>å»ºç«‹ç¬¬ä¸€å€‹ä¼ºæœå™¨ API</a><ol><li></li></ol></li><li><a href=#ä¼ºæœå™¨è·¯ç”±>ä¼ºæœå™¨è·¯ç”±</a><ol><li><a href=#åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±>åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±</a></li><li><a href=#åŒ¹é…è·¯ç”±åƒæ•¸>åŒ¹é…è·¯ç”±åƒæ•¸</a></li><li><a href=#åŒ¹é…-http-è«‹æ±‚æ–¹æ³•-http-request-method>åŒ¹é… HTTP è«‹æ±‚æ–¹æ³• (HTTP Request Method)</a></li><li><a href=#åŒ¹é…åŒ…ç¾…è¬è±¡çš„è·¯ç”±-catch-all-route>åŒ¹é…åŒ…ç¾…è¬è±¡çš„è·¯ç”± (Catch-all Route)</a></li></ol></li><li><a href=#ä¼ºæœå™¨ä¸­é–“ä»¶>ä¼ºæœå™¨ä¸­é–“ä»¶</a><ol><li></li></ol></li><li><a href=#ä¼ºæœå™¨æ’ä»¶>ä¼ºæœå™¨æ’ä»¶</a></li><li><a href=#ä¼ºæœå™¨é€šç”¨åŠŸèƒ½>ä¼ºæœå™¨é€šç”¨åŠŸèƒ½</a></li><li><a href=#ä¼ºæœå™¨è·¯ç”±å¸¸ç”¨çš„-http-è«‹æ±‚è™•ç†>ä¼ºæœå™¨è·¯ç”±å¸¸ç”¨çš„ HTTP è«‹æ±‚è™•ç†</a><ol><li><a href=#è™•ç†-http-è«‹æ±‚ä¸­çš„-body>è™•ç† HTTP è«‹æ±‚ä¸­çš„ Body</a></li><li><a href=#è™•ç†-url-ä¸­çš„æŸ¥è©¢åƒæ•¸-query-parameters>è™•ç† URL ä¸­çš„æŸ¥è©¢åƒæ•¸ (Query Parameters)</a></li><li><a href=#è§£æ-http-è«‹æ±‚æ‰€å¤¾å¸¶çš„-cookie>è§£æ HTTP è«‹æ±‚æ‰€å¤¾å¸¶çš„ Cookie</a></li></ol></li><li><a href=#é€²éšä½¿ç”¨ç¯„ä¾‹>é€²éšä½¿ç”¨ç¯„ä¾‹</a><ol><li><a href=#nitro-é…ç½®>Nitro é…ç½®</a></li><li><a href=#ä½¿ç”¨å·¢ç‹€è·¯ç”±>ä½¿ç”¨å·¢ç‹€è·¯ç”±</a></li><li><a href=#ä¼ºæœå™¨å„²å­˜>ä¼ºæœå™¨å„²å­˜</a></li></ol></li></ol></li><li><a href=#è³‡æ–™ç²å–-data-fetching>è³‡æ–™ç²å– (Data Fetching)</a><ol><li><a href=#useasyncdata>useAsyncData</a><ol><li></li><li><a href=#useasyncdata-å‚³å…¥çš„åƒæ•¸>useAsyncData() å‚³å…¥çš„åƒæ•¸</a></li><li><a href=#useasyncdata-çš„å›å‚³å€¼>useAsyncData() çš„å›å‚³å€¼</a></li></ol></li><li><a href=#usefetch>useFetch</a><ol><li><a href=#usefetch-å‚³å…¥çš„åƒæ•¸>useFetch() å‚³å…¥çš„åƒæ•¸</a></li><li><a href=#usefetch-çš„å›å‚³å€¼>useFetch() çš„å›å‚³å€¼</a></li></ol></li><li><a href=#æ””æˆªå™¨>æ””æˆªå™¨</a></li><li><a href=#uselazyasyncdata>useLazyAsyncData</a><ol><li></li></ol></li><li><a href=#uselazyfetch>useLazyFetch</a><ol><li><a href=#é‡æ–°ç²å–è³‡æ–™>é‡æ–°ç²å–è³‡æ–™</a></li><li><a href=#refreshnuxtdata>refreshNuxtData</a></li></ol></li></ol></li><li><a href=#ç‹€æ…‹ç®¡ç†-state-management>ç‹€æ…‹ç®¡ç† (State Management)</a><ol><li><a href=#hydration>Hydration</a><ol><li></li></ol></li><li><a href=#nuxt-3-çš„ç‹€æ…‹ç®¡ç†-state-management>Nuxt 3 çš„ç‹€æ…‹ç®¡ç† (State Management)</a><ol><li></li></ol></li><li><a href=#usestate-çš„åŸºæœ¬ç”¨æ³•>useState çš„åŸºæœ¬ç”¨æ³•</a><ol><li></li></ol></li><li><a href=#usestate-çš„å…±äº«ç‹€æ…‹>useState çš„å…±äº«ç‹€æ…‹</a><ol><li></li></ol></li><li><a href=#ä½¿ç”¨çµ„åˆå¼å‡½æ•¸å»ºç«‹å…±äº«ç‹€æ…‹>ä½¿ç”¨çµ„åˆå¼å‡½æ•¸å»ºç«‹å…±äº«ç‹€æ…‹</a><ol><li></li></ol></li></ol></li><li><a href=#ç‹€æ…‹ç®¡ç†---store--pinia>ç‹€æ…‹ç®¡ç† - Store & Pinia</a><ol><li><a href=#pinia>Pinia</a></li><li><a href=#nuxt-3-å®‰è£-pinia>Nuxt 3 å®‰è£ Pinia</a><ol><li></li></ol></li><li><a href=#å»ºç«‹ç¬¬ä¸€å€‹-pinia-çš„-store>å»ºç«‹ç¬¬ä¸€å€‹ Pinia çš„ Store</a><ol><li></li></ol></li><li><a href=#é–‹å§‹ä½¿ç”¨-store>é–‹å§‹ä½¿ç”¨ Store</a><ol><li></li></ol></li><li><a href=#pinia-store-çš„-state>Pinia Store çš„ State</a><ol><li><a href=#æ”¹è®Šç‹€æ…‹>æ”¹è®Šç‹€æ…‹</a></li><li><a href=#é‡ç½®ç‹€æ…‹>é‡ç½®ç‹€æ…‹</a></li></ol></li><li><a href=#pinia-store-çš„-getters>Pinia Store çš„ Getters</a><ol><li><a href=#ä½¿ç”¨åŒä¸€å€‹-store-ä¸­çš„å…¶ä»–-getter>ä½¿ç”¨åŒä¸€å€‹ store ä¸­çš„å…¶ä»– getter</a></li><li><a href=#ä½¿ç”¨å…¶ä»–-store-çš„-getter>ä½¿ç”¨å…¶ä»– store çš„ getter</a></li><li><a href=#pinia-store-çš„-actions>Pinia Store çš„ Actions</a></li></ol></li><li><a href=#store-çš„è§£æ§‹>Store çš„è§£æ§‹</a></li></ol></li><li><a href=#pinia-æŒä¹…åŒ–æ’ä»¶---pinia-plugin-persistedstate>Pinia æŒä¹…åŒ–æ’ä»¶ - Pinia Plugin Persistedstate</a><ol><li><a href=#åœ¨-nuxt-3-ä¸­é…ç½®ä½¿ç”¨-pinia-plugin-persistedstate>åœ¨ Nuxt 3 ä¸­é…ç½®ä½¿ç”¨ Pinia Plugin Persistedstate</a><ol><li><a href=#step-1-å®‰è£å¥—ä»¶-2>Step 1. å®‰è£å¥—ä»¶</a></li><li><a href=#step-2-åœ¨-nuxt-3-ç‚º-pinia-æ·»åŠ -persist-æ’ä»¶>Step 2. åœ¨ Nuxt 3 ç‚º Pinia æ·»åŠ  Persist æ’ä»¶</a></li><li><a href=#step-3-ç‚ºä½ çš„-store-æ·»åŠ æŒä¹…åŒ–é…ç½®>Step 3. ç‚ºä½ çš„ Store æ·»åŠ æŒä¹…åŒ–é…ç½®</a></li><li><a href=#step-4-æŒä¹…åŒ–æ•ˆæœ>Step 4. æŒä¹…åŒ–æ•ˆæœ</a></li></ol></li></ol></li><li><a href=#runtime-config--app-config>Runtime Config & App Config</a><ol><li><a href=#runtime-config>Runtime Config</a><ol><li><a href=#é…ç½®-runtimeconfig>é…ç½® runtimeConfig</a></li><li><a href=#å®¢æˆ¶ç«¯ä½¿ç”¨-runtimeconfig>å®¢æˆ¶ç«¯ä½¿ç”¨ runtimeConfig</a></li><li><a href=#ä½¿ç”¨-env-å»ºç«‹ç’°å¢ƒè®Šæ•¸>ä½¿ç”¨ .env å»ºç«‹ç’°å¢ƒè®Šæ•¸</a></li><li><a href=#ç’°å¢ƒè®Šæ•¸çš„è¦†è“‹>ç’°å¢ƒè®Šæ•¸çš„è¦†è“‹</a></li></ol></li><li><a href=#app-config>App Config</a><ol><li><a href=#é…ç½®-appconfig>é…ç½® appConfig</a></li><li><a href=#appconfig-æª”æ¡ˆ>app.config æª”æ¡ˆ</a></li><li><a href=#å…·æœ‰éŸ¿æ‡‰å¼çš„è¨­å®š>å…·æœ‰éŸ¿æ‡‰å¼çš„è¨­å®š</a></li></ol></li><li><a href=#å°çµ-1>å°çµ</a></li></ol></li><li><a href=#å¯¦ä½œç·´ç¿’>å¯¦ä½œç·´ç¿’</a><ol><li><a href=#ä¸²æ¥-google-oauth-ç™»å…¥>ä¸²æ¥ Google OAuth ç™»å…¥</a><ol><li></li></ol></li><li><a href=#one-tap-prompt>One Tap prompt</a></li><li><a href=#è‡ªè¨‚æŒ‰éˆ•>è‡ªè¨‚æŒ‰éˆ•</a></li><li><a href=#ä½¿ç”¨-googletokenlogin>ä½¿ç”¨ googleTokenLogin()</a></li><li><a href=#ä½¿ç”¨-googleauthcodelogin>ä½¿ç”¨ googleAuthCodeLogin()</a></li><li><a href=#ä¼ºæœå™¨ç«¯é©—è­‰>ä¼ºæœå™¨ç«¯é©—è­‰</a><ol><li><a href=#é©—è­‰-access-token>é©—è­‰ Access Token</a></li><li><a href=#é©—è­‰-credential>é©—è­‰ Credential</a></li><li><a href=#é©—è­‰-auth-code>é©—è­‰ Auth Code</a></li></ol></li></ol></li><li><a href=#cookie-çš„è¨­ç½®èˆ‡-jwt-çš„æ­é…>Cookie çš„è¨­ç½®èˆ‡ JWT çš„æ­é…</a><ol><li><a href=#nuxt-3-cookie-çš„è¨­ç½®æ–¹å¼>Nuxt 3 Cookie çš„è¨­ç½®æ–¹å¼</a><ol><li><a href=#usecookie>useCookie</a></li></ol></li><li><a href=#ä¼ºæœå™¨ç«¯ä½¿ç”¨-getcookie-èˆ‡-setcookie>ä¼ºæœå™¨ç«¯ä½¿ç”¨ getCookie èˆ‡ setCookie</a><ol><li></li></ol></li><li><a href=#ä½¿ç”¨-cookie-åšä½¿ç”¨è€…é©—è­‰>ä½¿ç”¨ Cookie åšä½¿ç”¨è€…é©—è­‰</a><ol><li></li></ol></li><li><a href=#cookielocalstoragetoken-èˆ‡-jwt>Cookieã€LocalStorageã€Token èˆ‡ JWT</a><ol><li><a href=#cookie>Cookie</a></li><li><a href=#localstorage>LocalStorage</a></li><li><a href=#token>Token</a></li><li><a href=#jwtjson-web-token>JWT(JSON Web Token)</a></li><li><a href=#token-æˆ–-jwt-é¸å“ªä¸€å€‹>Token æˆ– JWT é¸å“ªä¸€å€‹ï¼Ÿ</a></li><li><a href=#token-è¦æ”¾åœ¨-cookie-é‚„æ˜¯-localstorage>Token è¦æ”¾åœ¨ Cookie é‚„æ˜¯ LocalStorageï¼Ÿ</a></li></ol></li></ol></li><li><a href=#æœå°‹å¼•æ“æœ€ä½³åŒ–-seo-èˆ‡-html-meta-tag>æœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) èˆ‡ HTML Meta Tag</a><ol><li><a href=#æœå°‹å¼•æ“æœ€ä½³åŒ–-seo---ç¶²ç«™çš„æ¨™é¡Œ-title-èˆ‡æè¿°-description>æœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) - ç¶²ç«™çš„æ¨™é¡Œ (Title) èˆ‡æè¿° (Description)</a></li><li><a href=#ç¶²ç«™çš„-open-graph-og>ç¶²ç«™çš„ Open Graph (OG)</a></li><li><a href=#usehead>useHead</a><ol><li><a href=#è‡ªè¨‚-metadata>è‡ªè¨‚ Metadata</a></li><li><a href=#æ·»åŠ å‹•æ…‹ç¶²é çš„æ¨™é¡Œ>æ·»åŠ å‹•æ…‹ç¶²é çš„æ¨™é¡Œ</a></li><li><a href=#æ·»åŠ å¤–éƒ¨-css>æ·»åŠ å¤–éƒ¨ CSS</a></li><li><a href=#æ·»åŠ ç¬¬ä¸‰æ–¹çš„-javascript>æ·»åŠ ç¬¬ä¸‰æ–¹çš„ JavaScript</a></li><li><a href=#åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç›¸å°æ‡‰çš„å…ƒä»¶è¨­ç½®å±¬æ€§åŠæ¨™ç±¤>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç›¸å°æ‡‰çš„å…ƒä»¶è¨­ç½®å±¬æ€§åŠæ¨™ç±¤</a></li></ol></li><li><a href=#definepagemeta>definePageMeta()</a><ol><li></li></ol></li></ol></li><li><a href=#public-èˆ‡-assets-è³‡æºç›®éŒ„nuxt-3-çš„éœæ…‹è³‡æº>Public èˆ‡ Assets è³‡æºç›®éŒ„(Nuxt 3 çš„éœæ…‹è³‡æº)</a><ol><li><a href=#public-ç›®éŒ„>public ç›®éŒ„</a><ol><li></li></ol></li><li><a href=#assets-ç›®éŒ„-1>assets ç›®éŒ„</a><ol><li></li></ol></li></ol></li><li><a href=#ç™¼å¸ƒç¶²ç«™å‰çš„å»ºæ§‹æ‰“åŒ…-build-èˆ‡éœæ…‹ç¶²ç«™ç”Ÿæˆ-static-site-generation>ç™¼å¸ƒç¶²ç«™å‰çš„å»ºæ§‹æ‰“åŒ… (Build) èˆ‡éœæ…‹ç¶²ç«™ç”Ÿæˆ (Static Site Generation)</a><ol><li><a href=#nuxt-3-å°ˆæ¡ˆå¦‚ä½•å»ºæ§‹æ­£å¼ç’°å¢ƒç‰ˆæœ¬>Nuxt 3 å°ˆæ¡ˆå¦‚ä½•å»ºæ§‹æ­£å¼ç’°å¢ƒç‰ˆæœ¬ï¼Ÿ</a></li><li><a href=#ä½¿ç”¨é è¨­é…ç½®é€²è¡Œå»ºæ§‹---å»ºæ§‹é€šç”¨æ¸²æŸ“-universal-rendering-çš„ç¶²ç«™>ä½¿ç”¨é è¨­é…ç½®é€²è¡Œå»ºæ§‹ - å»ºæ§‹é€šç”¨æ¸²æŸ“ (Universal Rendering) çš„ç¶²ç«™</a></li><li><a href=#ä½¿ç”¨é æ¸²æŸ“å»ºç½®å…¨éœæ…‹é é¢ç¶²ç«™>ä½¿ç”¨é æ¸²æŸ“å»ºç½®å…¨éœæ…‹é é¢ç¶²ç«™</a></li><li><a href=#æ‰‹å‹•è¨­å®šé æ¸²æŸ“çš„è·¯ç”±è¦å‰‡>æ‰‹å‹•è¨­å®šé æ¸²æŸ“çš„è·¯ç”±è¦å‰‡</a><ol><li></li><li><a href=#build>build</a></li><li><a href=#generate>generate</a></li></ol></li><li><a href=#å»ºæ§‹åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“çš„ç¶²ç«™>å»ºæ§‹åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“çš„ç¶²ç«™</a></li><li><a href=#æ•´ç†é€™äº›æ’åˆ—å»ºæ§‹åƒæ•¸çš„çµ„åˆ>æ•´ç†é€™äº›æ’åˆ—å»ºæ§‹åƒæ•¸çš„çµ„åˆ</a><ol><li><a href=#npm-run-build--ssr-true>npm run build + ssr: true</a></li><li><a href=#npm-run-build--ssr-false>npm run build + ssr: false</a></li><li><a href=#npm-run-generate--ssr-true>npm run generate + ssr: true</a></li></ol></li></ol></li><li><a href=#å°±å‰©æœ€å¾Œä¸€æ­¥äº†---éƒ¨ç½²-deployment>å°±å‰©æœ€å¾Œä¸€æ­¥äº† - éƒ¨ç½² (Deployment)</a><ol><li><a href=#ä½¿ç”¨-nodejs-ä¼ºæœå™¨>ä½¿ç”¨ Node.js ä¼ºæœå™¨</a></li><li><a href=#ä½¿ç”¨-pm2>ä½¿ç”¨ PM2</a><ol><li></li></ol></li><li><a href=#è£½ä½œ-docker-image>è£½ä½œ Docker Image</a><ol><li></li></ol></li><li><a href=#éƒ¨ç½²è‡³-cloudflare-workers>éƒ¨ç½²è‡³ CloudFlare Workers</a><ol><li></li></ol></li><li><a href=#éœæ…‹çš„ç¶²ç«™éƒ¨ç½²è‡³-cloudflare-pages>éœæ…‹çš„ç¶²ç«™éƒ¨ç½²è‡³ CloudFlare Pages</a></li></ol></li><li><a href=#ä¸Šç·šå‰çš„æ¸¬è©¦é …ç›®>ä¸Šç·šå‰çš„æ¸¬è©¦é …ç›®</a><ol><li><a href=#å‰ç«¯ç´°ç¯€>å‰ç«¯ç´°ç¯€</a></li><li><a href=#ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦>ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦</a></li><li><a href=#api-æ¸¬è©¦>API æ¸¬è©¦</a></li><li><a href=#å£“åŠ›æ¸¬è©¦>å£“åŠ›æ¸¬è©¦</a></li><li><a href=#api-æˆ–ç¶²ç«™å®‰å…¨æ€§>API æˆ–ç¶²ç«™å®‰å…¨æ€§</a></li><li><a href=#é–‹ç™¼æˆ–é™¤éŒ¯ç”¨çš„è¨Šæ¯>é–‹ç™¼æˆ–é™¤éŒ¯ç”¨çš„è¨Šæ¯</a></li><li><a href=#ç¶²ç«™ç›¸ä¾æ€§æª¢æŸ¥>ç¶²ç«™ç›¸ä¾æ€§æª¢æŸ¥</a></li><li><a href=#éƒ¨ç½²ç›¸é—œ>éƒ¨ç½²ç›¸é—œ</a></li><li><a href=#å‚™ä»½æ©Ÿåˆ¶>å‚™ä»½æ©Ÿåˆ¶</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><a class=btnBack href=javascript:void(0) onclick=backEvent()><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-back" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l-4 4 4 4m-4-4h11a4 4 0 000-8h-1"/></svg><span class=btnBackText>BACK</span></a>
<script>function backEvent(){if(document.referrer.indexOf(window.location.host)!==-1){history.go(-1);return}window.location.href=window.location.origin}</script><header class=article-header><div class=article-image><a href=https://wayneblog.ga/2023-01-14/nuxt-try-nuxt3/><img src=https://live.staticflickr.com/65535/52616698791_b7b8bbce05_o.jpg loading=lazy alt="Featured image of post ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜"></a></div><div class=article-details><header class=article-category><a href=https://wayneblog.ga/categories/javascript/ style=background-color:#f7b41b;color:#fff>Javascript</a>
<a href=https://wayneblog.ga/categories/typescript/ style=background-color:#2d79c7;color:#fff>Typescript</a>
<a href=https://wayneblog.ga/categories/vue/ style=background-color:#4cbc8c;color:#fff>Vue</a>
<a href=https://wayneblog.ga/categories/nuxt/ style=background-color:#14817b;color:#fff>Nuxt</a></header><div class=article-title-wrapper><h2 class=article-title><a href=https://wayneblog.ga/2023-01-14/nuxt-try-nuxt3/>ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜</a></h2><h3 class=article-subtitle>åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼ç¶²ç«™å¯èƒ½æœƒé¢è‡¨éœ€è¦åš SEO çš„æƒ…å¢ƒï¼Œç‚ºäº†è§£æ±ºè©²æƒ…å¢ƒå•é¡Œï¼Œä½ å¯èƒ½æœƒæ‰¾åˆ°ä½¿ç”¨ Vite åšé æ¸²æŸ“æˆ–å…¶ä»–æ–¹å¼ï¼ŒNuxt 3 ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œä¸”æœ‰æ›´å¤šå¼·å¤§çš„åŠŸèƒ½ï¼Œç›®å‰ Nuxt 3 å·²ç¶“æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆï¼Œå°±è®“æˆ‘å€‘é–‹å§‹å˜—é®®ä¸Šæ‰‹å§ï¼æœ¬ç¯‡æœƒè‘—é‡åœ¨ Nuxt 3 çš„ç‰¹è‰²èˆ‡åŠŸèƒ½å­¸ç¿’ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€å…·å‚™äº› Vue 3 åŸºç¤ï¼Œæˆ‘å°‡å¾æ­å»º Nuxt 3 é–‹ç™¼ç’°å¢ƒã€é é¢è·¯ç”±èˆ‡ä½ˆå±€ä¸€ç›´åˆ°ä½¿ç”¨ Nuxt 3 å»ºç«‹ SEO æ‰€éœ€çš„è³‡è¨Šåšäº›ç­†è¨˜åŠä»‹ç´¹ï¼Œè®“ä½ æœ‰å€‹æ¦‚å¿µä¸¦å˜—è©¦ç”¨ Nuxt 3 ä¾†åš SSR æˆ– SSGï¼Œé€²è€Œè§£æ±º Vue 3 SPA ä¸å¥½åš SEO çš„å•é¡Œã€‚</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jan 14, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é–±è®€æ™‚é–“: 76 åˆ†é˜</time></div></footer></div></header><section class=article-content><style>.article-content p code{background-color:#f5f5f5;color:#ff3860}.focus{background:#f1e2e2;color:#d62c2c;padding:0 5px}</style><p><a class=link href=https://medium.com/@mjackson/universal-javascript-4761051b7ae9 target=_blank rel=noopener>åƒè€ƒç¶²ç«™</a><br><a class=link href=https://ithelp.ithome.com.tw/articles/10292483 target=_blank rel=noopener>åƒè€ƒç¶²ç«™</a><br><a class=link href=https://github.com/wjdesign/ithome-2022-ironman-nuxt3 target=_blank rel=noopener>åƒè€ƒç¶²ç«™</a><br><a class=link href=https://ithelp.ithome.com.tw/users/20152617/ironman/5934 target=_blank rel=noopener>åƒè€ƒç¶²ç«™</a></p><p>åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼ç¶²ç«™å¯èƒ½æœƒé¢è‡¨éœ€è¦åš SEO çš„æƒ…å¢ƒï¼Œç‚ºäº†è§£æ±ºè©²æƒ…å¢ƒå•é¡Œï¼Œä½ å¯èƒ½æœƒæ‰¾åˆ°ä½¿ç”¨ Vite åšé æ¸²æŸ“æˆ–å…¶ä»–æ–¹å¼ï¼Œ<a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> ä¹Ÿæ˜¯å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œä¸”æœ‰æ›´å¤šå¼·å¤§çš„åŠŸèƒ½ï¼Œç›®å‰ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å·²ç¶“æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆï¼Œå°±è®“æˆ‘å€‘é–‹å§‹å˜—é®®ä¸Šæ‰‹å§ï¼</p><p>æœ¬ç¯‡æœƒè‘—é‡åœ¨ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> çš„ç‰¹è‰²èˆ‡åŠŸèƒ½å­¸ç¿’ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€å…·å‚™äº› Vue 3 åŸºç¤ï¼Œæˆ‘å°‡å¾æ­å»º <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> é–‹ç™¼ç’°å¢ƒã€é é¢è·¯ç”±èˆ‡ä½ˆå±€ä¸€ç›´åˆ°ä½¿ç”¨ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å»ºç«‹ SEO æ‰€éœ€çš„è³‡è¨Šåšäº›ç­†è¨˜åŠä»‹ç´¹ï¼Œè®“ä½ æœ‰å€‹æ¦‚å¿µä¸¦å˜—è©¦ç”¨ Nuxt 3 ä¾†åš SSR æˆ– SSGï¼Œé€²è€Œè§£æ±º Vue 3 SPA ä¸å¥½åš SEO çš„å•é¡Œã€‚</p><hr><h2 id=nuxt-3-ä»‹ç´¹>Nuxt 3 ä»‹ç´¹</h2><h3 id=å‰è¨€>å‰è¨€</h3><p>æ¡ç”¨ SSR + SPAï¼Œå°‡ç¬¬ä¸€å€‹ç•«é¢é€é SSR ç”¢ç”Ÿï¼Œå…¶ä»–å°±äº¤çµ¦ CSR ä¾†åšè™•ç†ï¼Œæ—¢èƒ½å…¼å…· SEO é‚„èƒ½æ“æœ‰ SPA çš„ä½¿ç”¨è€…é«”é©—ï¼Œä¸æ˜¯å¾ˆå®Œç¾å—ï¼Ÿæ²’æœ‰éŒ¯ï¼Œä½†åœ¨æ²’æœ‰ä»»ä½•æ¡†æ¶è¼”åŠ©ä¹‹ä¸‹ï¼ŒåŒä¸€å€‹é é¢ä½ å¯èƒ½å°±éœ€è¦å¯¦ä½œå…©æ¬¡ç¨‹å¼ç¢¼ï¼Œä¹Ÿå°±æ˜¯å‰å¾Œç«¯å„ä¸€æ¬¡çš„æ¸²æŸ“é‚è¼¯ï¼Œé€™ä¹Ÿå°±æ˜¯ç›¸æ‡‰çš„ä»£åƒ¹ã€‚åœ¨ä»‹ç´¹ Nuxt 3 ä¹‹å‰å°±ç¨å¾®æä¸€ä¸‹ <strong>Isomorphic JavaScript</strong> èˆ‡ <strong>Universal JavaScript</strong>ã€‚</p><h3 id=isomorphic-javascript-èˆ‡-universal-javascript>Isomorphic JavaScript èˆ‡ Universal JavaScript</h3><h4 id=isomorphic-javascript>Isomorphic JavaScript</h4><p>éš¨è‘— Node.js çš„å‡ºç¾ï¼Œè®“å®¢æˆ¶ç«¯ç€è¦½å™¨ä¹‹å¤–çš„ä¼ºæœå™¨ä¹Ÿèƒ½åŸ·è¡Œ JavaScript ç¨‹å¼ç¢¼ï¼Œä½¿å¾— JavaScript æˆç‚ºä¸€ç¨®åŒæ§‹èªè¨€ (Isomorphic Language)ã€‚Isomorphic JavaScript å³ç¨±ä¹‹ç‚º<strong>åŒæ¨£çš„ JavaScript ç¨‹å¼ç¢¼å¯ä»¥åœ¨å®¢æˆ¶ç«¯åŠä¼ºæœå™¨ç«¯é‹è¡Œ</strong>ï¼›ä¹Ÿå°±æ˜¯èªªåŒä¸€ä»½ Code é™¤äº†èƒ½åœ¨å‰ç«¯ç€è¦½å™¨ä¹Ÿèƒ½åœ¨å¾Œç«¯åŸ·è¡Œã€‚</p><p>ç„¶è€Œ <code>Isomorphic JavaScript</code> èˆ‡ <code>Universal JavaScript</code> çš„åè©å­˜æœ‰ä¸€äº›çˆ­è­°èˆ‡å·®ç•°ï¼Œå¦‚ä»Šï¼Œ<code>Isomorphic JavaScript</code> å¤šä»¥ç¨±<strong>ç›¸åŒçš„ç¨‹å¼ç¢¼å…ƒä»¶ï¼Œå¯ä»¥åœ¨å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯ç”¨ä¾†çµ„è£æˆ–æ¸²æŸ“å‡ºé é¢çš„æŠ€è¡“</strong>ã€‚</p><h4 id=universal-javascript>Universal JavaScript</h4><p>Michael Jackson çš„<a class=link href=https://medium.com/@mjackson/universal-javascript-4761051b7ae9 target=_blank rel=noopener>æ–‡ç« </a>æåˆ°ï¼ŒIsomorphic é€™å€‹è©çš„å«ç¾©ã€Œcorresponding or similar in form and relationsã€ç‚ºå…©å€‹å¯¦é«”ä¸ç›¸åŒï¼Œä½†å…·æœ‰ç›¸ä¼¼çš„æ“ä½œæˆ–å°æ‡‰çš„é—œä¿‚ï¼Œæ›å¥è©±èªªå°±æ˜¯ï¼Œå…©å€‹çœ‹èµ·ä¾†ä¸ä¸€æ¨£çš„ä½¿ç”¨æ–¹æ³•æˆ–èªæ³•ï¼Œä½†æœ€çµ‚çš„åŸ·è¡Œçµæœæ˜¯ä¸€æ¨£çš„ï¼Œä¾‹å¦‚ jQuery æˆ– Zepto æ“ä½œ DOM çš„èªæ³•é•·çš„ä¸å¤§ä¸€æ¨£ï¼Œä½†æ˜¯æœ€çµ‚ä¹Ÿéƒ½æ˜¯å°æ‡‰ JavaScript çš„ <code>document.querySelector</code> ç­‰æ–¹æ³•ã€‚</p><p>æ‰€ä»¥èªªï¼Œç‚ºäº†æè¿°ç›¸åŒçš„ç¨‹å¼ç¢¼ä½†èƒ½åœ¨ä¸åŒç’°å¢ƒä¸­é‹è¡Œçš„åè©ï¼Œå°±æœ‰äº† <code>Universal JavaScript</code> ä¸€è©ï¼Œé€™å€‹åå­—å‘Šè¨´äººå€‘ JavaScript å®ƒ<strong>ä¸åƒ…å¯ä»¥åœ¨æœå‹™å™¨å’Œç€è¦½å™¨ä¸Šé‹è¡Œï¼Œé‚„å¯ä»¥åœ¨æœ¬æ©Ÿè¨­å‚™å’ŒåµŒå…¥å¼æ¶æ§‹ä¸Šé‹è¡Œ</strong>ã€‚</p><p>é‚£éº¼ Isomorphic JavaScript å’Œ Universal JavaScript èˆ‡æˆ‘å€‘åˆæœ‰ä»€éº¼é—œä¿‚å‘¢ï¼Ÿ</p><p>æœ‰çš„ï¼Œå› ç‚º <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> æ­£æ˜¯ä¸€å€‹ <code>Isomorphic JavaScript</code> æ¡†æ¶ï¼Œ<a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> æ˜¯ç›®å‰ä½ ä½¿ç”¨ Vue 3 åœ¨é–‹ç™¼ç¶²ç«™æ™‚ï¼Œæœƒéœ€è¦æ¡ç”¨ SSR æŠ€è¡“æˆ–å„ªåŒ– SEO å•é¡Œæ‰€å¯ä»¥ä½¿ç”¨çš„è§£æ±ºæ–¹æ¡ˆã€‚</p><h3 id=nuxt-3>Nuxt 3</h3><p><a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å®˜æ–¹åœ¨ 2022/11/16 æ­£å¼ç™¼å¸ƒç©©å®šç‰ˆæœ¬ <a class=link href=https://github.com/nuxt/framework/releases/tag/v3.0.0 target=_blank rel=noopener>Nuxt 3.0 stable</a>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186163_0145c6b0f2_o.jpg max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å®˜ç¶²çš„æ¨™èª <code>The Intuitive Web Framework</code>ï¼Œ<a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å°‡è®“ä½ æ›´ç›´è¦ºçš„é«”é©—æ··åˆæ¸²æŸ“ç­‰æ–°åŠŸèƒ½ï¼Œè®“åœ¨ä½¿ç”¨ Vue 3 é–‹ç™¼æ™‚è®Šå¾—æ›´åŠ ç°¡å–®ï¼</p><h4 id=nuxt-3-çš„æ–°ç‰¹æ€§>Nuxt 3 çš„æ–°ç‰¹æ€§</h4><p>å¾ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> å®˜ç¶²çš„æä¾›è¨Šæ¯æ‰€åˆ—ï¼Œç°¡å–®èªªæ˜ä¸€ä¸‹ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> çš„æ–°ç‰¹æ€§ï¼Œå…±æœ‰ä¸‹åˆ— 12 å€‹ï¼š</p><p><img src=https://live.staticflickr.com/65535/52616188037_f6476e512d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ul><li>Lighterï¼šæ›´è¼•é‡ï¼Œé‡å°ç¾åœ¨ç€è¦½å™¨ï¼Œä¼ºæœå™¨éƒ¨ç½²èˆ‡å®¢æˆ¶ç«¯æ‰“åŒ…èƒ½æ¸›å°‘æœ€é«˜ 75 å€ä¹‹å¤šã€‚</li><li>Fasterï¼šæ›´å¿«é€Ÿï¼Œé€šé Nitro æä¾›æ”¯æŒçš„å‹•æ…‹ä¼ºæœå™¨ç«¯ç¨‹å¼ç¢¼æ‹†åˆ†ä¾†å„ªåŒ–å†·å•Ÿå‹•å•é¡Œã€‚</li><li>Hybirdï¼šå‹•æ…‹çš„éœæ…‹é é¢ç”Ÿæˆå’Œå…¶ä»–é«˜ç´šæ¨¡å¼ï¼Œç¾åœ¨é€™äº›éƒ½å°‡æˆç‚ºå¯èƒ½ã€‚</li><li>Suspenseï¼šåœ¨å°èˆªè§¸ç™¼çš„å‰å¾Œï¼Œçš†å¯ä»¥åœ¨ä»»ä½•å…ƒä»¶ä¸­å–å¾—æ•¸æ“šè³‡æ–™ã€‚</li><li>Composition APIï¼šä½¿ç”¨ Composition API å’Œ Nuxt 3 çš„ Composables å¯¦ç¾çœŸæ­£çš„ç¨‹å¼ç¢¼å¯é‡ç”¨æ€§ã€‚</li><li>Nuxt CLIï¼šå…¨æ–°çš„é›¶ä¾è³´é«”é©—ï¼Œå¹«åŠ©ä½ è¼•é¬†å»ºç«‹å°ˆæ¡ˆèˆ‡æ¨¡çµ„æ•´åˆã€‚</li><li>Nuxt Dev Toolsï¼šå°ˆå±¬é–‹ç™¼é™¤éŒ¯å·¥å…·ï¼Œæä¾›æ›´å¤šçš„è³‡è¨Šèˆ‡å¿«é€Ÿä¿®å¾©ï¼Œè®“å·¥ä½œæ›´é«˜æ•ˆã€‚</li><li>Nuxt Kitï¼šå…·å‚™åŸºæ–¼ TypeScript å’Œè·¨ç‰ˆæœ¬å…¼å®¹æ€§çš„å…¨æ–°æ¨¡çµ„é–‹ç™¼ã€‚</li><li>webpack 5ï¼šæ›´å¿«é€Ÿçš„æ‰“åŒ…æ™‚é–“èˆ‡æ‰“åŒ…å‡ºæ›´å°çš„é«”ç©ï¼Œä¸¦ä¸”ç„¡éœ€ä»»ä½•é…ç½®ã€‚</li><li>Viteï¼šä½¿ç”¨ Vite ä½œç‚ºæ‰“åŒ…å·¥å…·ï¼Œé«”é©—é–ƒé›»èˆ¬å¿«é€Ÿçš„ HMRã€‚</li><li>Vue 3ï¼šå®Œå…¨æ”¯æŒ Vue 3ã€‚</li><li>TypeScriptï¼šä½¿ç”¨ TypeScript èˆ‡ ESM æ§‹å»ºè€Œæˆï¼Œç„¡éœ€é¡å¤–çš„é…ç½®æ­¥é©Ÿã€‚</li></ul><h4 id=nitro>Nitro</h4><p>Nuxt 3 ç”±ä¸€å€‹å…¨æ–°çš„ä¼ºæœå™¨å¼•æ“ <a class=link href=https://nuxt.com/docs/guide/concepts/server-engine/ target=_blank rel=noopener>Nitro</a> æä¾›æ”¯æŒï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å¹¾å€‹ç‰¹é»ï¼š</p><ul><li>è·¨å¹³å°æ”¯æŒï¼Œæ”¯æŒ Node.js èˆ‡ç€è¦½å™¨ç­‰ã€‚</li><li>Serverless æ”¯æŒã€‚</li><li>API è·¯ç”±ï¼Œä½¿ç”¨ <a class=link href=https://github.com/unjs/h3 target=_blank rel=noopener>unjs/h3</a>ã€‚</li><li>è‡ªå‹•ç¨‹å¼ç¢¼æ‹†åˆ† (code-splitting) èˆ‡ç•°æ­¥åŠ è¼‰ chunk (async-loaded chunks)ã€‚</li><li>æ··åˆæ¸²æŸ“æ¨¡å¼ï¼Œä¾›éœæ…‹ (static)èˆ‡ç„¡ä¼ºæœå™¨ (serverless) ç¶²ç«™ã€‚</li><li>é–‹ç™¼ä¼ºæœå™¨ä¸Šçš„ HMR (hot module reloading)ã€‚</li></ul><p>ç°¡å–®ä¾†èªªï¼Œ<a class=link href=https://nuxt.com/docs/guide/concepts/server-engine/ target=_blank rel=noopener>Nitro</a> å·²ç¶“æ˜¯ <a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> åŒ…å«çš„å…¨æ–°ä¼ºæœå™¨å¼•æ“ï¼Œç„¡éœ€å†é€²è¡Œé…ç½®ã€‚<a class=link href=https://nuxt.com/docs/guide/concepts/server-engine/ target=_blank rel=noopener>Nitro</a> é™¤äº†æ”¯æ´ SPAã€å»ºç«‹éœæ…‹çš„ç¶²ç«™ï¼Œç”šè‡³èƒ½åœ¨å¾Œç«¯æ‰“ API æ™‚ç›´æ¥èª¿ç”¨ç›¸é—œå‡½æ•¸ï¼Œå¾è€Œé™ä½ API Requestï¼Œæ•´é«”ä¾†èªªæ˜¯éå¸¸å¼·å¤§çš„ä¼ºæœå™¨å¼•æ“ã€‚</p><h4 id=nuxt-3-æ¸²æŸ“æ¨¡å¼>Nuxt 3 æ¸²æŸ“æ¨¡å¼</h4><p><a class=link href=https://nuxt.com/ target=_blank rel=noopener>Nuxt 3</a> ç›®å‰æ”¯æ´å…©ç¨®æ¸²æŸ“æ¨¡å¼ï¼Œ<code>Client-side Only Rendering</code> èˆ‡ <code>Universal Rendering</code>ã€‚ä¹‹å¾Œå°‡æœƒæ¨å‡ºæ›´å…ˆè¿‘çš„æ¸²æŸ“æ¨¡å¼ï¼Œ<code>æ··åˆæ¸²æŸ“ (Hybrid Rendering)</code> èˆ‡<code>é‚Šç·£æ¸²æŸ“ (Edge-Side Rendering)</code>ã€‚</p><ul><li>Client-side Only Rendering</li></ul><p>Nuxt 3 è¨­å®šç‚ºè©²æ¨¡å¼ï¼Œå¦‚åŒå–®ç´”ä½¿ç”¨ Vue 3 å»ºç½®å‡ºçš„ SPAï¼Œç€è¦½å™¨ä¸‹è¼‰ä¸¦è¼‰å…¥å®Œ Vue ç¨‹å¼ç¢¼å¾Œï¼Œ<code>æ¸²æŸ“ HTML çš„æ‰€æœ‰å‹•ä½œçš†åœ¨å®¢æˆ¶ç«¯åŸ·è¡Œ</code>ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ¶ç«¯æ¸²æŸ“ CSRã€‚</p><ul><li>Universal Rendering</li></ul><p>Universal Rendering æ˜¯ <code>Nuxt 3 é è¨­çš„æ¸²æŸ“æ¨¡å¼</code>ï¼Œåœ¨é€™å€‹æ¨¡å¼ä¹‹ä¸‹ï¼Œç„¡è«–é é¢æ˜¯é å…ˆç”¢ç”Ÿä¸¦ç·©å­˜é‚„æ˜¯å‹•æ…‹æ¸²æŸ“ï¼ŒNuxt éƒ½æœƒåœ¨ä¼ºæœå™¨ç’°å¢ƒä¸­åŸ·è¡Œ Vue ç¨‹å¼ç¢¼ï¼Œä¸¦æ¸²æŸ“ HTMLï¼Œä¹Ÿå°±æ˜¯å¦‚åŒ SSRï¼Œä¼ºæœå™¨æœƒå‘ç€è¦½å™¨è¿”å›ä¸€å€‹å®Œæ•´å‘ˆç¾çš„ HTML é é¢ã€‚ç•¶ç€è¦½å™¨å®Œæ•´å‘ˆç¾çš„é é¢å‡ºç¾å¾Œï¼Œä¹Ÿæœƒé–‹å§‹è¼‰å…¥ Vue ç¨‹å¼ç¢¼ï¼Œä»¥å› æ‡‰å¾ŒçºŒçš„å‹•æ…‹é é¢èˆ‡è·¯ç”±è·³è½‰ç­‰ï¼Œå³è½‰æ›ç‚º SPA é–‹å§‹ç”±å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯èªª Nuxt 3 çš„ <code>Universal Rendering</code> å³æ˜¯æŒ‡ <code>SSR + SPA</code>ã€‚</p><ul><li>æ··åˆæ¸²æŸ“ (Hybrid Rendering)</li></ul><p>æˆ‘å€‘åœ¨ä½¿ç”¨ Vue é–‹ç™¼ SPA ç¶²ç«™æ™‚ï¼Œé€šå¸¸æ˜¯æœƒè¨­ç½®è·¯ç”± (Route) è®“ç¶²é èƒ½å¤ åˆ°é”ä¸åŒçš„é é¢å†ä¾†è«‹æ±‚è³‡æ–™ï¼Œæ­¤ç‚º CSRã€‚åœ¨ä½¿ç”¨ Nuxt é–‹ç™¼æ™‚èƒ½è®“èƒ½ç¶²ç«™æ“æœ‰ SSR + SPA çš„ Universal Rendering æ¸²æŸ“æ–¹å¼ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒNuxt 3 é‚„æä¾›äº†ä¸€ç¨®æ›´å…ˆé€²çš„æ¸²æŸ“æ¨¡å¼â€”â€”<code>æ··åˆæ¸²æŸ“ (Hybrid Rendering)</code>ï¼Œå¯ä»¥<code>ç‚ºæ¯å€‹è·¯ç”±è¨­ç½®ä¸åŒçš„æ¸²æŸ“èˆ‡ç·©å­˜çš„è¦å‰‡</code>ï¼Œè®“éƒ¨åˆ†é é¢ä½¿ç”¨ CSR åœ¨å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ï¼Œå¦ä¸€éƒ¨åˆ†ä½¿ç”¨ SSR åœ¨ä¼ºæœå™¨ç«¯é€²è¡Œæ¸²æŸ“ã€‚</p><ul><li>é‚Šç·£æ¸²æŸ“ (Edge-Side Rendering)</li></ul><p>Nitro ç‚º Nuxt 3 æä¾›æ”¯æŒçš„å…¨æ–°ä¼ºæœå™¨ç«¯æ¸²æŸ“å¼•æ“ï¼Œå®ƒç‚º Node.jsã€Denoã€Worker ç­‰æä¾›è·¨å¹³å°çš„æ”¯æŒï¼Œè®“ Nuxt <code>å¯ä»¥åœ¨ CDN Edge Workers é€²è¡Œæ¸²æŸ“</code>ï¼Œæ•…ç¨±ç‚º<code>é‚Šç·£æ¸²æŸ“ (Edge-Side Rendering)</code>ï¼Œèƒ½æœ‰æ•ˆåˆ†æ“”åœ¨ä¼ºæœå™¨ç«¯æ¸²æŸ“æ™‚çš„è³‡æºè² è·ï¼Œå°‡å…¶æå‡åˆ°å¦ä¸€å€‹å±¤æ¬¡ï¼Œå¾è€Œæ¸›å°‘ç¶²è·¯å»¶é²åŠæˆæœ¬ã€‚</p><h4 id=nuxt-3-çš„å»ºæ§‹å·¥å…·>Nuxt 3 çš„å»ºæ§‹å·¥å…·</h4><p>Nuxt 3 é è¨­çš„å»ºæ§‹å·¥å…·å¦‚ä¸‹ï¼š</p><ul><li>é è¨­ä½¿ç”¨ <a class=link href=https://vitejs.dev/ target=_blank rel=noopener>Vite</a> ä¹Ÿå¯ä»¥åˆ‡æ›æˆ <a class=link href=https://webpack.js.org/ target=_blank rel=noopener>webpack</a></li><li><a class=link href=https://rollupjs.org/ target=_blank rel=noopener>Rollup</a></li><li><a class=link href=https://postcss.org/ target=_blank rel=noopener>PostCSS</a></li><li><a class=link href=https://esbuild.github.io/ target=_blank rel=noopener>esbuild</a></li></ul><p>Nuxt 3 å·²ç¶“å¹«æˆ‘å€‘é…ç½®å¥½ä¸€å †è¨­å®šå•¦ï¼ŒçœŸçš„æ˜¯é–‹ç®±å³ç”¨ï¼Œè€Œä¸” Nuxt ä¹Ÿæ”¯æ´ TypeScriptã€‚å¦‚æœèªªçœŸçš„è¦èª¿æ•´é…ç½®ï¼Œä¹Ÿå¯ä»¥å† <code>nuxt.config</code> ä¸­é€²è¡Œèª¿æ•´ï¼Œéå¸¸æ–¹ä¾¿è²¼å¿ƒã€‚</p><hr><h2 id=ä½¿ç”¨-nuxi-å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ>ä½¿ç”¨ nuxi å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ</h2><h3 id=ç·šä¸Šç©ç©çœ‹>ç·šä¸Šç©ç©çœ‹</h3><p>å¦‚æœä½ é‚„åœ¨è§€æœ›æˆ–æ˜¯å¾éš”å£æ£šéä¾†çš„ï¼Œé‚„ä¸æƒ³å®‰è£ç›¸é—œå·¥å…·èˆ‡ç’°å¢ƒï¼Œé‚£éº¼å¯ä»¥é»æ“Šä¸‹é¢å…¶ä¸€é€£çµï¼Œåœ¨ StackBlitza æˆ– CodeSandbox çš„ç·šä¸Šç·¨è¼¯å™¨ç’°å¢ƒç¨å¾®ç©ç©ï¼Œç›´æ¥ç·šä¸Šé«”é©— Nuxt 3ã€‚</p><ul><li><a class=link href=https://stackblitz.com/github/nuxt/starter/tree/v3-stackblitz target=_blank rel=noopener>Play on StackBlitz</a></li><li><a class=link href=https://codesandbox.io/p/github/nuxt/starter/v3-codesandbox target=_blank rel=noopener>Play on CodeSandbox</a></li></ul><h3 id=é–‹å§‹å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ>é–‹å§‹å»ºç«‹ç¬¬ä¸€å€‹å°ˆæ¡ˆ</h3><h4 id=å…ˆæ±ºæ¢ä»¶>å…ˆæ±ºæ¢ä»¶</h4><p>é–‹å§‹ä¹‹å‰ï¼Œä¾ç…§ Nuxt 3 å®˜ç¶²çš„<a class=link href=https://nuxt.com/docs/getting-started/installation target=_blank rel=noopener>èµ·æ‰‹å¼</a>æˆ‘å€‘æœ‰å¹¾å€‹é …ç›®éœ€è¦åšä¸€ä¸‹æª¢æŸ¥ï¼Œæˆ‘å€‘é€™è£¡åƒ…å…ˆæ³¨æ„ä¸€ä¸‹ Node.js çš„ç‰ˆæœ¬ï¼Œå»ºè­°ä½¿ç”¨ç›®å‰<a class=link href=https://nodejs.org/zh-tw/download/ target=_blank rel=noopener>æœ€æ–° LTS ç‰ˆæœ¬</a> <code>v16.17.0</code> (åŒ…å« NPM v8.15.0)ã€‚</p><h4 id=ä½¿ç”¨-nuxi-å»ºç«‹-nuxt-3-å°ˆæ¡ˆ>ä½¿ç”¨ nuxi å»ºç«‹ Nuxt 3 å°ˆæ¡ˆ</h4><p><a class=link href=https://www.npmjs.com/package/nuxi target=_blank rel=noopener>nuxi</a> å…¨åç‚º <strong>Nuxt Command Line Interface</strong>ï¼Œæ˜¯ç”± Nuxt æä¾›é–‹ç™¼çš„æ¨™æº–å·¥å…·ï¼ŒNuxt CLI å°±åƒæ˜¯ Vue CLI å¯ä»¥å»ºç«‹ Vue å°ˆæ¡ˆï¼Œæˆ‘å€‘ç•¶ç„¶ä¹Ÿå°±å¯ä»¥ä½¿ç”¨ Nuxt CLI ä¾†å»ºç«‹ Nuxt çš„å°ˆæ¡ˆã€‚</p><p>é¦–å…ˆï¼Œæ‰“é–‹çµ‚ç«¯æ©Ÿ (Terminal)ï¼Œå°‡ç›®éŒ„åˆ‡æ›è‡³è‡ªå·±ç¿’æ…£çš„å·¥ä½œå€ï¼Œæ¥è‘—è¼¸å…¥å¦‚ä¸‹çš„ nuxi æä¾›æŒ‡ä»¤ä¸¦åŸ·è¡Œï¼Œä¾†åˆå§‹åŒ–å»ºç«‹ä¸€å€‹ Nuxt 3 å°ˆæ¡ˆã€‚åœ¨æ­¤ï¼Œæˆ‘å€‘çš„å°ˆæ¡ˆåç‚º <code>nuxt-app</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi init nuxt-app
</span></span></code></pre></td></tr></table></div></div><p>å¦‚ä¸‹åœ–ï¼Œnpx æœƒè©¢å•ä½ æ˜¯å¦å®‰è£æœ€æ–°ç‰ˆæœ¬çš„å¥—ä»¶ <code>nuxi@3.0.0-rc.10</code> è¼¸å…¥ <code>y</code> å³å¯ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616697991_767a632430_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>åŸ·è¡Œå®ŒæŒ‡ä»¤å¾Œç›´åˆ°å‡ºç¾å¦‚ä¸‹æç¤ºï¼Œä»£è¡¨å°ˆæ¡ˆå·²ç¶“åˆå§‹å»ºç«‹æˆåŠŸï¼Œå®Œæˆå¾Œå¯ä»¥ç™¼ç¾ç›®å‰ç›®éŒ„ä¸‹å¤šäº†ä¸€å€‹åç‚º <code>nuxt-app</code> çš„è³‡æ–™å¤¾ï¼Œé€™å€‹è³‡æ–™å¤¾ä¹Ÿå°±æ˜¯ Nuxt 3 å°ˆæ¡ˆçš„æ ¹ç›®éŒ„ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964239_b438581d8d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å¯ä»¥é€²å…¥å°ˆæ¡ˆç›®éŒ„ <code>nuxt-app</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> nuxt-app
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ <code>nuxt-app</code> å°ˆæ¡ˆç›®éŒ„ä¸‹å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„ <code>package.json</code>ï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹å®‰è£ Nuxt 3 å°ˆæ¡ˆçš„ç›¸é—œä¾è³´å¥—ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn</span>
</span></span></code></pre></td></tr></table></div></div><p>Nuxt CLI å¦‚åŒ Vue CLI å·²ç¶“åœ¨å»ºç«‹å°ˆæ¡ˆæ™‚å¹«æˆ‘å€‘åˆå§‹å®Œæˆè¨±å¤šäº‹æƒ…ï¼Œå†å®‰è£å®Œç›¸é—œä¾è³´å¥—ä»¶å¾Œè¼¸å…¥ä¸‹åˆ—æŒ‡ä»¤ï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨é–‹ç™¼ç’°å¢ƒä¸‹å•Ÿå‹• Nuxt äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run dev -- -o
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run dev -- -o</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæ²’æœ‰æ„å¤–ï¼Œå¯ä»¥çœ‹åˆ° Nitro å¹«æˆ‘å€‘å•Ÿå‹•äº† Nuxt 3 çš„æœå‹™ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186213_f7a11b0b5a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ ¹æ“šæç¤ºï¼Œæˆ‘å€‘å¯ä»¥åœ¨ç€è¦½å™¨è¼¸å…¥ç¶²å€ <a class=link href=http://localhost:3000/ target=_blank rel=noopener>http://localhost:3000/</a> çœ‹çœ‹æœå‹™æ˜¯å¦æ­£å¸¸é‹ä½œã€‚</p><p>å¦‚æœçœ‹åˆ°å¦‚ä¸‹åœ–çš„æ­¡è¿ç•«é¢ï¼Œæ­å–œä½ ï¼æˆ‘å€‘å·²ç¶“æˆåŠŸå»ºç«‹ç¬¬ä¸€å€‹ Nuxt 3 å°ˆæ¡ˆå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52616964264_faa521ed78_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç¾åœ¨ä½ å¯ä»¥å˜—è©¦æ‰“é–‹åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ <code>app.vue</code> æª”æ¡ˆä¹‹ä¸­ï¼Œ<code>app.vue</code> æ˜¯æˆ‘å€‘ Nuxt å°ˆæ¡ˆçš„é€²å…¥é»ï¼Œå®ƒçš„å…§å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾å®ƒèˆ‡ Vue 3 çš„å–®ä¸€å…ƒä»¶æª” (Single File Component, SFC) ç›¸æ¯”ï¼Œå¥½åƒå°‘äº†é»ä»€éº¼ï¼Œæ€éº¼æœ‰ç”¨äº† <code>&lt;NuxtWelcome /></code> å»æ²’çœ‹è¦‹åœ¨å“ªé‚Š import çš„å‘¢ï¼Ÿ</p><p>å…¶å¯¦å‘¢ï¼Œ<code>&lt;NuxtWelcome /></code> é€™å€‹å…ƒä»¶å°±æ˜¯æˆ‘å€‘å‰é¢ç€è¦½å™¨çœ‹åˆ°çš„æ­¡è¿ç•«é¢ï¼Œæ˜¯ Nuxt æ¡†æ¶è‡ªå¸¶çš„ä¸€å€‹å…ƒä»¶ï¼Œè€Œä¸” Nuxt è‡ªå‹•å°å…¥å…ƒä»¶çš„æ›´æ˜¯å…¶ç‰¹è‰²ä¹‹ä¸€ï¼Œå¾Œé¢çš„ç³»åˆ—æˆ‘å€‘æœƒå†æåˆ°<strong>è‡ªå‹•å°å…¥ (Auto Imports)</strong>ã€‚</p><p>åœ¨é€™è£¡ç›´æ¥ç§»é™¤ <code>&lt;NuxtWelcome /></code> å°±å¯ä»¥äº†ï¼Œæˆ‘å€‘å°‡ app.vue èª¿æ•´å¦‚ä¸‹ï¼Œä¸¦ä¿å­˜æª”æ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span> <span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹è¦‹å› ç‚º Nuxt é è¨­ Vite å»ºæ§‹ä¸¦æ”¯æ´ <a class=link href=https://vitejs.dev/guide/features.html#hot-module-replacement target=_blank rel=noopener>HMR</a> (Hot Module Replacement)ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ç€è¦½å™¨å¿«é€Ÿçš„çœ‹è¦‹ä¿®æ”¹å¾Œçš„çµæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698026_1bf03d908a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>è‡³æ­¤ï¼Œå¤§å®¶å°±å¯ä»¥å…ˆç°¡å–®çš„ç©ç© Nuxt 3ï¼Œæ¥ä¸‹ä¾†æˆ‘å°‡è£œå……ä¸€äº› nuxi çš„æŒ‡ä»¤èˆ‡åƒæ•¸ç°¡ä»‹ã€‚</p><h3 id=nuxt-cli-å¸¸ç”¨æŒ‡ä»¤>Nuxt CLI å¸¸ç”¨æŒ‡ä»¤</h3><p>ä»¥ä¸‹å°‡ç°¡å–®ä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œè‹¥æ‚¨åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹è¨˜å¾—ä½¿ç”¨ <code>npx</code> ä¾†åŸ·è¡Œ <code>nuxi</code>ã€‚</p><p>å¦å¤–åœ¨æ­¤æé†’ï¼Œä¸‹é¢æ‰€åˆ—çš„æŒ‡ä»¤<code>éƒ¨åˆ†åƒæ•¸æœƒé€²è¡Œçœç•¥</code>ï¼Œè‹¥æœ‰èˆˆè¶£ç¿»ç¿»å®Œæ•´çš„æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜ï¼Œå¯ä»¥åƒè€ƒ <a class=link href=https://v3.nuxtjs.org/api/commands/add target=_blank rel=noopener>Nuxt 3 å®˜æ–¹æ–‡ä»¶</a>ã€‚</p><h4 id=nuxi-init>nuxi init</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi init<span class=p>|</span>create <span class=o>[</span>dir<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™å€‹ <code>nuxi init</code> æŒ‡ä»¤æ˜¯ç”¨ä¾†åˆå§‹åŒ–ä¸€å€‹ Nuxt å°ˆæ¡ˆï¼Œç­‰åŒ <code>nuxi create</code> æŒ‡ä»¤ï¼Œ<code>dir</code> ä½ å¯ä»¥å¡«å­—ä¸²ä½œç‚ºå°ˆæ¡ˆèˆ‡è³‡æ–™å¤¾åç¨±ï¼Œä¹Ÿå¯ä»¥å¡«å¯«å®Œæ•´è·¯å¾‘ä¾†å»ºç«‹å°ˆæ¡ˆç›®éŒ„ã€‚</p><h4 id=nuxi-dev>nuxi dev</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi dev <span class=o>[</span>--open, -o<span class=o>]</span> <span class=o>[</span>--port, -p<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘åœ¨æœ¬åœ°ç«¯é€²è¡Œé–‹ç™¼æ™‚ï¼Œéœ€è¦é‹è¡Œé–‹ç™¼ç’°å¢ƒï¼Œç•¶æˆ‘å€‘åŸ·è¡Œ <code>npm run dev -- -o</code> æ™‚ï¼Œä¾æ“š <code>package.json</code> ä¸­çš„ scripts æ‰€åˆ—ï¼Œå…¶å¯¦å°±æ˜¯åœ¨åŸ·è¡Œ <code>nuxi dev -o</code>ï¼Œå…¶ä¸­çš„ <code>-o</code> è¡¨ç¤º<strong>æœå‹™å•Ÿå‹•å¾Œé–‹å•Ÿç€è¦½å™¨</strong>ã€‚</p><p>å¦‚æœå•Ÿå‹•æœå‹™ç™¼ç¾ Port è¡çªï¼Œä½ ä¹Ÿå¯ä»¥é€é <code>-p</code> ä¾†å°‡é è¨­çš„ç›£è½çš„ Port: 3000 èª¿æ•´ç‚ºå…¶ä»–æ•¸å€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxi dev -p <span class=m>3001</span>
</span></span><span class=line><span class=cl><span class=c1># æˆ–</span>
</span></span><span class=line><span class=cl><span class=c1># npm run dev -- -o -p 3001</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=nuxi-cleanup>nuxi cleanup</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi clean<span class=p>|</span>cleanup
</span></span></code></pre></td></tr></table></div></div><p><code>nuxi cleanup</code> ç­‰åŒ <code>nuxi clean</code> æŒ‡ä»¤ï¼Œç”¨ä¾†åˆªé™¤ Nuxt è‡ªå‹•ç”¢ç”Ÿçš„æª”æ¡ˆå’Œç·©å­˜åŒ…æ‹¬ï¼š</p><ul><li>.nuxt</li><li>.output</li><li>node_modules/.vite</li><li>node_modules/.cache</li></ul><h4 id=nuxi-upgrade>nuxi upgrade</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi upgrade <span class=o>[</span>--force<span class=p>|</span>-f<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™å€‹æŒ‡ä»¤å¯ä»¥ç”¨ä¾†å°‡ç›®å‰å°ˆæ¡ˆçš„ Nuxt 3 å‡ç´šè‡³æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰ä¸€äº›å¯èƒ½è¡Œç‚ºèª¿æ•´æˆ–ä¸ç›¸å®¹çš„æƒ…æ³ï¼Œå¯ä»¥å†ä¾æ“šå¯¦éš›æƒ…å¢ƒæ­é… <code>-f</code> åƒæ•¸ä¾†å¼·åˆ¶æ›´æ–°ã€‚</p><p>å¦‚ä¸‹åœ–ï¼Œåªè¦ä¸€è¡ŒæŒ‡ä»¤ <code>npx nuxi upgrade</code> å°±å¯ä»¥å°‡å°ˆæ¡ˆç‰ˆæœ¬ç”± <code>3.0.0-rc.9</code> å‡ç´šè‡³ <code>3.0.0-rc.10</code>ï¼Œåœ¨ RC éšæ®µæˆ–ä¹‹å¾Œæƒ³å®šæœŸå‡ç´šç‰ˆæœ¬ä¾†èªªéå¸¸å¥½ç”¨ï¼Œä½†ä¹Ÿè«‹è¨˜å¾—<code>å‡ç´šå‰å¯ä»¥å…ˆçœ‹ä¸€ä¸‹å®˜æ–¹çš„ Changelog</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186283_00309ed597_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><hr><h2 id=nuxt-3--typescript--eslint--prettier-ç’°å¢ƒå»ºç½®>Nuxt 3 + TypeScript + ESLint + Prettier ç’°å¢ƒå»ºç½®</h2><p>åœ¨æˆ‘å€‘ä½¿ç”¨å®Œ Nuxt CLI å»ºç«‹å®Œå°ˆæ¡ˆå¾Œï¼Œå…¶å¯¦å°±å¯ä»¥é–‹å§‹é€²è¡Œå°ˆæ¡ˆçš„é–‹ç™¼ï¼Œä½†æ˜¯å‘¢ï¼Œç›¸ä¿¡ä¸å°‘äººå°æ–¼ç¨‹å¼ç¢¼çš„æ’ç‰ˆéƒ½æœ‰è‡ªå·±çš„é¢¨æ ¼ï¼Œä¸åŒäººçš„ Coding Style è‚¯å®šä¹Ÿéƒ½ä¸ä¸€æ¨£ï¼Œç„¶è€Œåœ¨åœ˜éšŠå”ä½œéœ€è¦æ¨™æº–æˆ–ç‚ºäº†æ•´é«”ä¸€è‡´ä¸”ç¾è§€ä¸‹ï¼ŒLinter å°±æ˜¯ä½ çš„å¥½å¹«æ‰‹ï¼Œæ­¤å¤–ï¼ŒTypeScript åœ¨ Nuxt 3 å·²ç¶“æœ‰å…§å»ºæ”¯æ´ï¼Œæˆ‘ä¹Ÿå»ºè­°åŠæ¨è–¦ä½¿ç”¨ TypeScriptï¼Œæ¥ä¸‹ä¾†åˆ†äº«æˆ‘è‡ªå·±åœ¨ä½¿ç”¨ Nuxt 3 é–‹ç™¼æ™‚çš„ Linter ç’°å¢ƒé…ç½®ï¼ŒåŒ…å«äº† <code>TypeScript</code>ã€<code>ESLint</code> èˆ‡ <code>Prettier</code>ã€‚</p><h3 id=typescript-é¡å‹æª¢æŸ¥>TypeScript é¡å‹æª¢æŸ¥</h3><p><img src=https://live.staticflickr.com/65535/52616964289_0dbc29572e_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>Nuxt 3 å·²ç¶“æœ‰å…§å»ºæ”¯æ´ TypeScriptï¼Œä¸€äº› TypeScript è¨­å®šéƒ½å¯ä»¥åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹é…ç½® <code>tsconfig.json</code>ï¼Œä¾‹å¦‚ï¼Œåœ¨é–‹ç™¼éç¨‹ä¸­é‡å° TypeScript æˆ‘æœƒåœ¨é–‹ç™¼ç’°å¢ƒä¸‹å•Ÿå‹•é¡å‹æª¢æŸ¥ï¼Œå¯ä»¥åƒè€ƒä»¥ä¸‹é€²è¡Œé…ç½®ã€‚</p><h4 id=step-1-å®‰è£-vs-code-æ’ä»¶>Step 1. å®‰è£ VS Code æ’ä»¶</h4><p>é¦–å…ˆï¼Œæ¨è–¦å¤§å®¶å®‰è£ä¸‹åˆ—å…©å€‹ VS Code æ’ä»¶ï¼š</p><ul><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=Vue.volar" target=_blank rel=noopener>Vue Language Features (Volar)</a>ï¼šå¯« Vue 3 å¼·åŠ›æ¨è–¦å¿…è£çš„æ’ä»¶ï¼ŒåŒ…å«äº†ä¸Šè‰²ã€èªæ³•æç¤ºã€ç·¨è¼¯å™¨å¿«é€Ÿåˆ†å‰²ç­‰å¼·å¤§åŠŸèƒ½ï¼Œè€Œä¸”ä¹Ÿæ˜¯ Nuxt 3 æ¨è–¦çš„ç·¨è¼¯å™¨æ’ä»¶ã€‚</li><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin" target=_blank rel=noopener>TypeScript Vue Plugin (Volar)</a>ï¼šVue çš„ TypeScript æ’ä»¶ã€‚</li></ul><h4 id=step-2-å®‰è£-vue-é¡å‹æª¢æŸ¥å¥—ä»¶>Step 2. å®‰è£ Vue é¡å‹æª¢æŸ¥å¥—ä»¶</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D vue-tsc typescript
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D vue-tsc typescript</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-èª¿æ•´-nuxtconfigts-è¨­å®š>Step 3. èª¿æ•´ nuxt.config.ts è¨­å®š</h4><p>æ ¹æ“š nuxt3 å®˜æ–¹æ–‡ä»¶<a class=link href=https://nuxt.com/docs/guide/concepts/typescript target=_blank rel=noopener>èªªæ˜</a>ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ <code>nuxt.config.ts</code> ä¸­ï¼Œè¨­ç½® <code>typescript.typeCheck: true</code> ä¾†è®“é–‹ç™¼æ™‚æœŸèƒ½åŸ·è¡Œé¡å‹æª¢æŸ¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>typescript</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>typeCheck</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-4-é‡æ–°å•Ÿå‹•é–‹ç™¼ç’°å¢ƒæœå‹™>Step 4. é‡æ–°å•Ÿå‹•é–‹ç™¼ç’°å¢ƒæœå‹™</h4><p>æˆ‘å€‘é‡æ–°åŸ·è¡Œ <code>npm run dev -- -o</code> ä¾†é‡å•Ÿé–‹ç™¼ç’°å¢ƒçš„æœå‹™ï¼Œé€™æ¨£å°±é…ç½®å®Œæˆå›‰ï¼</p><h4 id=çœ‹çœ‹æ•ˆæœ>çœ‹çœ‹æ•ˆæœ</h4><p>å¦‚æœæˆ‘å€‘åœ¨ <code>app.vue</code> å¯«äº†ä»¥ä¸‹ç¨‹å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;ts&#34;</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>year</span><span class=o>:</span> <span class=nx>number</span> <span class=o>=</span> <span class=s1>&#39;2022&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span><span class=o>:</span> <span class=nx>string</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>year</span><span class=si>}</span><span class=sb> iThome éµäººè³½`</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾çµ‚ç«¯æ©Ÿ (Terminal) å°±<code>æŒ‡å‡ºäº†ä¸€å€‹éŒ¯èª¤çš„é¡å‹æŒ‡æ´¾</code>ï¼Œä¸¦å‘ŠçŸ¥ä½ æœ‰éŒ¯èª¤ç¨‹å¼ç¢¼çš„ä½ç½®ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964299_7ee542dbc3_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=eslint-è¨­ç½®-linter>ESLint è¨­ç½® Linter</h3><p><img src=https://live.staticflickr.com/65535/52616698096_7b89a76f54_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ESLint æ˜¯ä¸€å€‹ <code>JavaScript Linter</code>ï¼Œå®ƒç”¨ä¾†æª¢æŸ¥ JavaScript Coding Style çš„å·¥å…·ï¼Œä¸»è¦èƒ½å¹«ä½ <code>åˆ†æä¸¦æ‰¾åˆ°èªæ³•éŒ¯èª¤</code>ï¼Œä¹Ÿèƒ½ç”¨ä¾†<code>çµ±ä¸€é¢¨æ ¼</code>ï¼Œä¾‹å¦‚ï¼šç¸®æ’ç©ºç™½æ•¸ã€å­—ä¸²è¦ç”¨å–®å¼•è™Ÿæˆ–é›™å¼•è™Ÿç­‰ï¼Œæé†’ä½ åˆªæ‰å¤šé¤˜ç¨‹å¼ç¢¼æˆ–éµç…§æœ€ä½³çš„å¯¦è¸æ–¹å¼ï¼Œç¢ºä¿ç¨‹å¼ç¢¼èƒ½å…·æœ‰ä¸€å®šçš„æ°´æº–ã€‚åœ¨åœ˜éšŠå”ä½œä¸‹ ESLint æ›´èƒ½è®“å¤§å®¶æ’°å¯«ç¨‹å¼ç¢¼æ™‚éµç…§è¦å‰‡ï¼Œç¢ºä¿ç¨‹å¼ç¢¼å“è³ªã€‚ESLint é™¤äº†æä¾›ä½ å¯ä»¥ä½¿ç”¨å¤§å…¬å¸å¦‚ Googleã€Airbnb ç­‰çš„è¦å‰‡é…ç½®ä¾†ä½œç‚ºæª¢æŸ¥åŸºæº–ï¼Œä¹Ÿå¯ä»¥å®¢è£½è‡ªè¨‚å‡ºè‡ªå·±å–œå¥½æˆ–åœ˜éšŠå…±è­˜çš„è¦å‰‡ä¾†åˆ†æèˆ‡æé†’ä½ æ ¡æ­£èªæ³•ã€‚</p><h4 id=step-1-å®‰è£-eslint-å¥—ä»¶>Step 1. å®‰è£ ESLint å¥—ä»¶</h4><p>ç¾åœ¨æˆ‘å€‘è‡³ Nuxt å°ˆæ ¹ç›®éŒ„ä¸‹ï¼Œé–‹å§‹å®‰è£ ESLint ç›¸é—œå¥—ä»¶ï¼Œç•¶ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‘è‡ªå·±å–œæ­¡çš„é€²è¡Œé…ç½®ï¼Œä¸éåœ¨é€™è£¡é¸æ“‡ä»¥ Nuxt 3 å®˜æ–¹æä¾›çš„ ESLint è¨­å®šä¾†åšæ¨™æº–é…ç½®ï¼Œä¸¦æ·»åŠ æ”¯æ´ Vue 3 çš„ ESLint è¨­å®šã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D eslint @nuxtjs/eslint-config-typescript eslint-plugin-vue
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D eslint @nuxtjs/eslint-config-typescript eslint-plugin-vue</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-é…ç½®-eslint-è¨­å®šæª”>Step 2. é…ç½® ESLint è¨­å®šæª”</h4><p>å®‰è£å®Œæ‰€éœ€å¥—ä»¶å¾Œï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±å¯ä»¥ä¾†è¨­å®š ESLintï¼Œæˆ‘å€‘åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ <code>.eslintrc.js</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>env</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>browser</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>es2021</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;@nuxtjs/eslint-config-typescript&#39;</span><span class=p>,</span> <span class=s1>&#39;plugin:vue/vue3-recommended&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>parserOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ecmaVersion</span><span class=o>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>sourceType</span><span class=o>:</span> <span class=s1>&#39;module&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nx>rules</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nx>overrides</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>files</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/pages/**/*.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/layouts/**/*.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/app.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/error.{js,ts,vue}&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>rules</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;vue/multi-word-component-names&#39;</span><span class=o>:</span> <span class=s1>&#39;off&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æˆ‘å€‘å»ºç«‹çš„ <code>.eslintrc.js</code> æª”æ¡ˆä¸­ <code>extends</code> å¯ä»¥æ˜¯ä¸€å€‹é™£åˆ—ï¼Œä¸»è¦æ˜¯ä¾†æ”¾ç½®<code>æ“´å±•</code> ESLint çš„è¦å‰‡çš„é…ç½®ï¼Œé€™è£¡ç¨å¾®æ³¨æ„ä¸€ä¸‹é †åºå¦‚ä¸‹ï¼š</p><ol><li><p><strong>@nuxtjs/eslint-config-typescript</strong>ï¼šå°æ‡‰ <a class=link href=https://www.npmjs.com/package/@nuxtjs/eslint-config-typescript target=_blank rel=noopener>@nuxtjs/eslint-config-typescript</a> å¥—ä»¶ï¼Œç”± Nuxt å®˜æ–¹æä¾›ç”¨æ–¼ Nuxt çš„ ESLint è¦å‰‡é…ç½®ã€‚å¦‚æœä½ ä¸æ˜¯ä½¿ç”¨ TypeScript å¯ä»¥ä½¿ç”¨ <a class=link href=https://www.npmjs.com/package/@nuxtjs/eslint-config target=_blank rel=noopener>@nuxtjs/eslint-config</a>ã€‚</p></li><li><p><strong>plugin:vue/vue3-recommended</strong>ï¼šå°æ‡‰ <a class=link href=https://www.npmjs.com/package/eslint-plugin-vue target=_blank rel=noopener>eslint-plugin-vue</a> å¥—ä»¶ï¼Œç”± Vue.js å®˜æ–¹æä¾›çš„ ESLint <a class=link href=https://github.com/vuejs/eslint-plugin-vue target=_blank rel=noopener>æ’ä»¶</a>ï¼ŒåŒ…å«äº†èƒ½é…åˆ Vue SFC èªæ³•åŠç‰¹æ€§çš„è¦å‰‡ï¼Œä¹Ÿå¯ä»¥åƒè€ƒ<a class=link href=https://eslint.vuejs.org/user-guide/#bundle-configurations target=_blank rel=noopener>å®˜æ–¹æ–‡ä»¶</a>ï¼Œä¾æ“šéœ€æ±‚ç¨ä½œèª¿æ•´ã€‚</p></li></ol><p>å°‡ç‰¹å®šç›®éŒ„ä¸‹çš„æª”æ¡ˆé—œé–‰ <code>vue/multi-word-component-names</code> è¦å‰‡ï¼Œä»¥æ­¤ä¾†å› æ‡‰ nuxt çš„é–‹ç™¼é¿å…æç¤ºéŒ¯èª¤ã€‚</p><blockquote><p>å› ç‚ºç›®å‰ <a class=link href=https://www.npmjs.com/package/@nuxtjs/eslint-config-typescript target=_blank rel=noopener>@nuxtjs/eslint-config-typescript</a> æ˜¯åŸºæ–¼ <a class=link href=https://www.npmjs.com/package/@nuxtjs/eslint-config target=_blank rel=noopener>@nuxtjs/eslint-config</a> ä¾†æ“´å±• TypeScript çš„è¨­å®šï¼Œè€Œä¸” <a class=link href=https://www.npmjs.com/package/@nuxtjs/eslint-config target=_blank rel=noopener>@nuxtjs/eslint-config</a> åŒ…å«çš„æ˜¯ Vue 2 çš„ ESLint è¨­å®šï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦å†é¡å¤–å®‰è£ <a class=link href=https://www.npmjs.com/package/eslint-plugin-vue target=_blank rel=noopener>eslint-plugin-vue</a> ä¾†æ“´å±• Vue 3 è¦å‰‡é…ç½®ï¼Œä¸¦è¦†å¯« <strong>vue/multi-word-component-names</strong> è¦å‰‡ã€‚</p></blockquote><h4 id=ç”¨-eslint-ä¾†å˜—è©¦æª¢æŸ¥>ç”¨ ESLint ä¾†å˜—è©¦æª¢æŸ¥</h4><p>é¦–å…ˆï¼Œæˆ‘å€‘ç·¨è¼¯ <code>app.vue</code> æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;ts&#34;</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>year</span><span class=o>:</span> <span class=nx>number</span> <span class=o>=</span> <span class=mi>2022</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span><span class=o>:</span> <span class=nx>string</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>year</span><span class=si>}</span><span class=sb> iThome éµäººè³½`</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ä¾†ä½¿ç”¨ eslint æª¢æŸ¥ <code>app.vue</code> é€™å€‹æª”æ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx eslint -- app.vue
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ä¸‹åœ–ï¼ŒESLint æŒ‡å‡º <code>app.vue</code> çš„å•é¡Œï¼Œåœ¨ç¬¬ 9 è¡Œä¸­çš„ <code>title</code> é€™å€‹è®Šæ•¸å·²ç¶“å®£å‘Šäº†å»æ²’æœ‰è¢«ä½¿ç”¨ã€‚</p><p>é€™å€‹éŒ¯èª¤è¨Šæ¯æ­£æ˜¯ä¾æ“šä¸Šé¢æˆ‘å€‘çš„ ESLint é…ç½®æ‰€è¢«æª¢è¦–å‡ºä¾†çš„ï¼Œåœ¨ ESLint è¦å‰‡å®šç¾©å¥½å¾Œï¼Œä¹Ÿæœ‰åˆ†æˆéŒ¯èª¤ (Error) èˆ‡è­¦å‘Š (Warning)ï¼Œæˆ‘å€‘å¯ä»¥å†ä¾æ“š ESLint çµ¦äºˆçš„æç¤ºé€²è¡Œèª¿æ•´èˆ‡ä¿®æ­£ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188177_46465e3ffe_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æˆ‘å€‘å˜—è©¦ä¿®æ­£ä¸€ä¸‹ <code>app.vue</code> é€™å€‹æª”æ¡ˆï¼Œåœ¨ template ä¸­ä½¿ç”¨ title é€™å€‹è®Šæ•¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;{{</span> <span class=nx>title</span> <span class=p>}}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;ts&#34;</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>year</span><span class=o>:</span> <span class=nx>number</span> <span class=o>=</span> <span class=mi>2022</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span><span class=o>:</span> <span class=nx>string</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>year</span><span class=si>}</span><span class=sb> iThome éµäººè³½`</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å†ä¸€æ¬¡åŸ·è¡Œ <code>npx eslint -- app.vue</code>ï¼Œå°±æœƒç™¼ç¾æ²’æœ‰éŒ¯èª¤è¨Šæ¯ç”¢ç”Ÿå›‰ï¼</p><h3 id=åœ¨-packagejson-è¨­ç½®è…³æœ¬>åœ¨ package.json è¨­ç½®è…³æœ¬</h3><p>æˆ‘å€‘é™¤äº†é€å€‹æª”æ¡ˆåšæª¢æŸ¥ï¼Œä¹Ÿå¯ä»¥è¨­ç½®è…³æœ¬ä¾†æª¢æŸ¥æ•´å€‹å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ç¨‹å¼ç¢¼ã€‚</p><p>åœ¨ <code>package.json</code> çš„ scripts è…³æœ¬ä¸­ï¼Œæˆ‘å€‘å¯ä»¥æ–°å¢ä¸€å€‹æŒ‡ä»¤ <code>"lint": "eslint --ext .ts,.js,.vue ."</code>ï¼Œé€™æ¨£ä¸€ä¾†æˆ‘å€‘å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ä¾†æª¢æŸ¥å°ˆæ¡ˆç›®éŒ„ä¸‹çš„æ‰€æœ‰åŒ…å« <strong>.ts</strong>ã€<strong>.js</strong>ã€<strong>.vue</strong> å‰¯æª”åçš„æª”æ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run lint
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run lint</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åœ¨-vs-code-ä¸­é¡¯ç¤º-eslint-éŒ¯èª¤æˆ–è­¦å‘Š>åœ¨ VS Code ä¸­é¡¯ç¤º ESLint éŒ¯èª¤æˆ–è­¦å‘Š</h3><p>æ¨è–¦å¤§å®¶å®‰è£ VS Code çš„ ESLint æ’ä»¶ï¼š</p><ul><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target=_blank rel=noopener>ESLint</a>ï¼šè®“ä½ åœ¨ç·¨è¼¯å™¨é–‹ç™¼æ™‚å°±èƒ½æœ‰æŒ‡ä»¤æª¢æŸ¥ï¼Œæ›´å¯ä»¥åšåˆ°å…¨åŸŸæˆ–ç‰¹å®šå·¥ä½œå€é–‹å•Ÿå„²å­˜æˆ–å¿«æ·éµè‡ªå‹•ä¿®æ­£ç¨‹å¼ç¢¼ç­‰è¨­ç½®ã€‚</li></ul><blockquote><p>å®‰è£å®Œç•¢å¾Œï¼Œå»ºè­°é‡å•Ÿ VS Code ä¾†é‡æ–°è¼‰å…¥ç›¸é—œè¨­å®šã€‚</p></blockquote><p>ç¾åœ¨ï¼Œä½ æœƒç™¼ç¾åœ¨ VS Code ä¸­ç·¨è¼¯ç¨‹å¼çš„éç¨‹ä¸­ï¼Œå¦‚æœæœ‰ ESLint æª¢æŸ¥åˆ°çš„éŒ¯èª¤æˆ–å»ºè­°ï¼Œå°±æœƒå‡ºç¾<code>ç´…è‰²æˆ–é»ƒè‰²çš„æ³¢æµªåº•ç·š</code>ï¼Œç•¶æ»‘é¼ æŒ‡æ¨™ç§»å‹•è‡³æ³¢æµªåº•ç·šè™•ï¼Œå°±æœƒç™¼ç¾æœ‰å€‹å°è¦–çª—æç¤ºä½ éŒ¯èª¤æˆ–è­¦å‘Šçš„åŸå› æ˜¯ä»€éº¼ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186373_67101210bd_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=åœ¨-vs-code-ä¸­è‡ªå‹•ä¿®æ­£-eslint-éŒ¯èª¤æˆ–è­¦å‘Š>åœ¨ VS Code ä¸­è‡ªå‹•ä¿®æ­£ ESLint éŒ¯èª¤æˆ–è­¦å‘Š</h3><p>åœ¨æŸäº›æƒ…æ³ï¼ŒESLint å¯ä»¥å¹«åŠ©ä½ åšè‡ªå‹•ä¿®æ­£ç¨‹å¼ç¢¼ï¼Œç”šè‡³åœ¨å­˜æ“‹æ™‚å°‡éŒ¯èª¤éƒ¨åˆ†ç›´æ¥é€²è¡Œä¿®æ­£ã€‚</p><h4 id=æ‰‹å‹•å¿«é€Ÿä¿®æ­£>æ‰‹å‹•å¿«é€Ÿä¿®æ­£</h4><p>æˆ‘å€‘å¯ä»¥åœ¨ç·¨è¼¯å™¨å°‡æ»‘é¼ æŒ‡æ¨™ç§»å‹•è‡³æ³¢æµªåº•ç·šé»æ“Šã€Œ<strong>å¿«é€Ÿä¿®æ­£ (Quick Fix)&mldr;</strong>ã€ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç·¨è¼¯å™¨å»ºè­°çš„å¿«æ·éµ <strong>Command + . (macOS)</strong>ï¼Œæ­¤æ™‚å°±èƒ½é¸æ“‡è¦ä¿®å¾©æˆ–é—œé–‰ç•¥ééŒ¯èª¤åŸå› ï¼›é€™è£¡æˆ‘å€‘é¸æ“‡ã€Œ<strong>Fix all auto-fixable problems</strong>ã€ï¼Œä¾†ä¿®å¾©æ‰€æœ‰å¯èƒ½å¯ä»¥è¢«è‡ªå‹•ä¿®å¾©çš„å•é¡Œã€‚</p><p><img src=https://live.staticflickr.com/65535/52617134545_8b88fdc93b_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=å­˜æ“‹è‡ªå‹•ä¿®æ­£>å­˜æ“‹è‡ªå‹•ä¿®æ­£</h4><p>é™¤äº†æ‰‹å‹•å¿«é€Ÿä¿®æ­£å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€éæ·»åŠ  VS Code çš„è¨­å®šæª”ï¼Œå¦‚å°ˆæ¡ˆç›®éŒ„ä¸‹æ–°å¢ <code>.vscode/settings.json</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;editor.formatOnSave&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;prettier.semi&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;files.trimTrailingWhitespace&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;editor.defaultFormatter&#34;</span><span class=p>:</span> <span class=s2>&#34;esbenp.prettier-vscode&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;editor.codeActionsOnSave&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;source.fixAll.eslint&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;eslint.format.enable&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;eslint.validate&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;javascript&#34;</span><span class=p>,</span> <span class=s2>&#34;javascriptreact&#34;</span><span class=p>,</span> <span class=s2>&#34;html&#34;</span><span class=p>,</span> <span class=s2>&#34;vue&#34;</span><span class=p>,</span> <span class=s2>&#34;typescript&#34;</span><span class=p>,</span> <span class=s2>&#34;typescriptreact&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;eslint.enable&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘ç·¨è¼¯å®Œç¨‹å¼ç¢¼ï¼Œä¸¦ä¿å­˜æª”æ¡ˆæˆ–å¿«æ·éµå­˜æ“‹ <strong>Command + S (macOS)</strong>ï¼Œå°±æœƒè§¸ç™¼ ESLint è‡ªå‹•ä¿®å¾©å›‰ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698136_f967028caa_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=prettier-è¨­ç½®>Prettier è¨­ç½®</h3><p><img src=https://live.staticflickr.com/65535/52617186383_1c8d988fe4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>Prettier æ˜¯ç¨‹å¼ç¢¼æ ¼å¼åŒ–çš„å·¥å…·ï¼Œä¹Ÿå¯ä»¥èˆ‡ ESLint é€²è¡Œæ­é…ï¼ŒESLint èˆ‡ Prettier å°±èƒ½å„å¸å…¶è·å°‡ JaveScript èˆ‡ Vue ç­‰æª”æ¡ˆä¾ç…§é…ç½®é€²è¡Œæª¢æŸ¥èˆ‡æ’ç‰ˆã€‚</p><h4 id=step-1-å®‰è£-prettier-å¥—ä»¶>Step 1. å®‰è£ Prettier å¥—ä»¶</h4><p>æˆ‘å€‘ç›´æ¥å®‰è£ prettierã€eslint-config-prettier èˆ‡ eslint-plugin-prettier ä¸‰å€‹å¥—ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D prettier eslint-config-prettier eslint-plugin-prettier
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D prettier eslint-config-prettier eslint-plugin-prettier</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-é…ç½®-prettier-è¨­å®šæª”æ¡ˆ>Step 2. é…ç½® Prettier è¨­å®šæª”æ¡ˆ</h4><p>æˆ‘å€‘åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ <code>.prettierrc.js</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼Œé€™äº›é…ç½®éƒ½å¯ä»¥è‡ªå·±è¨­å®šä¾†é…åˆ ESLintï¼Œæ›´å¤šé¸é …æˆ–èªªæ˜å¯ä»¥åƒè€ƒ <a class=link href=https://prettier.io/docs/en/options.html target=_blank rel=noopener>Prettier å®˜æ–¹èªªæ˜æ–‡ä»¶</a>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>printWidth</span><span class=o>:</span> <span class=mi>120</span><span class=p>,</span> <span class=c1>// æ¯è¡Œæ–‡å­—æ•¸é‡é” 100 å­—å…ƒå°±æ›åˆ°æ–°çš„ä¸€è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>semi</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>// æ¯å€‹èªå¥çš„çµå°¾ä¸éœ€è¦åˆ†è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>singleQuote</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>// å­—ä¸²ä½¿ç”¨å–®å¼•è™Ÿï¼Œè€Œä¸æ˜¯é›™å¼•è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>trailingComma</span><span class=o>:</span> <span class=s2>&#34;none&#34;</span><span class=p>,</span> <span class=c1>// å¦‚ Objectã€Array å…§çš„å…ƒç´ ä¸éœ€è¦å°¾éš¨é€—è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>endOfLine</span><span class=o>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>vueIndentScriptAndStyle</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-é…ç½®-eslint-è¨­å®šæª”æ¡ˆ>Step 3. é…ç½® ESLint è¨­å®šæª”æ¡ˆ</h4><p>æˆ‘å€‘åœ¨å®‰è£æ™‚å¤šè£äº†å…©å€‹ ESLint ç›¸é—œå¥—ä»¶ï¼Œåˆ†åˆ¥ç‚º <a class=link href=https://github.com/prettier/eslint-config-prettier target=_blank rel=noopener>eslint-config-prettier</a> åŠ <a class=link href=https://www.npmjs.com/package/eslint-plugin-prettier target=_blank rel=noopener>eslint-plugin-prettier</a>ã€‚</p><p>å°æ­¤æˆ‘å€‘éœ€è¦å°‡å…¶æ·»åŠ è‡³ ESLint çš„ <code>.eslintrc.js</code> è¨­å®šæª”å…§ï¼Œåœ¨ <code>extends</code> æ·»åŠ å­—ä¸² <code>prettier</code> è¡¨ç¤ºä½¿ç”¨ <a class=link href=https://github.com/prettier/eslint-config-prettier target=_blank rel=noopener>eslint-config-prettier</a> æ“´å……é…ç½®ï¼Œä¸»è¦ç”¨ä¾†é˜²æ­¢ Prettier æ’ç‰ˆèˆ‡ ESLint ç™¼ç”Ÿè¡çªï¼Œè®“å…¶å¯ä»¥ç”¨ä¾†ç¦ç”¨ ESLint çš„æ ¼å¼åŒ–ï¼›æ¥è‘—åœ¨ <code>plugins</code> ä¸­æ·»åŠ  <code>prettier</code> å­—ä¸²è¡¨ç¤ºä½¿ç”¨ <a class=link href=https://www.npmjs.com/package/eslint-plugin-prettier target=_blank rel=noopener>eslint-plugin-prettier</a> å¥—ä»¶æ“´å……ï¼Œè®“ ESLint å¯ä»¥æç¤ºæˆ‘å€‘æ ¼å¼æœ‰éŒ¯èª¤çš„åœ°æ–¹ã€‚</p><p>ç‚ºäº†è®“ Prettier èˆ‡ ESLint æœ‰æ›´å¥½çš„æ­é…ï¼Œåœ¨ <code>rules</code> çš„åƒæ•¸ä¸­è¨˜å¾—æ·»åŠ  <code>'prettier/prettier': 'error'</code> è®“ ESLint å¯ä»¥æç¤º Prettier çš„æ’ç‰ˆç•°å¸¸æç¤ºä¾›æˆ‘å€‘åšä¿®æ­£ï¼Œè‡³æ­¤ <code>.eslintrc.js</code> è¨­å®šæª”æ‡‰è©²æœƒå¦‚ä¸‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>env</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>browser</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>es2021</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;@nuxtjs/eslint-config-typescript&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;plugin:vue/vue3-recommended&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;prettier&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>parserOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ecmaVersion</span><span class=o>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>sourceType</span><span class=o>:</span> <span class=s1>&#39;module&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;prettier&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>rules</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;prettier/prettier&#39;</span><span class=o>:</span> <span class=s1>&#39;error&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>overrides</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>files</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/pages/**/*.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/layouts/**/*.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/app.{js,ts,vue}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;**/error.{js,ts,vue}&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>rules</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;vue/multi-word-component-names&#39;</span><span class=o>:</span> <span class=s1>&#39;off&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-4-å®‰è£-vs-code-çš„-prettier-æ’ä»¶>Step 4. å®‰è£ VS Code çš„ Prettier æ’ä»¶</h4><ul><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target=_blank rel=noopener>Prettier - Code formatter</a>ï¼šæä¾›æˆ‘å€‘åšç¨‹å¼ç¢¼çš„æ ¼å¼åŒ–ï¼Œæœ€é‡è¦çš„æ˜¯ä¾†å”åŠ©æˆ‘å€‘è‡ªå‹•è¼‰å…¥ <code>.prettierrc.js</code> é…ç½®ã€‚</li></ul><blockquote><p>å®‰è£å®Œç•¢å¾Œï¼Œå»ºè­°é‡å•Ÿ VS Code ä¾†é‡æ–°è¼‰å…¥ç›¸é—œè¨­å®šã€‚</p></blockquote><p>æˆ‘å€‘å®Œæˆäº† TypeScript èˆ‡ Linter çš„é…ç½®ï¼Œé›–ç„¶é…ç½®æœ‰äº›ç¹ç‘£ï¼Œä½†å¯«ç¨‹å¼çš„é¢¨æ ¼æœ‰å€‹æ¨™æº–åŠè¦å‰‡ä¾å¾ªï¼Œè‚¯å®šèƒ½å”åŠ©ä½ å¯«å‡ºä»¤äººè®šå˜†çš„å®Œç¾çš„ç¨‹å¼ç¢¼ã€‚</p><hr><h2 id=ä½¿ç”¨-tailwind-css>ä½¿ç”¨ Tailwind CSS</h2><p><img src=https://live.staticflickr.com/65535/52617186403_1fa6ef95d7_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç‚ºäº†å¾ŒçºŒç¯„ä¾‹ç¨‹å¼åœ¨é é¢å‘ˆç¾ä¸Šèƒ½æœ‰æ¯”è¼ƒå¥½çœ‹çš„æ¨£å¼ï¼ŒåŸå…ˆæœ‰æƒ³éä½¿ç”¨ UI æ¡†æ¶æˆ–ç´”å¯« CSSï¼Œä½†æ˜¯ç¸½è¦ºå¾—å¥½åƒä¸å¤ æ½®ï¼Œæ‰€ä»¥å‘¢ï¼Œæˆ‘æ±ºå®šå¸¶å…¥è¿‘å¹´æ»¿ç†±é–€çš„ CSS æ¡†æ¶ <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a>ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« æˆ‘å°±ä¸å†å¤šèŠ±ç¯‡å¹…ä»‹ç´¹ <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind</a> çš„èªæ³•åŠæŒ‡ä»¤ç­‰ï¼Œä¸»è¦é‡å° Nuxt 3 å¦‚ä½•å°å…¥ <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a> è‡³å°ˆæ¡ˆå…§ä½¿ç”¨ã€‚</p><p>å…¶å¯¦æœ‰ç¨å¾®ç³¾çµä¸€ä¸‹è¦ä¸è¦ä½¿ç”¨ <a class=link href=https://css.master.co/tw target=_blank rel=noopener>Master CSS</a>ï¼Œé›–ç„¶æœ€å¾Œæ±ºå®šå…ˆç·©ç·©ï¼Œä½†æˆ‘èªç‚ºå®ƒéå¸¸æœ‰æ·ºåŠ›æˆç‚ºé€™é¡æ¡†æ¶çš„éœ¸ä¸»ï¼Œå¤§å®¶æœ‰ç©ºä¹Ÿå¯ä»¥æ”¯æŒä¸€ä¸‹æˆ–ç©ç©é€™å€‹ç”±è‡ºç£åœ˜éšŠé–‹ç™¼çš„ CSS æ¡†æ¶å“¦ï¼</p><p><a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a> æ˜¯è¿‘å¹´æ»¿ç†±é–€çš„ <code>Utility-First CSS</code> æ¡†æ¶ï¼Œæ›¾æ€èµ·ä¸€ç•ªè«–æˆ°èªª Class ä¸æ˜¯è®“ä½ é€™æ¨£ç”¨çš„ä¹‹é¡çš„æ‰¹è©•åŠç¼ºé»ï¼Œä½†å¦‚æœä½ æ·±å…¥æš¸è§£å®ƒå¾Œï¼Œç¢ºå¯¦ä¸å¯å¦èªå®ƒèƒ½ç‚ºä½ å¸¶ä¾†æ›´å¥½çš„ç”Ÿç”¢æ•ˆç‡ç­‰è«¸å¤šå„ªé»ã€‚</p><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘æœƒåˆ†åˆ¥ä»‹ç´¹å…©ç¨®å°å…¥ <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a> æ–¹å¼ï¼Œåˆ†åˆ¥ç‚º <strong>Nuxt Community é‡‹å‡ºçš„ Tailwind CSS æ•´åˆæ¨¡çµ„</strong> åŠ <strong>Tailwind CSS å®˜æ–¹æŒ‡å¼•æ­¥é©Ÿ</strong>ï¼Œä»¥ä¸‹çš„ <strong>A</strong> æˆ– <strong>B</strong> å…©ç¨®å°å…¥æ–¹å¼ï¼Œå¤§å®¶åªè¦<code>æ“‡ä¸€</code>å°±å¯ä»¥äº†ã€‚</p><h3 id=ä½¿ç”¨-nuxt-tailwind-æ¨¡çµ„>ä½¿ç”¨ Nuxt Tailwind æ¨¡çµ„</h3><h4 id=step-1-å®‰è£ç›¸é—œå¥—ä»¶>Step 1. å®‰è£ç›¸é—œå¥—ä»¶</h4><p>é¦–å…ˆå®‰è£ <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D @nuxtjs/tailwindcss
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D @nuxtjs/tailwindcss</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-æ·»åŠ æ¨¡çµ„è‡³-nuxtconfigts>Step 2. æ·»åŠ æ¨¡çµ„è‡³ nuxt.config.ts</h4><p>æ‰“é–‹ <code>./nuxt.config.ts</code> å°‡ <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> æ¨¡çµ„æ·»åŠ è‡³ <code>modules</code> è¨­å®šåƒæ•¸ä¸­ï¼Œå®Œæˆå¾Œçœ‹èµ·ä¾†æœƒåƒä¸‹é¢é€™æ¨£ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// https://v3.nuxtjs.org/api/configuration/nuxt.config
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kr>module</span><span class=nx>s</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;@nuxtjs/tailwindcss&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>typescript</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>typeCheck</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-é‡å•Ÿ-nuxt-æœå‹™>Step 3. é‡å•Ÿ Nuxt æœå‹™</h4><p>é‡æ–°å•Ÿå‹•æˆ‘å€‘çš„ Nuxt æœå‹™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run dev -- -o
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run dev -- -o</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> åªéœ€è¦å…©å€‹æ­¥é©Ÿå°±å®Œæˆäº† <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a> çš„é…ç½®ï¼Œé€™å€‹æ¨¡çµ„å·²ç¶“åŒ…å«æ‰‹å‹•å®‰è£æ™‚éœ€è¦å»ºç«‹çš„ <a class=link href=https://tailwindcss.com/ target=_blank rel=noopener>Tailwind CSS</a> æŒ‡ä»¤ <code>tailwindcss.css</code> éœ€è¦çš„å…¨åŸŸè¨­å®šèˆ‡ PostCSS åƒæ•¸é¸é …ï¼ŒåŒæ™‚ä¹Ÿé è¨­äº† <code>tailwind.config.js</code> çš„ç›¸é—œ <strong>content</strong> ç›®éŒ„è·¯å¾‘ï¼Œè©³ç´°å¯ä»¥åƒè€ƒ <a class=link href=https://github.com/nuxt-modules/tailwindcss target=_blank rel=noopener>Nuxt Tailwind</a>ã€‚</p><h4 id=æ“´å……æˆ–è¦†å¯«-nuxtjstailwindcss-é…ç½®>æ“´å……æˆ–è¦†å¯« @nuxtjs/tailwindcss é…ç½®</h4><blockquote><p>å¦‚æœä½ æ²’æœ‰ç‰¹åˆ¥éœ€è¦æ“´å……æˆ–è¦†å¯«è¨­å®šå¯ä»¥è·³éé€™ä¸€æ®µã€‚</p></blockquote><p>å°ˆæ¡ˆå…§è‹¥ä½¿ç”¨ <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> æ¨¡çµ„ï¼Œé€™å…©å€‹ <code>tailwind.css</code> èˆ‡ <code>tailwind.config.js</code> æª”æ¡ˆå…¶å¯¦æ¨¡çµ„å·²ç¶“æœ‰é è¨­ï¼Œä¸éœ€è¦æ‰‹å‹•å»ºç«‹ï¼Œ<code>tailwind.css</code> å°æ‡‰æ¨¡çµ„å…§çš„ <strong>tailwind.css</strong> å¯ä»¥åƒè€ƒå°ˆæ¡ˆæª”æ¡ˆå…§å®¹ <a class=link href=https://github.com/nuxt-modules/tailwindcss/blob/main/src/runtime/tailwind.css target=_blank rel=noopener>tailwind.css</a>ï¼Œ<code>tailwind.config.js</code> å‰‡æ˜¯é€éæ¨¡çµ„å‹•æ…‹æ–°å¢é…ç½®ã€‚</p><p>å€˜è‹¥æƒ³è¦ä¿®æ”¹ä¹Ÿå¯ä»¥é€éå»ºç«‹è¨­å®šæª”æ¡ˆä¾†æ–°å¢æˆ–è¦†å¯«é è¨­å®šï¼Œä¾‹å¦‚åœ¨å°ˆæ¡ˆä¸‹åˆ†åˆ¥å»ºç«‹ <code>tailwind.css</code> èˆ‡ <code>tailwind.config.js</code> å…©å€‹æª”æ¡ˆï¼š</p><ul><li>tailwind.css</li></ul><p>å°ˆæ¡ˆç›®éŒ„ä¸‹è‹¥å­˜åœ¨è·¯å¾‘æª”åä¸€è‡´çš„ <code>./assets/css/tailwind.css</code> æª”æ¡ˆï¼Œ<a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> å°±æœƒä»¥é€™å€‹æª”æ¡ˆå–ä»£æ¨¡çµ„å…§é è¨­çš„ <code>tailwind.css</code> æª”æ¡ˆã€‚</p><p><code>tailwind.css</code> é è¨­å…§å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>base</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>components</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>utilities</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæœ‰æˆåŠŸè¦†è“‹é…ç½®ï¼Œåœ¨é‡å•Ÿ Nuxt 3 æœå‹™æ™‚ï¼ŒTerminal æœƒæç¤ºä¸‹åˆ—å­—ä¸²ï¼Œè¡¨ç¤ºä½¿ç”¨äº†è‡ªè¨‚çš„ <code>tailwind.css</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Using Tailwind CSS from ~/assets/css/tailwind.css
</span></span></code></pre></td></tr></table></div></div><ul><li>tailwind.config.js</li></ul><p>å°ˆæ¡ˆç›®éŒ„ä¸‹è‹¥å­˜åœ¨ <code>tailwind.config.js</code> æª”æ¡ˆå°±æœƒä»¥æ–°çš„é…ç½®æ‹“å±•æˆ–è¦†å¯« <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> é è¨­çš„ <code>tailwind.config</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘æƒ³æ‹“å±•æˆ–è¦†å¯« content çš„é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=cm>/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>content</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./components/**/*.{vue,js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./layouts/**/*.vue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./pages/**/*.vue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./composables/**/*.{js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./plugins/**/*.{js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./app.{js,ts,vue}&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>extend</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=tailwind-css-å®˜æ–¹æŒ‡å¼•æ­¥é©Ÿ>Tailwind CSS å®˜æ–¹æŒ‡å¼•æ­¥é©Ÿ</h3><blockquote><p>å¦‚æœä½ å·²ç¶“ä½¿ç”¨äº† <a class=link href=https://www.npmjs.com/package/@nuxtjs/tailwindcss target=_blank rel=noopener>@nuxtjs/tailwindcss</a> é€²è¡Œé…ç½®ï¼Œå‰‡å¯ä»¥è·³éé€™ä¸€æ®µã€‚</p></blockquote><h4 id=step-1-å®‰è£ç›¸é—œå¥—ä»¶-1>Step 1. å®‰è£ç›¸é—œå¥—ä»¶</h4><p>é¦–å…ˆé€²å…¥æˆ‘å€‘çš„ Nuxt å°ˆæ¡ˆç›®éŒ„ï¼Œä¸¦å®‰è£ Tailwind CSS æœƒä½¿ç”¨åˆ°çš„ä¸€äº›ç›¸é—œå¥—ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D tailwindcss postcss@latest postcss-custom-properties@latest autoprefixer@latest
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D tailwindcss postcss@latest postcss-custom-properties@latest autoprefixer@latest</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-å»ºç«‹-tailwindconfigjs>Step 2. å»ºç«‹ tailwind.config.js</h4><p>å®‰è£å®Œå¥—ä»¶å¾Œï¼Œå¯ä»¥åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤é€²è¡Œåˆå§‹åŒ–ï¼Œå®Œæˆå¾Œæœƒåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹ç”¢ç”Ÿä¸€å€‹åç‚º <code>tailwind.config.js</code> çš„ Tailwind CSS è¨­å®šæª”ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx tailwindcss init
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-èª¿æ•´-tailwindconfigjs>Step 3. èª¿æ•´ tailwind.config.js</h4><p>æ‰“é–‹å‰›å‰›ç”¢ç”Ÿçš„è¨­å®šæª” <code>tailwind.config.js</code>ï¼Œåœ¨é…ç½®ä¸­çš„ <code>content</code> é™£åˆ—æ·»åŠ ä¸€äº›è·¯å¾‘ï¼Œé€™äº›è·¯å¾‘çš†æ˜¯è·Ÿ Nuxt æœ‰é—œçš„è³‡æ–™å¤¾ç›®éŒ„èˆ‡æª”æ¡ˆï¼Œå®Œæˆå¾Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=cm>/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>content</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./components/**/*.{vue,js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./layouts/**/*.vue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./pages/**/*.vue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./composables/**/*.{js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./plugins/**/*.{js,ts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;./app.{js,ts,vue}&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>extend</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-4-å»ºç«‹-tailwindcss>Step 4. å»ºç«‹ tailwind.css</h4><p>æ¥è‘—æˆ‘å€‘åœ¨å°ˆæ¡ˆå»ºç«‹ç›®éŒ„ <strong>assets</strong> èˆ‡å­ç›®éŒ„ <strong>css</strong> ç”¨ä¾†æ”¾ç½® Tailwind CSS çš„è‡ªå®šç¾©æŒ‡ä»¤ï¼Œæˆ‘å€‘å°‡å…¶æ”¾ç½®åœ¨ <strong>tailwind.css</strong> ä¾›å¾ŒçºŒåšä½¿ç”¨ï¼Œ<strong>tailwind.css</strong> çš„è·¯å¾‘æ‡‰æœƒæ˜¯ <code>./assets/css/tailwind.css</code> æª”æ¡ˆå…§å®¹å¦‚ä¸‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>base</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>components</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>tailwind</span> <span class=nt>utilities</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-5-é…ç½®å…¨åŸŸå…±ç”¨-css>Step 5. é…ç½®å…¨åŸŸå…±ç”¨ CSS</h4><p>ä¸Šé¢æˆ‘å€‘å»ºç«‹å¥½ <strong>tailwind.css</strong> å¾Œï¼Œç‚ºäº†è®“æ¯å€‹é é¢éƒ½å¯ä»¥åƒå¾—åˆ° Tailwind CSSï¼Œæˆ‘å€‘ä¿®æ”¹å°ˆæ¡ˆæ ¹ç›®éŒ„çš„ <code>nuxt.config.ts</code> æª”æ¡ˆï¼Œåœ¨ <code>css</code> åƒæ•¸é™£åˆ—å…§æ–°å¢ <code>tailwind.css</code> è·¯å¾‘ï¼Œè®“ Nuxt å¯ä»¥é…ç½®å…¨åŸŸå…±ç”¨çš„ CSSï¼Œä¸¦æ·»åŠ  <code>postcss</code> é¸é …åŠæˆ‘å€‘å‰›æ‰å®‰è£çš„å¥—ä»¶ä½œç‚ºæ’ä»¶ï¼Œæœ€å¾Œ <code>nuxt.config.ts</code> æª”æ¡ˆçœ‹èµ·ä¾†å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// https://v3.nuxtjs.org/api/configuration/nuxt.config
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>postcss</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>plugins</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;postcss-import&#39;</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;tailwindcss/nesting&#39;</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>      <span class=nx>tailwindcss</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>      <span class=nx>autoprefixer</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>css</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;@/assets/css/tailwind.css&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>typescript</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>typeCheck</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ï¼Œæˆ‘å€‘å°ˆæ¡ˆç›®éŒ„æª”æ¡ˆå¦‚ä¸‹çµæ§‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxt-app
</span></span><span class=line><span class=cl>â”œâ”€â”€ .nuxt/
</span></span><span class=line><span class=cl>â”œâ”€â”€ assets/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ css/
</span></span><span class=line><span class=cl>â”‚       â””â”€â”€ tailwind.css      // æ‰‹å‹•æ–°å¢çš„æª”æ¡ˆï¼Œç”¨æ–¼è¨­ç½® Tailwind CSS æŒ‡ä»¤ä¸¦è®“å…¨éƒ¨é é¢å¼•ç”¨
</span></span><span class=line><span class=cl>â”œâ”€â”€ node_modules/
</span></span><span class=line><span class=cl>â”œâ”€â”€ .eslintrc.js
</span></span><span class=line><span class=cl>â”œâ”€â”€ .gitignore
</span></span><span class=line><span class=cl>â”œâ”€â”€ .prettierrc.js
</span></span><span class=line><span class=cl>â”œâ”€â”€ app.vue
</span></span><span class=line><span class=cl>â”œâ”€â”€ nuxt.config.ts
</span></span><span class=line><span class=cl>â”œâ”€â”€ package-lock.json
</span></span><span class=line><span class=cl>â”œâ”€â”€ package.json
</span></span><span class=line><span class=cl>â”œâ”€â”€ README.md
</span></span><span class=line><span class=cl>â”œâ”€â”€ tailwind.config.js       // Tailwind åˆå§‹åŒ–æŒ‡ä»¤ç”¢ç”Ÿçš„è¨­å®šæª”
</span></span><span class=line><span class=cl>â””â”€â”€ tsconfig.json
</span></span></code></pre></td></tr></table></div></div><h4 id=step-6-é‡å•Ÿ-nuxt-æœå‹™>Step 6. é‡å•Ÿ Nuxt æœå‹™</h4><p>é‡æ–°å•Ÿå‹•æˆ‘å€‘çš„ Nuxt æœå‹™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run dev -- -o
</span></span></code></pre></td></tr></table></div></div><h3 id=é–‹å§‹æ„Ÿå—-tailwind-css-çš„é­…åŠ›>é–‹å§‹æ„Ÿå— Tailwind CSS çš„é­…åŠ›</h3><p>ç•¶æˆ‘å€‘é…ç½®å®Œ Tailwind CSS ä¸¦é‡å•Ÿ Nuxt æœå‹™å¾Œï¼Œæˆ‘å€‘ç·¨è¼¯ <code>app.vue</code> æª”æ¡ˆå…§å®¹ï¼Œæ’°å¯«ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-blue-600&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-900&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é‡æ–°ç€è¦½ä¸€æ¬¡ç¶²é ï¼Œå¯ä»¥ç™¼ç¾æ’ç‰ˆã€é¡è‰²ã€å­—å‹éƒ½æœ‰å‡ºç¾æˆ‘å€‘è¨­å®šçš„æ•ˆæœäº†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188202_d650c12b2b_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=è‡ªå‹•æ’åº-tailwind-css-çš„-class>è‡ªå‹•æ’åº Tailwind CSS çš„ Class</h3><p><img src=https://live.staticflickr.com/65535/52616964384_7ac2dd7e78_o.jpg max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç•¶æˆ‘å€‘åœ¨å¯« Tailwind CSS æ™‚çµ‚ç©¶æœƒç¢°åˆ°é¡å‹éå¤šï¼Œç¬¬ä¸€çœ¼ä¸ç¢ºå®šæ˜¯å¦åŒ…å«æŸå€‹ classï¼Œæˆ–è€…å°æ–¼é †åºä¸Šæœ‰å¼·çƒˆçµ±ä¸€çš„è¦æ±‚ï¼Œé‚£éº¼é€™å€‹ Prettier çš„<a class=link href=https://github.com/tailwindlabs/prettier-plugin-tailwindcss target=_blank rel=noopener>æ’ä»¶</a>ï¼Œ<code>prettier-plugin-tailwindcss</code> æ’ä»¶æ˜¯ Tailwind æ¨å‡ºçš„ï¼Œç›®çš„åœ¨æ–¼å¯ä»¥ä½¿ç”¨å®˜æ–¹æ¨è–¦çš„ class é †åºï¼Œä¾†å¯¦ç¾<code>è‡ªå‹•æ’åº class</code> ä¾†åšåˆ°çµ±ä¸€ç¨‹å¼ç¢¼é¢¨æ ¼ã€‚</p><h3 id=tailwind-x-prettier>Tailwind x Prettier</h3><h4 id=step-1-å®‰è£æ’ä»¶>Step 1. å®‰è£æ’ä»¶</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D prettier-plugin-tailwindcss
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D prettier-plugin-tailwindcss</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>å¦‚æœä½ ä¸æ˜¯ç…§è‘—å‰é¢çš„æ­¥é©Ÿå»ºç½®å°ˆæ¡ˆï¼Œè«‹è¨˜å¾—ç¢ºèªå·²ç¶“æœ‰å®‰è£ prettier å¥—ä»¶ã€‚</p></blockquote><h4 id=step-2-é…ç½®è¨­å®šæª”>Step 2. é…ç½®è¨­å®šæª”</h4><p>é–‹å•Ÿ <code>.prettierrc.js</code> æª”æ¡ˆï¼Œæ·»åŠ  <code>'prettier-plugin-tailwindcss'</code> è‡³ <code>plugins</code> é™£åˆ—ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;prettier-plugin-tailwindcss&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>printWidth</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span>          <span class=c1>// æ¯è¡Œæ–‡å­—æ•¸é‡é” 100 å­—å…ƒå°±æ›åˆ°æ–°çš„ä¸€è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>semi</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>              <span class=c1>// æ¯å€‹èªå¥çš„çµå°¾ä¸éœ€è¦åˆ†è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>singleQuote</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>        <span class=c1>// å­—ä¸²ä½¿ç”¨å–®å¼•è™Ÿï¼Œè€Œä¸æ˜¯é›™å¼•è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>trailingComma</span><span class=o>:</span> <span class=s1>&#39;none&#39;</span>     <span class=c1>// å¦‚ Objectã€Array å…§çš„å…ƒç´ ä¸éœ€è¦å°¾éš¨é€—è™Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-è‡ªå‹•ä¿®æ­£æ•ˆæœ>Step 3. è‡ªå‹•ä¿®æ­£æ•ˆæœ</h4><p>ä½ å¯ä»¥åœ¨ç·¨è¼¯å™¨å…§ç§»è‡³éŒ¯èª¤æ³¢æµªåº•ç·šä½¿ç”¨ã€Œ<strong>å¿«é€Ÿä¿®å¾© (Quick Fix)&mldr;</strong>ã€åŠŸèƒ½ï¼Œæˆ–è¨­ç½® <code>"editor.codeActionsOnSave"</code> ä¸­ <code>"source.fixAll.eslint": true</code> ä¾†é”åˆ°ä¿å­˜å¾Œè‡ªå‹•ä¿®æ­£ prettier å¼•ç™¼çš„ ESLint éŒ¯èª¤ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698186_25eebdd0f7_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å°çµ>å°çµ</h3><p>ç›¸è¼ƒæ–¼ Tailwind CSS å®˜æ–¹æŒ‡å¼•çš„å®‰è£æ–¹å¼ï¼Œä½¿ç”¨ Nuxt Community å¹«æˆ‘å€‘æ•´ç†å¥½çš„ <code>@nuxtjs/tailwindcss</code> æ¨¡çµ„ï¼Œå¯ä»¥çœå»ç¹ç‘£çš„è¨­å®šæ­¥é©Ÿï¼Œä¹Ÿè§£æ±ºäº†ä¸€äº›ç›®å‰ Nuxt 3 å°ˆæ¡ˆä¸­ï¼Œå°å…¥ Tailwind CSS ä½¿ç”¨ HMR å¯èƒ½ç„¡æ³•è‡ªå‹•ç·¨è­¯ä¸¦é‡æ–°å¥—ç”¨ç­‰å•é¡Œã€‚</p><hr><h2 id=ä½¿ç”¨-pug>ä½¿ç”¨ Pug</h2><p><img src=https://live.staticflickr.com/65535/52616698191_9faacb41c6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><a class=link href=https://pugjs.org/ target=_blank rel=noopener>pug</a> ç‚º html æ¨¡æ¿èªè¨€ï¼Œå¯æ”¯æ´æ’°å¯« JS é‚è¼¯ã€‚å¯«æ³•ä¸Šï¼Œçœç•¥äº† HTML çš„é–‹ã€é–‰åˆæ¨™ç±¤ï¼Œèƒ½å¤ å¤§å¤§çš„æå‡å·¥ç¨‹å¸«é–‹ç™¼é€Ÿåº¦ï¼Œçœ‹ä¸Šå»ä¹Ÿæ›´ç‚ºç°¡æ½”ã€‚</p><p>åœ¨æœ¬ç¯‡æ–‡ç« æˆ‘ä¾èˆŠä¸å†å¤šèŠ±ç¯‡å¹…ä»‹ç´¹ <a class=link href=https://pugjs.org/ target=_blank rel=noopener>pug</a> çš„èªæ³•ï¼Œä¸»è¦é‡å° Nuxt 3 å¦‚ä½•å°å…¥ <a class=link href=https://pugjs.org/ target=_blank rel=noopener>pug</a> è‡³å°ˆæ¡ˆå…§ä½¿ç”¨ã€‚</p><p>ç‚ºäº†ä¹‹å¾Œé–‹ç™¼èƒ½å°‘æ‰“ä¸€é» Codeï¼Œé€™é‚ŠåŠ å…¥ <a class=link href=https://pugjs.org/ target=_blank rel=noopener>pug</a> åˆ°å°ˆæ¡ˆã€‚</p><h3 id=å®‰è£-vite-plugin-pug>å®‰è£ @vite-plugin-pug</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D vite-plugin-pug
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D vite-plugin-pug</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç›´æ¥é–‹å§‹é«”é©—-pug>ç›´æ¥é–‹å§‹é«”é©— Pug</h3><p>ç›´æ¥å°‡åŸå…ˆçš„ <code>app.vue</code> æ”¹ç”¨ pug èªæ³•ä¾†æ’°å¯«ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;pug&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>div</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>bg</span><span class=o>-</span><span class=nx>white</span><span class=p>.</span><span class=nx>py</span><span class=o>-</span><span class=mi>24</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>flex</span><span class=o>-</span><span class=nx>col</span><span class=p>.</span><span class=nx>items</span><span class=o>-</span><span class=nx>center</span><span class=p>.</span><span class=nx>flex</span>
</span></span><span class=line><span class=cl>    <span class=nx>h1</span><span class=p>.</span><span class=nx>text</span><span class=o>-</span><span class=mi>6</span><span class=nx>xl</span><span class=p>.</span><span class=nx>font</span><span class=o>-</span><span class=nx>semibold</span><span class=p>.</span><span class=nx>text</span><span class=o>-</span><span class=nx>blue</span><span class=o>-</span><span class=mi>600</span> <span class=mi>2022</span> <span class=nx>iThome</span>
</span></span><span class=line><span class=cl>    <span class=nx>p</span><span class=p>.</span><span class=nx>mt</span><span class=o>-</span><span class=mf>4.</span><span class=nx>text</span><span class=o>-</span><span class=mi>9</span><span class=nx>xl</span><span class=p>.</span><span class=nx>font</span><span class=o>-</span><span class=nx>bold</span><span class=p>.</span><span class=nx>text</span><span class=o>-</span><span class=nx>gray</span><span class=o>-</span><span class=mi>900</span> <span class=nx>éµäººè³½</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;ts&#34;</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>year</span><span class=o>:</span> <span class=nx>string</span> <span class=o>=</span> <span class=s2>&#34;2022&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™é‚Šæ¨è–¦ä¸€æ¬¾ VS Code çš„å¥—ä»¶ - <a class=link href="https://marketplace.visualstudio.com/items?itemName=dbalas.vscode-html2pug" target=_blank rel=noopener>html2pug</a>ï¼Œå°‡ HTML åç™½å¾Œé»é¸ VS Code ä¸Šæ–¹çš„ <strong>View</strong> > <strong>Command Palette&mldr;</strong>ï¼Œå°‹æ‰¾ä¸¦åŸ·è¡Œ <strong>"> html2pug: Transform"</strong>ï¼Œå³å¯å°‡åç™½çš„ HTML è‡ªå‹•è½‰æ›æˆ pug èªæ³•ã€‚</p><p>ä¸ç”¨ç®¡ HTML çš„çµå°¾ç¬¦è™Ÿï¼Œå¯«èµ·ä¾†æ•´å€‹å°±æ˜¯èˆ’æœé˜¿~~~</p><hr><h2 id=ç›®éŒ„çµæ§‹èˆ‡è‡ªå‹•è¼‰å…¥-auto-imports>ç›®éŒ„çµæ§‹èˆ‡è‡ªå‹•è¼‰å…¥ (Auto Imports)</h2><p>éš¨è‘—æ•´å€‹å°ˆæ¡ˆçš„é–‹ç™¼ï¼Œç›®éŒ„èˆ‡å…ƒä»¶å‹¢å¿…ä¹Ÿæœƒè¶Šä¾†è¶Šå¤šï¼Œå¦‚åŒ Vue 3 çš„å°ˆæ¡ˆå¯èƒ½æœƒæœ‰å°ˆé–€æ”¾ç½®å…ƒä»¶ç›®éŒ„ components ç­‰ï¼Œåœ¨ Vue 3 æˆ‘å€‘å¯èƒ½ä¸å¤ªéœ€è¦å»åœ¨æ„ç›®éŒ„çš„åç¨±ï¼Œä½†åœ¨ Nuxt 3 çš„å°ˆæ¡ˆä¸‹ï¼Œæœ‰ä¸€äº›ç›®éŒ„èˆ‡åç¨±å…¶å¯¦æœ‰ä¸€äº›åŸºæœ¬çš„è¦å®šèˆ‡åç¨±ï¼Œåªè¦ç…§è‘— Nuxt 3 ç´„å®šå¥½çš„æ–¹å¼é€²è¡Œé–‹ç™¼ï¼Œå°±èƒ½æ›´å¥½åˆ©ç”¨ Nuxt 3 å¹«ä½ å®Œæˆè¨±å¤šè²¼å¿ƒçš„åŠŸèƒ½ã€‚</p><h3 id=nuxt-3-çš„ç›®éŒ„çµæ§‹>Nuxt 3 çš„ç›®éŒ„çµæ§‹</h3><p>ç•¶æˆ‘å€‘ Nuxt CLI å»ºç«‹ç¬¬ä¸€å€‹ Nuxt 3 å°ˆæ¡ˆä¸¦ç¬¬ä¸€æ¬¡å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨å¾Œï¼Œå°ˆæ¡ˆç›®éŒ„çµæ§‹æœƒé•·å¾—åƒé€™æ¨£ï¼š</p><p><img src=https://live.staticflickr.com/65535/52616964404_21aac96f76_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¦‚æœä½ æ˜¯è·Ÿè‘—é€™å€‹ç³»åˆ—å®‰è£äº† TypeScriptã€Linterã€Tailwind CSS åŠ Pug ç­‰å¥—ä»¶ï¼Œé‚£éº¼å°ˆæ¡ˆç›®éŒ„çµæ§‹æœƒé•·å¾—åƒé€™æ¨£ï¼š</p><p><img src=https://live.staticflickr.com/65535/52616698211_e29e8f9352_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é›–ç„¶æˆ‘å€‘èƒ½ä¾ç…§éœ€æ±‚å»ºç«‹æª”æ¡ˆåŠç›®éŒ„ï¼Œä½† Nuxt 3 åœ¨<code>ç›®éŒ„çš„çµæ§‹èˆ‡å‘½åå…¶å¯¦æœ‰ä¸€å®šçš„è¦å‰‡èˆ‡æ¨¡å¼</code>ï¼Œä»¥ä¸‹é‡å° Nuxt 3 ä¾†è¬›è¿°ä¸€ä¸‹ç›®éŒ„çš„çµæ§‹èˆ‡éµå¾ªçš„æ–¹å¼ã€‚</p><h3 id=nuxt-3-é è¨­çš„ç›®éŒ„çµæ§‹>Nuxt 3 é è¨­çš„ç›®éŒ„çµæ§‹</h3><p>Nuxt 3 æ¡†æ¶å¸Œæœ›æˆ‘å€‘å¯ä»¥å°ˆæ³¨åœ¨é–‹ç™¼è€Œä¸æ˜¯åœ¨é…ç½®ï¼Œæ‰€ä»¥åœ¨é è¨­çš„æƒ…æ³å°ˆæ¡ˆçš„ç›®éŒ„æ¶æ§‹å·²ç¶“æœ‰ä¸€å€‹ä¸éŒ¯çš„çµæ§‹å¯ä»¥éµå¾ªã€‚</p><p>ä¾æ“š<a class=link href=https://nuxt.com/docs/guide/concepts/auto-imports target=_blank rel=noopener>å®˜æ–¹æ–‡ä»¶</a>ï¼Œä¸€å€‹å®Œæ•´çš„ Nuxt 3 å°ˆæ¡ˆï¼Œå®ƒçš„ç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxt-app/
</span></span><span class=line><span class=cl>â”œâ”€â”€ .nuxt/
</span></span><span class=line><span class=cl>â”œâ”€â”€ .output/
</span></span><span class=line><span class=cl>â”œâ”€â”€ assets/
</span></span><span class=line><span class=cl>â”œâ”€â”€ components/
</span></span><span class=line><span class=cl>â”œâ”€â”€ composables/
</span></span><span class=line><span class=cl>â”œâ”€â”€ content/
</span></span><span class=line><span class=cl>â”œâ”€â”€ layouts/
</span></span><span class=line><span class=cl>â”œâ”€â”€ middleware/
</span></span><span class=line><span class=cl>â”œâ”€â”€ node_modules/
</span></span><span class=line><span class=cl>â”œâ”€â”€ pages/
</span></span><span class=line><span class=cl>â”œâ”€â”€ plugins/
</span></span><span class=line><span class=cl>â”œâ”€â”€ public/
</span></span><span class=line><span class=cl>â””â”€â”€ server/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ api/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ routes/
</span></span><span class=line><span class=cl>    â””â”€â”€ middleware/
</span></span><span class=line><span class=cl>â”œâ”€â”€ .gitignore
</span></span><span class=line><span class=cl>â”œâ”€â”€ .nuxtignore
</span></span><span class=line><span class=cl>â”œâ”€â”€ app.config.ts
</span></span><span class=line><span class=cl>â”œâ”€â”€ app.vue
</span></span><span class=line><span class=cl>â”œâ”€â”€ nuxt.config.ts
</span></span><span class=line><span class=cl>â”œâ”€â”€ package.json
</span></span><span class=line><span class=cl>â””â”€â”€ tsconfig.json
</span></span></code></pre></td></tr></table></div></div><h4 id=nuxt-ç›®éŒ„>.nuxt ç›®éŒ„</h4><p>é–‹ç™¼ç’°å¢ƒä¸‹ç”± Nuxt ç”¢ç”Ÿå‡º Vue çš„ç¶²ç«™ï¼Œ.nuxt ç›®éŒ„æ˜¯<code>è‡ªå‹•ç”¢ç”Ÿ</code>çš„ï¼Œ<strong>ä½ ä¸æ‡‰è©²ä»»æ„çš„èª¿æ•´è£¡é¢æª”æ¡ˆ</strong>ã€‚</p><h4 id=output-ç›®éŒ„>.output ç›®éŒ„</h4><p>ç•¶ä½ çš„ç¶²ç«™æº–å‚™éƒ¨ç½²è‡³æ­£å¼ç’°å¢ƒæ™‚ï¼Œæ¯æ¬¡ç·¨è­¯å»ºæ§‹å°ˆæ¡ˆæ™‚ï¼Œçš†æœƒ<code>è‡ªå‹•é‡æ–°ç”¢ç”Ÿ</code>é€™å€‹ç›®éŒ„ï¼Œ<strong>ä½ ä¸æ‡‰è©²ä»»æ„çš„èª¿æ•´è£¡é¢æª”æ¡ˆ</strong>ã€‚</p><h4 id=assets-ç›®éŒ„>assets ç›®éŒ„</h4><p>é¡§åæ€ç¾©ï¼Œé€™æ˜¯éœæ…‹è³‡æºæª”æ¡ˆæ‰€æ”¾ç½®çš„ä½ç½®ï¼Œç›®éŒ„å…§é€šå¸¸åŒ…å«ä»¥ä¸‹é¡å‹çš„æª”æ¡ˆï¼š</p><ul><li>CSS æ¨£å¼æª”æ¡ˆ (CSSã€SASS ç­‰&mldr;)</li><li>å­—å‹</li><li>åœ–ç‰‡</li></ul><p>é€™äº›éœæ…‹è³‡æºï¼Œæœ€çµ‚åœ¨å°ˆæ¡ˆç·¨è­¯å»ºæ§‹æ™‚ï¼Œç”± Vite æˆ– webpack é€²è¡Œç·¨è­¯æ‰“åŒ…ã€‚</p><h4 id=components-ç›®éŒ„>components ç›®éŒ„</h4><p>æ”¾ç½® Vue å…ƒä»¶çš„åœ°æ–¹ï¼ŒNuxt æœƒè‡ªå‹•è¼‰å…¥é€™å€‹ç›®éŒ„ä¸­çš„ä»»ä½•å…ƒä»¶ã€‚</p><h4 id=composables-ç›®éŒ„>composables ç›®éŒ„</h4><p>çµ„åˆå¼å‡½æ•¸æ”¾ç½®çš„ç›®éŒ„ï¼Œç°¡å–®ä¾†èªªå¯ä»¥æŠŠå¸¸ç”¨æˆ–é€šç”¨çš„åŠŸèƒ½å¯«æˆä¸€å€‹å…±ç”¨çš„å‡½æ•¸æˆ– JS æª”æ¡ˆï¼Œæ”¾ç½®åœ¨é€™å€‹ç›®éŒ„è¦–ç‚ºçµ„åˆå¼å‡½æ•¸ï¼ŒNuxt ä¹Ÿæœƒè‡ªå‹•è¼‰å…¥é€™äº›çµ„åˆå¼å‡½æ•¸ï¼Œè®“éœ€è¦ä½¿ç”¨çš„é é¢æˆ–å…ƒä»¶å¯ä»¥ç›´æ¥åšä½¿ç”¨ã€‚</p><h4 id=content-ç›®éŒ„>content ç›®éŒ„</h4><p>é€éä½¿ç”¨ <a class=link href=https://content.nuxtjs.org/ target=_blank rel=noopener>Nuxt Content</a>ï¼Œæˆ‘å€‘å¯ä»¥åœ¨é€™å€‹ç›®éŒ„ä¸‹å»ºç«‹ <strong>.md</strong>ã€<strong>.yml</strong>ã€<strong>.csv</strong> å’Œ <strong>.json</strong> æª”æ¡ˆï¼ŒNuxt Content æœƒè®€å–ä¸¦è§£æé€™äº›æ–‡ä»¶ä¸¦é€²è¡Œæ¸²æŸ“ï¼Œç”¨ä¾†å»ºç«‹åŸºæ–¼æ–‡ä»¶çš„<strong>å…§å®¹ç®¡ç†ç³»çµ±</strong>(Content Management Systemï¼Œç°¡ç¨±ï¼šCMS)ã€‚</p><h4 id=layouts-ç›®éŒ„>layouts ç›®éŒ„</h4><p>ç”¨æ–¼æ”¾ç½®é€šç”¨æˆ–å¯èƒ½é‡è¤‡ä½¿ç”¨åˆ°çš„ä½ˆå±€æ¨¡æ¿ï¼Œæä¾›ç¨‹å¼ç¢¼çš„å¯é‡è¤‡ä½¿ç”¨æ€§ã€‚</p><h4 id=middleware-ç›®éŒ„>middleware ç›®éŒ„</h4><p>Nuxt 3 æä¾›äº†è·¯ç”±ä¸­é–“ä»¶çš„æ¦‚å¿µï¼Œç”¨æ–¼å°èˆªåˆ°ä¸‹ä¸€å€‹é é¢ä¹‹å‰åŸ·è¡Œä¸€äº›ç¨‹å¼ç¢¼å¦‚<strong>æ¬Šé™é©—è­‰</strong>&mldr;ç­‰ã€‚</p><h4 id=node_modules-ç›®éŒ„>node_modules ç›®éŒ„</h4><p>é€šå¸¸æœ‰ä½¿ç”¨ Node.js çš„å¥—ä»¶ç®¡ç†ï¼Œä¾‹å¦‚ NPMï¼Œå°æ­¤ç›®éŒ„æ‡‰è©²æœ‰ä¸€äº›å°è±¡ï¼Œä½¿ç”¨ Nuxt 3 åŠå°ˆæ¡ˆæ‰€éœ€è¦çš„ç›¸ä¾å¥—ä»¶éƒ½æœƒå­˜æ”¾åœ¨é€™å€‹ç›®éŒ„ã€‚</p><h4 id=pages-ç›®éŒ„>pages ç›®éŒ„</h4><p>é€™å€‹ç›®éŒ„ä¸»è¦æ˜¯ç”¨ä¾†é…ç½®æˆ‘å€‘çš„é é¢ï¼Œä½ ä¹Ÿå¯ä»¥åªä½¿ç”¨ <strong>app.vue</strong> ä¾†å®Œæˆä½ çš„ç¶²ç«™ï¼Œä½†å¦‚æœå»ºç«‹äº† <strong>pages</strong> é€™å€‹ç›®éŒ„ï¼ŒNuxt 3 æœƒè‡ªå‹•æ•´åˆ <code>vue-router</code>ï¼Œä¸¦æœƒä¾æ“šç›®éŒ„åŠæª”æ¡ˆçµæ§‹è¦å‰‡ä¾†<code>è‡ªå‹•ç”¢ç”Ÿå‡ºå°æ‡‰è·¯ç”±</code>ï¼Œä¹Ÿæ˜¯ Nuxt3 ç”¢ç”Ÿè·¯ç”±çš„æ–¹å¼ã€‚</p><h4 id=plugins-ç›®éŒ„>plugins ç›®éŒ„</h4><p>Nuxt æœƒè‡ªå‹•è¼‰å…¥é€™å€‹ç›®éŒ„æª”æ¡ˆï¼Œä½œç‚ºæ’ä»¶ä½¿ç”¨ï¼Œåœ¨æª”æ¡ˆåç¨±å¯ä»¥ä½¿ç”¨å¾Œç¶´ <code>.server</code> æˆ– <code>.client</code>ï¼Œä¾‹å¦‚ï¼Œ<code>plugin.server.ts</code> æˆ– <code>plugin.client.ts</code> ä¾†æ±ºå®šåªè®“ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯è¼‰å…¥é€™å€‹æ’ä»¶ã€‚</p><h4 id=server-ç›®éŒ„>server ç›®éŒ„</h4><p>ç”¨æ–¼å»ºç«‹ä»»ä½•å¾Œç«¯çš„é‚è¼¯å¦‚å¾Œç«¯ APIï¼Œé€™å€‹ç›®éŒ„ä¸‹é‚„åŒ…å«äº† <code>api</code>ã€<code>server</code> å’Œ <code>middleware</code> ä¾†å€åˆ†åŠŸèƒ½ï¼Œä¸å…·æœ‰è‡ªå‹•è¼‰å…¥ï¼Œä½†æ”¯æ´ HMRã€‚</p><h4 id=gitignore-æª”æ¡ˆ>.gitignore æª”æ¡ˆ</h4><p>åœ¨ä½¿ç”¨ Git ç‰ˆæœ¬æ§åˆ¶æ™‚ï¼Œå¯ä»¥è¨­ç½®ä¸€äº›ä¸éœ€è¦æˆ–å¿½ç•¥é—œæ³¨è®Šå‹•çš„æª”æ¡ˆåŠç›®éŒ„ã€‚</p><h4 id=nuxtignore-æª”æ¡ˆ>.nuxtignore æª”æ¡ˆ</h4><p>å¯ä»¥è¨­ç½®è®“ Nuxt ç·¨è­¯å»ºæ§‹æ™‚ï¼Œå¿½ç•¥ä¸€äº›ä¸éœ€è¦æˆ–æ¬²å¿½ç•¥çš„æª”æ¡ˆã€‚</p><h4 id=appconfigts-æª”æ¡ˆ>app.config.ts æª”æ¡ˆ</h4><p>æä¾›æœå‹™é‹è¡Œæ™‚æš´éœ²çµ¦å®¢æˆ¶ç«¯ä½¿ç”¨çš„è¨­å®šï¼Œå› æ­¤ï¼Œè«‹ä¸è¦åœ¨ <strong>app.config.ts</strong> æª”æ¡ˆä¸­æ·»åŠ ä»»ä½•æ©Ÿå¯†è³‡è¨Šã€‚</p><h4 id=appvue-æª”æ¡ˆ>app.vue æª”æ¡ˆ</h4><p>Nuxt 3 ç¶²ç«™çš„å…¥å£é»å…ƒä»¶ã€‚</p><h4 id=nuxtconfigts-æª”æ¡ˆ>nuxt.config.ts æª”æ¡ˆ</h4><p>ç”¨æ–¼é…ç½® Nuxt å°ˆæ¡ˆçš„è¨­å®šæª”ã€‚</p><h4 id=packagejson-æª”æ¡ˆ>package.json æª”æ¡ˆ</h4><p>é€™å€‹æª”æ¡ˆè£¡é¢å®šç¾©äº†å°ˆæ¡ˆè³‡è¨Šã€è…³æœ¬ã€ç›¸ä¾å¥—ä»¶åŠç‰ˆæœ¬è™Ÿï¼Œé€šå¸¸æœ‰ä½¿ç”¨ Node.js å¥—ä»¶ç®¡ç†å·¥å…·å»ºç½®çš„å°ˆæ¡ˆéƒ½æœƒåŒ…å«æ­¤æª”æ¡ˆã€‚</p><h4 id=tsconfigjson-æª”æ¡ˆ>tsconfig.json æª”æ¡ˆ</h4><p>Nuxt 3 æœƒåœ¨ <strong>.nuxt</strong> ç›®éŒ„ä¸‹<code>è‡ªå‹•ç”¢ç”Ÿ</code>ä¸€å€‹ <code>tsconfig.json</code> æª”æ¡ˆï¼Œå…¶ä¸­å·²ç¶“åŒ…å«äº†ä¸€äº›è§£æåˆ¥åç­‰é è¨­é…ç½®ï¼›ä½ å¯ä»¥é€é<code>å°ˆæ¡ˆç›®éŒ„</code>ä¸‹çš„ <code>tsconfig.json</code> ä¾†é…ç½®æ“´å±•æˆ–è¦†è“‹ Nuxt 3 é è¨­çš„ TypeScript è¨­å®šæª”ã€‚</p><h3 id=è‡ªè¨‚ç›®éŒ„åç¨±>è‡ªè¨‚ç›®éŒ„åç¨±</h3><p>å‰é¢ç°¡ä»‹äº† Nuxt 3 çš„é è¨­ç›®éŒ„çµæ§‹èˆ‡ç”¨é€”ï¼Œåœ¨ç›®éŒ„åç¨±ä¸Š Nuxt 3 ä¹Ÿæä¾›äº†å¯ä»¥èª¿æ•´ç›®éŒ„åç¨±çš„æ–¹å¼ï¼Œåªè¦åœ¨ <code>nuxt.config.ts</code> ä¿®æ”¹å°æ‡‰çš„åƒæ•¸ï¼Œå°±å¯ä»¥è‡ªè¨‚ç›®éŒ„çš„åç¨±ã€‚ä¸éå‘¢ï¼Œä¹Ÿä¸¦ä¸æ˜¯æ‰€æœ‰çš„ç›®éŒ„éƒ½èƒ½ä¿®æ”¹ï¼Œç›®å‰<a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config#dir target=_blank rel=noopener>å®˜æ–¹æä¾›</a>çš„ dir åƒæ•¸å…±æœ‰ä»¥ä¸‹å››å€‹ç›®éŒ„åƒæ•¸é¸é …ä¾›ä¿®æ”¹ï¼š</p><ul><li>layouts</li><li>middleware</li><li>pages</li><li>public</li></ul><p>ä¾‹å¦‚æˆ‘æƒ³å°‡ <strong>pages</strong> ç›®éŒ„åç¨±èª¿æ•´ç‚º <strong>views</strong> å°±å¯ä»¥æ–°å¢ä¸‹åˆ— <code>dir</code> è¨­å®šæ·»åŠ è‡³ <code>nuxt.config.ts</code>ï¼Œå°±å¯ä»¥å°‡ <strong>pages</strong> ç›®éŒ„åŠŸèƒ½åŠè¦å‰‡èª¿æ•´ç‚º <strong>views</strong> ç›®éŒ„ä¾†å¯¦ç¾ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>dir</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>pages</span><span class=o>:</span> <span class=s1>&#39;views&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªå‹•è¼‰å…¥-auto-imports>è‡ªå‹•è¼‰å…¥ (Auto Imports)</h3><p>åœ¨ä»‹ç´¹ç›®éŒ„çµæ§‹æ™‚æœ‰æåˆ°ï¼ŒæŸäº›ç›®éŒ„ä¸‹çš„æª”æ¡ˆæ˜¯å…·æœ‰<code>è‡ªå‹•è¼‰å…¥ (Auto Imports)</code>çš„åŠŸèƒ½ï¼Œæ„æ€å°±æ˜¯èªªï¼Œç•¶æˆ‘å€‘åœ¨é€™äº›ç‰¹å®šçš„ç›®éŒ„ <code>components</code>ã€<code>composables</code>ã€<code>layouts</code>ã€<code>plugins</code> æ·»åŠ æª”æ¡ˆæ™‚ï¼ŒNuxt 3 æœƒè‡ªå‹•è¼‰å…¥é€™äº›å…ƒä»¶æˆ–å‡½æ•¸ã€‚</p><p>Nuxt 3 çš„è‡ªå‹•è¼‰å…¥å…·é«”æœ‰ä»¥ä¸‹ä¸‰ç¨®ï¼š</p><ul><li>Nuxt å¸¸ç”¨å…ƒä»¶èˆ‡å‡½æ•¸</li><li>Vue 3 çš„ API</li><li>åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥</li></ul><h4 id=nuxt-å¸¸ç”¨å…ƒä»¶èˆ‡å‡½æ•¸çš„è‡ªå‹•è¼‰å…¥>Nuxt å¸¸ç”¨å…ƒä»¶èˆ‡å‡½æ•¸çš„è‡ªå‹•è¼‰å…¥</h4><p>Nuxt æœƒè‡ªå‹•è¼‰å…¥ä¸€äº›å…ƒä»¶æˆ–çµ„åˆå¼å‡½æ•¸ï¼Œç”¨ä»¥è®“é–‹ç™¼æ™‚å¯ä»¥åœ¨å…¨éƒ¨é é¢æˆ–å®šç¾©çµ„ä»¶å’Œæ’ä»¶å¯ä»¥ä½¿ç”¨ã€‚</p><p>Nuxt è‡ªå‹•è¼‰å…¥çš„å…ƒä»¶å°±å¥½æ¯” <strong>app.vue</strong> ç¨‹å¼ç¢¼å…§ï¼Œä¸€é–‹å§‹åœ¨ <strong>template</strong> å°±æœ‰çš„ <code>&lt;NuxtWelcome /></code> æ­¡è¿é é¢å…ƒä»¶ï¼Œå…¶ä»–é‚„åŒ…å«äº† <code>&lt;NuxtPage></code>ã€<code>&lt;NuxtLayout></code> å’Œ <code>&lt;NuxtLink></code> ç­‰ï¼Œè©³ç´°å¯ä»¥åƒè€ƒ<a class=link href=https://nuxt.com/docs/api/components/client-only target=_blank rel=noopener>å®˜æ–¹æ–‡ä»¶</a>ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢ç¨‹å¼ç¢¼ä¸­çš„ <code>useAsyncData</code> èˆ‡ <code>$fetch</code> å°±æ˜¯ Nuxt è‡ªå‹•è¼‰å…¥çš„çµ„åˆå¼å‡½æ•¸ï¼Œåœ¨å„å€‹é é¢æˆ–å…ƒä»¶éƒ½èƒ½åšä½¿ç”¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>refresh</span><span class=p>,</span> <span class=nx>pending</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useAsyncData</span><span class=p>(</span><span class=s1>&#39;/api/hello&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/hello&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=vue-3-api-çš„è‡ªå‹•è¼‰å…¥>Vue 3 API çš„è‡ªå‹•è¼‰å…¥</h4><p>ä¾‹å¦‚ï¼ŒVue 3 ä¸­æœƒä½¿ç”¨åˆ°çš„ <code>ref</code>ã€<code>computed</code> ç­‰é€™é¡çš„ helpers æˆ– lifecycle hooksï¼Œåœ¨ Nuxt 3 ä¹Ÿéƒ½å°‡æœƒè‡ªå‹•çš„è¼‰å…¥ï¼Œä¸éœ€è¦åœ¨ importã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// ä¸éœ€è¦åœ¨ import ref æˆ– computed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=kr>double</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥>åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥</h4><p>å¦‚å‰é¢æ‰€æåŠçš„ï¼ŒNuxt æœƒè‡ªå‹•è¼‰å…¥å®šç¾©åœ¨ç‰¹å®šç›®éŒ„çš„æª”æ¡ˆï¼Œä¾‹å¦‚ï¼š</p><ul><li>components: ç›¸å°æ–¼ Vue çš„çµ„ä»¶ã€‚</li><li>composables: ç›¸å°æ–¼ Vue çš„çµ„åˆå¼å‡½æ•¸ã€‚</li></ul><h3 id=å»ºç«‹ä¸€å€‹è‡ªå‹•å°å…¥çš„å…ƒä»¶>å»ºç«‹ä¸€å€‹è‡ªå‹•å°å…¥çš„å…ƒä»¶</h3><p>æˆ‘å€‘å»ºç«‹ä¸€å€‹ <strong>./components/IronManWelcome.vue</strong> æª”æ¡ˆï¼š</p><h5 id=componentsironmanwelcomevue>components/IronManWelcome.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ <strong>app.vue</strong> æª”æ¡ˆä¸­ï¼Œæ–°å¢ <code>&lt;IronManWelcome /></code> å…ƒä»¶ã€‚</p><h5 id=appvue>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>IronManWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¾åœ¨ï¼Œç€è¦½å™¨å¯ä»¥çœ‹è¦‹æˆ‘å€‘æ·»åŠ çš„å…ƒä»¶æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188282_4d52db7fc1_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¯ä»¥ç™¼ç¾ï¼Œæˆ‘å€‘ä¸éœ€è¦æ·»åŠ  <code>import IronManWelcome from './components/IronManWelcome'</code> å°±å¯ä»¥ç›´æ¥åœ¨ template ç›´æ¥ä½¿ç”¨ <code>&lt;IronManWelcome /></code> å…ƒä»¶ï¼Œé€™å°±æ˜¯ Nuxt 3 åŸºæ–¼ç›®éŒ„çš„è‡ªå‹•è¼‰å…¥åŠŸèƒ½ã€‚</p><h3 id=é—œé–‰è‡ªå‹•è¼‰å…¥>é—œé–‰è‡ªå‹•è¼‰å…¥</h3><p>å¦‚æœæƒ³<code>é—œé–‰</code> Nuxt çš„è‡ªå‹•è¼‰å…¥å…ƒä»¶æˆ–å‡½æ•¸çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¿®æ”¹å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ <code>nuxt.config.ts</code> æª”æ¡ˆï¼Œå°‡ <code>imports.autoImport</code> è¨­å®šç‚º <code>false</code>ã€‚</p><h5 id=nuxtconfigts>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>imports</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>autoImport</span>: <span class=kt>false</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é¡¯å¼è¼‰å…¥-explicit-imports>é¡¯å¼è¼‰å…¥ (Explicit Imports)</h3><p>Explicit (é¡¯å¼ã€æ˜ç¢ºçš„)ï¼Œç•¶æˆ‘å€‘éœ€è¦æ‰‹å‹•è¼‰å…¥ï¼Œå°±å¯ä»¥ç”¨ <code>#import</code> é€™å€‹ Nuxt é‡‹å‡ºçš„åˆ¥åï¼Œä¾†å€‹åˆ¥è¼‰å…¥é‚£äº›å…·æœ‰è‡ªå‹•è¼‰å…¥çš„å…ƒä»¶æˆ–å‡½æ•¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>computed</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;#imports&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=kr>double</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Nuxt 3 çš„å°ˆæ¡ˆç›®éŒ„èˆ‡çµæ§‹å·²ç¶“æœ‰ä¸€å€‹è¦å®šå¯ä»¥éµå®ˆï¼ŒNuxt 3 è¦åŠƒçš„ç›®éŒ„åŠæª”æ¡ˆæ¶æ§‹ï¼Œè®“æˆ‘å€‘å¯ä»¥ä¸ç”¨å†ç…©æƒ±è©²å¦‚ä½•é…ç½®ï¼Œåªéœ€è¦å°ˆæ³¨é–‹ç™¼ï¼Œç•¶ä½ ç†Ÿæ‚‰é€™äº›ç›®éŒ„æª”æ¡ˆè¦å‰‡èˆ‡è‡ªå‹•è¼‰å…¥çš„ç‰¹æ€§ï¼Œè‚¯å®šèƒ½æ›´å¿«ä¸Šæ‰‹ Nuxt 3ã€‚</p></blockquote><hr><h2 id=é é¢-pages-èˆ‡è·¯ç”±-routing>é é¢ (Pages) èˆ‡è·¯ç”± (Routing)</h2><p>åœ¨ Vue ä¸­ï¼Œæˆ‘å€‘æœƒä½¿ç”¨åˆ° <a class=link href=https://router.vuejs.org/ target=_blank rel=noopener>Vue Router</a> ä¾†å¯¦ç¾åˆ‡æ›é é¢æˆ–è·¯ç”±çš„éœ€æ±‚ï¼Œè€Œåœ¨ Nuxt 3 ä¸­ï¼Œé è¨­æ˜¯æ²’æœ‰ä½¿ç”¨è·¯ç”±ç›¸é—œå¥—ä»¶ï¼Œç›´è‡³å»ºç«‹äº† <strong>pages</strong> ç›®éŒ„ï¼ŒNuxt å°‡æœƒè‡ªå‹•è¼‰å…¥ Vue Router ä¾†ç®¡ç†è·¯ç”±ï¼Œä¸¦ä¸”å…·æœ‰ä¸€å®šçš„è¦å‰‡éœ€è¦éµå¾ªï¼Œä»¥ä¸‹å°‡ä»‹ç´¹é é¢ç›®éŒ„èˆ‡è·¯ç”±ä¹‹é–“çš„é—œä¿‚ã€‚</p><h3 id=åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±-file-based-routing>åŸºæ–¼æª”æ¡ˆçš„è·¯ç”± (File-based Routing)</h3><p>åœ¨ Nuxt 3 å°ˆæ¡ˆçš„ <strong>pages</strong> ç›®éŒ„ä¸‹ï¼Œç•¶æˆ‘å€‘å»ºç«‹äº†ä¸€å€‹é é¢æª”æ¡ˆï¼Œå°±æœƒä»¥è©²æª”æ¡ˆå»ºç«‹å‡ºç›¸å°æ‡‰çš„è·¯ç”±ï¼ŒNuxt 3 åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±ï¼Œä¹Ÿä½¿ç”¨äº†ç¨‹å¼ç¢¼æ‹†åˆ†å°‡æ¯å€‹é é¢éœ€è¦çš„ç¨‹å¼ç¢¼æ¢³ç†å‡ºä¾†ï¼Œä¸¦ä»¥å‹•æ…‹è¼‰å…¥çš„æ–¹å¼è¼‰å…¥æœ€å°æ‰€éœ€è¦çš„ç¨‹å¼ç¢¼ã€‚å› ç‚ºæ˜¯ä»¥<strong>ç›®éŒ„çµæ§‹</strong>èˆ‡<strong>æª”æ¡ˆå‘½å</strong>æ–¹å¼ä¾†ç´„å®šï¼Œä¹Ÿç¨±ä¹‹ç‚ºç´„å®šå¼è·¯ç”±ã€‚</p><h4 id=å»ºç«‹ç¬¬ä¸€å€‹é é¢>å»ºç«‹ç¬¬ä¸€å€‹é é¢</h4><p>Nuxt 3 çš„ <strong>pages</strong> ç›®éŒ„ï¼Œæ˜¯ç”¨ä¾†å»ºç«‹é é¢ä¸¦æ”¾ç½®çš„ç›®éŒ„ï¼Œç•¶å°ˆæ¡ˆä¸‹æœ‰å­˜åœ¨ <strong>pages</strong> ç›®éŒ„ï¼ŒNuxt å°‡æœƒè‡ªå‹•è¼‰å…¥ Vue Router ä¾†å¯¦ç¾è·¯ç”±æ•ˆæœï¼Œç›®éŒ„ä¸‹çš„æª”æ¡ˆé€šå¸¸æ˜¯ Vue çš„å…ƒä»¶ï¼Œä¹Ÿå…è¨±å…·æœ‰ <strong>.vue</strong>ã€<strong>.js</strong>ã€<strong>.jsx</strong>ã€<strong>.ts</strong> æˆ– <strong>.tsx</strong> å‰¯æª”åçš„æª”æ¡ˆã€‚</p><p>ç•¶æˆ‘å€‘å»ºç«‹ <strong>./pages/index.vue</strong>ï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼Œå‰‡è¡¨ç¤ºè·¯ç”± <code>/</code> å°æ‡‰åˆ°é€™å€‹é é¢æª”æ¡ˆï¼Œæˆ‘å€‘åªéœ€è¦å»ºç«‹æª”æ¡ˆï¼Œè·¯ç”±çš„é…ç½®å°‡æœƒç”± Nuxt 3 è‡ªå‹•ç”¢ç”Ÿã€‚</p><h5 id=pagesindexvue>pages/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯é¦–é </span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>è‹¥ä½ é‚„è¨˜å¾— Vue Router ä¸­çš„ <code>&lt;router-view /></code>ï¼Œé€™æ˜¯è·¯ç”±éœ€è¦çš„é€²å…¥é»ï¼ŒåŒæ¨£çš„åœ¨ Nuxt 3 æˆ‘å€‘éœ€è¦ä½¿ç”¨ <code>&lt;NuxtPage /></code> ä¾†é¡¯ç¤ºæˆ‘å€‘å»ºç«‹çš„è·¯ç”±é é¢ï¼Œ<code>é€™è£¡éå¸¸é‡è¦ï¼Œå¦å‰‡è·¯ç”±åŠé é¢å°‡ç„¡æ³•æ­£ç¢ºé‹ä½œ</code>ã€‚</p><p>ä¿®æ”¹ <strong>./app.vue</strong>ï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-1>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtPage</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘åœ¨ç€è¦½å™¨ç€è¦½ <code>/</code> è·¯ç”±ï¼Œå¦‚ <code>http://localhost:3000/</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘åœ¨ <strong>./pages/index.vue</strong> é é¢å…§å¯«çš„æ¨™é¡Œæ–‡å­—ã€Œé€™æ˜¯é¦–é ã€å›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52617186498_fb79e37a84_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å¤šå€‹è·¯ç”±é é¢>å¤šå€‹è·¯ç”±é é¢</h3><p>åœ¨å¯¦å‹™ä¸Šï¼Œé€šå¸¸ä¸€å€‹ç¶²ç«™æœƒæœ‰å¤šå€‹é é¢ï¼Œä¸¦åˆ†åˆ¥å°æ‡‰åˆ°ä¸åŒçš„è·¯ç”±ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å˜—è©¦å»ºç«‹ About èˆ‡ Contact å…©å€‹é é¢ã€‚</p><h4 id=å»ºç«‹å¤šå€‹è·¯ç”±é é¢>å»ºç«‹å¤šå€‹è·¯ç”±é é¢</h4><p>å»ºç«‹ <strong>./pages/about.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesaboutvue>pages/about.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-yellow-400&#34;</span><span class=p>&gt;</span><span class=nx>å¤§å®¶å¥½</span><span class=err>ï¼</span><span class=nx>æˆ‘æ˜¯</span> <span class=nx>Ryan</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=o>/</span><span class=nx>about</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <strong>./pages/contact.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescontactvue>pages/contact.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-rose-400&#34;</span><span class=p>&gt;</span><span class=nx>å¦‚æœæ²’äº‹ä¸è¦æ‰¾æˆ‘</span> <span class=nx>xDDD</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=o>/</span><span class=nx>contact</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘åœ¨ç€è¦½å™¨åˆ†åˆ¥ç€è¦½ <strong>/about</strong> æˆ– <strong>/contact</strong>ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘è·¯ç”±æ•ˆæœå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52617186538_a097e76893_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><img src=https://live.staticflickr.com/65535/52616188307_6a7217ce85_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¯ä»¥ç™¼ç¾æ‰€å»ºç«‹çš„<code>æª”æ¡ˆåç¨±</code>ï¼Œæœ€çµ‚å°±æœƒ<code>è‡ªå‹•å°æ‡‰ç”¢ç”Ÿ</code>å‡º <strong>/about</strong> åŠ <strong>/contact</strong> è·¯ç”±ã€‚</p><h4 id=è‡ªå‹•ç”¢ç”Ÿçš„è·¯ç”±>è‡ªå‹•ç”¢ç”Ÿçš„è·¯ç”±</h4><p>å¦‚æœä½ æœ‰èˆˆè¶£æƒ³çœ‹çœ‹ Nuxt è‡ªå‹•ç”¢ç”Ÿå‡ºä¾†çš„è·¯ç”±é…ç½®é•·ä»€éº¼æ¨£å­ï¼Œå¯ä»¥ä½¿ç”¨ <code>npm run build</code> æˆ– <code>npx nuxt build</code> ä¾†å»ºæ§‹å‡º <code>.output</code> ç›®éŒ„ï¼Œä¸¦æ‰“é–‹ <strong>.output/server/chunks/app/server.mjs</strong>ï¼Œæœå°‹ <code>const _routes =</code> æˆ–å‰›å‰›å»ºç«‹çš„æª”æ¡ˆåç¨± <code>about.vue</code>ï¼Œå°±å¯ä»¥æ‰¾åˆ°ä¸‹é¢é€™ä¸€æ®µç¨‹å¼ç¢¼ï¼š</p><p><img src=https://live.staticflickr.com/65535/52616964449_0da965dc38_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é€™æ®µç¨‹å¼ç¢¼èˆ‡ Vue ä¸­çš„è·¯ç”±é…ç½®éå¸¸ç›¸åƒï¼Œå…¶å¯¦é€™å°±æ˜¯ Nuxt 3 æª¢æ¸¬åˆ° <strong>pages</strong> ç›®éŒ„ï¼Œè‡ªå‹•å¹«æˆ‘å€‘è¼‰å…¥ Vue Router èˆ‡ä¾æ“š <strong>pages</strong> ç›®éŒ„ä¸‹çš„æª”æ¡ˆçµæ§‹ï¼Œè‡ªå‹•ç”¢ç”Ÿå‡ºæ‰€éœ€çš„è·¯ç”±é…ç½®ã€‚</p><h3 id=å»ºç«‹è·¯ç”±é€£çµ>å»ºç«‹è·¯ç”±é€£çµ</h3><p>åœ¨ Vue Router æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>&lt;router-link></code> ä¾†å»ºç«‹è·¯ç”±é€£çµï¼Œä»¥æ­¤ä¾†å°èˆªè‡³å…¶ä»–é é¢ï¼Œè€Œåœ¨ Nuxt 3 çš„è·¯ç”±ä¸­ï¼Œå‰‡æ˜¯ä½¿ç”¨ <code>&lt;NuxtLink></code> ä¾†å»ºç«‹è·¯ç”±é€£çµä¾†é€²è¡Œé é¢çš„è·³è½‰ï¼Œæˆ‘å€‘å˜—è©¦åœ¨é¦–é æ–°å¢å¹¾å€‹è·¯ç”±é€£çµä¾†é€²è¡Œé é¢å°èˆªã€‚</p><p>èª¿æ•´ <strong>./pages/index.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesindexvue-1>pages/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯é¦–é </span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 flex space-x-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>About</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/contact&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Contact</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘åœ¨ç€è¦½å™¨ç€è¦½é¦–é ï¼Œé»æ“Šã€Œå‰å¾€ Aboutã€æˆ–ã€Œå‰å¾€ Contactã€å°±å¯ä»¥çœ‹è¦‹è·¯ç”±å°èˆªæ•ˆæœå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52617134125_7f1f7071b0_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½¿ç”¨ <code>&lt;NuxtLink></code> æ™‚ï¼Œå¯ä»¥å°±æŠŠå®ƒæƒ³åƒç‚º <code>&lt;router-link></code> çš„æ›¿ä»£å“ï¼Œåƒ <code>to</code> é€™å€‹ Pros æ§åˆ¶è·¯ç”±ä½ç½®çš„ç”¨æ³•åŸºæœ¬ä¸Šä¸€æ¨£ï¼Œå…¶ä»–æ›´å¤šçš„ Pros ç”¨æ³•åŠèªªæ˜å¯ä»¥åƒè€ƒå®˜ç¶²çš„<a class=link href=https://nuxt.com/docs/api/components/nuxt-link#props target=_blank rel=noopener>æ–‡ä»¶</a>ã€‚</p><p>å¦‚æœæƒ³è¦ä½¿ç”¨åƒ Vue Router æä¾›çš„ <code>router.push</code> æ–¹æ³•æ–¼ Vue ä¸­ç›´æ¥å‘¼å«ä¾†å°èˆªè‡³å…¶ä»–é é¢ï¼Œåœ¨ Nuxt ä¸­ä½ å¯ä»¥ä½¿ç”¨ <code>navigateTo</code>ï¼Œåƒæ•¸å¯ä»¥åƒè€ƒ<a class=link href=https://nuxt.com/docs/api/utils/navigate-to#navigateto target=_blank rel=noopener>å®˜æ–¹æ–‡ä»¶</a>ã€‚</p><h3 id=ç´„å®šå¼è·¯ç”±ä¸­çš„-indexvue>ç´„å®šå¼è·¯ç”±ä¸­çš„ index.vue</h3><p>åœ¨é–‹é ­æœ‰æåˆ°ï¼ŒNuxt 3 æä¾›äº†ä¸€å€‹åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±ï¼Œå¾ä¸Šè¿°ä¾‹å­ä½ æˆ–è¨±èƒ½ç™¼ç¾ï¼ŒåŸºæœ¬ä¸Šæª”æ¡ˆåç¨±å°±æ˜¯å°æ‡‰è‘—è·¯ç”±åç¨±ï¼Œä½† <strong>index.vue</strong> æ¯”è¼ƒç‰¹åˆ¥ï¼Œå®ƒæ‰€å°æ‡‰çš„æ˜¯è·¯ç”± <code>/</code>ã€‚</p><blockquote><p><strong>index.[ext]</strong> é€™å€‹æ•ˆæœå’Œç‰¹æ€§ï¼Œå…¶å¯¦æ˜¯èˆ‡ Node.js åº•å±¤æ ¸å¿ƒæœ‰é—œï¼Œåœ¨æ­¤å°±ä¸è´…è¿°ã€‚</p></blockquote><p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å¯ä»¥åœ¨ <strong>pages</strong> ä¸‹å»ºç«‹ä¸€å€‹ <strong>docs.vue</strong> è¡¨ç¤ºå°æ‡‰è·¯ç”± <strong>/docs</strong>ï¼Œä¹Ÿå¯ä»¥å°‡æª”æ¡ˆæ”¾ç½®åœ¨ <strong>docs</strong> ç›®éŒ„ä¸‹ä¸¦é‡æ–°å‘½åç‚º <strong>index.vue</strong> å³ <strong>./pages/docs/index.vue</strong>ï¼Œé€™æ¨£ä¹Ÿå¯ä»¥é€é <strong>/docs</strong> ç€è¦½åˆ°ç›¸åŒçš„é é¢ã€‚</p><p>æ‰€ä»¥ç•¶ <strong>index.vue</strong> å­˜åœ¨æ–¼ <strong>pages</strong> ç›®éŒ„ä¸‹ï¼Œå·²ç¶“ä½æ–¼ç¶²ç«™é é¢çš„ç¬¬ä¸€å±¤ï¼Œæ‰€ä»¥æˆ‘å€‘ç€è¦½ <a class=link href=http://localhost:3000/ target=_blank rel=noopener>http://localhost:3000/</a> å°±å¯ä»¥åšå‡ºé¦–é çš„æ•ˆæœã€‚</p><h3 id=å¸¶åƒæ•¸çš„å‹•æ…‹è·¯ç”±åŒ¹é…>å¸¶åƒæ•¸çš„å‹•æ…‹è·¯ç”±åŒ¹é…</h3><p>åœ¨å¯¦å‹™ä¸Šï¼Œæˆ‘å€‘å¯èƒ½éœ€è¦å°‡è·¯å¾‘ä½œç‚ºåƒæ•¸å‚³éçµ¦åŒä¸€å€‹å…ƒä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹ <strong>users</strong> é é¢å…ƒä»¶ï¼Œåœ¨ <strong>/users/ryan</strong> æˆ– <strong>/users/jennifer</strong> è·¯å¾‘ï¼Œéƒ½èƒ½åŒ¹é…åˆ°åŒä¸€å€‹ <strong>users</strong> å…ƒä»¶ï¼Œä¸¦å°‡ <strong>ryan</strong> æˆ– <strong>jennifer</strong> ç•¶ä½œåƒæ•¸å‚³éçµ¦ <strong>users</strong> é é¢å…ƒä»¶ä½¿ç”¨ï¼Œé‚£éº¼æˆ‘å€‘å°±éœ€è¦å‹•æ…‹è·¯ç”±ä¾†åšåˆ°é€™ä»¶äº‹ã€‚</p><p>åœ¨ Vue 3 ä½¿ç”¨ Vue Router æˆ‘å€‘å¯èƒ½æœƒå¯«å‡ºå¦‚ä¸‹è·¯ç”±é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>name:</span> <span class=nt>&#34;users&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>path:</span> <span class=nt>&#34;/users/:id&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>component:</span> <span class=nt>&#34;./pages/users.vue&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™æ¨£æˆ‘å€‘å°±èƒ½é”åˆ°é€²å…¥ <strong>/users/ryan</strong> è·¯ç”±å°‡ ryan ç•¶ä½œ <strong>id</strong> åƒæ•¸å‚³å…¥ <strong>users</strong> å…ƒä»¶ä¸­ï¼Œè·¯å¾‘åƒæ•¸ç”¨å†’è™Ÿ <code>:</code> è¡¨ç¤ºï¼Œé€™å€‹è¢«åŒ¹é…çš„åƒæ•¸ (params)ï¼Œæœƒåœ¨å…ƒä»¶ä¸­å¯ä»¥ä½¿ç”¨ <strong>useRoute()</strong> èˆ‡ <strong>route.params.id</strong> å–å¾—ã€‚</p><p>åœ¨ Nuxt 3 ä¸­ï¼Œæˆ‘å€‘è¦å¯¦ç¾é€™å€‹æ•ˆæœï¼Œéœ€è¦å°‡æª”æ¡ˆåç¨±æ·»åŠ ä¸­æ‹¬è™Ÿ <code>[]</code>ï¼Œå…¶ä¸­æ”¾å…¥æ¬²è¨­å®šçš„åƒæ•¸åç¨±ï¼Œè­¬å¦‚ä¸‹é¢çš„ç›®éŒ„çµæ§‹èˆ‡æª”æ¡ˆåç¨±ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./pages/
</span></span><span class=line><span class=cl>â””â”€â”€ users/
</span></span><span class=line><span class=cl>    â””â”€â”€ <span class=o>[</span>id<span class=o>]</span>.vue
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <code>./pages/users/[id].vue</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesusersidvue>pages/users/[id].vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=nx>Users</span> <span class=nx>å‹•æ…‹è·¯ç”±é é¢</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Id</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-5xl font-semibold text-blue-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>id</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>id</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>route</span><span class=p>.</span><span class=nx>params</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘åœ¨ <strong>script</strong> å°±å¯ä»¥å¾ <strong>route.params</strong> æ‹¿åˆ°æˆ‘å€‘æ‰€è¨­å®šçš„åƒæ•¸åç¨± <strong>id</strong>ï¼Œä¸¦å°‡å…¶åœ¨ <strong>template</strong> ä¸­æ¸²æŸ“å‡ºä¾†ã€‚ç€è¦½ <a class=link href=http://localhost:3000/users/ryan target=_blank rel=noopener>http://localhost:3000/users/ryan</a> ï¼Œçœ‹çœ‹æ•ˆæœï¼ŒNuxt 3 å°±èƒ½åŒ¹é…åˆ°ä½¿ç”¨è€…çš„ <strong>id</strong> åƒæ•¸ <strong>ryan</strong>ï¼Œä¸¦å‚³å…¥ <strong>users</strong> é é¢å…ƒä»¶ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186583_c117eb473b_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½ ä¹Ÿå¯ä»¥åœ¨ <strong>template</strong> ç›´æ¥ä½¿ç”¨ <code>{{ $route.params.id }}</code> ä¾†æ¸²æŸ“å‡º <strong>id</strong> åƒæ•¸ã€‚</p><h3 id=åŒ¹é…æ‰€æœ‰å±¤ç´šçš„è·¯ç”±>åŒ¹é…æ‰€æœ‰å±¤ç´šçš„è·¯ç”±</h3><p>å¦‚æœä½ éœ€è¦åŒ¹é…æŸå€‹é é¢ä¸‹çš„æ‰€æœ‰å±¤ç´šçš„è·¯ç”±ï¼Œä½ å¯ä»¥åœ¨åƒæ•¸å‰é¢åŠ ä¸Š <code>...</code> ï¼Œä¾‹å¦‚ï¼Œ<code>[...slug].vue</code>ï¼Œé€™å°‡åŒ¹é…è©²è·¯å¾‘ä¸‹çš„æ‰€æœ‰è·¯ç”±ã€‚</p><p>å»ºç«‹ <strong>./catch-all/[&mldr;slug].vue</strong> æª”æ¡ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./pages/
</span></span><span class=line><span class=cl>â””â”€â”€ catch-all/
</span></span><span class=line><span class=cl>    â””â”€â”€ <span class=o>[</span>...slug<span class=o>]</span>.vue
</span></span></code></pre></td></tr></table></div></div><p><strong>./catch-all/[&mldr;slug].vue</strong> æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=catch-allslugvue>catch-all/[&mldr;slug].vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-4xl text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯</span> <span class=k>catch</span><span class=o>-</span><span class=nx>all</span><span class=o>/</span><span class=p>...</span> <span class=nx>ä¸‹çš„é é¢</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Params</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 text-5xl font-semibold text-violet-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>$route</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>slug</span> <span class=p>}}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-xl text-gray-400&#34;</span><span class=p>&gt;</span><span class=nx>æ¯å€‹é™£åˆ—å…ƒç´ å°æ‡‰ä¸€å€‹å±¤ç´š</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¯ä»¥è¼¸å…¥ <strong>/catch-all/hello</strong> åŠ <strong>/catch-all/hello/world</strong>ï¼Œè·¯ç”±çš„åƒæ•¸ <strong>slug</strong> å°±æœƒæ˜¯ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—çš„æ¯å€‹å…ƒç´ å°æ‡‰æ¯ä¸€å€‹å±¤ç´šã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964479_ab69ffff26_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å»ºç«‹-404-not-found-é é¢>å»ºç«‹ 404 Not Found é é¢</h3><p>Nuxt 3 æä¾›ä¸€å€‹é…ç½®ä¾†è™•ç† <strong>404 Not Found</strong> çš„é é¢ï¼Œç•¶æˆ‘å€‘å»ºç«‹ <strong>./pages/[&mldr;slug].vue</strong> é é¢ï¼Œ Nuxt 3 æ‰€æœ‰æœªåŒ¹é…çš„è·¯ç”±ï¼Œå°‡æœƒäº¤ç”±é€™å€‹é é¢å…ƒä»¶åšè™•ç†ï¼Œä¸¦åŒæ™‚ä½¿ç”¨ <code>setResponseStatus(404)</code> å‡½æ•¸è¨­å®š <strong>404 HTTP Status Code</strong>ã€‚</p><h5 id=pagesslugvue>pages/[&mldr;slug].vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-8xl font-semibold text-red-500&#34;</span><span class=p>&gt;</span><span class=mi>404</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>Not</span> <span class=nx>Found</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-xl text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>çœŸçš„æ˜¯æ‰¾ä¸åˆ°é€™å€‹é é¢å•¦</span> <span class=o>&gt;</span><span class=c1>///&lt;&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>setResponseStatus</span><span class=p>(</span><span class=mi>404</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>/omg</strong> é€™å€‹æ˜¯ä¸å­˜åœ¨çš„é é¢ï¼ŒæœªåŒ¹é…çš„è·¯ç”±å°±æœƒäº¤ç”± <strong>./pages/[&mldr;slug].vue</strong> é é¢ä¾†è™•ç†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188362_24b6c38fab_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å»ºç«‹å¤šå±¤çš„ç›®éŒ„çµæ§‹>å»ºç«‹å¤šå±¤çš„ç›®éŒ„çµæ§‹</h3><p>å¦‚æœç†è§£äº†å‹•æ…‹è·¯ç”±çš„ä¸­æ‹¬è™Ÿ <code>[]</code> ç”¨æ³•ï¼Œé‚£æˆ‘å€‘å°±å¯ä»¥å»ºç«‹æ›´è¤‡é›œçš„é é¢ç›®éŒ„çµæ§‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./pages/
</span></span><span class=line><span class=cl>â””â”€â”€ posts/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ <span class=o>[</span>postId<span class=o>]</span>/
</span></span><span class=line><span class=cl>    â”‚   â”œâ”€â”€ comments/
</span></span><span class=line><span class=cl>    â”‚   â”‚   â””â”€â”€ <span class=o>[</span>commentId<span class=o>]</span>.vue
</span></span><span class=line><span class=cl>    â”‚   â””â”€â”€ index.vue
</span></span><span class=line><span class=cl>    â”œâ”€â”€ index.vue
</span></span><span class=line><span class=cl>    â””â”€â”€ top-<span class=o>[</span>number<span class=o>]</span>.vue
</span></span></code></pre></td></tr></table></div></div><p>é€™å››å€‹ Vue é é¢çš„åƒè€ƒç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p><h5 id=pagespostsindexvue>pages/posts/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-4xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯</span> <span class=nx>Posts</span> <span class=nx>é¦–é </span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 flex space-x-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/posts/8&#34;</span><span class=p>&gt;</span> <span class=nx>å‰å¾€æŒ‡å®šçš„æ–‡ç« </span> <span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/posts/8/comments/1&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€æŒ‡å®šçš„æ–‡ç« ç•™è¨€</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/posts/top-3&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Top</span> <span class=mi>3</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/posts/top-10&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Top</span> <span class=mi>10</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagespoststop-numbervue>pages/posts/top-[number].vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯</span> <span class=nx>posts</span><span class=o>/</span><span class=nx>top</span><span class=o>-</span><span class=p>[</span><span class=nx>number</span><span class=p>]</span> <span class=nx>çš„é é¢</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Top</span> <span class=nb>Number</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-5xl font-semibold text-rose-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>number</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>number</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>route</span><span class=p>.</span><span class=nx>params</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagespostspostidindexvue>pages/posts/[postId]/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯</span> <span class=nx>posts</span><span class=o>/</span><span class=p>[</span><span class=nx>postId</span><span class=p>]</span> <span class=nx>çš„é é¢</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Post</span> <span class=nx>Id</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-5xl font-semibold text-blue-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>postId</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>postId</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>route</span><span class=p>.</span><span class=nx>params</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagespostspostidcommentscommentidvue>pages/posts/[postId]/comments/[commentId].vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯</span> <span class=nx>posts</span><span class=o>/</span><span class=p>[</span><span class=nx>postId</span><span class=p>]</span><span class=o>/</span><span class=nx>comments</span><span class=o>/</span><span class=p>[</span><span class=nx>commentId</span><span class=p>]</span> <span class=nx>çš„é é¢</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Post</span> <span class=nx>Id</span><span class=o>:</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-5xl font-semibold text-blue-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>postId</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>åŒ¹é…åˆ°çš„</span> <span class=nx>Comment</span> <span class=nx>Id</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-5xl font-semibold text-purple-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>commentId</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>postId</span><span class=p>,</span> <span class=nx>commentId</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>route</span><span class=p>.</span><span class=nx>params</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¾†çœ‹çœ‹å¯¦éš›è·¯ç”±åŠåŒ¹é…æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186598_0c9c996bdc_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç‚ºäº†æ–¹ä¾¿ç†è§£ï¼Œæ•´ç†äº†ä»¥ä¸‹è¡¨æ ¼ï¼Œä¾†è¡¨ç¤ºé é¢çµæ§‹åŠæœŸæœ›åŒ¹é…çš„æ¨¡å¼èˆ‡åƒæ•¸ï¼š</p><p><strong>./pages/posts/index.vue</strong>ï¼š</p><div class=table-wrapper><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>åŒ¹é…è·¯å¾‘</th><th>åŒ¹é…åƒæ•¸ (Params)</th></tr></thead><tbody><tr><td>/posts</td><td>/posts</td><td>ç„¡</td></tr></tbody></table></div><p><strong>./pages/posts/top-[number].vue</strong>ï¼š</p><div class=table-wrapper><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>åŒ¹é…è·¯å¾‘</th><th>åŒ¹é…åƒæ•¸ (Params)</th></tr></thead><tbody><tr><td>/posts/top-:number</td><td>/posts/top-3</td><td>{ number: 3 }</td></tr><tr><td>/posts/top-:number</td><td>/posts/top-5</td><td>{ number: 5 }</td></tr></tbody></table></div><p><strong>./pages/posts/[postId]/index.vue</strong>ï¼š</p><div class=table-wrapper><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>åŒ¹é…è·¯å¾‘</th><th>åŒ¹é…åƒæ•¸ (Params)</th></tr></thead><tbody><tr><td>/posts/:postId</td><td>/posts/8</td><td>{ postId:8 }</td></tr></tbody></table></div><p><strong>./pages/posts/[postId]/comment/[commentId].vue</strong>ï¼š</p><div class=table-wrapper><table><thead><tr><th>åŒ¹é…æ¨¡å¼</th><th>åŒ¹é…è·¯å¾‘</th><th>åŒ¹é…åƒæ•¸ (Params)</th></tr></thead><tbody><tr><td>/posts/:postId/comments/:commentId</td><td>/posts/8/comments/1</td><td>{ postId: 8, commentId: 1 }</td></tr></tbody></table></div><p>åˆ°é€™è£¡æ‡‰è©²å°æ–¼å¦‚ä½•ä½¿ç”¨æª”æ¡ˆåç¨±èˆ‡ç›®éŒ„çµæ§‹ï¼Œä¾†è£½ä½œå‹•æ…‹è·¯ç”±èˆ‡åŒ¹é…åƒæ•¸æœ‰ä¸€äº›æ¦‚å¿µäº†ã€‚</p><h3 id=å·¢ç‹€è·¯ç”±-nested-routes>å·¢ç‹€è·¯ç”± (Nested Routes)</h3><p>å·¢ç‹€è·¯ç”± (Nested Routes) æˆ–ç¨±åµŒå¥—è·¯ç”±ï¼Œé¡§åæ€ç¾©ï¼Œç•¶æˆ‘å€‘æƒ³è¦åœ¨ä¸€å€‹é é¢é‘²åµŒå¦ä¸€å€‹é é¢æ™‚ï¼Œå°±éœ€è¦å·¢ç‹€è·¯ç”±ä¾†å¹«åŠ©æˆ‘å€‘ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘æƒ³è¦åœ¨ <strong>docs</strong> é é¢å…ƒä»¶ä¸­é¡¯ç¤º <strong>doc-1</strong> æˆ– <strong>doc-2</strong> é é¢å…ƒä»¶ï¼Œä¸¦åœ¨åˆ‡æ› <strong>doc-1</strong> æˆ– <strong>doc-2</strong> é é¢æ™‚ï¼Œåªæ˜¯åœ¨ <strong>docs</strong> ä¸‹çš„åµŒå¥—é é¢é€²è¡Œåˆ‡æ›ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/docs/doc-1                           /docs/doc-2
</span></span><span class=line><span class=cl>+------------------+                  +-----------------+
</span></span><span class=line><span class=cl><span class=p>|</span> docs             <span class=p>|</span>                  <span class=p>|</span> docs            <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> +--------------+ <span class=p>|</span>                  <span class=p>|</span> +-------------+ <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> doc-1        <span class=p>|</span> <span class=p>|</span>  +------------&gt;  <span class=p>|</span> <span class=p>|</span> doc-2       <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span>              <span class=p>|</span> <span class=p>|</span>                  <span class=p>|</span> <span class=p>|</span>             <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> +--------------+ <span class=p>|</span>                  <span class=p>|</span> +-------------+ <span class=p>|</span>
</span></span><span class=line><span class=cl>+------------------+                  +-----------------+
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ Vue 3 ä½¿ç”¨ Vue Router å¯¦ä½œä¸Šè¿°å·¢ç‹€è·¯ç”±æ™‚ï¼Œå³ <strong>docs</strong> é é¢è¦èƒ½é¡¯ç¤º <strong>doc-1</strong>ï¼Œæˆ‘å€‘åœ¨è·¯ç”±é…ç½®å¯èƒ½å°±æœƒå¯« <code>path: '/docs'</code> èˆ‡ <code>children</code>ï¼Œä¸¦åœ¨ <code>children</code> åŠ å…¥ <code>path: '/doc-1'</code>ï¼Œå…¶ä¸­ <strong>docs</strong> é é¢åŒ…å« <code>&lt;router-view /></code>ï¼Œæœ€çµ‚ç€è¦½è·¯ç”±è·¯å¾‘ <code>/docs/doc-1</code> å°±å¯ä»¥çœ‹åˆ°åµŒå¥—é é¢çš„æ•ˆæœã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>path:</span> <span class=nt>&#34;/docs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>component:</span> <span class=err>()</span> <span class=err>=&gt;</span> <span class=err>import(</span><span class=nt>&#34;./pages/docs.vue&#34;</span><span class=err>)</span>
</span></span><span class=line><span class=cl>  <span class=err>children</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=err>path:</span> <span class=nt>&#34;doc-1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>component:</span> <span class=err>()</span> <span class=err>=&gt;</span> <span class=err>import(</span><span class=nt>&#34;./pages/docs/doc-1.vue&#34;</span><span class=err>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è€Œåœ¨ Nuxt 3 é é¢çš„ç´„å®šå¼è·¯ç”±æ©Ÿåˆ¶ä¸‹ï¼Œæˆ‘å€‘å³æ˜¯é€éç›®éŒ„çµæ§‹èˆ‡é é¢å…ƒä»¶å¯¦åšå‡ºåµŒå¥—è·¯ç”±çš„æ•ˆæœã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œç•¶æˆ‘å€‘å»ºç«‹äº†ä¸‹é¢çš„ç›®éŒ„é é¢çµæ§‹ï¼š</p><blockquote><p>é€™è£¡éœ€è¦æ³¨æ„ï¼Œä¸€å®šè¦æœ‰ <strong>docs.vue</strong> èˆ‡ <strong>docs</strong> åŒåçš„ç›®éŒ„</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./pages/
</span></span><span class=line><span class=cl>â”œâ”€â”€ docs/
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ doc-1.vue
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ doc-2.vue
</span></span><span class=line><span class=cl>â””â”€â”€ docs.vue
</span></span></code></pre></td></tr></table></div></div><p>é é¢å…ƒä»¶çš„åƒè€ƒç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p><h5 id=pagesdocsvue>pages/docs.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-6 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-3xl font-semibold text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=nx>Docs</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 flex space-x-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/docs/doc-1&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Doc</span> <span class=mi>1</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/docs/doc-2&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Doc</span> <span class=mi>2</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;border-b-2 border-gray-100&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>NuxtPage</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagesdoc-1vue>pages/doc-1.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-blue-500&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯æˆ‘çš„ç¬¬ä¸€ä»½æ–‡ä»¶</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagesdoc-2vue>pages/doc-2.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-green-500&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯æˆ‘çš„ç¬¬äºŒä»½æ–‡ä»¶</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Nuxt 3 åœ¨è‡ªå‹•ç”Ÿæˆè·¯ç”±æ™‚ï¼Œå¯¦éš›ä¸Šå¹«æˆ‘å€‘åšå‡ºäº†é¡ä¼¼é€™æ¨£å­çš„è·¯ç”±çµæ§‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>name:</span> <span class=nt>&#34;docs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>path:</span> <span class=nt>&#34;/docs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>component:</span> <span class=nt>&#34;./pages/docs.vue&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>children:</span> <span class=err>[</span>
</span></span><span class=line><span class=cl>    <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=err>name:</span> <span class=nt>&#34;docs-first-doc&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>path:</span> <span class=nt>&#34;doc-1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>component:</span> <span class=nt>&#34;./pages/docs/doc-1.vue&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>]</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸€å®šè¦è¨˜å¾—åœ¨ <strong>docs</strong> é é¢åŠ ä¸Š <code>&lt;NuxtPage /></code>ï¼Œä¾†ä½œç‚ºé¡¯ç¤ºå·¢ç‹€é é¢çš„å®¹å™¨ï¼Œæ¥è‘—åˆ†åˆ¥ç€è¦½ <code>/docs</code>ã€<code>/docs/doc-1</code> èˆ‡ <code>/docs/doc-2</code>ï¼Œå¯ä»¥ç™¼ç¾åœ¨å…©å€‹é é¢ä¸­ä¸Šæ–¹çš„çš†æœ‰é¡¯ç¤ºæ¨™é¡Œã€Œé€™è£¡æ˜¯ Docsã€ï¼Œè©²æ–‡å­—æ˜¯ç”± <code>docs.vue</code> å…ƒä»¶æä¾›çš„æ¨™é¡Œæ–‡å­—ï¼Œè€Œé é¢ä¸‹æ–¹å‰‡æ˜¯ <strong>doc-1</strong> èˆ‡ <strong>doc-2</strong> å­é é¢é¡¯ç¤ºçš„åœ°æ–¹ï¼Œä»¥æ­¤å°±å¯ä»¥å¯¦ç¾å·¢ç‹€è·¯ç”±æ•ˆæœå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52616964494_bc91598456_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é€éç›®éŒ„æª”æ¡ˆçš„çµæ§‹èˆ‡åç¨±åŠä¸­æ‹¬è™Ÿ <code>[]</code> æˆ‘å€‘å°±å¯ä»¥å®Œæˆå¤šæ•¸è·¯ç”±çš„æƒ…å¢ƒï¼Œç¢ºå¯¦æ–¹ä¾¿å¾ˆå¤šï¼Œä¹Ÿè¶³ä»¥æ‡‰ä»˜å¤§éƒ¨åˆ†å¯¦å‹™ä¸Šçš„éœ€æ±‚ï¼Œå¦‚æœçœŸçš„éœ€è¦æ‰‹å‹•å»ºç«‹è·¯ç”±è¦å‰‡å¯ä»¥åœ¨åƒè€ƒ<a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config/#router target=_blank rel=noopener>å®˜æ–¹æ–‡æª”</a>æˆ–ç­‰å¾…é‡‹å‡ºæ›´å¥½è§£æ±ºæ–¹æ¡ˆã€‚</p><hr><h2 id=å¸ƒå±€æ¨¡æ¿-layouts>å¸ƒå±€æ¨¡æ¿ (Layouts)</h2><p>Nuxt 3 æä¾›äº†ä¸€å€‹å¸ƒå±€æ¨¡æ¿ (Layouts) çš„åŠŸèƒ½ï¼Œå¯ä»¥è®“ä½ å®šç¾©å¥½å¸ƒå±€æ¨¡æ¿å¾Œï¼Œåœ¨æ•´å€‹ Nuxt ä¸­ä½¿ç”¨ï¼Œèˆ‰ä¾‹ä¾†èªªå°±å¾ˆé©åˆå¦‚ä¸Šæ–¹æœ‰å°è¦½åˆ—ï¼Œä¸‹æ–¹æ˜¯ç¶²é ä¸»é«”å…§å®¹çš„é€™ç¨®æ’ç‰ˆæ–¹å¼ï¼Œå°‡å…¶æ§‹å»ºæˆä¸€å€‹å¸ƒå±€æ¨¡æ¿å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é‡è¤‡ä½¿ç”¨é€™ç¨®å¸ƒå±€æ–¹å¼ã€‚</p><p>å¸ƒå±€æ¨¡æ¿é€šå¸¸æ”¾ç½®åœ¨ <strong>./layouts</strong> ç›®éŒ„ä¹‹ä¸‹ï¼Œä¹Ÿå…·æœ‰ç•°æ­¥è‡ªå‹•å°å…¥çš„æ•ˆæœï¼Œç•¶æ–°å¢å¥½å¸ƒå±€æª”æ¡ˆå¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨ <strong>app.vue</strong> ä¸­ï¼Œæ·»åŠ  <code>&lt;NuxtLayout /></code> å…ƒä»¶ä¾†è¡¨ç¤ºä½¿ç”¨å¸ƒå±€æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥é€šé <strong>name</strong> è¨­å®šä¸åŒçš„æ¨¡æ¿åç¨±ã€‚</p><h3 id=å»ºç«‹ä¸€å€‹é è¨­çš„å¸ƒå±€æ¨¡æ¿>å»ºç«‹ä¸€å€‹é è¨­çš„å¸ƒå±€æ¨¡æ¿</h3><p>å¸ƒå±€æ¨¡æ¿åœ¨ Nuxt 3 ä¸­æœ‰ç´„å®šä¸€å€‹åç¨±ç‚º <code>default.vue</code> ä½œç‚ºé è¨­çš„æ¨¡æ¿ï¼Œå¦‚æœåœ¨é é¢å…ƒä»¶ä¸­æœªç‰¹åˆ¥æŒ‡å®šè¦ä½¿ç”¨å“ªå€‹æ¨¡æ¿æˆ– <code>&lt;NuxtLayout /></code> æ²’æœ‰è¨­å®š <strong>name</strong> å±¬æ€§ï¼Œé‚£éº¼éƒ½å°‡æœƒä½¿ç”¨ <strong>default</strong> ä½œç‚ºé è¨­çš„å¸ƒå±€ã€‚</p><h4 id=step-1-å»ºç«‹é è¨­å¸ƒå±€æ¨¡æ¿>Step 1. å»ºç«‹é è¨­å¸ƒå±€æ¨¡æ¿</h4><p>æ–°å¢ <strong>./layouts/default.vue</strong> æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=layoutsdefaultvue>layouts/default.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-sky-100 py-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 py-4 text-2xl text-gray-700&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯é è¨­çš„å¸ƒå±€</span><span class=err>ï¼Œ</span><span class=nx>å…¨éƒ¨é é¢éƒ½æœƒä½¿ç”¨åˆ°</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å¸ƒå±€æ¨¡æ¿ä¸­ï¼Œé€šå¸¸æœƒåŒ…å«ä¸€å€‹ <code>&lt;slot /></code> æ’æ§½ï¼Œé€™å€‹æœªå‘½åçš„æ’æ§½ (slot) å³ç‚ºé è¨­æ’æ§½ï¼Œé€™å°‡æœƒæ˜¯æ¡ç”¨é€™å€‹å¸ƒå±€æ¨¡æ¿çš„é é¢å…ƒä»¶ï¼Œé¡¯ç¤ºçš„å…§å®¹å®¹å™¨ä½ç½®ã€‚</p><h4 id=step-2-æ·»åŠ -å…ƒä»¶>Step 2. æ·»åŠ  å…ƒä»¶</h4><p>èª¿æ•´ <strong>app.vue</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼Œæˆ‘å€‘æ·»åŠ  <code>&lt;NuxtLayout></code> ä½œç‚ºå¸ƒå±€æ¨¡æ¿é¡¯ç¤ºçš„ä½ç½®ï¼Œ<strong>name</strong> å±¬æ€§é è¨­æ˜¯ <strong>default</strong>ï¼Œä¸éæˆ‘å€‘é‚„æ˜¯å¯«ä¸Š <code>name="default"</code> é¿å…èª¤æœƒï¼Œé€™å€‹ <strong>name</strong> å±¬æ€§å€¼å°æ‡‰çš„å³æ˜¯å¸ƒå±€æ¨¡æ¿çš„åç¨±ã€‚</p><p>ä¸‹åœ–å¯ä»¥çœ‹è¦‹ï¼Œæˆ‘å€‘åœ¨ <strong>app.vue</strong> æ‰€å¯«çš„æ–‡å­—ã€Œé€™è£¡æ˜¯æœ€å¤–å±¤ app.vueã€ï¼Œæœƒæ˜¯åœ¨æœ€å¤–å±¤ï¼Œè€Œç·Šæ¥è‘—çš„ <code>&lt;NuxtLayout name="default">&lt;/NuxtLayout></code>ï¼Œå°±æ˜¯å¸ƒå±€é é¢ <code>default.vue</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617134195_02b2a3944c_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å¸ƒå±€æ¨¡æ¿ä¸­çš„æ’æ§½>å¸ƒå±€æ¨¡æ¿ä¸­çš„æ’æ§½</h3><p>å¦‚æœä½ æœ‰æ³¨æ„åˆ°ï¼Œ<strong>default.vue</strong> æª”æ¡ˆå…§ç¨‹å¼ç¢¼å…§ï¼Œæœ‰ä¸€å€‹æ’æ§½ <code>&lt;slot /></code>ï¼Œé€™è£¡å°±æœƒæ˜¯ <code>&lt;NuxtLayout></code> å…§çš„å…ƒç´ æ‰€é¡¯ç¤ºçš„ä½ç½®ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘åœ¨ <strong>app.vue</strong> ç¨ä½œèª¿æ•´ï¼š</p><h5 id=appvue-2>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-4 bg-white&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;pb-4 text-2xl text-slate-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯æœ€å¤–å±¤</span> <span class=nx>app</span><span class=p>.</span><span class=nx>vue</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtLayout</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;default&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 pt-4 text-xl text-slate-800&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>è¢«</span> <span class=nx>NuxtLayout</span> <span class=nx>åŒ…è£¹çš„å…ƒä»¶å°‡æœƒæ”¾ç½®åˆ°</span> <span class=nx>Layout</span> <span class=nx>çš„</span> <span class=nx>slot</span> <span class=nx>ä¸­</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>è¢« <code>&lt;NuxtLayout name="default"></code> åŒ…è£¹çš„å…ƒç´ ï¼Œå°±æœƒåœ¨å¸ƒå±€æ¨¡æ¿ä¸­çš„æ’æ§½ <code>&lt;slot /></code> é¡¯ç¤ºã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188382_5a181ede48_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=åœ¨å¸ƒå±€æ¨¡æ¿ä¸­å»ºç«‹å¤šå€‹æ’æ§½>åœ¨å¸ƒå±€æ¨¡æ¿ä¸­å»ºç«‹å¤šå€‹æ’æ§½</h3><p>ç•¶ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å¸ƒå±€æ¨¡æ¿ä¸­æ·»åŠ å¤šå€‹æ’æ§½ï¼Œä¸¦çµ¦äºˆåç¨±ï¼Œé€™æ¨£å°±å¯ä»¥å°‡å…§å®¹å®‰æ’åˆ°ç‰¹å®šçš„ä½ç½®ã€‚</p><h4 id=step-1-å»ºç«‹å…©å€‹å…·åçš„æ’æ§½-slotåˆ†åˆ¥ç‚º-header-èˆ‡-footer>Step 1. å»ºç«‹å…©å€‹å…·åçš„æ’æ§½ (Slot)ï¼Œåˆ†åˆ¥ç‚º <strong>header</strong> èˆ‡ <strong>footer</strong></h4><blockquote><p>å¦‚æœæ’æ§½æ²’æœ‰çµ¦äºˆ <strong>name</strong> å±¬æ€§ï¼Œé è¨­ç‚º <code>default</code>ã€‚</p></blockquote><h5 id=layoutsdefaultvue-1>layouts/default.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-sky-100 py-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 py-4 text-2xl text-gray-700&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯é è¨­çš„å¸ƒå±€</span><span class=err>ï¼Œ</span><span class=nx>å…¨éƒ¨é é¢éƒ½æœƒä½¿ç”¨åˆ°</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;header&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;footer&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-å°‡ä¸åŒå…§å®¹é¡¯ç¤ºæ–¼æŒ‡å®šçš„æ’æ§½ä½ç½®>Step 2. å°‡ä¸åŒå…§å®¹ï¼Œé¡¯ç¤ºæ–¼æŒ‡å®šçš„æ’æ§½ä½ç½®ã€‚</h4><h5 id=appvue-3>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-4 bg-white&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;pb-4 text-2xl text-slate-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯æœ€å¤–å±¤</span> <span class=nx>app</span><span class=p>.</span><span class=nx>vue</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtLayout</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;default&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 pt-4 text-xl text-green-500&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ®µæœƒæ”¾ç½®åœ¨</span> <span class=nx>header</span> <span class=nx>æ’æ§½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>default</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 pt-4 text-xl text-cyan-500&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>è¢«</span> <span class=nx>NuxtLayout</span> <span class=nx>åŒ…è£¹çš„å…ƒä»¶å°‡æœƒæ”¾ç½®åˆ°</span> <span class=nx>Layout</span> <span class=nx>çš„é è¨­</span> <span class=nx>slot</span> <span class=nx>ä¸­</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 pt-4 text-xl text-blue-500&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ®µæœƒæ”¾ç½®åœ¨</span> <span class=nx>footer</span> <span class=nx>æ’æ§½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹åœ–å¯ä»¥çœ‹è¦‹ï¼Œæˆ‘å€‘å°±å¯ä»¥ä¾æ­¤ä¾†å®‰æ’å„å€‹å…ƒä»¶ï¼Œæ–¼å¸ƒå±€æ¨¡æ¿æ’æ§½çš„æ‰€åœ¨ä½ç½®ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186618_5d72657e32_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢>å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢</h3><p>ç•¶ä½ ç†Ÿæ‚‰äº†æ’æ§½é…ç½®ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä¸­æ·»åŠ  <code>&lt;NuxtPage /></code> èˆ‡å»ºç«‹ <strong>pages</strong> ä¸‹çš„é é¢å…ƒä»¶ï¼Œä»¥é”åˆ°ä¸åŒçš„è·¯ç”±é é¢ï¼Œä½¿ç”¨ç›¸åŒçš„å¸ƒå±€æ–¹å¼ã€‚</p><p>å¦‚æœå¸ƒå±€æ¨¡æ¿çµåˆäº†è·¯ç”±é é¢ï¼Œæ•´é«”ç¶²ç«™å°±æœƒå¦‚ä¸‹çš„å·¢ç‹€é¡¯ç¤ºæ–¹å¼ï¼Œç¶²ç«™çš„å…¥å£é» <strong>app.vue</strong> æ”¾ç½®å¸ƒå±€æ¨¡æ¿ï¼Œæ¨¡æ¿å…§çš„å…§å®¹å‰‡ä½¿ç”¨è·¯ç”±çš„ <code>&lt;NuxtPage /></code>ï¼Œæœ€å¾Œå„å€‹è·¯ç”±çš„é é¢å°±æœƒåœ¨ <code>&lt;NuxtPage /></code> å®¹å™¨ä¸­é¡¯ç¤ºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>+---------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> app.vue                   <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> +-----------------------+ <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> layout                <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> +-------------------+ <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> <span class=p>|</span> page              <span class=p>|</span> <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> <span class=p>|</span>                   <span class=p>|</span> <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> <span class=p>|</span>                   <span class=p>|</span> <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=p>|</span> +-------------------+ <span class=p>|</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> +-----------------------+ <span class=p>|</span>
</span></span><span class=line><span class=cl>+---------------------------+
</span></span></code></pre></td></tr></table></div></div><h3 id=å»ºç«‹å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢>å»ºç«‹å¸ƒå±€æ¨¡æ¿èˆ‡è·¯ç”±é é¢</h3><h4 id=step-1-èª¿æ•´-appvue-å…¥å£é»>Step 1. èª¿æ•´ app.vue å…¥å£é»</h4><p>å°‡ <strong>app.vue</strong> èª¿æ•´ç‚ºä»¥ä¸‹å…§å®¹ï¼š</p><h5 id=appvue-4>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-4 bg-white&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;pb-4 text-2xl text-slate-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯æœ€å¤–å±¤</span> <span class=nx>app</span><span class=p>.</span><span class=nx>vue</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>NuxtPage</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-å»ºç«‹è·¯ç”±é é¢>Step 2. å»ºç«‹è·¯ç”±é é¢</h4><p>å»ºç«‹ <strong>./pages/index.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesindexvue-2>pages/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-6 bg-slate-50 py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™æ¨£æˆ‘å€‘å°±å¯ä»¥ä¾†è®“è·¯ç”±é é¢å…±ç”¨ç›¸åŒçš„å¸ƒå±€æ¨¡æ¿ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186638_b40c944d07_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å¤šå€‹è·¯ç”±é é¢å…±ç”¨é è¨­å¸ƒå±€æ¨¡æ¿>å¤šå€‹è·¯ç”±é é¢å…±ç”¨é è¨­å¸ƒå±€æ¨¡æ¿</h3><p>æ‰¿ä¸Šï¼Œæˆ‘å€‘å»ºç«‹å¥½é è¨­çš„å¸ƒå±€æ¨¡æ¿ï¼Œè®“å®ƒè² è²¬é¡¯ç¤ºè·¯ç”±çš„é é¢ã€‚</p><h4 id=step-1-æ–°å¢è·¯ç”±é é¢>Step 1. æ–°å¢è·¯ç”±é é¢</h4><p>æ–°å¢ <strong>./pages/about.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesaboutvue-1>pages/about.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-6 mb-4 bg-slate-50 py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-yellow-400&#34;</span><span class=p>&gt;</span><span class=nx>å¤§å®¶å¥½</span><span class=err>ï¼</span><span class=nx>æˆ‘æ˜¯</span> <span class=nx>Ryan</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=o>/</span><span class=nx>about</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ <strong>./pages/contact.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescontactvue-1>pages/contact.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-6 mb-4 bg-slate-50 py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-rose-400&#34;</span><span class=p>&gt;</span><span class=nx>å¦‚æœæ²’äº‹ä¸è¦æ‰¾æˆ‘</span> <span class=nx>xDDD</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-8 text-3xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯</span> <span class=o>/</span><span class=nx>contact</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-æ–°å¢è·¯ç”±é€£çµ>Step 2. æ–°å¢è·¯ç”±é€£çµ</h4><p>èª¿æ•´ <strong>./pages/index.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesindexvue-3>pages/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-6 mb-4 bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯é¦–é </span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 flex space-x-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>About</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/contact&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=nx>Contact</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾ï¼Œç¾åœ¨é¦–é  <code>/</code>ã€<code>/about</code> èˆ‡ <code>/contact</code> éƒ½å¥—ç”¨ä¸Šäº†é è¨­å¸ƒå±€ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964569_b4e67e211a_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å»ºç«‹å¤šå€‹å¸ƒå±€æ¨¡æ¿>å»ºç«‹å¤šå€‹å¸ƒå±€æ¨¡æ¿</h3><p>ä½ ä¹Ÿå¯ä»¥å»ºç«‹å¤šå€‹å¸ƒå±€æ¨¡æ¿ï¼Œå†ä¾æ“šä¸åŒçš„æƒ…å¢ƒï¼Œä½¿ç”¨ä¸åŒçš„å¸ƒå±€æ¨¡æ¿ã€‚</p><h4 id=step-1-å»ºç«‹æ–°çš„å¸ƒå±€æ¨¡æ¿>Step 1. å»ºç«‹æ–°çš„å¸ƒå±€æ¨¡æ¿</h4><p>æ–°å¢ <strong>./layouts/custom.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=layoutscustomvue>layouts/custom.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-rose-100 py-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 py-4 text-2xl text-gray-700&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>ä½¿ç”¨</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-bold text-rose-500&#34;</span><span class=p>&gt;</span><span class=nx>Custom</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=nx>å¸ƒå±€</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-æ–°å¢ä¸€å€‹è·¯ç”±é é¢>Step 2. æ–°å¢ä¸€å€‹è·¯ç”±é é¢</h4><p>æ–°å¢ <strong>./pages/custom.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescustomvue>pages/custom.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-6 bg-slate-50 py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-ä½¿ç”¨æŒ‡å®šå¸ƒå±€æ¨¡æ¿>Step 3. ä½¿ç”¨æŒ‡å®šå¸ƒå±€æ¨¡æ¿</h4><p>åœ¨ <strong>./pages/custom.vue</strong> ä¸­çš„ <strong>script</strong> ä½¿ç”¨ <code>definePageMeta</code> æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>layout</span><span class=o>:</span> <span class=s1>&#39;custom&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><code>definePageMeta</code> æ–¹æ³•ï¼Œæä¾›æˆ‘å€‘å¯ä»¥è¨­å®šç‰¹å®šçš„å¸ƒå±€æ¨¡æ¿ï¼Œ<code>layout</code> åƒæ•¸å€¼æ‰€å°æ‡‰çš„åç¨±ï¼Œå³ç‚º <strong>./layouts</strong> ç›®éŒ„ä¸‹çš„å¸ƒå±€æ¨¡æ¿ã€‚</p><blockquote><p>æ³¨æ„ï¼Œå¸ƒå±€æ¨¡æ¿çš„å‘½åè¢«è¦ç¯„ä½¿ç”¨ <strong>Kebab Case</strong> å‘½åæ³•ï¼Œè‹¥æª”æ¡ˆåç¨±ç‚º <strong>customLayout.vue</strong>ï¼Œå®ƒå°‡æœƒä»¥ <code>custom-layout</code> ä½œç‚º <strong>name</strong> å±¬æ€§å‚³éçµ¦</p></blockquote><p><img src=https://live.staticflickr.com/65535/52616188442_127e72da50_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=æ›´é€²éšçš„æŒ‡å®šå¸ƒå±€æ¨¡æ¿>æ›´é€²éšçš„æŒ‡å®šå¸ƒå±€æ¨¡æ¿</h3><p>æˆ‘å€‘èƒ½ä½¿ç”¨ <strong>layout: false</strong> ä¾†ç¦æ­¢ä½¿ç”¨é è¨­çš„å¸ƒå±€æ¨¡æ¿ï¼Œä¸¦åœ¨ <strong>template</strong> æ·»åŠ  <code>&lt;NuxtLayout name="custom"></code> ä¾†ä½¿ç”¨ <strong>custom</strong> å¸ƒå±€æ¨¡æ¿ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>NuxtLayout</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;custom&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-6 mb-4 bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>layout</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶å¸ƒå±€æ¨¡æ¿å¯ä»¥åœ¨ <strong>template</strong> ä¸­è¨­å®šä½¿ç”¨ï¼Œæˆ‘å€‘å°±èƒ½çµåˆæ’æ§½ç”šè‡³å‹•æ…‹çš„èª¿æ•´ <strong>name</strong> å±¬æ€§ï¼Œåšå‡ºæ›´å¤šæ¨£éˆæ´»çš„å¸ƒå±€æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964574_0e7759f29b_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä¸Šåœ–çš„åƒè€ƒç¨‹å¼ç¢¼ï¼š</p><h5 id=layoutscustomvue-1>layouts/custom.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-rose-100 py-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;px-6 py-4 text-2xl text-gray-700&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>ä½¿ç”¨</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-bold text-rose-500&#34;</span><span class=p>&gt;</span><span class=nx>Custom</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=nx>å¸ƒå±€</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>slot</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;footer&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pagescustomvue-1>pages/custom.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>NuxtLayout</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;custom&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>default</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-6 mb-4 bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-xl text-slate-600&#34;</span><span class=p>&gt;</span><span class=nx>æ„Ÿè¬æ‚¨é–±è®€</span> <span class=nx>Nuxe</span> <span class=mi>3</span> <span class=nx>å­¸ç¿’ç­†è¨˜</span><span class=err>ï½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>NuxtLayout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>layout</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶ä½ ä½¿ç”¨ <strong>definePageMeta</strong> æ–¹æ³•ï¼Œç¦æ­¢ä½¿ç”¨é è¨­çš„å¸ƒå±€æ¨¡æ¿å¾Œï¼Œä½ ä¹Ÿèƒ½ä½¿ç”¨ <code>setPageLayout</code> æ–¹æ³•ä¾†å‹•æ…‹æ”¹è®Šå¸ƒå±€ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=o>=</span> <span class=nx>enableCustomLayout</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>setPageLayout</span><span class=p>(</span><span class=s1>&#39;custom&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶ä½ çœ‹éäº†é€™ç¯‡å…§å®¹å¾Œï¼Œä½ æœƒç™¼ç¾ Nuxt 3 æ‰€æä¾›çš„å¸ƒå±€æ¨¡æ¿éå¸¸çš„å¥½ç”¨ï¼Œå¸ƒå±€æ¨¡æ¿è¦åŠƒå¥½å¾Œï¼Œçˆ¾å¾Œé é¢æ‰€ä½¿ç”¨åˆ°çš„ç›¸åŒå¸ƒå±€ï¼Œåªéœ€è¦æ›´æ”¹åŒä¸€å€‹å¸ƒå±€æ¨¡æ¿ï¼Œå¦‚æœå†çµåˆå…ƒä»¶åŒ–æŠ€å·§ï¼Œæ›´æ˜¯è®“ä½ çš„ç¨‹å¼ç¢¼å…¼å…·é‡è¤‡ä½¿ç”¨æ€§èˆ‡ç¶­è­·æ€§ã€‚</p><hr><h2 id=å…ƒä»¶-components>å…ƒä»¶ (Components)</h2><p>åœ¨å»ºç«‹ Vue çš„ç¶²ç«™é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘å€‘å¯èƒ½æœƒè‡ªå·±å°è£å…ƒä»¶ (Component) è®“ç¨‹å¼ç¢¼å¯ä»¥è¢«é‡è¤‡ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿é–‹ç™¼è€…ç¶­è­·ï¼Œé€™äº›ä¸€å€‹å€‹çš„å…ƒä»¶ï¼Œå¯ä»¥é€é<code>å…¨åŸŸè¨»å†Š (Global Registration)</code> è®“æ•´å€‹ Vue æ‡‰ç”¨ç¨‹å¼ä¸­éƒ½å¯ä»¥ä½¿ç”¨é€™å€‹å…ƒä»¶ï¼Œä¹Ÿå¯ä»¥é€é<code>å€åŸŸè¨»å†Š (Local Registration)</code> æ–¼ç‰¹å®šçš„å…ƒä»¶å†è¼‰å…¥ä½¿ç”¨ã€‚æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä»‹ç´¹ Nuxt 3 ä½¿ç”¨å…ƒä»¶æ™‚æ‡‰è©²éµå¾ªçš„è¦ç¯„åŠç‰¹è‰²ã€‚</p><h3 id=å…ƒä»¶è‡ªå‹•è¼‰å…¥>å…ƒä»¶è‡ªå‹•è¼‰å…¥</h3><p>åœ¨ Vue ä¸­ï¼Œé›–ç„¶å€åŸŸè¨»å†Šä½¿å¾—å…ƒä»¶é–“çš„ä¾è³´é—œä¿‚æ›´åŠ æ˜ç¢ºä¹Ÿå°æ–¼ <a class=link href=https://developer.mozilla.org/zh-CN/docs/Glossary/Tree_shaking target=_blank rel=noopener>Tree shaking</a> æ›´åŠ å‹å¥½ï¼Œä½†æˆ‘å€‘åœ¨ä½¿ç”¨å…ƒä»¶æ™‚ï¼Œå°±å¾—åœ¨éœ€è¦çš„åœ°æ–¹å€‹åˆ¥è¼‰å…¥åŠè¨»å†Šã€‚è€Œ Nuxt 3 æä¾›åœ¨ <strong>components</strong> ç›®éŒ„ä¸‹å°ˆé–€æ”¾è‡³é€™äº›å…ƒä»¶ï¼Œä¸¦å…·æœ‰è‡ªå‹•è¼‰å…¥åŠå»¶é²è¼‰å…¥ç­‰åŠŸèƒ½ç‰¹è‰²ã€‚</p><h4 id=å»ºç«‹èˆ‡ä½¿ç”¨å…ƒä»¶>å»ºç«‹èˆ‡ä½¿ç”¨å…ƒä»¶</h4><p>æ–°å¢ <strong>./components/IronManWelcome.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=componentsironmanwelcomevue-1>components/IronManWelcome.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>èª¿æ•´ <strong>./app.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-5>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>IronManWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘å»ºç«‹äº† <strong>./components/IronManWelcome.vue</strong> æª”æ¡ˆå¾Œï¼ŒNuxt æœƒè‡ªå‹•è¼‰å…¥ <strong>./components</strong> ç›®éŒ„ä¸­çš„<code>ä»»ä½•å…ƒä»¶</code>ï¼Œåœ¨ä½¿ç”¨æ™‚çš„å…ƒä»¶åç¨±ä¹Ÿå°æ‡‰è‘—æª”æ¡ˆåç¨±ï¼Œæ‰€ä»¥æˆ‘å€‘åªéœ€ç›´æ¥æ·»åŠ  <code>&lt;IronManWelcome /></code> å°±å¯ä»¥ç›´äº›ä½¿ç”¨é€™å€‹å…ƒä»¶ã€‚</p><h3 id=å…ƒä»¶åç¨±>å…ƒä»¶åç¨±</h3><p>Nuxt æ‰€è‡ªå‹•è¼‰å…¥ <strong>./components</strong> ç›®éŒ„ä¸‹çš„å…ƒä»¶ï¼Œåœ¨ä½¿ç”¨æ™‚çš„å…ƒä»¶åç¨±ä¹Ÿå°æ‡‰è‘—æª”æ¡ˆåç¨±ï¼Œè€Œç•¶ä½ åœ¨å·¢ç‹€çš„ç›®éŒ„çµæ§‹ä¸‹çš„å…ƒä»¶ï¼Œ<code>å…ƒä»¶çš„åç¨±å°‡æœƒåŸºæ–¼ç›®éŒ„çš„è·¯å¾‘èˆ‡æª”æ¡ˆåç¨±ï¼Œä¸¦åˆªé™¤é‡è¤‡çš„å­—æ®µ</code>ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœ <strong>./components</strong> ç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>components/
</span></span><span class=line><span class=cl>â””â”€â”€ base/
</span></span><span class=line><span class=cl>    â””â”€â”€ apply/
</span></span><span class=line><span class=cl>        â””â”€â”€ Button.vue
</span></span></code></pre></td></tr></table></div></div><p><strong>./components/base/apply/Button.vue</strong> å…ƒä»¶çš„åç¨±å°±æœƒæ˜¯ç”±ç›®éŒ„èˆ‡æª”æ¡ˆåç¨±çµ„åˆå‡ºçš„ <code>&lt;BaseApplyButton></code>ã€‚</p><p>ç‚ºäº†é–‹ç™¼ä¸Šèƒ½æ›´æ¸…æ¥šè¾¨åˆ¥ï¼Œå»ºè­°å°‡æª”æ¡ˆåç¨±è¨­ç½®èˆ‡ä½¿ç”¨å…ƒä»¶æ™‚çš„åç¨±ç›¸åŒï¼Œæ‰€ä»¥æˆ‘å€‘é‡æ–°å‘½å <strong>./components/base/apply/</strong> ä¸‹çš„ <strong>Button.vue</strong> ç‚º <code>BaseApplyButton.vue</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>components/
</span></span><span class=line><span class=cl>â””â”€â”€ base/
</span></span><span class=line><span class=cl>    â””â”€â”€ apply/
</span></span><span class=line><span class=cl>        â””â”€â”€ BaseApplyButton.vue
</span></span></code></pre></td></tr></table></div></div><p>ä½ ä¹Ÿä¸ç”¨æ“”å¿ƒå…ƒä»¶åç¨±æœƒä¸æœƒè®Šæˆ <code>&lt;BaseApplyBaseApplyButton></code> çœ‹èµ·ä¾†æœ‰é»é†œé†œçš„ï¼Œå› ç‚º Nuxt æœƒå¹«æˆ‘å€‘<code>åˆªé™¤é‡è¤‡çš„å­—æ®µ</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ™‚å…ƒä»¶åç¨±ç‚º <code>&lt;BaseApplyButton></code>ã€‚</p><h4 id=å…ƒä»¶åç¨±çš„å‘½åè¦å‰‡>å…ƒä»¶åç¨±çš„å‘½åè¦å‰‡</h4><p>Vue åœ¨è¨»å†Šå…ƒä»¶æ™‚ï¼Œå¯ä»¥ä½¿ç”¨å¤§é§å³°å¼å‘½åæ³• (Pascal Case) æˆ–çƒ¤è‚‰ä¸²å‘½åæ³• (Kebab Case) ä¾†ç‚ºå…ƒä»¶å‘½åï¼Œä¸¦åœ¨ <strong>template</strong> ä¹Ÿå¯ä»¥è‡ªç”±ä½¿ç”¨å…©ç¨®å‘½åæ–¹å¼ä½œç‚ºä½¿ç”¨å…ƒä»¶çš„æ¨™ç±¤ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ <code>&lt;base-apply-button></code> ä¾†è¡¨ç¤ºä½¿ç”¨ <strong>./components/base/apply/BaseApplyButton.vue</strong> å…ƒä»¶ã€‚</p><p>æŠ‘æˆ–å»ºç«‹ <strong>./components/base/apply/base-apply-button.vue</strong> å…ƒä»¶ï¼Œä½¿ç”¨æ™‚ä»¥ <code>&lt;BaseApplyButton></code> è¡¨ç¤ºã€‚</p><p>å…©ç¨®æ–¹å¼ Nuxt éƒ½æ”¯æ´ï¼Œå¯ä»¥æ ¹æ“šè‡ªå·±çš„ç¿’æ…£åšé¸æ“‡ï¼Œè€Œæˆ‘å€‹äººæ˜¯ä»¥å¤§é§å³°å¼å‘½åæ³• (Pascal Case) ç‚ºä¸»ï¼Œä»¥æ­¤å€åˆ¥ç‚ºè‡ªå·±å»ºç«‹çš„å…ƒä»¶ã€‚</p><h3 id=å‹•æ…‹å…ƒä»¶-dynamic-components>å‹•æ…‹å…ƒä»¶ (Dynamic Components)</h3><p>å¦‚æœæƒ³è¦ä½¿ç”¨åƒ Vue ä¸­çš„ <code>&lt;component :is="someComputedComponent"></code> ä¾†<a class=link href=https://cn.vuejs.org/guide/essentials/component-basics.html#dynamic-components target=_blank rel=noopener>å‹•æ…‹</a>çš„åˆ‡æ›ä¸åŒçš„å…ƒä»¶ï¼Œå‰‡éœ€è¦ä½¿ç”¨ Vue æä¾›çš„ <code>resolveComponentVue</code> æ–¹æ³•ä¾†é€²è¡Œè¼”åŠ©ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>component</span> <span class=o>:</span><span class=na>is</span><span class=o>=</span><span class=s>&#34;show ? DynamicComponent : &#39;div&#39;&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>show</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>DynamicComponent</span> <span class=o>=</span> <span class=nx>resolveComponent</span><span class=p>(</span><span class=s1>&#39;BaseApplyButton&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å»ºç«‹å‹•æ…‹å…ƒä»¶>å»ºç«‹å‹•æ…‹å…ƒä»¶</h3><h4 id=step-1-å»ºç«‹å…ƒä»¶>Step 1. å»ºç«‹å…ƒä»¶</h4><p>æ–°å¢ <strong>./components/base/apply/BaseApplyButton.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=componentsbaseapplybaseapplybuttonvue>components/base/apply/BaseApplyButton.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>    <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 bg-blue-600 py-3 px-8 text-xl font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>ç«‹å³å ±å</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ <strong>./components/round/apply/RoundApplyButton.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=componentsroundapplyroundapplybuttonvue>components/round/apply/RoundApplyButton.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>    <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 rounded-full bg-blue-600 py-3 px-8 text-xl font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>ç«‹å³å ±å</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-ä½¿ç”¨-resolvecomponent>Step 2. ä½¿ç”¨ resolveComponent()</h4><p>èª¿æ•´ <strong>./app.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-6>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 flex items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>        <span class=na>id</span><span class=o>=</span><span class=s>&#34;show-button&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nt>v-model</span><span class=s>=&#34;useRound&#34;
</span></span></span><span class=line><span class=cl><span class=s>        name=&#34;show-button&#34;
</span></span></span><span class=line><span class=cl><span class=s>        type=&#34;checkbox&#34;
</span></span></span><span class=line><span class=cl><span class=s>        class=&#34;h-5 w-5&#34;
</span></span></span><span class=line><span class=cl><span class=s>      /&gt;
</span></span></span><span class=line><span class=cl><span class=s>      &lt;label for=&#34;show-button&#34; class=&#34;ml-2 block text-base text-slate-800&#34;</span><span class=p>&gt;</span><span class=err>ä½¿ç”¨åœ“è§’æŒ‰éˆ•</span><span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>component</span> <span class=o>:</span><span class=na>is</span><span class=o>=</span><span class=s>&#34;useRound ? RoundButton : BaseButton&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>useRound</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>BaseButton</span> <span class=o>=</span> <span class=nx>resolveComponent</span><span class=p>(</span><span class=s1>&#39;BaseApplyButton&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>RoundButton</span> <span class=o>=</span> <span class=nx>resolveComponent</span><span class=p>(</span><span class=s1>&#39;RoundApplyButton&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å‘ˆç¾æ•ˆæœï¼š</p><p><img src=https://live.staticflickr.com/65535/52617134245_0c359ab608_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å‹•æ…‹è¼‰å…¥-dynamic-imports>å‹•æ…‹è¼‰å…¥ (Dynamic Imports)</h3><p>å‹•æ…‹è¼‰å…¥ (Dynamic Imports) å…ƒä»¶ä¹Ÿç¨±ä¹‹ç‚º<code>å»¶é²è¼‰å…¥ (lazy-loading)</code>ï¼Œå¦‚æœé é¢ä¸­ä¸éœ€è¦ç«‹åˆ»ä½¿ç”¨æˆ–é¡¯ç¤ºæŸå€‹å…ƒä»¶ï¼Œé€éå‹•æ…‹è¼‰å…¥çš„æ–¹å¼å¯ä»¥<code>å»¶é²å…ƒä»¶è¼‰å…¥çš„æ™‚é–“é»</code>ï¼Œæœ‰åŠ©æ–¼å„ªåŒ– JavaScript é¦–æ¬¡è¼‰å…¥æ™‚çš„æª”æ¡ˆå¤§å°ã€‚</p><p>ä½¿ç”¨çš„æ–¹å¼ä¹Ÿéå¸¸ç°¡å–®ï¼Œåªéœ€è¦åœ¨ä½¿ç”¨å…ƒä»¶æ™‚ï¼ŒåŠ ä¸Šå‰ç¶´ <code>Lazy</code> å°±å¯ä»¥æœ‰å»¶é²è¼‰å…¥çš„æ•ˆæœã€‚</p><h4 id=å»ºç«‹ä¸€å€‹å‹•æ…‹è¼‰å…¥çš„æŒ‰éˆ•>å»ºç«‹ä¸€å€‹å‹•æ…‹è¼‰å…¥çš„æŒ‰éˆ•</h4><h4 id=step-1-å»ºç«‹æŒ‰éˆ•å…ƒä»¶>Step 1. å»ºç«‹æŒ‰éˆ•å…ƒä»¶</h4><p>æ–°å¢ <strong>./components/base/apply/BaseApplyButton.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=componentsbaseapplybaseapplybuttonvue-1>components/base/apply/BaseApplyButton.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>    <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 rounded-sm bg-blue-600 py-3 px-8 text-xl font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>ç«‹å³å ±å</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-æ·»åŠ -lazy-å‰ç¶´>Step 2. æ·»åŠ  Lazy å‰ç¶´</h4><p>èª¿æ•´ <strong>./app.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-7>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 flex items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>input</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;show-button&#34;</span> <span class=nt>v-model</span><span class=s>=&#34;show&#34; name=&#34;show-button&#34; type=&#34;checkbox&#34; class=&#34;h-5 w-5&#34; /&gt;
</span></span></span><span class=line><span class=cl><span class=s>      &lt;label for=&#34;show-button&#34; class=&#34;ml-2 block text-base text-slate-800&#34;</span><span class=p>&gt;</span><span class=err>é¡¯ç¤ºå ±åæŒ‰éˆ•</span><span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>LazyBaseApplyButton</span> <span class=na>v</span><span class=nt>-if</span><span class=err>=&#34;</span><span class=na>show</span><span class=err>&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>show</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>çœ‹çœ‹å»¶é²è¼‰å…¥çš„æ•ˆæœï¼š</p><p>åœ¨é é¢ä¸Šæœ‰ä¸€å€‹æ ¸å–æ–¹å¡Šï¼Œä½¿ç”¨è€…å‹¾é¸æ™‚æ‰é¡¯ç¤ºæŒ‰éˆ•ï¼Œæˆ‘å€‘é€éç€è¦½å™¨çš„é–‹ç™¼è€…å·¥å…·è§€å¯Ÿç¶²è·¯ (Network) çš„ä½¿ç”¨æƒ…æ³ï¼Œå¯ä»¥ç™¼ç¾åªæœ‰é¦–æ¬¡å‹¾é¸å¾Œæ‰è«‹æ±‚äº† <strong>BaseApplyButton.vue</strong> æŒ‰éˆ•å…ƒä»¶ JSã€‚ç•¶é€™å€‹æŒ‰éˆ•å…ƒä»¶è¢«è¨­ç½®ç‚º <code>Lazy</code> å‹•æ…‹è¼‰å…¥æ™‚ï¼Œé é¢é¦–æ¬¡è¼‰å…¥å…¶å¯¦ä¸æœƒåŒ…å«é€™å€‹æŒ‰éˆ•çš„ç¨‹å¼ç¢¼ï¼Œè€Œæ˜¯ç­‰å¾…éœ€è¦é€™å€‹å…ƒä»¶æ™‚æ‰å»è«‹æ±‚ä¸‹è¼‰ï¼Œä»¥æ­¤é”åˆ°<code>å»¶é²è¼‰å…¥</code>çš„æ•ˆæœï¼ŒåŒæ™‚ä¹Ÿé™ä½é¦–æ¬¡é€²å…¥ç¶²é æ™‚éœ€è¦ä¸‹è¼‰çš„ JavaScript ç¨‹å¼ç¢¼å¤§å°ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698371_6fc18a0e8b_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶>æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶</h3><h4 id=clientonly-å…ƒä»¶><code>&lt;ClientOnly></code> å…ƒä»¶</h4><p>Nuxt 3 æä¾›äº†ä¸€å€‹ <code>&lt;ClientOnly></code> å…ƒä»¶ï¼Œå¯ä»¥æ§åˆ¶è¢«åŒ…è£¹çš„å…ƒä»¶åƒ…åœ¨å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘å»ºç«‹ <strong>./components/IronManWelcome.vue</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=componentsironmanwelcomevue-2>components/IronManWelcome.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ <code>&lt;ClientOnly></code> å…ƒä»¶åŒ…è£¹ <code>&lt;IronManWelcome></code>ã€‚</p><p>èª¿æ•´ <strong>./app.vue</strong> ä¸­ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-8>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>IronManWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™æ¨£å°±å¯ä»¥å°‡ <code>&lt;IronManWelcome></code> å…ƒä»¶è¨­å®šç‚ºåƒ…åœ¨å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ï¼Œé¦–æ¬¡è«‹æ±‚é é¢æ™‚å°‡ä¸æœƒåŒ…å«é€™å€‹å…ƒä»¶çš„ HTMLã€‚</p><p><code>&lt;ClientOnly></code> å…ƒä»¶ä¸­æä¾›äº†ä¸€å€‹åç‚º <code>fallback</code> çš„æ’æ§½ (Slot)ï¼Œå¯ä»¥ç”¨ä½œæ–¼åœ¨ä¼ºæœå™¨æ¸²æŸ“çš„é è¨­å…§å®¹ï¼Œç­‰åˆ°å®¢æˆ¶ç«¯è¼‰å…¥å®Œæˆæ‰æ¥æ‰‹æ¸²æŸ“è¢«åŒ…è£¹çš„ <code>&lt;IronManWelcome></code> å…ƒä»¶ã€‚</p><p>èª¿æ•´ <strong>./app.vue</strong> ä¸­ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=appvue-9>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>IronManWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>fallback</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-6 flex justify-center&#34;</span><span class=p>&gt;[</span><span class=nx>IronManWelcome</span><span class=p>]</span> <span class=nx>è¼‰å…¥ä¸­</span><span class=p>...&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶é€²å…¥é¦–æ¬¡ç¶²é ï¼Œæœƒå…ˆæ¸²æŸ“ <code>fallback</code> æ’æ§½å…§çš„å…ƒç´ ï¼Œæ‰€ä»¥ç€è¦½å™¨å…ˆé¡¯ç¤º <strong>[IronManWelcome] è¼‰å…¥ä¸­&mldr;</strong> æ–‡å­—ï¼Œæ¥è‘—å®¢æˆ¶ç«¯è¼‰å…¥å®Œ JS å¾Œæ¥æ‰‹æ¸²æŸ“ <code>&lt;IronManWelcome></code> å…ƒä»¶ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188487_a1bc229272_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½ ä¹Ÿå¯ä»¥é€éç€è¦½å™¨é é¢ä¸­é»æ“Šå³éµå¾Œå±•é–‹é¸å–®çš„ã€Œæª¢è¦–ç¶²é åŸå§‹ç¢¼ã€åŠŸèƒ½ï¼Œæ‰€çœ‹åˆ°çš„ç¶²é åŸå§‹ç¢¼ï¼Œç™¼ç¾ä¼ºæœå™¨ç«¯åƒ…å…ˆå›æ‡‰äº† <code>&lt;p class="my-6 flex justify-center">[IronManWelcome] è¼‰å…¥ä¸­...&lt;/p></code>ï¼Œè¡¨ç¤ºé€™æ˜¯ç”±ä¼ºæœå™¨ç«¯æ¸²æŸ“ <code>&lt;ClientOnly></code> å…ƒä»¶ <code>fallback</code> æ’æ§½çš„å…§å®¹ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964604_68d7e7bf6a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=client-èˆ‡-server>.client èˆ‡ .server</h4><p>Nuxt 3 çš„å…ƒä»¶ï¼Œä¹Ÿå¯ä»¥é€éå…ƒä»¶çš„æª”æ¡ˆåç¨±ä¾†æ§åˆ¶åƒ…é¡¯ç¤ºåœ¨å®¢æˆ¶ç«¯æˆ–ä¼ºæœå™¨ç«¯ã€‚</p><p>å¦‚æœå…ƒä»¶åƒ…åœ¨å®¢æˆ¶ç«¯å‘ˆç¾ï¼Œå‰‡å¯ä»¥å°‡ <code>.client</code> åŠ å…¥å…ƒä»¶æª”åçš„å¾Œç¶´ä¸­ã€‚</p><p>å»ºç«‹ä¸€å€‹ <strong>./components/JustClient.client.vue</strong> å…ƒä»¶æª”æ¡ˆï¼Œè¡¨ç¤º <code>&lt;JustClient></code> å…ƒä»¶ï¼Œåƒ…æœƒåœ¨å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ã€‚</p><p>è€Œæ·»åŠ  <code>.server</code> å¾Œç¶´çš„å…ƒä»¶æª”æ¡ˆï¼Œå‰‡æœƒæ˜¯é€™å€‹å…ƒä»¶åœ¨ä¼ºæœå™¨ç«¯æ¸²æŸ“çš„å…§å®¹ã€‚</p><h4 id=æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶ç¯„ä¾‹>æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶ç¯„ä¾‹</h4><p>æˆ‘å€‘ä½¿ç”¨ <code>&lt;ClientOnly></code> å…ƒä»¶ã€<code>.client</code> èˆ‡ <code>.server</code> åšä¸€å€‹ç¯„ä¾‹ä¾†çœ‹å‘ˆç¾çš„æ•ˆæœã€‚</p><h5 id=componentsironmanwelcomevue-3>components/IronManWelcome.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;</span><span class=mi>2022</span> <span class=nx>iThome</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-bold text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>éµäººè³½</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=componentsjustclientclientvue>components/JustClient.client.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-16 my-4 rounded-lg bg-green-100 p-4 text-sm text-green-700&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-semibold&#34;</span><span class=p>&gt;[</span><span class=nx>JustClient</span><span class=p>]&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ml-2&#34;</span><span class=p>&gt;</span><span class=nx>é€™æ˜¯åªæœ‰åœ¨</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-bold&#34;</span><span class=p>&gt;</span><span class=nx>Client</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=nx>æ‰æœƒæ¸²æŸ“çš„å…ƒä»¶</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=componentsclientandserverclientvue>components/ClientAndServer.client.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-16 my-4 rounded-lg bg-sky-100 p-4 text-sm text-sky-700&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-semibold&#34;</span><span class=p>&gt;[</span><span class=nx>ClientAndServer</span><span class=p>]&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ml-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>é€™æ˜¯å¾</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-bold text-red-500&#34;</span><span class=p>&gt;</span><span class=nx>Client</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=nx>æ¸²æŸ“å‡ºä¾†çš„å…ƒä»¶</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=componentsclientandserverservervue>components/ClientAndServer.server.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mx-16 my-4 rounded-lg bg-sky-100 p-4 text-sm text-sky-700&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-semibold&#34;</span><span class=p>&gt;[</span><span class=nx>ClientAndServer</span><span class=p>]&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ml-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>é€™æ˜¯å¾</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-bold text-red-500&#34;</span><span class=p>&gt;</span><span class=nx>Server</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=nx>æ¸²æŸ“å‡ºä¾†çš„å…ƒä»¶</span><span class=err>ï¼Œ</span><span class=nx>è«‹ç­‰å¾…</span> <span class=nx>Client</span>
</span></span><span class=line><span class=cl>      <span class=nx>æ¥æ‰‹æ¸²æŸ“</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=appvue-10>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>IronManWelcome</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>fallback</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-6 flex justify-center&#34;</span><span class=p>&gt;[</span><span class=nx>IronManWelcome</span><span class=p>]</span> <span class=nx>è¼‰å…¥ä¸­</span><span class=p>...&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>JustClient</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ClientAndServer</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘é‡æ–°ç€è¦½ç¶²é ï¼Œå¯ä»¥ç™¼ç¾åˆ°ç”±ä¼ºæœå™¨æ¸²æŸ“çš„æ’æ§½å…ƒç´  <strong>[IronManWelcome] è¼‰å…¥ä¸­&mldr;</strong> æ–‡å­—èˆ‡ <strong>ClientAndServer.server.vue</strong> å…ƒä»¶ï¼Œç‡å…ˆè¢«é¡¯ç¤ºäº†å‡ºä¾†ã€‚æ¥è‘—ç•¶ JS è¼‰å…¥å®Œç•¢å¾Œï¼Œè¢« åŒ…è£¹çš„å…ƒä»¶ <code>&lt;IronManWelcome></code> ä¹Ÿæ¥æ‰‹ä¸¦è¦†è“‹äº†ã€Œ<strong>[IronManWelcome] è¼‰å…¥ä¸­&mldr;</strong>ã€æ–‡å­—ï¼Œ<strong>ClientAndServer.client.vue</strong> èˆ‡ <strong>JustClient.client.vue</strong> åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“çš„å…ƒä»¶ï¼Œä¹Ÿåˆ†åˆ¥çš„è¦†è“‹èˆ‡é¡¯ç¤ºå‡ºä¾†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186703_ecb68732a9_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é€éå…ƒä»¶æˆ‘å€‘èƒ½æ›´å¥½çš„æ•´ç†å¯é‡è¤‡ä½¿ç”¨çš„ç¨‹å¼ç¢¼ï¼Œä¹Ÿæå‡äº†å¯ç¶­è­·æ€§ï¼Œè€Œ Nuxt ä¸­çš„å‹•æ…‹è¼‰å…¥æ›´æ˜¯èƒ½å°‡éå¿…è¦ä½¿ç”¨çš„å…ƒä»¶å»¶é²è¼‰å…¥ï¼Œå¤§å¤§æå‡äº†é¦–æ¬¡é€²å…¥ç¶²é æ‰€éœ€è¦ä¸‹è¼‰çš„æª”æ¡ˆå¤§å°ï¼Œæœ€å¾Œæˆ‘å€‘ä¹Ÿä»‹ç´¹äº†å¦‚ä½•æ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“å…ƒä»¶ï¼Œç†Ÿæ‚‰äº†ä¹‹å¾Œå°±èƒ½é‡å°ç¶²ç«™éœ€æ±‚è¨­å®šå…ƒä»¶çš„è¼‰å…¥åŠæ¸²æŸ“æ–¹å¼å›‰ï¼</p><hr><h2 id=çµ„åˆå¼å‡½æ•¸-composables>çµ„åˆå¼å‡½æ•¸ (Composables)</h2><p>çµ„åˆå¼å‡½æ•¸ (Composables) æ˜¯ä¸€ç¨®åˆ©ç”¨ Vue 3 çš„ <strong>Composition API</strong> ä¾†å°è£å’Œè¤‡ç”¨<code>æœ‰ç‹€æ…‹é‚è¼¯</code>çš„å‡½æ•¸ï¼Œåœ¨ Nuxt æˆ‘å€‘å¯ä»¥å°‡ä¸€äº›é€šç”¨çš„å•†æ¥­é‚è¼¯æ”¾ç½®åœ¨ <code>composables</code> ä¾†å»ºç«‹çµ„åˆå¼å‡½æ•¸ï¼Œé€™æ¨£ä¸€ä¾†å°±å¯ä»¥åœ¨å„å€‹é é¢å…±ç”¨é€™å€‹çµ„åˆå¼å‡½æ•¸ã€‚</p><h3 id=options-api-èˆ‡-composition-api>Options API èˆ‡ Composition API</h3><ul><li>é¸é …å¼ API (Options API)ï¼š</li></ul><p>ä¸‹åˆ—é€™æ®µæ˜¯ Vue ä¾æ“š Options API æ’°å¯«å‡ºä¾†çš„ç¨‹å¼ç¢¼ï¼Œä¹Ÿæ˜¯ Vue 2 è™•ç†é‚è¼¯çš„å¯«æ³•ï¼Œæ‰€è¬‚ Options (é¸é …ã€å¯é¸çš„) æŒ‡çš„å°±æ˜¯ä»¥ç¨‹å¼ç¢¼çš„æ€§è³ªä¾†åˆ†å‰²ç¨‹å¼ç¢¼ï¼Œæ‰€æœ‰è¨­å®šè³‡æ–™åˆå§‹å€¼çš„éƒ½æœƒåœ¨ <strong>data</strong> é€™é‚Šè™•ç†ï¼Œé€™å€‹å…ƒä»¶æ‰€éœ€è¦çš„æ–¹æ³•å‰‡æœƒåœ¨ <strong>methods</strong> é€™è£¡å»ºç«‹ï¼Œ<strong>data</strong> åŠ <strong>methods</strong> ä¹Ÿå°±æ˜¯ä½¿ç”¨è€…éœ€è¦çš„<strong>é¸é …</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>doubleCount</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>incrementByTwo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>doubleCount</span> <span class=o>+=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>çµ„åˆå¼ API (Composition API)ï¼š</li></ul><p>ç›®å‰åœ¨ Vue 3 ä½ ä»å¯ä»¥ç¹¼çºŒä½¿ç”¨ Vue 2 çš„ Options APIï¼Œä½†éš¨è‘—ç¨‹å¼ç¢¼é‚è¼¯çš„å¢åŠ ï¼Œçœ‹ä¼¼æœ‰æ¢ç†çš„åˆ†é¡ï¼Œå…¶å¯¦å°æ–¼ç†è§£åŠç¶­è­·ä¸Šæ²’æœ‰æƒ³åƒä¸­ä¾¿åˆ©ã€‚</p><p>Vue 3 æå‡ºçš„<strong>çµ„åˆå¼ API (Composition API)</strong> å‰‡æ˜¯ä»¥é‚è¼¯åŠŸèƒ½ä¾†é€²è¡Œåˆ†é¡ï¼Œä½ å¯ä»¥å°‡æ‰€æœ‰èˆ‡æŸå€‹åŠŸèƒ½çš„ <strong>data</strong>ã€<strong>computed</strong>ã€<strong>methods</strong> èˆ‡ <strong>watch</strong> &mldr;ç­‰ï¼Œå¯«åœ¨åŒä¸€å€‹æ®µè½è¡Œç¨‹ä¸€å€‹å€å¡Šã€‚</p><p>è©³ç´°èªªæ˜å¯é–±è®€å…ˆå‰æ’°å¯«çš„<a class=link href=https://wayneblog.ga/2022-08-11/option-api-vs-composition-api/>åœ–è§£ Option API vs Composition API</a>æ–‡ç« ã€‚</p><h3 id=mixins-èˆ‡-composables>Mixins èˆ‡ Composables</h3><p>åœ¨ Options API å¯ä»¥ä½¿ç”¨ <code>mixin</code> ä¾†å¼•å…¥å¯ä»¥é‡è¤‡ä½¿ç”¨çš„ç¨‹å¼ç¢¼ï¼Œè®“ä¸åŒçš„å…ƒä»¶å¯ä»¥å…±ç”¨å‡½æ•¸æ–¹æ³•ï¼Œä½†éš¨è‘—å°ˆæ¡ˆè®Šå¤§ï¼ŒåŒä¸€å€‹å…ƒä»¶å¯èƒ½ä½¿ç”¨ mixin åŒæ™‚ä¾†å¼•ç”¨è¨±å¤šçš„å…±ç”¨å‡½æ•¸ï¼Œé€™å°‡å°è‡´å®¹æ˜“ç”¢ç”Ÿå‘½åè¡çªã€å…ƒä»¶é–“çš„è€¦åˆèˆ‡ä¾†æºä¸å¤ æ¸…æ™°ç­‰å•é¡Œï¼ˆè©³ç´°åŸå› è«‹åƒè€ƒ<a class=link href=https://wayneblog.ga/2022-12-30/why-use-hooks/>æ·ºè«‡ç‚ºä»€éº¼ Vue å’Œ React éƒ½é¸æ“‡äº† Hooksï¼Ÿ</a>ï¼‰ã€‚</p><p>Vue 3 ç‚ºæˆ‘å€‘å¸¶ä¾†äº†çµ„åˆå¼ APIï¼Œå¯¦ç¾äº†æ›´ä¹¾æ·¨çš„ç¨‹å¼ç¢¼ç·¨æ’èˆ‡é«˜æ•ˆçš„é‚è¼¯é‡ç”¨ï¼Œ**çµ„åˆå¼å‡½æ•¸ (Composables)**ä¹ŸåŸºæ–¼çµ„åˆå¼ API ä¾†é€²è¡Œå°è£é€™äº›å¯è¤‡ç”¨çš„é‚è¼¯ï¼Œæ›´è§£æ±ºäº†ä½¿ç”¨ mixin å¯¦ç¾å…±ç”¨å‡½æ•¸çš„ç¼ºé»ã€‚</p><h3 id=çµ„åˆå¼å‡½æ•¸-composables-1>çµ„åˆå¼å‡½æ•¸ (Composables)</h3><p>åœ¨ Nuxt 3 ä¸­è¦å»ºç«‹ä¸€å€‹<code>çµ„åˆå¼å‡½æ•¸ (Composables)</code> æˆ‘å€‘å¯ä»¥åœ¨ <code>composables</code> ç›®éŒ„ä¸‹ç·¨å¯«ï¼Œé€™äº›å¸¸ç”¨çš„å‡½æ•¸ï¼Œå°‡æœƒè¢« Nuxt 3 è‡ªå‹•è¼‰å…¥åšä½¿ç”¨ï¼Œå¯¦ç¾åœ¨å„å€‹å…ƒä»¶ä½¿ç”¨é€™äº›å‡½æ•¸æ–¹æ³•ã€‚</p><h4 id=å»ºç«‹çµ„åˆå¼å‡½æ•¸>å»ºç«‹çµ„åˆå¼å‡½æ•¸</h4><p>é¦–å…ˆï¼Œæˆ‘å€‘æ–°å¢ <strong>./composables/useCounter.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=composablesusecounterjs>composables/useCounter.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>increment</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Nuxt è‡ªå‹•å°å…¥çš„ç‰¹æ€§ï¼Œç¾åœ¨æˆ‘å€‘å°±èƒ½åœ¨å…¶ä»–å…ƒä»¶ä¸­ä½¿ç”¨ <strong>useCounter</strong> çµ„åˆå¼å‡½æ•¸ã€‚</p><p>æ–°å¢ <strong>./pages/count.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountvue>pages/count.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 text-4xl text-gray-700&#34;</span><span class=p>&gt;{{</span> <span class=nx>count</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>      <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-6 rounded-sm bg-sky-600 py-2 px-4 text-base font-medium text-white hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nt>@click</span><span class=s>=&#34;increment&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>å¢åŠ </span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>count</span><span class=p>,</span> <span class=nx>increment</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useCounter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=composables-çµ„åˆå¼å‡½æ•¸çš„åç¨±>Composables çµ„åˆå¼å‡½æ•¸çš„åç¨±</h3><p>å‰é¢ç¯„ä¾‹ä½¿ç”¨çš„ <code>useCounter()</code> æ˜¯ Nuxt 3 å¾ <strong>./composables/useCounter.js</strong> è‡ªå‹•è¼‰å…¥çš„ï¼Œè€Œä¸” Nuxt 3 çš„çµ„åˆå¼å‡½æ•¸çš„åç¨±ï¼Œæœ‰å…©ç¨®æ–¹å¼æœƒå½±éŸ¿ä½¿ç”¨æ™‚çš„å‡½æ•¸åç¨±ï¼Œä¸éä¹Ÿå»ºè­°åœ¨å»ºç«‹çµ„åˆå¼å‡½æ•¸å¯ä»¥ä½¿ç”¨ <code>use</code> ä½œç‚ºé–‹é ­ä¾†åŠ ä»¥è­˜åˆ¥ã€‚</p><h4 id=1-ä½¿ç”¨é è¨­åŒ¯å‡º-default-export>1. ä½¿ç”¨é è¨­åŒ¯å‡º (Default export)</h4><p>å¦‚æœåœ¨æª”æ¡ˆå…§ä½¿ç”¨çš„æ˜¯é è¨­åŒ¯å‡ºï¼Œé‚£éº¼é€™å€‹çµ„åˆå¼å‡½æ•¸åœ¨ä½¿ç”¨æ™‚ï¼Œå³<code>å°æ‡‰æª”æ¡ˆåç¨±</code>ï¼Œæª”æ¡ˆåç¨±å¯ä»¥æ˜¯å°å¯«é§å³°å¼ (Camel case) æˆ–çƒ¤è‚‰ä¸² (Kebab case)ï¼Œä¾‹å¦‚å»ºç«‹ <strong>./composables/useCounter.js</strong> æˆ– <strong>./composables/use-counter.js</strong> æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼Œä½¿ç”¨æ™‚çµ„åˆå¼å‡½æ•¸ç‚ºå°å¯«é§å³°å¼(Camel case) åç‚º <code>useCounter</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>increment</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=2-ä½¿ç”¨å…·ååŒ¯å‡º-named-export>2. ä½¿ç”¨å…·ååŒ¯å‡º (Named export)</h4><p>å¦‚æœå»ºç«‹çµ„åˆå¼å‡½æ•¸æ™‚ï¼Œä½¿ç”¨çš„æ˜¯æœ‰å…·åçš„åŒ¯å‡ºï¼Œé‚£éº¼<code>çµ„åˆå¼å‡½æ•¸å°æ‡‰çš„åç¨±ï¼Œå°±ä¸æ˜¯æª”æ¡ˆåç¨±ï¼Œè€Œæ˜¯æª”æ¡ˆå…§ export å‡ºä¾†çš„åç¨±</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œå»ºç«‹ <strong>./composables/count.js</strong>ï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼Œçµ„åˆå¼å‡½æ•¸åç¨±å°±ä¸æœƒæ˜¯æª”æ¡ˆåç¨± countï¼Œè€Œæ˜¯å…·åå°å‡ºçš„åç¨± <code>useCounter</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCounter</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>increment</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=composables-è‡ªå‹•è¼‰å…¥çš„è¦å‰‡>Composables è‡ªå‹•è¼‰å…¥çš„è¦å‰‡</h3><p><strong>composables</strong> ç›®éŒ„ä¸‹ï¼ŒNuxt 3 æœƒè‡ªå‹•æƒæ <strong>.js</strong>ã€<strong>.ts</strong> èˆ‡ <strong>.vue</strong> å‰¯æª”åçš„æª”æ¡ˆï¼Œä½†åªæœ‰<code>æœ€ä¸Šå±¤çš„æª”æ¡ˆ</code>ï¼Œæ‰æœƒè‡ªå‹•çš„è¢«è¼‰å…¥ç‚ºçµ„åˆå¼å‡½æ•¸ï¼Œä»¥ä¸‹é¢é€™å€‹ç›®éŒ„çµæ§‹ç‚ºä¾‹ï¼Œåªæœ‰ <strong>./composables/useCounter.js</strong> æ‰æœƒè¢«æ­£ç¢ºçš„è‡ªå‹•è¼‰å…¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composables/
</span></span><span class=line><span class=cl>â”œâ”€â”€ time/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ useDateFormat.js
</span></span><span class=line><span class=cl>â””â”€â”€ useCounter.js
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹åˆ—é€™ç¨®å½¢å¼ï¼Œ<strong>./composables/time/index.js</strong> ä¹Ÿèƒ½æ­£ç¢ºçš„è‡ªå‹•è¼‰å…¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composables/
</span></span><span class=line><span class=cl>â”œâ”€â”€ time/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ index.js
</span></span><span class=line><span class=cl>â””â”€â”€ useCounter.js
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ æƒ³è®“å·¢ç‹€çš„ç›®éŒ„çµæ§‹ä¸‹ä¹Ÿèƒ½è¢« Nuxt è‡ªå‹•æƒæè¼‰å…¥ï¼Œé‚£éº¼ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢å…©ç¨®æ–¹æ³•ï¼š</p><h4 id=ä¸€é‡æ–°åŒ¯å‡º-span-classfocusæ¨è–¦span>ä¸€ã€é‡æ–°åŒ¯å‡º <span class=focus>[æ¨è–¦]</span></h4><p>é…ç½® <strong>./composables/index.js</strong> å°‡ç›®éŒ„ä¸‹çš„å‡½æ•¸æ–¼é€™è£¡æ•´ç†ä¸¦åŒ¯å‡ºä½ éœ€è¦çš„ä½œç‚ºçµ„åˆå¼å‡½æ•¸ã€‚</p><h4 id=äºŒé…ç½®æƒæå·¢ç‹€ç›®éŒ„>äºŒã€é…ç½®æƒæå·¢ç‹€ç›®éŒ„</h4><p>ä¿®æ”¹ <code>nuxt.config.ts</code> æª”æ¡ˆï¼Œé…ç½®è‡ªå‹•è¼‰å…¥é¡å¤–æƒæ <code>composables</code> ä¸‹çš„å·¢ç‹€ç›®éŒ„ã€‚</p><h5 id=nuxtconfigts-1>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>imports</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>dirs</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=c1>// æƒæ composables ç›®éŒ„é ‚å±¤
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=s1>&#39;composables&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=c1>// æƒææ·±åº¦ä¸€å±¤çš„ç‰¹å®šæª”æ¡ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=s1>&#39;composables/*/index.{ts,js,mjs,mts}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=c1>// æƒææ•´å€‹ composables ç›®éŒ„ä¸‹çš„æª”æ¡ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=s1>&#39;composables/**&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸è«–åœ¨ Nuxt 3 æˆ–æ˜¯ Vue 3ï¼Œçµ„åˆå¼å‡½æ•¸ (Composables) éƒ½æ˜¯èƒ½å¹«åŠ©ä½ åœ¨æ•´å€‹ç¶²ç«™å¯ä»¥å…±ç”¨å‡½æ•¸çš„æ–¹æ³•ï¼Œç›®å‰ä¹Ÿæœ‰å°ˆæ¡ˆ <a class=link href=https://vueuse.org/ target=_blank rel=noopener>VueUse</a> æä¾›äº†å¸¸ç”¨èˆ‡å¯¦ç”¨çš„çµ„åˆå¼å‡½æ•¸é›†åˆï¼Œèƒ½å¹«æˆ‘å€‘çœå»ä¸å°‘é–‹ç™¼æ™‚é–“èˆ‡æå‡é‡è¤‡ä½¿ç”¨æ€§ï¼Œ<a class=link href=https://wayneblog.ga/2022-12-30/npm-vueuse/>VueUseçš„ä»‹ç´¹è«‹é»æˆ‘å‰å¾€</a>ã€‚</p><hr><h2 id=æ’ä»¶-plugins>æ’ä»¶ (Plugins)</h2><p>åœ¨é–‹ç™¼æ™‚ï¼Œç‚ºäº†ä¸é‡è¤‡é€ è¼ªå­ï¼Œæˆ‘å€‘å¯èƒ½æœƒåœ¨ç¶²è·¯ä¸Šæ‰¾çœ‹çœ‹æœ‰æ²’æœ‰ç¾æˆçš„å¥—ä»¶å¯ä»¥åšä½¿ç”¨ï¼Œå¦‚æœé€™å€‹å¥—ä»¶åœ¨ Nuxt 3 æ²’æœ‰å°ˆç”¨çš„æ¨¡çµ„æˆ–æ’ä»¶ï¼Œé‚£éº¼æˆ‘å€‘å°±åªèƒ½ä¾ç…§å¥—ä»¶çš„æ”¯æ´èˆ‡å®‰è£æ–¹å¼å˜—è©¦æ·»åŠ è‡³ Nuxt ä¸­ä½¿ç”¨ã€‚é€™é‚Šå°‡æœƒä»‹ç´¹åœ¨ Nuxt æ’ä»¶çš„è¦å‰‡èˆ‡ç‰¹æ€§ï¼Œå¦‚ä½•å»ºç«‹è‡ªå·±çš„æ’ä»¶åŠå®‰è£ Vue çš„æ’ä»¶ã€‚</p><p>èªªåˆ°æ’ä»¶ (Plugins)ï¼ŒChrome æˆ– Firefox ç­‰ç€è¦½å™¨çš„ä½¿ç”¨è€…ï¼Œä¸€å®šéƒ½è½éä¹Ÿå®‰è£éæ’ä»¶ï¼›å¦‚æœç€è¦½å™¨ä¸­çš„åŠŸèƒ½ä¸å¤ æ»¿è¶³ä½ çš„éœ€æ±‚ï¼Œé‚£éº¼ä½ å¯ä»¥é€éå®‰è£æ’ä»¶ä¾†å˜—è©¦è§£æ±ºä½ çš„å•é¡Œï¼Œè€Œæ’ä»¶åšçš„å°±æ˜¯å¹«åŠ©ä½ çš„ç€è¦½å™¨æˆ–æ˜¯ç¶²ç«™ï¼Œæ·»åŠ ä¸€äº›åŠŸèƒ½æˆ–æ˜¯é…ç½®ï¼Œåšä¸€å€‹æ“´å……çš„å‹•ä½œã€‚åœ¨ Nuxt 3 æŒ‡çš„æ’ä»¶ï¼Œé“ç†ä¹Ÿæ˜¯ä¸€æ¨£çš„ï¼Œæˆ‘å€‘å¯ä»¥é€éæ’ä»¶ä¾†å”åŠ©æˆ‘å€‘æ“´å……åŠŸèƒ½ã€‚</p><h3 id=nuxt-3-æ’ä»¶ç›®éŒ„>Nuxt 3 æ’ä»¶ç›®éŒ„</h3><p>Nuxt å°‡è‡ªå‹•è®€å– <strong>plugins</strong> ç›®éŒ„ä¸­çš„æª”æ¡ˆä¸¦è‡ªå‹•è¼‰å…¥å®ƒå€‘ï¼Œä¹Ÿå› ç‚ºç›®éŒ„ä¸­çš„æ‰€æœ‰æ’ä»¶éƒ½æ˜¯è‡ªå‹•è¼‰å…¥çš„ï¼Œå› æ­¤ä¸å¿…æ–¼ <code>nuxt.config.ts</code> ä¸­å†å€‹åˆ¥é…ç½®ã€‚</p><p>Nuxt æœƒè‡ªå‹•æƒæ <strong>plugins</strong> ç›®éŒ„ä¸‹çš„ <strong>.js</strong>ã€<strong>.ts</strong> èˆ‡ <strong>.vue</strong> å‰¯æª”åçš„æª”æ¡ˆï¼Œä½†åªæœ‰æœ€ä¸Šå±¤çš„æª”æ¡ˆæˆ–æœ€ä¸Šå±¤ç›®éŒ„ä¸‹çš„ <strong>index.js</strong> æª”æ¡ˆæ‰æœƒè¢«è‡ªå‹•è¼‰å…¥ã€‚</p><p>ä¾‹å¦‚ï¼Œåªæœ‰ <strong>./plugins/myPlugin.js</strong> åŠ <strong>./plugins/myPlugin/index.js</strong> æœƒè‡ªå‹•çš„è¢« Nuxt è¼‰å…¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>plugins/
</span></span><span class=line><span class=cl>â”œâ”€â”€ myPlugin/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ index.js
</span></span><span class=line><span class=cl>â””â”€â”€ myPlugin.js
</span></span></code></pre></td></tr></table></div></div><h3 id=å¦‚ä½•å»ºç«‹æ’ä»¶>å¦‚ä½•å»ºç«‹æ’ä»¶</h3><p>ç•¶æ‚¨å»ºç«‹å¥½æ’ä»¶çš„æª”æ¡ˆå¾Œï¼Œåªéœ€è¦ä½¿ç”¨é è¨­å°å‡º Nuxt 3 ä¸­çš„ <code>defineNuxtPlugin</code> æ–¹æ³•ï¼Œå‚³éçµ¦æ’ä»¶çš„å”¯ä¸€åƒæ•¸æ˜¯ <code>nuxtApp</code>ï¼Œæ¥è‘—å°±å¯ä»¥åœ¨è£¡é ­å¯¦ä½œåŠŸèƒ½ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>(</span><span class=nx>nuxtApp</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// å¯ä»¥ä½¿ç”¨ nuxtApp ä¾†åšä¸€äº›äº‹æƒ…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>åˆæ¬¡å»ºç«‹æ’ä»¶æ™‚ï¼Œå¯ä»¥å˜—è©¦å°å‡º <code>nuxtApp</code> åƒæ•¸çœ‹çœ‹ï¼Œå¦‚ä¸‹åœ–ï¼Œ<code>nuxtApp</code> åŒ…å«äº†å„ç¨®çš„å¯¦ä¾‹ (Instance)ï¼Œä¾‹å¦‚æˆ‘å€‘è¦ä½¿ç”¨ Vue çš„ <code>app.use</code>ï¼Œå°±å¯ä»¥åœ¨ <code>nuxtApp</code> æ‰¾åˆ° Vue çš„å¯¦ä¾‹ <code>vueApp</code>ï¼Œä¸¦é€é <code>nuxtApp.vueApp.use</code> ä¾†å®‰è£ Vue çš„æ’ä»¶ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188532_bb5139c839_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=åœ¨æ’ä»¶ä¸­ä½¿ç”¨çµ„åˆå¼å‡½æ•¸-composables>åœ¨æ’ä»¶ä¸­ä½¿ç”¨çµ„åˆå¼å‡½æ•¸ (Composables)</h3><p>ä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå®šç¾©çš„æ’ä»¶ä¸­ä½¿ç”¨çµ„åˆå¼å‡½æ•¸ï¼Œä½†åœ¨æ’ä»¶ä¸­å­˜åœ¨è‘—ä¸€äº›é™åˆ¶å’Œå·®ç•°ã€‚</p><h4 id=æ’ä»¶çš„è¼‰å…¥é †åº>æ’ä»¶çš„è¼‰å…¥é †åº</h4><p>æ’ä»¶æ˜¯ä¾ç…§é †åºä¾†å‘¼å«çš„ï¼Œå¦‚æœä½ ä½¿ç”¨çš„çµ„åˆå¼å‡½æ•¸ï¼Œä¾è³´è‘—å°šæœªè¼‰å…¥çš„æ’ä»¶ï¼Œå®ƒå°‡ç„¡æ³•æ­£å¸¸çš„åŸ·è¡Œï¼›é™¤éä½ å¾ˆç¢ºå®šæ’ä»¶çš„è¼‰å…¥é †åºï¼Œä¸ç„¶å„˜é‡åœ¨æ’ä»¶å…§ä½¿ç”¨å…¶ä»–æœƒä¾è³´æ’ä»¶æˆ–ç”±å…¶ä»–æ’ä»¶æ‰€æä¾›çš„çµ„åˆå¼å‡½æ•¸ã€‚</p><h4 id=ä¾è³´-vue-çš„ç”Ÿå‘½é€±æœŸ>ä¾è³´ Vue çš„ç”Ÿå‘½é€±æœŸ</h4><p>å¦‚æœæ’ä»¶å…§æ‰€ä½¿ç”¨çš„çµ„åˆå¼å‡½æ•¸ï¼Œä¾è³´æ–¼ Vue çš„ç”Ÿå‘½é€±æœŸï¼Œé‚£éº¼ä¹Ÿæœƒç„¡æ³•æ­£å¸¸çš„åŸ·è¡Œï¼Œå› ç‚ºæ’ä»¶åªæœƒç¶å®šåˆ° nuxtApp çš„å¯¦ä¾‹ä¸Šï¼Œèˆ‡ Vue å…ƒä»¶å…§ä½¿ç”¨çµ„åˆå¼å‡½æ•¸ç¶å®šçš„å…ƒä»¶å¯¦ä¾‹ï¼Œæœ‰æ‰€ä¸åŒã€‚</p><h3 id=automatically-providing-helpers>Automatically Providing Helpers</h3><p>å¦‚æœæƒ³åœ¨ NuxtApp çš„å¯¦ä¾‹ä¸Šæä¾› <code>helper</code>ï¼Œæˆ‘å€‘å¯ä»¥åœ¨æ’ä»¶å›å‚³çš„ç‰©ä»¶ä¸­æ·»åŠ  <code>provide</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹æ’ä»¶ <strong>./plugins/myPlugin.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pluginsmypluginjs>plugins/myPlugin.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>provide</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>hello</span><span class=o>:</span> <span class=p>(</span><span class=nx>msg</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=sb>`Hello </span><span class=si>${</span><span class=nx>msg</span><span class=si>}</span><span class=sb>!`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>èª¿æ•´ <strong>./app.vue</strong> å…§å®¹ï¼š</p><h5 id=appvue-11>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-2 text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>title</span> <span class=p>}}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-2 text-6xl font-semibold text-emerald-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>$hello</span><span class=p>(</span><span class=s1>&#39;Jennifer&#39;</span><span class=p>)</span> <span class=p>}}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>$hello</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useNuxtApp</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>$hello</span><span class=p>(</span><span class=s1>&#39;Ryan&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°±å¯ä»¥ç›´æ¥åœ¨ <strong>template</strong> ä¸­ä½¿ç”¨ <code>$hello</code>ï¼Œé€™å€‹ç”±æ’ä»¶æä¾›çš„ <strong>Helper</strong>ï¼Œæ³¨æ„é€™é‚Šè¦åŠ ä¸ŠéŒ¢å­—ç¬¦è™Ÿ <code>$</code>ã€‚ä¹Ÿå¯ä»¥é€é <code>useNuxtApp</code> æ–¹æ³•å–å¾— NuxtApp çš„å¯¦ä¾‹å¾Œå†ä½¿ç”¨ <code>$hello</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964639_61f022bcfe_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=åƒ…é™ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ä¸­ä½¿ç”¨>åƒ…é™ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ä¸­ä½¿ç”¨</h4><p>æœ‰äº›æ’ä»¶å¯èƒ½åªèƒ½åœ¨ç€è¦½å™¨ä¸­ä½¿ç”¨ï¼ŒåŸå› å¯èƒ½æ˜¯é€™å€‹æ’ä»¶ä¸éœ€è¦æˆ–ç„¡æ³•åœ¨ä¼ºæœå™¨ç«¯ä¸­åŸ·è¡Œã€‚</p><p>æˆ‘å€‘å¯ä»¥é€éæ’ä»¶çš„æª”æ¡ˆåç¨±ä¾†æ·»åŠ å¾Œç¶´ <code>.client</code> æˆ– <code>.server</code>ï¼Œæ§åˆ¶ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ä¸­ä½¿ç”¨ã€‚</p><h3 id=vue-æ’ä»¶èˆ‡æŒ‡ä»¤>Vue æ’ä»¶èˆ‡æŒ‡ä»¤</h3><p>é€™è£¡æˆ‘å€‘å˜—è©¦åœ¨ Nuxt 3 ä¸­ä½¿ç”¨ Vue çš„ <a class=link href=https://github.com/MatteoGabriele/vue-gtag target=_blank rel=noopener>vue-gtag</a> æ’ä»¶ï¼Œä¾†æ·»åŠ  Google åˆ†ææ¨™ç±¤ã€‚</p><h3 id=nuxt-3-ä¸­ä½¿ç”¨-vue-gtag-æ’ä»¶>Nuxt 3 ä¸­ä½¿ç”¨ vue-gtag æ’ä»¶</h3><h4 id=step-1-å®‰è£å¥—ä»¶>Step 1. å®‰è£å¥—ä»¶</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D vue-gtag-next
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D vue-gtag-next</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-å»ºç«‹-nuxt-æ’ä»¶>Step 2. å»ºç«‹ Nuxt æ’ä»¶</h4><p>æ–°å¢ <strong>vue-gtag.client.js</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pluginsvue-gtagclientjs>plugins/vue-gtag.client.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>VueGtag</span> <span class=nx>from</span> <span class=s1>&#39;vue-gtag-next&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>((</span><span class=nx>nuxtApp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>nuxtApp</span><span class=p>.</span><span class=nx>vueApp</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>VueGtag</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>property</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;GA_MEASUREMENT_ID&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å®Œæˆæ•ˆæœ>å®Œæˆæ•ˆæœ</h4><p>å¯ä»¥çœ‹è¦‹ç€è¦½å™¨å°±å‡ºç¾ä½¿ç”¨ vue-gtag æ’ä»¶ï¼Œå¹«æˆ‘å€‘è‡ªå‹•æ’å…¥èˆ‡é…ç½® script çš„æ•ˆæœå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52617186723_d4fd2eee98_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=nuxt-3-ä¸­å»ºç«‹-vue-æŒ‡ä»¤>Nuxt 3 ä¸­å»ºç«‹ Vue æŒ‡ä»¤</h3><p>åœ¨æ’ä»¶ä¸­å¯ä»¥å–å¾— Vue çš„å¯¦ä¾‹ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿèƒ½åœ¨æ’ä»¶è¨»å†Šè‡ªå®šç¾©çš„æŒ‡ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼Œæ–°å¢ <strong>./plugins/directive.js</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pluginsdirectivejs>plugins/directive.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>((</span><span class=nx>nuxtApp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>nuxtApp</span><span class=p>.</span><span class=nx>vueApp</span><span class=p>.</span><span class=nx>directive</span><span class=p>(</span><span class=s1>&#39;focus&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mounted</span><span class=p>(</span><span class=nx>el</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>el</span><span class=p>.</span><span class=nx>focus</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>getSSRProps</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// you can provide SSR-specific props here
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>v-focus</code> é€™å€‹æŒ‡ä»¤ä¾†æ§åˆ¶å…ƒç´ èšç„¦çš„æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964679_7e9f1e5d2c_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>Nuxt è®“æˆ‘å€‘å¯ä»¥å¾ˆè¼•é¬†çš„å»ºç«‹æ’ä»¶ä¸¦é¸æ“‡é…ç½®æ–¼ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯ï¼Œå°æ–¼ä½¿ç”¨ UI æ¡†æ¶æˆ–å…ƒä»¶ï¼Œæ›´èƒ½åœ¨æ’ä»¶ä¸­ç›´æ¥å–å¾—å¯¦ä¾‹ä¾†å®‰è£ Vue çš„æ’ä»¶èˆ‡æŒ‡ä»¤ï¼Œä¸éå‘¢ï¼Œç›®å‰ä¹Ÿæœ‰å€‹ <a class=link href=https://github.com/nuxt/framework/discussions/1175 target=_blank rel=noopener>RFC</a> æ­£åœ¨å¾µæ±‚æ„è¦‹æœŸå¾…è®“ Nuxt ä½¿ç”¨ Vue æ’ä»¶å¯ä»¥æ›´æ–¹ä¾¿å®¹æ˜“ã€‚</p><hr><h2 id=æ¨¡çµ„-modules>æ¨¡çµ„ (Modules)</h2><p>Nuxt æä¾›äº†ä¸€å€‹æ¨¡çµ„ç³»çµ±ä¾†æ“´å±•è‡ªèº«æ¡†æ¶çš„æ ¸å¿ƒï¼Œä¹Ÿç°¡åŒ–äº†æ•´åˆéç¨‹ä¸­éœ€è¦çš„ç¹ç‘£é…ç½®ã€‚ç•¶ä½ æƒ³æ“´å±• Nuxt æˆ– Vue çš„åŠŸèƒ½ï¼Œé›–ç„¶ Nuxt å¯ä»¥é€šéå®‰è£èˆ‡é…ç½®æ’ä»¶é€²è¡ŒåŠŸèƒ½æ“´å±•ï¼Œä½†æ˜¯åœ¨å¤šå€‹å°ˆæ¡ˆæˆ–ä½¿ç”¨ä¸Šå¯èƒ½ç¹ç‘£è€—æ™‚æˆ–é‡è¤‡æ€§å¾ˆé«˜çš„ï¼Œä½†å¦‚æœå¥—ä»¶å·²ç¶“æœ‰é‡å° Nuxt æ¨¡çµ„åšæ•´åˆï¼Œæˆ‘å€‘å°±ä¸å¿…å¾é ­é–‹å§‹é–‹ç™¼æˆ–åƒå®‰è£æ’ä»¶ä¸€æ¨£éœ€è¦å»ºç«‹èˆ‡ç¶­è­·é€™äº›é…ç½®ã€‚</p><h3 id=nuxt-3-ä¸­æ’ä»¶èˆ‡æ¨¡çµ„çš„å·®ç•°>Nuxt 3 ä¸­æ’ä»¶èˆ‡æ¨¡çµ„çš„å·®ç•°</h3><p>Nuxt æ¨¡çµ„èˆ‡ Nuxt æ’ä»¶çš„å·®ç•°åœ¨æ–¼ï¼Œ<code>æ¨¡çµ„è¼‰å…¥åŸ·è¡Œçš„æ™‚é–“é»æ›´æ—©</code>ï¼Œæ„æ€æ˜¯ Nuxt åœ¨å•Ÿå‹•ä¼ºæœå™¨å¾Œï¼Œé¦–å…ˆæœƒ<code>ä¾åºçš„è¼‰å…¥æ¨¡çµ„ä¸¦åŸ·è¡Œ</code>ï¼Œæ¥çºŒå»ºç«‹ Nuxt çš„ç’°å¢ƒ (Context) èˆ‡ Vue çš„å¯¦ä¾‹ (Instance)ï¼Œæœ€å¾Œæ‰é–‹å§‹åŸ·è¡Œ Nuxt çš„æ’ä»¶ã€‚</p><p>å› æ­¤ï¼ŒNuxt æ¨¡çµ„å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼ŒåŒ…å«åœ¨ä½¿ç”¨ <code>nuxi dev</code>ã€<code>nuxi build</code> å•Ÿå‹•æˆ–å»ºæ§‹ Nuxt æ™‚ï¼Œå¯ä»¥é€éæ¨¡çµ„ä¾†è¦†è“‹æ¨¡æ¿ã€é…ç½® webpack åŠé…ç½®æ’ä»¶ç­‰è¨±å¤šä»»å‹™ã€‚</p><h3 id=nuxt-3-å®‰è£ä½¿ç”¨æ¨¡çµ„>Nuxt 3 å®‰è£ä½¿ç”¨æ¨¡çµ„</h3><p>Nuxt æ¨¡çµ„æ˜¯ä¸€å€‹å°å‡ºç•°æ­¥å‡½æ•¸çš„ JavaScript æª”æ¡ˆï¼Œç•¶å®‰è£ä½¿ç”¨æ¨¡çµ„æ™‚ï¼Œé€šå¸¸æœƒé…ç½®åœ¨ <code>nuxt.config.ts</code> æª”æ¡ˆçš„ <code>modules</code> ä¸­ï¼Œä¾‹å¦‚<a class=link href=https://wayneblog.ga/2023-01-14/nuxt-try-nuxt3/#%e4%bd%bf%e7%94%a8-nuxt-tailwind-%e6%a8%a1%e7%b5%84>ä½¿ç”¨ Nuxt Tailwind æ¨¡çµ„</a> æœƒæ·»åŠ ä¸Š <strong>&rsquo;@nuxtjs/tailwindcss&rsquo;</strong>ã€‚</p><p>é€šå¸¸æ¨¡çµ„çš„é–‹ç™¼äººå“¡æœƒæä¾›é€™äº›æ¨¡çµ„æ‡‰è©²å¦‚ä½•åœ¨ <strong>modules</strong> å±¬æ€§ä¾†åšé…ç½®ï¼Œç”šè‡³ä¸€äº›å¯é¸ç”¨çš„åƒæ•¸ä¾†é…ç½®é€™äº›æ¨¡çµ„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kr>module</span><span class=nx>s</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ä½¿ç”¨å¥—ä»¶åç¨± (æ¨è–¦ä½¿ç”¨)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s1>&#39;@nuxtjs/example&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è¼‰å…¥æœ¬åœ°ç›®éŒ„çš„æ¨¡çµ„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s1>&#39;./modules/example&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ·»åŠ æ¨¡çµ„çš„é¸é …åƒæ•¸
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[</span><span class=s1>&#39;./modules/example&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>token</span><span class=o>:</span> <span class=s1>&#39;123&#39;</span> <span class=p>}]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åœ¨è¡Œå…§å®šç¾©æ¨¡çµ„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>async</span> <span class=p>(</span><span class=nx>inlineOptions</span><span class=p>,</span> <span class=nx>nuxt</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=nuxt-3-æ¨¡çµ„åˆ—è¡¨>Nuxt 3 æ¨¡çµ„åˆ—è¡¨</h3><p>ä½ å¯ä»¥åœ¨ <a class=link href=https://nuxt.com/modules target=_blank rel=noopener>Explore Nuxt Modules</a> ä¸Šå°‹æ‰¾ç”± Nuxt å®˜æ–¹æˆ–ç¤¾ç¾¤ç”Ÿæ…‹æ‰€ç™¼å±•å»ºç½®çš„æ¨¡çµ„ï¼ŒNuxt çš„æ¨¡çµ„é€šå¸¸éµå¾ªè‘—å®˜æ–¹æŒ‡å—æ‰€è£½ï¼Œä½¿ç”¨æ™‚åªéœ€è¦å®‰è£èˆ‡æ·»åŠ è‡³ <strong>nuxt.config</strong> ä¸­ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½å®Œæˆé…ç½®ã€‚</p><h3 id=ä½¿ç”¨-nuxt-icon-æ¨¡çµ„>ä½¿ç”¨ Nuxt Icon æ¨¡çµ„</h3><p>Nuxt Icon æ¨¡çµ„æ•´åˆäº† Iconify æä¾›å¤šé” 100,000 å€‹ä»¥ä¸Šçš„ Icon åœ–ç¤ºï¼Œåªè¦åœ¨ Nuxt ä¸­å®‰è£å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥ç›´æ¥åšä½¿ç”¨ã€‚</p><h4 id=step-1-å®‰è£å¥—ä»¶-1>Step 1. å®‰è£å¥—ä»¶</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D nuxt-icon
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D nuxt-icon</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-2-é…ç½®ä½¿ç”¨æ¨¡çµ„>Step 2. é…ç½®ä½¿ç”¨æ¨¡çµ„</h4><p>åœ¨ <strong>nuxt.config.ts</strong> ä¸­çš„ <strong>modules</strong> å±¬æ€§ï¼Œæ·»åŠ  Nuxt Icon æ¨¡çµ„çš„åç¨± <code>nuxt-icon</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kr>module</span><span class=nx>s</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;nuxt-icon&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-é–‹å§‹ä½¿ç”¨>Step 3. é–‹å§‹ä½¿ç”¨</h4><p>ä¾ç…§èªªæ˜ï¼Œæˆ‘å€‘å°±å¯ä»¥ä½¿ç”¨ Nuxt Icon æ¨¡çµ„ï¼Œç‚ºæˆ‘å€‘æ‰€æ·»åŠ çš„å…ƒä»¶ <code>&lt;Icon></code>ï¼Œé€™å€‹ Icon å…ƒä»¶å¯ä»¥å‚³å…¥ <strong>name</strong> å±¬æ€§ï¼Œä»¥æ­¤ä¾†é¡¯ç¤ºä¸åŒçš„ Icon åœ–ç¤ºï¼Œ<strong>size</strong> å‰‡å¯ä»¥æ§åˆ¶åœ–ç¤ºçš„å¤§å°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex justify-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Icon</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;logos:nuxt&#34;</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;360&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52617186748_8c9b770823_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å¦‚ä½•å»ºç«‹-nuxt-æ¨¡çµ„>å¦‚ä½•å»ºç«‹ Nuxt æ¨¡çµ„</h3><p><a class=link href=https://nuxt.com/docs/api/advanced/kit target=_blank rel=noopener>Nuxt Kit</a> æ˜¯ Nuxt å®˜æ–¹æä¾›çš„ä¸€å€‹æ¨™æº–å’Œæ–¹ä¾¿çš„ API ä¾†å®šç¾© Nuxt æ¨¡çµ„ã€‚</p><p>é€šå¸¸ä½¿ç”¨å¦‚ä¸‹ç¨‹å¼ç¢¼ä½¿ç”¨ <code>defineNuxtModule</code> æ–¹æ³•ä¾†å»ºç«‹ä¸€å€‹æ¨¡çµ„ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineNuxtModule</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@nuxt/kit&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtModule</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¨¡çµ„çš„åç¨±ï¼Œé€šå¸¸ä¹Ÿæœƒå°æ‡‰ NPM ç™¼å¸ƒçš„å¥—ä»¶åç¨±
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;@nuxtjs/example&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚æœæœ‰é…ç½®é€™å€‹æ¨¡çµ„çš„ä¸€äº›é¸é …ï¼Œæœƒå°‡å…¶ä¿å­˜åœ¨é€™å€‹è¨­å®šéµå€¼ä¸‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>configKey</span><span class=o>:</span> <span class=s1>&#39;sample&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç›¸å®¹æ€§é™åˆ¶ `nuxt.config`
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>compatibility</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// ç‚ºäº†æ§åˆ¶æ¨¡çµ„çš„ç‰ˆæœ¬ç›¸å®¹æ€§ï¼Œé€šå¸¸æœƒåœ¨é€™è£¡é…ç½® Nuxt ç‰ˆæœ¬çš„éœ€æ±‚
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>nuxt</span><span class=o>:</span> <span class=s1>&#39;^3.0.0&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=c1>// æ¨¡çµ„é è¨­çš„é¸é …
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>defaults</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nx>hooks</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>setup</span><span class=p>(</span><span class=nx>moduleOptions</span><span class=p>,</span> <span class=nx>nuxt</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Nuxt å•Ÿå‹•è¼‰å…¥æ¨¡çµ„å¾Œï¼Œæ¨¡çµ„æ‰€åŸ·è¡Œçš„é‚è¼¯æœƒåœ¨é€™è£¡å¯¦ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ›´å¤š Nuxt æ¨¡çµ„çš„å»ºç«‹æŒ‡å—å¯ä»¥åƒè€ƒ <a class=link href=https://nuxt.com/docs/guide/going-further/modules target=_blank rel=noopener>Nuxt 3 - Module Author Guide</a>ï¼Œé€™é‚Šå°±ä¸å†è´…è¿°ï¼Œç•¢ç«Ÿæˆ‘å€‘æ¯”è¼ƒå¸¸ç‚ºæ¨¡çµ„çš„ä½¿ç”¨è€…ã€‚</p><h3 id=æ¨¡çµ„çš„è¼‰å…¥>æ¨¡çµ„çš„è¼‰å…¥</h3><p>å‰é¢æˆ‘å€‘ä½¿ç”¨äº† Nuxt Icon æ¨¡çµ„ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥é–±è®€ä¸€ä¸‹ <a class=link href=https://github.com/nuxt-modules/icon/tree/v0.1.6 target=_blank rel=noopener>Nuxt Icon v0.1.6</a> æ¨¡çµ„å¥—ä»¶çš„åŸå§‹ç¢¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ Nuxt Icon æ¨¡çµ„çš„ <a class=link href=https://github.com/nuxt-modules/icon/blob/v0.1.6/src/module.ts target=_blank rel=noopener>module.ts</a> æª”æ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtModule</span><span class=p>&lt;</span><span class=nt>ModuleOptions</span><span class=p>&gt;({</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;nuxt-icon&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>configKey</span><span class=o>:</span> <span class=s1>&#39;icon&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>compatibility</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>nuxt</span><span class=o>:</span> <span class=s1>&#39;^3.0.0-rc.9&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaults</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nx>setup</span> <span class=p>(</span><span class=nx>_options</span><span class=p>,</span> <span class=nx>nuxt</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>resolve</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>createResolver</span><span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>addComponent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Icon&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=kr>global</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>filePath</span>: <span class=kt>resolve</span><span class=p>(</span><span class=s1>&#39;./runtime/Icon.vue&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>Nuxt çš„æ¨¡çµ„ä½¿ç”¨äº†ä¸€å€‹ <code>defineNuxtModule</code> æ–¹æ³•ä¾†å®šç¾©æ¨¡çµ„ï¼Œä¹Ÿå¯ä»¥è¦–ç‚ºæ¨¡çµ„çš„å…¥å£é»ï¼Œ<code>meta.name</code> å°æ‡‰çš„å°±æ˜¯æ¨¡çµ„çš„åç¨±ï¼Œä¹Ÿæ˜¯æˆ‘å€‘æ·»åŠ è‡³ <code>modules</code> å±¬æ€§æ‰€éœ€è¦çš„æ¨¡çµ„åç¨±ã€‚</p><p><code>setup</code> å°±æ˜¯æ¨¡çµ„è¼‰å…¥å¾ŒåŸ·è¡Œçš„å‡½æ•¸ï¼Œå¯ä»¥çœ‹åˆ°æ¨¡çµ„ä½¿ç”¨ <code>addComponent</code> ç‚ºæˆ‘å€‘ Nuxt æ·»åŠ äº†ä¸€å€‹å…ƒä»¶åç¨±ç‚º <strong>Icon</strong>ï¼Œä½¿ç”¨çš„å…ƒä»¶æª”æ¡ˆä¾†è‡ª <strong>./runtime/Icon.vue</strong>ã€‚</p><p>æ¨¡çµ„ä¸­çš„ <a class=link href=https://github.com/nuxt-modules/icon/blob/v0.1.6/src/runtime/Icon.vue target=_blank rel=noopener>runtime/Icon.vue</a> ç‚ºæˆ‘å€‘å°è£äº† Iconify åœ–ç¤ºçš„ä½¿ç”¨é‚è¼¯ä»¥åŠå–å¾— Nuxt é…ç½®çš„åƒæ•¸ç­‰ã€‚</p><p>é€éæ¨¡çµ„æˆ‘å€‘å¯ä»¥çœå»é€™äº›ç¹ç‘£çš„å°è£èˆ‡é…ç½®ï¼Œåªéœ€è¦å°ˆæ³¨åœ¨é…ç½®æ¨¡çµ„èˆ‡é–‹ç™¼ä¸Šé¢ã€‚</p><p>æ¨¡çµ„èˆ‡æ’ä»¶å…¶å¯¦é‚„æ˜¯å­˜åœ¨è‘—è¼‰å…¥åŸ·è¡Œé †åºèˆ‡ä½¿ç”¨æƒ…å¢ƒä¸Šçš„å·®ç•°æ€§ï¼Œä»¥ Nuxt ä¾†èªªï¼Œé€šå¸¸ Nuxt çš„æ’ä»¶æœƒæ˜¯ç”¨ä¾†å°è£åŠä½¿ç”¨ Vue ä¸­æœƒä½¿ç”¨åˆ°çš„æ’ä»¶èˆ‡æˆ–å¥—ä»¶ï¼›è€Œ Nuxt çš„æ¨¡çµ„ï¼Œæœƒå°‡éœ€è¦ç¹ç‘£é…ç½®çš„å¥—ä»¶æˆ–æ’ä»¶ä¾†èˆ‡ Nuxt é€²è¡Œæ•´åˆèˆ‡å°è£ï¼Œä¸è«–æ˜¯é€éç¬¬ä¸‰æ–¹æ’ä»¶æˆ–æ¨¡çµ„ï¼Œé€™éƒ½å°‡ä½¿ Nuxt åœ¨é–‹ç™¼èˆ‡æ“´å……ä¸Šæ“æœ‰æ›´å¤šçš„å¯èƒ½æ€§ã€‚</p><hr><h2 id=ä¸­é–“ä»¶ç›®éŒ„-middleware-directory>ä¸­é–“ä»¶ç›®éŒ„ (Middleware Directory)</h2><p>åœ¨ Vue çš„å°ˆæ¡ˆå…§æˆ‘å€‘çš„é é¢é€šå¸¸ç”± Vue Router ä¾†æ§åˆ¶è·¯ç”±åŠå°èˆªï¼ŒVue Router æä¾›äº†å°èˆªå®ˆè¡› (Navigation Guards) çš„ Hook APIï¼Œè®“æˆ‘å€‘å¯ä»¥åœ¨å…¨åŸŸã€è·¯ç”±ç”šè‡³æ˜¯å…ƒä»¶ä¸­ï¼Œä¾†æ§åˆ¶è·¯ç”±è·³è½‰æˆ–å–æ¶ˆçš„æ–¹å¼ä¾†å®ˆè­·æˆ‘å€‘çš„è·¯ç”±ï¼Œä¸è®“å…¶éš¨æ„å°èˆªè‡³ç‰¹å®šé é¢ã€‚Nuxt 3 æä¾›äº†ä¸€å€‹ä¸­é–“ä»¶çš„ç›®éŒ„ï¼Œè®“æˆ‘å€‘å¯ä»¥è£½ä½œè·¯ç”±çš„ä¸­é–“ä»¶ï¼Œä¾†å¯¦ä½œå‡ºé¡ä¼¼å°èˆªå®ˆè¡›çš„æ•ˆæœã€‚</p><h3 id=vue-router-çš„å°èˆªå®ˆè¡›-navigation-guards>Vue Router çš„å°èˆªå®ˆè¡› (Navigation Guards)</h3><p>å°èˆªå®ˆè¡›å°±æ˜¯åœ¨è¨ªå•é é¢ä¹‹å‰ï¼Œæœƒæ””æˆªä½ çš„è·¯ç”±è«‹æ±‚ä¸¦åŸ·è¡Œè‡ªè¨‚çš„é©—è­‰é‚è¼¯ï¼Œä¾æ“šé©—è­‰çš„æˆåŠŸèˆ‡å¦ï¼Œå‡†äºˆæ”¾è¡Œè·³è½‰è‡³è·¯ç”±é é¢ï¼ŒæŠ‘æˆ–æ˜¯å–æ¶ˆè¨ªå•è©²è·¯ç”±ï¼Œå†ä¾ç…§ä¸åŒè™•ç†æ–¹å¼é€²è¡Œä¸­æ–·æˆ–é‡å°å‘è‡³ç‰¹å®šè·¯ç”±é é¢ã€‚</p><p>å°èˆªå®ˆè¡›åœ¨å¯¦å‹™ä¸Šå¸¸è¦‹çš„ä½¿ç”¨æƒ…å¢ƒï¼Œå°±æ˜¯æ‹¿ä¾†åšé é¢è¨ªå•çš„æ¬Šé™é©—è­‰ï¼Œä¾‹å¦‚ï¼Œåªæœ‰ç®¡ç†å“¡æ‰èƒ½è¨ªå• <code>/admin</code> è·¯ç”±ä¸‹çš„é é¢ï¼Œæˆ‘å€‘å¯èƒ½å°±æœƒæ·»åŠ æ””æˆªçš„ hook ä¾†é©—è­‰ä½¿ç”¨è€…æ˜¯å¦ç™»å…¥åŠå¤¾å¸¶çš„ Token æˆ– Role æ˜¯å¦æœ‰æ¬Šé™å¯ä»¥ç€è¦½ï¼Œå¦‚æœé©—è­‰æˆåŠŸå°±å‡†äºˆç€è¦½ç®¡ç†å“¡ç›¸é—œé é¢ï¼Œå¦å‰‡ï¼Œå°‡è·¯ç”±é é¢å°å›è‡³é¦–é ã€ç™»å…¥é æˆ–éŒ¯èª¤é é¢ï¼Œå¦‚åŒä¸€å€‹å®ˆè¡›åœ¨è·¯ç”±ä¹‹é–“é€²è¡ŒæŠŠé—œé©—è­‰æ¬Šé™ã€‚</p><p>æˆ‘å€‘ä»¥ Vue Route v4 ä¾†èˆ‰ä¾‹ï¼ŒVue Route æä¾›äº†ä»¥ä¸‹ä¸‰ç¨®æƒ…æ³ä¸‹å¯ä»¥ä½¿ç”¨çš„ hookï¼Œåˆ†åˆ¥æ˜¯åœ¨å…¨åŸŸã€è·¯ç”±æˆ–æ˜¯å…ƒä»¶ä¸­ï¼š</p><h3 id=å…¨åŸŸ>å…¨åŸŸ</h3><h4 id=å…¨åŸŸå‰ç½®å®ˆè¡›-global-before-guards>å…¨åŸŸå‰ç½®å®ˆè¡› (Global Before Guards)</h4><p>ç•¶å…¨åŸŸå®ˆè¡› hook æ·»åŠ å¥½ä¹‹å¾Œï¼Œæ¯æ¬¡å°èˆªè‡³ä¸åŒè·¯ç”±æ™‚ï¼Œéƒ½æœƒæ””æˆªä»¥ç•°æ­¥çš„æ–¹å¼åŸ·è¡Œç›¸å°æ‡‰çš„è™•ç†é‚è¼¯ã€‚</p><p>å…¨åŸŸå®ˆè¡›æä¾›äº† <code>router.beforeEach()</code> hook å¯ä»¥åœ¨é€²å…¥ä»»ä½•ä¸€å€‹è·¯ç”±å‰é€²è¡Œæ””æˆªè™•ç†ï¼Œç•¶å°èˆªè§¸ç™¼æ™‚å°±æœƒä¾ç…§å»ºç«‹çš„é †åºåšå‘¼å«ï¼Œå› ç‚ºæ˜¯ç•°æ­¥å‡½æ•¸è§£æåŸ·è¡Œï¼Œæ‰€ä»¥åœ¨æ‰€æœ‰çš„å®ˆè¡› <strong>resolve</strong> ä¹‹å‰ï¼Œæœƒä¸€ç›´è™•æ–¼ <strong>pending</strong> çš„ç‹€æ…‹ã€‚</p><h4 id=å…¨åŸŸè§£æå®ˆè¡›-global-resolve-guards>å…¨åŸŸè§£æå®ˆè¡› (Global Resolve Guards)</h4><p>è€ŒåŒæ¨£å±¬æ–¼å…¨åŸŸå®ˆè¡›çš„ <code>router.beforeResolve()</code> hook æœƒåœ¨æ‰€æœ‰å…ƒä»¶å…§çš„å°èˆªå®ˆè¡›ã€è·¯ç”±éƒ½è¢«è§£æåŠåŸ·è¡Œå®Œç•¢å¾Œæ‰åŸ·è¡Œï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹ <code>router.beforeResolve()</code> å‘¼å«çš„æ™‚é–“é»æ™šæ–¼ <code>router.beforeEach()</code>ã€‚</p><h4 id=å…¨åŸŸå¾Œç½®-hooks-global-after-hooks>å…¨åŸŸå¾Œç½® Hooks (Global After Hooks)</h4><p>èˆ‡ <code>router.beforeEach()</code> hook ç›¸åï¼Œå…¨åŸŸå¾Œç½® hooks æä¾›çš„ <code>router.afterEach()</code> Hook æœƒæ˜¯åœ¨è·¯ç”±è·³è½‰çµæŸå¾Œæ‰è§¸ç™¼ï¼Œåœ¨é€™è£¡è·¯ç”±å·²ç¶“å®Œæˆè·³è½‰ï¼Œè·¯ç”±æœ¬èº«ä¹Ÿä¸æœƒå†è¢«æ›´å‹•ï¼Œé€™å€‹ hook é€šå¸¸ç”¨æ–¼åˆ†æé¡æˆ–è¨­ç½®é é¢ç›¸é—œçš„è³‡è¨Šç­‰è¼”åŠ©å‹çš„åŠŸèƒ½å¾ˆæœ‰å¹«åŠ©ã€‚</p><h3 id=è·¯ç”±ç¨æœ‰å®ˆè¡›-per-route-guard>è·¯ç”±ç¨æœ‰å®ˆè¡› (Per-Route Guard)</h3><p>èˆ‡ <strong>router.beforeEach()</strong> ä¸åŒï¼Œæˆ‘å€‘å¯ä»¥ç‚ºæ¯ä¸€å€‹è·¯ç”±æ·»åŠ  <code>beforeEnter()</code> hookï¼Œä¾†é”åˆ°æ¯ä¸€å€‹è·¯ç”±é é¢æœ‰ä¸åŒçš„åŸ·è¡Œæ–¹æ³•ï¼ŒåŒæ™‚ä¹Ÿåªæœƒåœ¨ä¸åŒçš„è·¯ç”±å°èˆªä¸­åˆ‡æ›æ‰æœƒè§¸ç™¼ã€‚</p><h3 id=å…ƒä»¶å…§çš„å®ˆè¡›>å…ƒä»¶å…§çš„å®ˆè¡›</h3><p>åœ¨å…ƒä»¶çš„å…§éƒ¨ä¸­ï¼Œä¹Ÿæä¾›ä¸‰ç¨® hooks åˆ†åˆ¥ç‚ºï¼š</p><ul><li>beforeRouteEnter(): åœ¨è·¯ç”±é€²å…¥ä¸¦æ¸²æŸ“é€™å€‹å…ƒä»¶ä¹‹å‰å‘¼å«ï¼Œæ‰€ä»¥é‚„æ²’æœ‰å…ƒä»¶çš„å¯¦é«”å¯ä»¥æ“ä½œä½¿ç”¨ã€‚</li><li>beforeRouteUpdate(): ç›®å‰çš„è·¯ç”±æ”¹è®Šï¼Œè€Œä¸”é‚„è™•æ–¼åŒä¸€å€‹å…ƒä»¶ä¸­æ™‚å‘¼å«ã€‚</li><li>beforeRouteLeave(): ç•¶å°èˆªæº–å‚™é›¢é–‹æ™‚ä¸”æ²’æœ‰ä½¿ç”¨åˆ°é€™å€‹å…ƒä»¶æ™‚å‘¼å«ã€‚</li></ul><p>å°èˆªå®ˆè¡› (Navigation Guards) åœ¨å°èˆªå‡ºç™¼å¾Œçš„ hook è§¸ç™¼é †åºå¦‚ä¸‹åœ–ï¼š</p><p><img src=https://live.staticflickr.com/65535/52616698461_6a2572bcab_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><hr><h2 id=nuxt-3-è·¯ç”±ä¸­é–“ä»¶>Nuxt 3 è·¯ç”±ä¸­é–“ä»¶</h2><p>Nuxt 3 ä¸­æä¾›äº†ä¸€å€‹è·¯ç”±ä¸­é–“ä»¶çš„æ¡†æ¶ï¼Œæˆ‘å€‘å¯ä»¥åœ¨å°ˆæ¡ˆä¸‹å»ºç«‹åç‚º <code>middleware</code> ç›®éŒ„ï¼Œåœ¨é€™å€‹ç›®éŒ„ä¸‹æˆ‘å€‘å¯ä»¥å»ºç«‹ä¸­é–“ä»¶ï¼Œä¸¦è®“æ•´å€‹ Nuxt é é¢æˆ–ç‰¹å®šçš„è·¯ç”±åšä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨é é¢ä¸­æ·»åŠ ï¼Œé€™å€‹ä¸­é–“ä»¶å¯ä»¥ç†è§£ç‚º Vue Router ä¸­çš„å°èˆªå®ˆè¡› (Navigation Guards)ï¼ŒåŒæ¨£æœ‰ <code>to</code> èˆ‡ <code>from</code> åƒæ•¸ç”¨ä»¥åœ¨å°èˆªè‡³ç‰¹å®šè·¯ç”±ä¹‹å‰é©—è­‰æ¬Šé™æˆ–åŸ·è¡Œå•†æ¥­é‚è¼¯ç­‰ã€‚</p><h3 id=è·¯ç”±ä¸­é–“ä»¶æ ¼å¼>è·¯ç”±ä¸­é–“ä»¶æ ¼å¼</h3><p>ç•¶æˆ‘å€‘æƒ³è¦å»ºç«‹è·¯ç”±ä¸­é–“ä»¶æ™‚ï¼Œå¯ä»¥åœ¨ Nuxt å°ˆæ¡ˆçš„ <code>middleware</code> ç›®éŒ„ä¸‹å»ºç«‹æª”æ¡ˆï¼Œä¸¦é è¨­åŒ¯å‡ºä¸€å€‹ç”± <code>defineNuxtRouteMiddleware()</code> å®šç¾©çš„å‡½æ•¸ï¼Œä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtRouteMiddleware</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>to</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span> <span class=o>===</span> <span class=s1>&#39;1&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>abortNavigation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>navigateTo</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>è·¯ç”±ä¸­é–“ä»¶èƒ½æ¥æ”¶ç›®å‰çš„è·¯ç”± <code>to</code> èˆ‡ä¸‹ä¸€å€‹è·¯ç”± <code>from</code> åšç‚ºåƒæ•¸ï¼Œå¦‚åŒ Vue Router çš„å°èˆªå®ˆè¡›ï¼Œä»¥æ­¤æˆ‘å€‘å°±å¯ä»¥ä¾†åšä¸€äº›åˆ¤æ–·èˆ‡é©—è­‰æ“ä½œã€‚</p><h3 id=è·¯ç”±ä¸­é–“ä»¶çš„å›å‚³>è·¯ç”±ä¸­é–“ä»¶çš„å›å‚³</h3><p>Nuxt æä¾›äº†å…©å€‹å…¨åŸŸçš„ helpersï¼Œå¯ä»¥ç›´æ¥å¾ä¸­é–“ä»¶å›å‚³ï¼š</p><h4 id=navigatetoto-options>navigateTo(to, options)</h4><p>åœ¨æ’ä»¶æˆ–ä¸­é–“ä»¶ä¸­é‡æ–°å®šå‘åˆ°çµ¦å®šçš„è·¯ç”±ã€‚ä¹Ÿå¯ä»¥ç›´æ¥å‘¼å«å®ƒé€²è¡Œé é¢å°èˆªã€‚</p><p>navigateTo åƒæ•¸ä¾åºç‚ºï¼š</p><ul><li><strong>to</strong>ï¼š RouteLocationRaw | undefined | null</li><li><strong>options</strong>ï¼š { replace: boolean, redirectCode: number, external: boolean }</li></ul><h4 id=abortnavigationerr>abortNavigation(err)</h4><p>å¯ä»¥åœ¨ä¸­é–“ä»¶ä¸­å›å‚³ <code>abortNavigation()</code> ä¾†ä¸­æ­¢å°èˆªï¼Œä¸¦å¯ä»¥é¸æ“‡æ˜¯å¦å‚³å…¥éŒ¯èª¤è¨Šæ¯ã€‚</p><p>abortNavigation åƒæ•¸ç‚ºï¼š</p><blockquote><p>err?: string | Error</p></blockquote><p>èˆ‡ Vue Router ä¸­çš„å°èˆªå®ˆè¡›ç¨æœ‰ä¸åŒï¼Œåœ¨ Nuxt çš„ä¸­é–“ä»¶ä¸­å¯ä»¥ä½¿ç”¨ <code>navigateTo</code> èˆ‡ <code>abortNavigation</code> ä¾†æ±ºå®šå°èˆªè‡³æ–°çš„è·¯ç”±æˆ–çµ‚æ­¢å°èˆªï¼Œå¦‚æœä¸­é–“ä»¶æ²’æœ‰å›å‚³ä»»ä½•æ±è¥¿ï¼Œå‰‡è¡¨ç¤ºä¸é˜»å¡å°èˆªï¼Œå¦‚æœæœ‰ä¸‹ä¸€å€‹ä¸­é–“ä»¶ï¼Œå‰‡è€Œç§»å¾€ä¸‹ä¸€å€‹åŠŸèƒ½åšåŸ·è¡Œï¼Œæˆ–è€…å®Œæˆè·¯ç”±å°èˆªã€‚</p><ul><li>nothing - ä¸é˜»å¡å°èˆªä¸¦ä¸”æœƒç§»å‹•åˆ°ä¸‹ä¸€å€‹ä¸­é–“ä»¶åŠŸèƒ½ã€‚</li><li>å¦‚æœæœ‰çš„è©±ï¼Œæˆ–è€…å®Œæˆè·¯ç”±å°èˆª return navigateTo(&rsquo;/&rsquo;) æˆ– return navigateTo({ path: &lsquo;/&rsquo; }) - é‡å®šå‘åˆ°çµ¦å®šè·¯å¾‘ã€‚</li></ul><p>å¦‚æœä½¿ç”¨ <code>navigateTo()</code> é‡å®šå‘æ˜¯ç™¼ç”Ÿåœ¨ä¼ºæœå™¨ç«¯ ï¼Œå‰‡å°‡ HTTP Status Code è¨­ç½®ç‚º<code>æš«æ™‚</code>é‡å®šå‘ç‹€æ…‹ç¢¼ <strong>302 Found</strong>ã€‚</p><p>å¦‚æœä½¿ç”¨ <code>navigateTo()</code> ä¸¦å¤¾å…¥ <code>options.redirectCode</code> å±¬æ€§ï¼Œä¾‹å¦‚ <code>return navigateTo('/', { redirectCode: 301 })</code>ï¼Œç™¼ç”Ÿçš„é‡å®šå‘åœ¨ä¼ºæœå™¨ç«¯ï¼Œå°‡ HTTP Status Code è¨­ç½®ç‚º<code>æ°¸ä¹…</code>é‡å®šå‘ç‹€æ…‹ç¢¼ <strong>301 Moved Permanently</strong>ã€‚</p><h3 id=è·¯ç”±ä¸­é–“ä»¶çš„ç¨®é¡>è·¯ç”±ä¸­é–“ä»¶çš„ç¨®é¡</h3><p>åœ¨ Nuxt ä¸­è·¯ç”±ä¸­é–“ä»¶åˆ†ç‚ºä»¥ä¸‹ä¸‰ç¨®ï¼š</p><h4 id=åŒ¿åæˆ–è€…æ˜¯è¡Œå…§çš„è·¯ç”±ä¸­é–“ä»¶>åŒ¿åæˆ–è€…æ˜¯è¡Œå…§çš„è·¯ç”±ä¸­é–“ä»¶</h4><p>ä¸éœ€è¦å»ºç«‹æª”æ¡ˆï¼Œé€šå¸¸åœ¨è·¯ç”±é é¢ä¸­ä½¿ç”¨ <code>definePageMeta()</code> ä¾†å®šç¾©çš„ä¸­é–“ä»¶ï¼Œå°±å±¬æ–¼é€™ç¨®é¡å‹ã€‚</p><p>ä¾‹å¦‚ï¼Œç›´æ¥å®šç¾©ä¸€å€‹åŒ¿åçš„ä¸­é–“ä»¶åœ¨é é¢å…ƒä»¶ä¸­ä½¿ç”¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>middleware</span><span class=o>:</span> <span class=nx>defineNuxtRouteMiddleware</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[åŒ¿åä¸­é–“ä»¶] æˆ‘æ˜¯ç›´æ¥å®šç¾©åœ¨é é¢å…§çš„åŒ¿åä¸­é–“ä»¶`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å…·åçš„è·¯ç”±ä¸­é–“ä»¶>å…·åçš„è·¯ç”±ä¸­é–“ä»¶</h4><p>åœ¨ <code>middleware</code> ç›®éŒ„ä¸‹æ‰€å»ºç«‹çš„ä¸­é–“ä»¶ï¼Œç•¶åœ¨é é¢ä½¿ç”¨ <code>definePageMeta()</code> ä¾†æŒ‡å®šä½¿ç”¨å…·åçš„ä¸­é–“ä»¶æ™‚ï¼Œå°‡é€éç•°æ­¥ä¾†è‡ªå‹•è¼‰å…¥ã€‚å…·åçš„è·¯ç”±çš„åç¨±è¢«è¦ç¯„ç‚ºæ˜¯çƒ¤è‚‰ä¸²å¼ (Kebab case) å‘½åã€‚</p><p>ä¾‹å¦‚ï¼Œå»ºç«‹ä¸€å€‹ <strong>./middleware/random-redirect.js</strong> ä¸­é–“ä»¶æª”æ¡ˆï¼š</p><h5 id=middlewarerandom-redirectjs>middleware/random-redirect.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtRouteMiddleware</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mf>0.5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ä¾†è‡ª random-redirect ä¸­é–“ä»¶] é‡æ–°å°å‘è‡³ /haha`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>navigateTo</span><span class=p>(</span><span class=s1>&#39;/haha&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ä¾†è‡ª random-redirect ä¸­é–“ä»¶] æ²’ç™¼ç”Ÿä»€éº¼ç‰¹åˆ¥çš„äº‹æƒ…ï½`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘è¦ä½¿ç”¨é€™å€‹ä¸­é–“ä»¶æ™‚ï¼Œå¯ä»¥åœ¨é é¢ä¸­ä½¿ç”¨ <code>definePageMeta()</code> ä¸¦å‚³å…¥ <code>middleware</code> å±¬æ€§ï¼Œä¾†æ·»åŠ è·¯ç”±ä¸­é–“ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>middleware</span><span class=o>:</span> <span class=s1>&#39;random-redirect&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸­é–“ä»¶æœ‰å¤šå€‹ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é™£åˆ—ä¾†å‚³å…¥å¤šå€‹ä¸­é–“ä»¶ï¼Œä¸¦ä¸”æœƒä¾åºåŸ·è¡Œé€™äº›è·¯ç”±ä¸­é–“ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>middleware</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;random-redirect&#39;</span><span class=p>,</span> <span class=s1>&#39;other&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘åœ¨é é¢ä¸­æ·»åŠ é€™å€‹ä¸­é–“ä»¶å¾Œï¼Œåœ¨åˆ‡æ›åˆ°é€™å€‹è·¯ç”±é é¢æ™‚ï¼Œç´„æœ‰ä¸€åŠçš„æ©Ÿæœƒï¼Œæœƒè¢«å°èˆªè‡³ <strong>/haha</strong> é é¢ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186763_d4ff53ce17_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=å…¨åŸŸçš„è·¯ç”±ä¸­é–“ä»¶>å…¨åŸŸçš„è·¯ç”±ä¸­é–“ä»¶</h4><p>åœ¨å…·åçš„ä¸­é–“ä»¶çš„æª”åæ·»åŠ å¾Œç¶´ <code>.global</code>ï¼Œå¦‚ <strong>auth.global.js</strong>ï¼Œé€™å€‹è·¯ç”±ä¸­é–“ä»¶å°‡æœƒè¢«è‡ªå‹•è¼‰å…¥ï¼Œä¸¦åœ¨æ¯æ¬¡å°èˆªè®Šæ›´æ™‚è‡ªå‹•åŸ·è¡Œã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹ <strong>./middleware/always-run.global.js</strong> ä¸­é–“ä»¶æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=middlewarealways-runglobaljs>middleware/always-run.global.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtRouteMiddleware</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[å…¨åŸŸä¸­é–“ä»¶] to: </span><span class=si>${</span><span class=nx>to</span><span class=p>.</span><span class=nx>path</span><span class=si>}</span><span class=sb>, from: </span><span class=si>${</span><span class=nx>from</span><span class=p>.</span><span class=nx>path</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™å€‹å…¨åŸŸçš„è·¯ç”±ä¸­é–“ä»¶ï¼Œå°‡æœƒåœ¨æ¯ä¸€æ¬¡å°èˆªåˆ‡æ›é é¢æ™‚åŸ·è¡Œã€‚</p><p><img src=https://live.staticflickr.com/65535/52617134335_bac452e9f6_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=å‹•æ…‹æ·»åŠ è·¯ç”±ä¸­é–“ä»¶>å‹•æ…‹æ·»åŠ è·¯ç”±ä¸­é–“ä»¶</h4><p>ä½ å¯ä»¥ä½¿ç”¨ <code>addRouteMiddleware()</code> è¼”åŠ©å‡½æ•¸ä¾†æ‰‹å‹•æ·»åŠ å…¨åŸŸæˆ–å‘½åè·¯ç”±ä¸­é–“ä»¶ï¼Œä¾‹å¦‚åœ¨æ’ä»¶ä¸­ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>addRouteMiddleware</span><span class=p>(</span><span class=s1>&#39;global-test&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;é€™å€‹æ˜¯ç”±æ’ä»¶æ·»åŠ çš„å…¨åŸŸä¸­é–“ä»¶ï¼Œä¸¦å°‡åœ¨æ¯æ¬¡è·¯ç”±è®Šæ›´æ™‚åŸ·è¡Œ&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{</span> <span class=nx>global</span><span class=o>:</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>addRouteMiddleware</span><span class=p>(</span><span class=s1>&#39;named-test&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;é€™å€‹æ˜¯ç”±æ’ä»¶æ·»åŠ çš„å…·åä¸­é–“ä»¶ï¼Œä¸¦å°‡æœƒè¦†è“‹ä»»ä½•ç¾æœ‰çš„åŒåä¸­é–“ä»¶&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ Nuxt ä¸­æˆ‘å€‘å¯ä»¥ä½¿ç”¨æ‰€æä¾›çš„ä¸­é–“ä»¶æ¡†æ¶ï¼Œä¾†å»ºç«‹è·¯ç”±é é¢ä¸­çš„ä¸­é–“ä»¶ï¼Œè€Œè·¯ç”±ä¸­é–“ä»¶æœƒåœ¨åˆ°ç‰¹å®šè·¯ç”±ä¹‹å‰åŸ·è¡Œæƒ³è¦é‹è¡Œçš„é‚è¼¯ï¼Œå°æ–¼é©—è­‰æ¬Šé™ç­‰éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿæ­£æ˜¯å¯¦ç¾å°èˆªå®ˆè¡› (Navigation Guards) çš„æ–¹å¼ã€‚é€™è£¡æˆ‘å€‘ä¸»è¦è¬›è¿°çš„è·¯ç”±ä¸­é–“ä»¶ï¼Œä¹Ÿå°‡æœƒèˆ‡æˆ‘å€‘å¾Œé¢æœƒæåˆ°çš„ä¼ºæœå™¨ç«¯çš„ä¸­é–“ä»¶æœ‰æ‰€ä¸åŒï¼Œé›–ç„¶åç¨±ç›¸ä¼¼ä½†èˆ‡ Nitro å•Ÿå‹•æ™‚åŸ·è¡Œçš„ä¼ºæœå™¨ä¸­é–“ä»¶<code>å®Œå…¨ä¸åŒ</code>ã€‚</p><hr><h2 id=server-api-èˆ‡-nitro-engine>Server API èˆ‡ Nitro Engine</h2><p>é€™è£¡æœƒå…ˆä»‹ç´¹ä¸€ä¸‹ Nitro Engine æ˜¯ä»€éº¼æ±è¥¿ï¼Œ<a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> å¯èƒ½ä¸å¤šäººè½éä½†èˆ‡ Nuxt 3 æ¯æ¯ç›¸é—œï¼Œ<a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> ä¼ºæœå™¨å¼•æ“é™¤äº†æœ‰è·¨å¹³å°æ”¯æ´èˆ‡å¤šç¨®å¼·å¤§çš„åŠŸèƒ½å¤–ï¼Œæ›´åŒ…å«äº† API è·¯ç”±çš„æ”¯æ´ï¼Œæ„æ€å°±æ˜¯æˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨åŸºæ–¼ <a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> çš„ Nuxt 3 ä¸Šç›´æ¥é–‹ç™¼ç”±å¾Œç«¯è™•ç†çš„é‚è¼¯æˆ–èˆ‡è³‡æ–™åº«äº’å‹•ï¼Œå†å°‡çµæœå›å‚³è‡³å‰ç«¯ï¼Œå¯¦ä½œå‡º Server APIã€‚</p><h3 id=nitro-engine>Nitro Engine</h3><p>åœ¨é–‹å§‹å»ºç½® Sever API ä¹‹å‰ï¼Œå…ˆä¾†ä»‹ç´¹ä¸€ä¸‹ Nitro ä¼ºæœå™¨å¼•æ“ï¼ŒNuxt 3 çš„ä¸€å¤§ç‰¹é»å°±æ˜¯æ¡ç”¨äº†ä¸€å€‹åç‚º <a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> çš„ä¼ºæœå™¨å¼•æ“ (Server Engine)ï¼Œ<a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> åŸºæ–¼ rollup èˆ‡ <a class=link href=https://github.com/unjs/h3 target=_blank rel=noopener>h3</a>ï¼Œç‚ºé”é«˜æ•ˆèƒ½èˆ‡å¯ç§»æ¤æ€§ç›®æ¨™è€Œå»ºæ§‹çš„æœ€å° <code>HTTP</code> æ¡†æ¶ã€‚</p><p><a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> æä¾›äº†ä»¥ä¸‹å¤šç¨®åŠŸèƒ½ç‰¹è‰²ï¼Œä½¿å¾— Nuxt æ›´ä½³å®Œå–„èˆ‡å¼·å¤§ï¼Œå¦‚åŒå®˜ç¶²æ‰€èªª <strong><a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> è®“ Nuxt ç›´æ¥è§£é–äº†æ–°çš„å…¨ç«¯èƒ½åŠ›</strong>ã€‚</p><ul><li><strong>å¿«é€Ÿçš„é–‹ç™¼é«”é©—</strong>ï¼šé–‹ç®±å³ç”¨çš„ç‰¹æ€§ï¼Œç„¡éœ€ä»»ä½•é…ç½®ï¼Œå°±å¯ä»¥å•Ÿå‹•å…·æœ‰ <strong>hot module reloading</strong> çš„é–‹ç™¼ä¼ºæœå™¨ï¼Œå¯«å®Œç¨‹å¼ç¢¼å­˜æª”å¾Œï¼Œå°±èƒ½è®“ä¼ºæœå™¨è¼‰å…¥æ–°çš„ç¨‹å¼é‚è¼¯ã€‚</li><li><strong>åŸºæ–¼æª”æ¡ˆç³»çµ±çš„è·¯ç”±</strong>ï¼šæˆ‘å€‘åªéœ€è¦å°ˆæ³¨åœ¨å»ºç«‹ä¼ºæœå™¨çš„ç›®éŒ„èˆ‡é é¢ï¼Œå°±èƒ½æ“æœ‰è‡ªå‹•è¼‰å…¥èˆ‡è·¯ç”±çš„æ•ˆæœã€‚</li><li><strong>å¯ç§»æ¤ä¸”ä¾¿æ”œ</strong>ï¼šåŸºæœ¬ä¸Š Nuxt 3 ä½¿ç”¨çš„ä¾è³´å¥—ä»¶éƒ½åœ¨ <strong>package.json</strong> æª”æ¡ˆçš„ <strong>devDependencies</strong> ä¸­ï¼Œå»ºæ§‹æ­£å¼ç’°å¢ƒçš„ç¶²ç«™æ™‚ï¼Œ<a class=link href=https://github.com/unjs/nitro target=_blank rel=noopener>Nitro</a> è‡ªå‹•æ‹†åˆ†çš„ç¨‹å¼ç¢¼èˆ‡æ‰“åŒ…å‡ºä¾†çš„ <code>.output</code> ç›®éŒ„ä¸å†éœ€è¦å®‰è£ä¾è³´å¥—ä»¶ï¼Œæ„å‘³è‘—ä¸å†æœ‰ <strong>node_modules</strong>ï¼Œå› æ­¤éƒ¨ç½²æ™‚æ›´è¼•ä¾¿å¥½æ”œã€‚</li><li><strong>æ··åˆæ¨¡å¼</strong>ï¼šé€é**æ··åˆæ¨¡å¼ (Hybrid mode)**å¯ä»¥å°‡ä¸€éƒ¨åˆ†é é¢é æ¸²æŸ“ç”¢ç”Ÿå‡ºéœæ…‹é é¢ï¼Œéƒ¨åˆ†é é¢æ˜¯å‹•æ…‹çš„åœ¨ä¼ºæœå™¨æˆ–å®¢æˆ¶ç«¯æ¸²æŸ“ï¼Œè®“æ¯å€‹è·¯ç”±é é¢æœ‰ä¸åŒçš„éœæ…‹æˆ–å‹•æ…‹ç”šè‡³æ“æœ‰å¿«å–è¦å‰‡ï¼Œé€™å°‡è®“ Nuxt 3 çš„<a class=link href=https://nuxt.com/docs/guide/concepts/rendering#universal-rendering target=_blank rel=noopener>é€šç”¨æ¸²æŸ“ (Universal Rendering)</a> æ–¹å¼æ›´é€²ä¸€æ­¥æˆ<a class=link href=https://nuxt.com/docs/guide/concepts/rendering#hybrid-rendering target=_blank rel=noopener>æ··åˆæ¸²æŸ“ (Hybrid Rendering)</a> ä¹Ÿèƒ½çµåˆç„¡ä¼ºæœå™¨ (Serverless) ä¾†é…ç½®æ··åˆæ¨¡å¼ã€‚</li></ul><p>çœ‹åˆ°é€™è£¡ï¼Œå¯ä»¥ç™¼ç¾ Nuxt 3 èˆ‡ Nitro éƒ½ä¸‹äº†éå¸¸å¤§çš„åŠŸå¤«ï¼Œé›–ç„¶é‚„æœ‰äº›åŠŸèƒ½å°šæœªç©©å®šèˆ‡éœ€è¦æ”¹é€²çš„åœ°æ–¹ï¼Œä½†æ˜¯å·²ç¶“ç‚ºé–‹ç™¼ä¸Šæä¾›äº†å¼·å¤§æ”¯æ´èˆ‡è‰¯å¥½çš„é«”é©—ï¼Œæ›´å¤šç‰¹æ€§èˆ‡ç´°ç¯€å¯ä»¥åƒè€ƒ <a class=link href=https://nuxt.com/docs/guide/concepts/server-engine target=_blank rel=noopener>Nuxt 3 - Server Engine</a> æˆ– <a class=link href=https://nitro.unjs.io/ target=_blank rel=noopener>Nitro å®˜æ–¹</a>ã€‚</p><h3 id=nuxt-3-çš„-server-ç›®éŒ„>Nuxt 3 çš„ Server ç›®éŒ„</h3><p>æˆ‘å€‘å¯ä»¥é€é Nuxt 3 å°ˆæ¡ˆä¸‹çš„ <code>server</code> ç›®éŒ„ä¾†å»ºç«‹å…·æœ‰ <strong>hot module reloading</strong> æ”¯æ´çš„ Server API èˆ‡å¾Œç«¯è™•ç†é‚è¼¯ã€‚</p><p><strong>server</strong> ç›®éŒ„å¸¸ç”¨çš„æœ‰ä¸‹é¢ä¸‰å€‹å­ç›®éŒ„ï¼š</p><ul><li>api</li></ul><p>åœ¨é€™å€‹ç›®éŒ„çš„æª”æ¡ˆï¼Œå°‡æœƒç”± Nuxt è‡ªå‹•è¼‰å…¥ä¸¦ç”¢ç”Ÿ <code>/api</code> é–‹é ­çš„è·¯ç”±ä¸¦å°æ‡‰æª”æ¡ˆåç¨±ï¼Œä¾‹å¦‚å»ºç«‹ <strong>./server/api/hello.js</strong>ï¼Œå°±æœƒæ“æœ‰ <strong>/api/hello</strong> çš„è·¯ç”±å°æ‡‰é€™å€‹ APIï¼Œå¯ä»¥ä½¿ç”¨ <a class=link href=http://localhost:3000/api/hello target=_blank rel=noopener>http://localhost:3000/api/hello</a> è¨ªå•è©²è·¯ç”±ã€‚</p><ul><li>routes</li></ul><p>åœ¨é€™å€‹ç›®éŒ„çš„æª”æ¡ˆï¼Œå°‡æœƒç”± Nuxt è‡ªå‹•è¼‰å…¥ä¸¦ç”¢ç”Ÿå°æ‡‰æª”æ¡ˆåç¨±çš„è·¯ç”±ï¼Œä¾‹å¦‚å»ºç«‹ <strong>./server/routes/world.js</strong>ï¼Œå°±æœƒæ“æœ‰ <code>/world</code> çš„è·¯ç”±å°æ‡‰é€™å€‹ APIï¼Œå¯ä»¥ä½¿ç”¨ <a class=link href=http://localhost:3000/world target=_blank rel=noopener>http://localhost:3000/world</a> è¨ªå•è©²è·¯ç”±ã€‚</p><ul><li>middleware</li></ul><p>åœ¨é€™å€‹ç›®éŒ„çš„æª”æ¡ˆï¼Œæœƒè¢« Nuxt è‡ªå‹•è¼‰å…¥ï¼Œä¸¦æ·»åŠ è‡³<code>ä¼ºæœå™¨ä¸­é–“ä»¶</code>ï¼Œä¸¦åœ¨æ¯å€‹ Request é€²å…¥ä¼ºæœå™¨ API çš„è·¯ç”±å‰åŸ·è¡Œã€‚</p><h3 id=å»ºç«‹ç¬¬ä¸€å€‹ä¼ºæœå™¨-api>å»ºç«‹ç¬¬ä¸€å€‹ä¼ºæœå™¨ API</h3><p>Nuxt æœƒè‡ªå‹•æƒæ <code>server</code> ç›®éŒ„ä¸­çš„æª”æ¡ˆçµæ§‹ï¼Œå»ºç«‹ Server API æ™‚é€šå¸¸ä»¥ <strong>.js</strong> æˆ– <strong>.ts</strong> ä½œç‚ºå‰¯æª”åï¼Œä¸¦ä¾ç…§å®˜æ–¹å»ºè­°ï¼Œæ¯å€‹æª”æ¡ˆéƒ½æ‡‰è©²é è¨­åŒ¯å‡º <code>defineEventHandler()</code> å‡½æ•¸ï¼Œä¸¦åœ¨å…¶ handler å…§å¯¦ä½œè™•ç†é‚è¼¯ã€‚</p><p>handler æ¥æ”¶äº†ä¸€å€‹ <code>event</code> åƒæ•¸ï¼Œç”¨ä¾†è§£æè«‹æ±‚çš„è³‡æ–™ï¼Œä¸¦å¯ä»¥ç›´æ¥å›å‚³ä¸€å€‹<strong>å­—ä¸²</strong>ã€<strong>JSON</strong>ã€<strong>Promise</strong> æˆ–è€…ä½¿ç”¨ <strong>event.res.end()</strong> é€å‡ºè«‹æ±‚å›æ‡‰ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹æª”æ¡ˆ <strong>./server/api/hello.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapihellojs>server/api/hello.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=s1>&#39;Hello World!&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚åŒ <code>pages</code> é é¢è·¯ç”±ä¸€æ¨£ï¼Œåœ¨ <strong>./server/api</strong> ç›®éŒ„ä¸‹æœƒåŸºæ–¼æª”æ¡ˆç³»çµ±çµæ§‹ä¾†ç”¢ç”Ÿå‡ºç›¸å°æ‡‰çš„è·¯ç”±ï¼Œä¸¦ä¸”æœƒæ·»åŠ ä¸€å€‹è·¯ç”±å‰ç¶´ <code>/api</code>ï¼Œç¾åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ <a class=link href=http://localhost:3000/api/hello target=_blank rel=noopener>http://localhost:3000/api/hello</a> è¨ªå•è©²è·¯ç”±ï¼Œçœ‹è¦‹å›å‚³çš„ JSON è³‡æ–™ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964704_e3841ca57a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä¼ºæœå™¨è·¯ç”±>ä¼ºæœå™¨è·¯ç”±</h3><h4 id=åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±>åŸºæ–¼æª”æ¡ˆçš„è·¯ç”±</h4><p>å‰é¢çš„ä¾‹å­æœ‰æåˆ°ï¼ŒServer API çš„è·¯ç”±æ˜¯<code>åŸºæ–¼æª”æ¡ˆçµæ§‹ä¾†è‡ªå‹•ç”¢ç”Ÿ</code>ï¼Œå¦‚æœä½ ä¸æƒ³è¦æœ‰ <code>/api</code> çš„å‰ç¶´ï¼Œå¯ä»¥å°‡ API è™•ç†é‚è¼¯æª”æ¡ˆï¼Œæ”¾ç½®åœ¨ <strong>./server/routes</strong> ç›®éŒ„ä¸­ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œä»¥ä¸‹çš„æª”æ¡ˆçµæ§‹æœƒç”¢ç”Ÿå…©å€‹å¯ä»¥è¨ªå•çš„ä¼ºæœå™¨ API è·¯ç”±ï¼Œåˆ†åˆ¥ç‚º <strong>/api/hello</strong> åŠ <strong>/api/world</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxt-app/
</span></span><span class=line><span class=cl>â””â”€â”€ server/
</span></span><span class=line><span class=cl>    â”œâ”€â”€ api/
</span></span><span class=line><span class=cl>    â”‚   â””â”€â”€ hello.js
</span></span><span class=line><span class=cl>    â””â”€â”€ routes/
</span></span><span class=line><span class=cl>        â””â”€â”€ world.js
</span></span></code></pre></td></tr></table></div></div><h4 id=åŒ¹é…è·¯ç”±åƒæ•¸>åŒ¹é…è·¯ç”±åƒæ•¸</h4><p>å°‡æª”æ¡ˆåç¨±æ·»åŠ ä¸­æ‹¬è™Ÿ <code>[]</code>ï¼Œå…¶ä¸­æ”¾å…¥æ¬²è¨­å®šçš„åƒæ•¸åç¨±ï¼Œä»¥æ­¤ä¾†è™•ç†å‹•æ…‹è·¯ç”±åŒ¹é…ã€‚
èˆ‰ä¾‹ä¾†èªªï¼Œå»ºç«‹ <strong>./server/api/hello/[name].js</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapihellonamejs>server/api/hello/[name].js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>name</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>context</span><span class=p>.</span><span class=nx>params</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=sb>`Hello, </span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>!`</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ handler å…§å°±èƒ½ä½¿ç”¨ <code>event.context.params</code> ä¾†è¨ªå• <strong>name</strong> è·¯ç”±åƒæ•¸ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698486_37c5da2beb_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=åŒ¹é…-http-è«‹æ±‚æ–¹æ³•-http-request-method>åŒ¹é… HTTP è«‹æ±‚æ–¹æ³• (HTTP Request Method)</h4><p>æˆ‘å€‘å¯ä»¥æ·»åŠ  <strong>.get</strong>ã€<strong>.post</strong>ã€<strong>.put</strong> æˆ– <strong>.delete</strong> ç­‰æª”æ¡ˆåç¨±å¾Œç¶´ï¼Œä¾†åŒ¹é…å°æ‡‰çš„ HTTP request methodsã€‚</p><p>æ–°å¢ <strong>server/api/test.get.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapitestgetjs>server/api/test.get.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;æ¸¬è©¦ [GET] /api/test&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ <strong>server/api/test.post.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapitestpostjs>server/api/test.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;æ¸¬è©¦ [POST] /api/test&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘ä½¿ç”¨ <a class=link href=https://www.postman.com/ target=_blank rel=noopener>Postman</a> ä¾†æ‰“é€™å…©éš» APIï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ä¸åŒçš„ HTTP Request Methodï¼Œå°±æœƒåŒ¹é…è‡³å°æ‡‰å¾Œç¶´æª”æ¡ˆä¸­çš„ handler é€²è¡Œè™•ç†ã€‚</p><h5 id=get-apitest>[GET] /api/test</h5><p><img src=https://live.staticflickr.com/65535/52616188612_a1886c609d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h5 id=post-apitest>[POST] /api/test</h5><p><img src=https://live.staticflickr.com/65535/52616964714_af11679e95_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¾ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘å€‘å»ºç«‹äº† <code>test.get.js</code> èˆ‡ <code>test.post.js</code> æª”æ¡ˆï¼Œåˆ†åˆ¥å°æ‡‰äº† <strong>GET</strong> èˆ‡ <strong>POST</strong> æ–¹æ³•ï¼Œå¦‚æœåŒä¸€å€‹è·¯ç”±ä½¿ç”¨äº†å…¶ä»–æ–¹æ³•è€Œç„¡æ³•åŒ¹é…è™•ç†çš„æª”æ¡ˆæ™‚ï¼Œå‰‡æœƒå›å‚³ HTTP ç‹€æ…‹ç¢¼ <strong>405 Method Not Allowed</strong> è¡¨ç¤ºéŒ¯èª¤ã€‚</p><h4 id=åŒ¹é…åŒ…ç¾…è¬è±¡çš„è·¯ç”±-catch-all-route>åŒ¹é…åŒ…ç¾…è¬è±¡çš„è·¯ç”± (Catch-all Route)</h4><p>ä½ å¯ä»¥å»ºç«‹ <code>[â€¦].js</code> çš„æª”æ¡ˆï¼Œä¾†å°‡æ‰€æœ‰ä¸åŒ¹é…çš„è·¯ç”±äº¤ç”±é€™å€‹ handler ä½œè™•ç†ã€‚</p><p>ä¾‹å¦‚ï¼Œå»ºç«‹ <strong>./server/api/catch-all/[â€¦].js</strong>ï¼Œå°‡å¯ä»¥åŒ¹é… <strong>/api/catch-all/x</strong>ã€<strong>/api/catch-all/x/y</strong>&mldr;ç­‰ <strong>/catch-all</strong> ä¸‹æ‰€æœ‰å±¤ç´šçš„è·¯ç”±ã€‚</p><h5 id=serverapicatch-alljs>server/api/catch-all/[â€¦].js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>url</span><span class=o>:</span> <span class=nx>event</span><span class=p>.</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;/api/catch-all ä¸‹ä¸åŒ¹é…çš„è·¯ç”±éƒ½æœƒé€²å…¥é€™è£¡&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <strong>./server/api/[â€¦].js</strong> æª”æ¡ˆå¦‚ä¸‹ï¼Œå°‡å¯ä»¥æ¥æ‰‹æ‰€æœ‰ <strong>/api</strong> ä¸‹ç„¡æ³•åŒ¹é…çš„è·¯ç”±ã€‚</p><h5 id=serverapijs>server/api/[â€¦].js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>url</span><span class=o>:</span> <span class=nx>event</span><span class=p>.</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;/api ä¸‹ä¸åŒ¹é…çš„è·¯ç”±éƒ½æœƒé€²å…¥é€™è£¡&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹åœ–ç¤ºç¯„ä¸­ï¼Œç•¶æˆ‘å€‘è¼¸å…¥çš„è·¯ç”±å¦‚æœæ²’æœ‰è¾¦æ³•è™•ç†ï¼Œå°‡æœƒè¢« <code>[...].js</code> æ‰€åŒ¹é…ï¼Œä»¥æ­¤æˆ‘å€‘å¯ä»¥ä¾†å¯¦ä½œè¿”å›ã€é‡æ–°å°å‘æˆ–éŒ¯èª¤é é¢ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186823_7aa4ffbd74_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä¼ºæœå™¨ä¸­é–“ä»¶>ä¼ºæœå™¨ä¸­é–“ä»¶</h3><p>Nuxt æœƒè‡ªå‹•è¼‰å…¥ <code>./server/middleware</code> ä¸­çš„æª”æ¡ˆï¼Œä¸¦æ·»åŠ è‡³<code>ä¼ºæœå™¨ä¸­é–“ä»¶</code>ï¼Œä¼ºæœå™¨çš„ä¸­é–“ä»¶èˆ‡è·¯ç”±ä¸­é–“ä»¶ä¸åŒçš„æ˜¯ï¼Œ<code>pages</code> è·¯ç”±é é¢çš„è«‹æ±‚æ˜¯ä¸æœƒåŸ·è¡Œä¼ºæœå™¨ä¸­é–“ä»¶ã€‚</p><p>ä¼ºæœå™¨çš„ä¸­é–“ä»¶æœƒåœ¨æ¯å€‹ Request é€²å…¥ä¼ºæœå™¨ API çš„è·¯ç”±å‰åŸ·è¡Œï¼Œé€šå¸¸ç”¨ä¾†æ·»åŠ æˆ–æª¢æŸ¥è«‹æ±‚çš„æ¨™é ­ (headers)ã€è¨˜éŒ„è«‹æ±‚æˆ–æ“´å±•èª¿æ•´è«‹æ±‚çš„ç‰©ä»¶ã€‚</p><blockquote><p>ä¼ºæœå™¨ä¸­é–“ä»¶çš„è™•ç†é‚è¼¯ï¼Œä¸æ‡‰è©²å›å‚³ä»»ä½•å…§å®¹ï¼Œä¹Ÿä¸æ‡‰ä¸­æ–·æˆ–ç›´æ¥å›æ‡‰è«‹æ±‚ï¼Œä¼ºæœå™¨ä¸­é–“ä»¶æ‡‰è©²åƒ…æª¢æŸ¥ã€æ“´å±•è«‹æ±‚ä¸Šä¸‹æ–‡æˆ–ç›´æ¥æ‹‹å‡ºéŒ¯èª¤ã€‚</p></blockquote><p>èˆ‰ç†ä¾†èªªï¼Œä½ å¯ä»¥æ–°å¢ <strong>./server/middleware/log.js</strong> ç”¨ä¾†è¨˜éŒ„æ¯å€‹è«‹æ±‚çš„ URLã€‚</p><h5 id=servermiddlewarelogjs>server/middleware/log.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;New request: &#39;</span> <span class=o>+</span> <span class=nx>event</span><span class=p>.</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ï¼Œæ–°å¢ <strong>./server/middleware/auth.js</strong> ç”¨ä¾†è§£æè«‹æ±‚æˆ–æ“´å±•è«‹ç”±ç‰©ä»¶ã€‚</p><h5 id=servermiddlewareauthjs>server/middleware/auth.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>event</span><span class=p>.</span><span class=nx>context</span><span class=p>.</span><span class=nx>auth</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;ryan&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä¼ºæœå™¨æ’ä»¶>ä¼ºæœå™¨æ’ä»¶</h3><p>Nuxt æœƒè‡ªå‹•æƒæä¸¦è¼‰å…¥ <code>./server/plugins</code> ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼Œä¸¦å°‡ä»–å€‘è¨»å†Šç‚º Nitro çš„æ’ä»¶ï¼Œåœ¨ Nitro å•Ÿå‹•æ™‚ï¼Œé€™äº›æ’ä»¶å°‡æœƒåœ¨ä¼ºæœå™¨è¼‰å…¥ä¸¦åŸ·è¡Œï¼Œæ’ä»¶å…è¨±æ“´å±• Nitro åŸ·è¡Œæ™‚çš„è¡Œç‚ºåŠé€£æ¥åˆ°ç”Ÿå‘½é€±æœŸçš„äº‹ä»¶ã€‚</p><p>æ›´å¤šç´°ç¯€å¯ä»¥åƒè€ƒ <a class=link href=https://nitro.unjs.io/guide/advanced/plugins target=_blank rel=noopener>Nitro Plugins</a>ã€‚</p><h3 id=ä¼ºæœå™¨é€šç”¨åŠŸèƒ½>ä¼ºæœå™¨é€šç”¨åŠŸèƒ½</h3><p>Nuxt ä¸­ä¼ºæœå™¨çš„è·¯ç”±ï¼Œæ˜¯ç”± <a class=link href=https://github.com/unjs/h3 target=_blank rel=noopener>unjs/h3</a> æ‰€æä¾›ï¼Œh3 å…§å»ºä¸€äº›æ–¹ä¾¿å¯¦ç”¨çš„ helpersï¼Œå¯ä»¥åƒè€ƒ <a class=link href=https://www.jsdocs.io/package/h3#package-index-functions target=_blank rel=noopener>Available H3 Request Helpers</a>ã€‚</p><h3 id=ä¼ºæœå™¨è·¯ç”±å¸¸ç”¨çš„-http-è«‹æ±‚è™•ç†>ä¼ºæœå™¨è·¯ç”±å¸¸ç”¨çš„ HTTP è«‹æ±‚è™•ç†</h3><h4 id=è™•ç†-http-è«‹æ±‚ä¸­çš„-body>è™•ç† HTTP è«‹æ±‚ä¸­çš„ Body</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>readBody</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=nx>body</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ä½¿ç”¨ <code>readBody(event)</code> ä¾†è§£æè«‹æ±‚ä¸­çš„ Bodyï¼Œæ³¨æ„ <code>readBody()</code> æ˜¯ä¸€å€‹ç•°æ­¥å‡½æ•¸ï¼Œè¨˜å¾— <code>await</code> ç­‰å¾…è§£æå®Œæˆã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186843_8c75e8307f_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=è™•ç†-url-ä¸­çš„æŸ¥è©¢åƒæ•¸-query-parameters>è™•ç† URL ä¸­çš„æŸ¥è©¢åƒæ•¸ (Query Parameters)</h4><p>å¯ä»¥ä½¿ç”¨ <code>getQuery(evnet)</code> ä¾†è§£ææŸ¥è©¢åƒæ•¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>query</span> <span class=o>=</span> <span class=nx>getQuery</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=nx>query</span><span class=p>.</span><span class=nx>name</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶è«‹æ±‚ URL ç‚º <strong>/api/query?name=ryan</strong>ï¼Œå¯ä»¥è§£æå‡ºæŸ¥è©¢åƒæ•¸ <strong>query.name</strong>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964724_f604a17188_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=è§£æ-http-è«‹æ±‚æ‰€å¤¾å¸¶çš„-cookie>è§£æ HTTP è«‹æ±‚æ‰€å¤¾å¸¶çš„ Cookie</h4><p>å¯ä»¥ä½¿ç”¨ <code>parseCookies(event)</code> ä¾†è§£æè«‹æ±‚æ‰€å¤¾å¸¶çš„ Cookieã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>cookies</span> <span class=o>=</span> <span class=nx>parseCookies</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ok</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>cookies</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘é€éç€è¦½å™¨çš„é–‹ç™¼å·¥å…·ï¼Œæ‰‹å‹•æ·»åŠ äº†ä¸€çµ„ <strong>cookie</strong> åç‚º <code>token</code>ï¼ŒServer API å¯ä»¥é€é <code>parseCookies()</code> ä¾†è§£æå‡ºç€è¦½å™¨è‡ªå‹•å¤¾å¸¶çš„ <strong>cookie</strong>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698541_f2d257d4c0_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=é€²éšä½¿ç”¨ç¯„ä¾‹>é€²éšä½¿ç”¨ç¯„ä¾‹</h3><h4 id=nitro-é…ç½®>Nitro é…ç½®</h4><p>ä½ å¯ä»¥åœ¨ <code>nuxt.config.ts</code> ä¸­ä½¿ç”¨ <code>nitro</code> å±¬æ€§ä¾†é…ç½® <a class=link href=https://nitro.unjs.io/config target=_blank rel=noopener>Nitro è¨­å®š</a>ã€‚</p><h5 id=nuxtconfigts-2>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// https://nitro.unjs.io/config
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>nitro</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨å·¢ç‹€è·¯ç”±>ä½¿ç”¨å·¢ç‹€è·¯ç”±</h4><p>ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ <a class=link href=https://www.jsdocs.io/package/h3 target=_blank rel=noopener>h3</a> çš„ <code>createRouter()</code> æ–¹æ³•ä¾†å»ºç«‹å·¢ç‹€è·¯ç”±ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createRouter</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;h3&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>createRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=s1>&#39;Hello World&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>router</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¼ºæœå™¨å„²å­˜>ä¼ºæœå™¨å„²å­˜</h4><p>Nitro æä¾›äº†ä¸€å€‹è·¨å¹³å°çš„<a class=link href=https://nitro.unjs.io/guide/introduction/storage target=_blank rel=noopener>å„²å­˜å±¤</a>ï¼Œä½ å¯ä»¥ Nitro çš„é…ç½®ä¸­è¨­å®š <code>storage</code> å±¬æ€§ï¼Œä¾†é…ç½®é¡å¤–çš„å„²å­˜æ›è¼‰ä½ç½®ï¼Œå®˜ç¶²æä¾›äº†ä¸€å€‹<a class=link href=https://nuxt.com/docs/guide/directory-structure/server/#example-using-redis target=_blank rel=noopener>ä½¿ç”¨ Redis çš„ç¯„ä¾‹</a>ã€‚</p><p>æ›´å¤š Nitro ä¼ºæœå™¨çš„è¨­å®šèˆ‡ä½¿ç”¨å¯ä»¥åƒè€ƒ<a class=link href=https://nuxt.com/docs/guide/directory-structure/server/ target=_blank rel=noopener>å®˜ç¶²</a>ã€‚</p><p>Nitro ä¼ºæœå™¨å¼•æ“å°‡ Nuxt 3 æå‡è‡³å¦ä¸€å€‹å¢ƒç•Œï¼Œä¸åƒ…åŠŸèƒ½å¼·å¤§ä¸”è®“é–‹ç™¼ä¸­æ“æœ‰ä¸éŒ¯çš„é«”é©—ï¼Œä¼ºæœå™¨è·¯ç”±æ›´æ˜¯èƒ½åœ¨å¾Œç«¯ç›´æ¥è™•ç†é‚è¼¯å¯¦ä½œ Server APIï¼Œè€Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å¦‚ä½•åœ¨ Nuxt æ‰“ API å–å¾—è³‡æ–™ã€‚</p><hr><h2 id=è³‡æ–™ç²å–-data-fetching>è³‡æ–™ç²å– (Data Fetching)</h2><p>Nuxt æä¾›äº† <code>$fetch</code> åŠå››ç¨®çµ„åˆå¼å‡½æ•¸ (Composables)ï¼Œä¾†é€²è¡Œè³‡æ–™ç²å–ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œæˆ‘å€‘ä¸éœ€è¦å†é¡å¤–å®‰è£ä»»ä½• HTTP Client ï¼Œå¦‚ <a class=link href=https://github.com/axios/axios target=_blank rel=noopener>axios</a> ä¾†ç™¼é€ HTTP è«‹æ±‚ï¼Œå› ç‚º Nuxt æœ¬èº«å°±è‡ªå¸¶äº†æ‰“ API çš„æ–¹æ³•ï¼Œè€Œä¸”åœ¨é é¢ã€å…ƒä»¶æˆ–æ’ä»¶ä¸­éƒ½èƒ½ç›´æ¥å‘¼å«åšä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆä»‹ç´¹ä¸€ä¸‹ <code>$fetch</code> é€™å€‹ç”± Nuxt æä¾›ä½¿ç”¨ <a class=link href=https://github.com/unjs/ofetch target=_blank rel=noopener>ohmyfetch</a> å¥—ä»¶æ‰€å°è£çš„ helperï¼Œ<code>$fetch</code> å¯ä»¥åœ¨ Nuxt ä¸­ç”¨æ–¼ç™¼é€ HTTP è«‹æ±‚ã€‚</p><p>å¦‚æœåœ¨ä¼ºæœå™¨ç«¯æ¸²æŸ“çš„æœŸé–“ï¼Œå‘¼å« <code>$fetch</code> æ‰“å…§éƒ¨ API è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯æ‰“æˆ‘å€‘è‡ªå·±åœ¨ <code>./server</code> ä¸‹å¯¦ä½œçš„å¾Œç«¯ APIï¼Œé‚£éº¼å› ç‚ºä½¿ç”¨ <code>$fetch</code> çš„é—œä¿‚ï¼ŒNuxt æœƒæ¨¡æ“¬è«‹æ±‚ï¼Œæ”¹ç”±ç›´æ¥å‘¼å«å…§éƒ¨ API çš„è™•ç†å‡½æ•¸ï¼Œé€™æ¨£å°±èƒ½ç¯€çœé¡å¤–çš„ API å‘¼å«ã€‚</p><p>ä½¿ç”¨çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>$fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>options</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <strong>$fetch(&rsquo;/api/count&rsquo;)</strong> å»ºç«‹ä¸€å€‹ GET è«‹æ±‚ï¼Œç™¼é€è‡³ <strong>/api/count</strong> å¾Œæœƒè¿”å›ä¸€å€‹ Promiseï¼Œå®Œæˆå¾Œæˆ‘å€‘å°±å¯ä»¥æ¥æ”¶å›å‚³çš„è³‡æ–™ã€‚</p><p><code>$fetch</code> çš„ <strong>options</strong> çš„åƒæ•¸åŠå»ºç«‹æ””æˆªå™¨ç­‰åŠŸèƒ½å¯ä»¥åƒè€ƒ <a class=link href=https://github.com/unjs/ohmyfetch target=_blank rel=noopener>ohmyfetch</a>ï¼Œä¸éå‘¢ï¼Œæˆ‘å€‘é‚„æœƒä½¿ç”¨ Nuxt æä¾›çš„çµ„åˆå‡½æ•¸çµåˆ <strong>$fetch</strong> ä¾†æ‰“ APIã€‚</p><p>æ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†ä¾åºä»‹ç´¹ï¼Œå¦‚ä½•ä½¿ç”¨ Nuxt æä¾›çš„å››ç¨®çµ„åˆå‡½æ•¸ä¾†å¾ API ç²å–è³‡æ–™ã€‚</p><h3 id=useasyncdata>useAsyncData</h3><p>é€™å€‹ <code>useAsyncData()</code> çµ„åˆå‡½æ•¸ï¼Œå…¶å¯¦ä¸æ˜¯å‚³å…¥ URL ç›´æ¥å‘¼å«å°±æœƒç™¼å‡º API è«‹æ±‚ï¼Œè€Œæ˜¯ Nuxt å¯ä»¥é€éé€™å€‹å‡½æ•¸ä¾†æ·»åŠ ç•°æ­¥è«‹æ±‚è³‡æ–™çš„é‚è¼¯ã€‚</p><p><code>useAsyncData</code> çµ„åˆå‡½æ•¸èƒ½æ¥æ”¶ <code>key</code>ã€<code>handler</code> èˆ‡ <code>options</code>ï¼Œå…¶ä¸­ <strong>handler</strong> æœƒä¾†æ·»åŠ è«‹æ±‚ç•°æ­¥è³‡æ–™çš„é‚è¼¯ã€‚ç•¶æˆ‘å€‘åœ¨é é¢ã€å…ƒä»¶å’Œæ’ä»¶ä¸­å‘¼å« <strong>useAsyncData</strong>ï¼Œä¸¦ç­‰å¾…å›å‚³çš„ <strong>Promise</strong>ï¼Œæˆ‘å€‘çš„é é¢æˆ–å…ƒä»¶çš„æ¸²æŸ“å°‡æœƒ<code>é˜»å¡è·¯ç”±è¼‰å…¥</code>è‡³ <strong>handler</strong> ç•°æ­¥é‚è¼¯è™•ç†å®Œç•¢å¾Œæ‰æœƒç¹¼çºŒåŸ·è¡Œï¼Œä¹Ÿå°±æ˜¯èªªï¼Œæ•´å€‹é é¢å…ƒä»¶å°‡æœƒç­‰å¾…æ‰€æœ‰ä½¿ç”¨ <strong>useAsyncData</strong> å‘¼å«çš„ API å›å‚³å®Œæˆå¾Œæ‰æœƒé–‹å§‹é€²è¡Œæ¸²æŸ“ã€‚</p><p>èˆ‰å€‹ä¾‹å­ï¼Œæˆ‘å€‘æ–°å¢ä¸€å€‹ Server APIï¼Œä¸¦ç¨å¾®æ·»åŠ ä¸€ä¸‹å»¶é²ï¼Œæ¨¡æ“¬ API ç´„éœ€è¦è™•ç† 2 ç§’æ‰å›å‚³è³‡æ–™ï¼Œ<strong>./server/api/count.js</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapicountjs>server/api/count.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>counter</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>2</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span> <span class=c1>// ç­‰å¾… 2 ç§’
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ä¸€å€‹è·¯ç”±é é¢ï¼Œ<strong>./pages/count/useAsyncData.vue</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountuseasyncdatavue>pages/count/useAsyncData.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-4xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>ç€è¦½æ¬¡æ•¸</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-6xl font-semibold text-sky-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>data</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useAsyncData</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/count&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘ç€è¦½ <strong>/count/useAsyncData</strong> æ™‚ï¼Œæœƒæ‰“ <strong>/api/count</strong> é€™éš» APIï¼Œä¸¦ç­‰å¾…è¿”å›å¾Œæ‰é–‹å§‹æ¸²æŸ“å…ƒä»¶ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186873_0f1db5744d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å› ç‚ºç€è¦½ <a class=link href=http://localho:3000/count/useAsyncData target=_blank rel=noopener>http://localho:3000/count/useAsyncData</a> æ™‚ï¼Œç¬¬ä¸€æ¬¡éƒ½æ˜¯ç”±å¾Œç«¯æ¸²æŸ“è™•ç†ï¼Œçœ‹ä¸å¤ªå‡ºå°èˆªæœ‰è¢«é˜»å¡çš„æ•ˆæœï¼Œå»ºè­°å¯ä»¥æ·»åŠ ä¸€ä¸‹è·¯ç”±é€£çµä¾†é€²è¡Œå°èˆªï¼Œå°±å¯ä»¥ç™¼ç¾å·®ç•°ã€‚</p><p>ç•¶æˆ‘å€‘å¾é¦–é ï¼Œç”±å®¢æˆ¶ç«¯å°èˆªè‡³ <code>/count/useAsyncData</code> é é¢æ™‚ï¼Œæœƒç™¼ç¾ç¶²å€çš„è·¯ç”±å·²ç¶“è®ŠåŒ–ï¼Œä½†æ˜¯é é¢ç´„ç­‰äº†ä¸€æœƒå…’æ‰æ¸²æŸ“å‡ºç¾ï¼Œé€™å°±æ˜¯å› ç‚ºé é¢ä¸­ä½¿ç”¨äº† <code>useAsyncData()</code> ä¾†ç²å–è³‡æ–™ï¼Œ<code>await</code> å°‡é˜»å¡æ•´å€‹é é¢å…ƒä»¶çš„è¼‰å…¥èˆ‡æ¸²æŸ“ï¼Œç›´è‡³ API è™•ç†å®Œç•¢å›å‚³å¾Œæ‰é–‹å§‹è¼‰å…¥è·¯ç”±æ¸²æŸ“å…ƒä»¶ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186898_35b72a8173_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><strong>useAsyncData() å…±æœ‰å…©ç¨®å‘¼å«æ™‚ä½¿ç”¨åƒæ•¸å·®ç•°ï¼Œå¯ä»¥é¸æ“‡æ˜¯å¦å‚³å…¥ç¬¬ä¸€å€‹åƒæ•¸ <code>key</code>ï¼Œæ‰€å‚³å…¥åƒæ•¸çš„é¡å‹å¦‚ä¸‹</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>useAsyncData</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>handler</span><span class=o>:</span> <span class=p>(</span><span class=nx>nuxtApp?</span>: <span class=kt>NuxtApp</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;,</span>
</span></span><span class=line><span class=cl>  <span class=nx>options?</span>: <span class=kt>AsyncDataOptions</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=nx>AsyncData</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>useAsyncData</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>key</span>: <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>handler</span><span class=o>:</span> <span class=p>(</span><span class=nx>nuxtApp?</span>: <span class=kt>NuxtApp</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;,</span>
</span></span><span class=line><span class=cl>  <span class=nx>options?</span>: <span class=kt>AsyncDataOptions</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>AsyncData</span><span class=err>&lt;</span><span class=na>DataT</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>AsyncDataOptions</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>server?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=nx>lazy?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=k>default</span><span class=o>?:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>DataT</span> <span class=o>|</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span> <span class=o>|</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>  <span class=nx>transform</span><span class=o>?:</span> <span class=p>(</span><span class=nx>input</span>: <span class=kt>DataT</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>DataT</span>
</span></span><span class=line><span class=cl>  <span class=nx>pick?</span>: <span class=kt>string</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>watch?</span>: <span class=kt>WatchSource</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialCache?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=nx>immediate?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>RefreshOptions</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>_initial?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>AsyncData</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=err>,</span> <span class=na>ErrorT</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>DataT</span> <span class=err>|</span> <span class=na>null</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>pending</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>execute</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>refresh</span><span class=o>:</span> <span class=p>(</span><span class=nx>opts?</span>: <span class=kt>RefreshOptions</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>error</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>ErrorT</span> <span class=err>|</span> <span class=na>null</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=useasyncdata-å‚³å…¥çš„åƒæ•¸>useAsyncData() å‚³å…¥çš„åƒæ•¸</h4><ul><li><strong>key</strong>ï¼šå”¯ä¸€éµï¼Œå¯ä»¥ç¢ºä¿è³‡æ–™ä¸æœƒé‡è¤‡çš„ç²å–ï¼Œä¹Ÿå°±æ˜¯å¦‚æœ Key ç›¸åŒä¾¿ä¸æœƒå†ç™¼é€ç›¸åŒçš„è«‹æ±‚ï¼Œé™¤éé‡æ–°æ•´ç†é é¢ç”±å¾Œç«¯å†æ¬¡æ¸²æŸ“ç²å–ï¼Œæˆ–å‘¼å« <code>useAsyncData</code> å›å‚³çš„ <code>refresh()</code> å‡½æ•¸é‡æ–°å–å¾—è³‡æ–™ã€‚</li><li><strong>handler</strong>ï¼šå›å‚³ç•°æ­¥è«‹æ±‚è³‡æ–™çš„è™•ç†å‡½æ•¸ï¼Œæ‰“ API æˆ–åŠ å·¥çš„ç•°æ­¥é‚è¼¯éƒ½å¯ä»¥åœ¨é€™è£¡è™•ç†ã€‚</li><li><strong>options</strong>ï¼š<ul><li><strong>server</strong>ï¼šæ˜¯å¦åœ¨ä¼ºæœå™¨ç«¯ç²å–è³‡æ–™ï¼Œé è¨­ç‚º <code>true</code>ã€‚</li><li><strong>lazy</strong>ï¼šæ˜¯å¦æ–¼è¼‰å…¥è·¯ç”±å¾Œæ‰é–‹å§‹åŸ·è¡Œç•°æ­¥è«‹æ±‚å‡½æ•¸ï¼Œé è¨­ç‚º <code>false</code>ï¼Œæ‰€ä»¥æœƒé˜»æ­¢è·¯ç”±è¼‰å…¥ç›´åˆ°è«‹æ±‚å®Œæˆå¾Œæ‰é–‹å§‹æ¸²æŸ“é é¢å…ƒä»¶ã€‚</li><li><strong>default</strong>ï¼šç•¶å‚³å…¥é€™å€‹ factory functionï¼Œå¯ä»¥å°‡ç•°æ­¥è«‹æ±‚ç™¼é€èˆ‡å›å‚³è§£æå‰ï¼Œè¨­å®šè³‡æ–™çš„é è¨­å€¼ï¼Œå°æ–¼è¨­å®š <code>lazy: true</code> é¸é …ç‰¹åˆ¥æœ‰ç”¨è™•ï¼Œè‡³å°‘æœ‰å€‹é è¨­å€¼å¯ä»¥ä½¿ç”¨åŠæ¸²æŸ“é¡¯ç¤ºã€‚</li><li><strong>transform</strong>ï¼šä¿®æ”¹åŠ å·¥ <code>handler</code> å›å‚³çµæœçš„å‡½æ•¸ã€‚</li><li><strong>pick</strong>ï¼š<code>handler</code> è‹¥å›å‚³ä¸€å€‹ç‰©ä»¶ï¼Œåªå¾ä¸­ä¾ç…§éœ€è¦çš„ key å–å‡ºè³‡æ–™ï¼Œä¾‹å¦‚åªå¾ JSON ç‰©ä»¶ä¸­å–çš„æŸå¹¾å€‹ key çµ„æˆæ–°çš„ç‰©ä»¶ã€‚</li><li><strong>watch</strong>ï¼šç›£è½ <code>ref</code> æˆ– <code>reactive</code> éŸ¿æ‡‰å¼è³‡æ–™ç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œè§¸ç™¼é‡æ–°è«‹æ±‚è³‡æ–™ï¼Œé©ç”¨æ–¼è³‡æ–™åˆ†é ã€éæ¿¾çµæœæˆ–æœå°‹ç­‰æƒ…å¢ƒã€‚</li><li><strong>initialCache</strong>ï¼šé è¨­ç‚º <code>true</code>ï¼Œç•¶ç¬¬ä¸€æ¬¡è«‹æ±‚è³‡æ–™æ™‚ï¼Œå°‡æœƒæŠŠæœ‰æ•ˆçš„ payload å¿«å–ï¼Œä¹‹å¾Œçš„è«‹æ±‚åªè¦æ˜¯ç›¸åŒçš„ keyï¼Œéƒ½æœƒç›´æ¥å›å‚³å¿«å–çš„çµæœã€‚</li><li><strong>immediate</strong>ï¼šé è¨­ç‚º <code>true</code>ï¼Œè«‹æ±‚å°‡æœƒç«‹å³è§¸ç™¼ã€‚</li></ul></li></ul><h4 id=useasyncdata-çš„å›å‚³å€¼>useAsyncData() çš„å›å‚³å€¼</h4><ul><li><strong>data</strong>ï¼šå‚³å…¥ç•°æ­¥å‡½æ•¸çš„å›å‚³çµæœã€‚</li><li><strong>pending</strong>ï¼šä»¥ <code>true</code> æˆ– <code>false</code> è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç²å–è³‡æ–™ã€‚</li><li><strong>refresh / execute</strong>ï¼šä¸€å€‹å‡½æ•¸ï¼Œå¯ä»¥ç”¨ä¾†é‡æ–°åŸ·è¡Œ <code>handler</code> å‡½æ•¸ï¼Œå›å‚³æ–°çš„è³‡æ–™ï¼Œé¡ä¼¼é‡æ–°æ•´ç†ã€é‡æ‰“ä¸€æ¬¡ API çš„æ¦‚å¿µã€‚é è¨­æƒ…æ³ä¸‹ <code>refresh()</code> åŸ·è¡Œå®Œä¸¦å›å‚³å¾Œæ‰èƒ½å†æ¬¡åŸ·è¡Œã€‚</li><li><strong>error</strong>ï¼šè³‡æ–™ç²å–å¤±æ•—æ™‚å›å‚³çš„ç‰©ä»¶ã€‚</li></ul><p>çœ‹åˆ°é€™è£¡ï¼Œæˆ‘å€‘å†é‡æ–°é–±è®€èˆ‡è§£é‡‹ <code>useAsyncData()</code> çš„ç¯„ä¾‹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>pending</span><span class=p>,</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>refresh</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useAsyncData</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;count&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/count&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å‘¼å« <code>useAsyncData()</code> ä¸¦ä¸æ˜¯ç›´æ¥å¹«æˆ‘å€‘é€å‡º HTTP è«‹æ±‚ï¼Œè€Œæ˜¯åœ¨ <code>handler</code> å…§ä½¿ç”¨ <code>$fetch</code> ä¾†æ‰“ APIï¼Œåªæ˜¯ <code>useAsyncData()</code> çµ„åˆå¼å‡½æ•¸ï¼Œå°è£äº†æ›´å¤šæ‰“ API æ™‚å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•èˆ‡åƒæ•¸ï¼Œä¾†å› æ‡‰ä¸åŒçš„ä½¿ç”¨æƒ…å¢ƒã€‚ç•¶ç„¶å¦‚æœæƒ³è¦ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å¥—ä»¶ä¾†æ›¿æ› <code>$fetch</code> ä½†å¯èƒ½å°±æ²’è¾¦æ³•äº«å—å®ƒæ‰€å¸¶ä¾†çš„å¥½è™•ã€‚</p><h3 id=usefetch>useFetch</h3><p>é€™å€‹çµ„åˆå¼å‡½æ•¸å°‡ <code>useAsyncData</code> å’Œ <code>$fetch</code> é€²è¡ŒåŒ…è£ï¼Œç•¶ä½¿ç”¨é€™å€‹å‡½æ•¸æ™‚å®ƒæœƒæ ¹æ“š URL å’Œ fetch çš„é¸é …ä¾†è‡ªå‹•ç”¢ç”Ÿ <code>useAsyncData</code> éœ€è¦çš„åƒæ•¸ <code>key</code>ï¼Œå¦‚æœå‘¼å«çš„ API æ˜¯ä¼ºæœå™¨ç«¯æ‰€æä¾›çš„ï¼Œä¹Ÿæœƒè‡ªå‹•æ ¹æ“šä¼ºæœå™¨ API è·¯ç”±ä¾†ç‚ºè«‹æ±‚æä¾›é¡å‹æç¤ºï¼Œä¸¦æ¨æ–· API çš„å›å‚³é¡å‹ã€‚</p><p><strong>useFetch() æ‰€å‚³å…¥åƒæ•¸çš„é¡å‹å¦‚ä¸‹</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>useFetch</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>url</span>: <span class=kt>string</span> <span class=o>|</span> <span class=nx>Request</span> <span class=o>|</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>string</span> <span class=err>|</span> <span class=na>Request</span><span class=p>&gt;</span> <span class=o>|</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=kt>string</span> <span class=o>|</span> <span class=nx>Request</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>options?</span>: <span class=kt>UseFetchOptions</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>AsyncData</span><span class=err>&lt;</span><span class=na>DataT</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>UseFetchOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>key?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>method?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>params?</span>: <span class=kt>SearchParams</span>
</span></span><span class=line><span class=cl>  <span class=nx>body?</span>: <span class=kt>RequestInit</span><span class=p>[</span><span class=s1>&#39;body&#39;</span><span class=p>]</span> <span class=o>|</span> <span class=nx>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>headers</span><span class=o>?:</span> <span class=p>{</span> <span class=nx>key</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>value</span>: <span class=kt>string</span> <span class=p>}[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>baseURL?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>server?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=nx>lazy?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=nx>immediate?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>  <span class=k>default</span><span class=o>?:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>DataT</span>
</span></span><span class=line><span class=cl>  <span class=nx>transform</span><span class=o>?:</span> <span class=p>(</span><span class=nx>input</span>: <span class=kt>DataT</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>DataT</span>
</span></span><span class=line><span class=cl>  <span class=nx>pick?</span>: <span class=kt>string</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>watch?</span>: <span class=kt>WatchSource</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>initialCache?</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>AsyncData</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>DataT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>pending</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>boolean</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>refresh</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>execute</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>error</span>: <span class=kt>Ref</span><span class=p>&lt;</span><span class=nt>Error</span> <span class=err>|</span> <span class=na>boolean</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=usefetch-å‚³å…¥çš„åƒæ•¸>useFetch() å‚³å…¥çš„åƒæ•¸</h4><ul><li><strong>url</strong>ï¼šè¦ç²å–è³‡æ–™çš„ URL æˆ– API Endpointã€‚</li><li><strong>options</strong>ï¼š(ç¹¼æ‰¿è‡ª <a class=link href=https://github.com/unjs/ohmyfetch target=_blank rel=noopener>unjs/ohmyfetch</a> é¸é …èˆ‡ <a class=link href=https://nuxt.com/docs/api/composables/use-async-data#params target=_blank rel=noopener>AsyncDataOptions</a>)<ul><li><strong>method</strong>ï¼šç™¼é€ HTTP è«‹æ±‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚ GETã€POST æˆ– DELETE ç­‰ã€‚</li><li><strong>params</strong>ï¼šæŸ¥è©¢åƒæ•¸ (Query params)ã€‚</li><li><strong>body</strong>ï¼šè«‹æ±‚çš„ bodyï¼Œå¯ä»¥å‚³å…¥ä¸€å€‹ç‰©ä»¶ï¼Œå®ƒå°‡è‡ªå‹•è¢«è½‰åŒ–ç‚ºå­—ä¸²ã€‚</li><li><strong>headers</strong>ï¼šè«‹æ±‚çš„æ¨™é ­ (headers)ã€‚</li><li><strong>baseURL</strong>ï¼šè«‹æ±‚çš„ API è·¯å¾‘ï¼ŒåŸºæ–¼çš„ URLã€‚</li></ul></li><li><strong>options</strong>ï¼š(ç¹¼æ‰¿è‡ª <code>useAsyncData</code> çš„é¸é …)<ul><li><strong>key</strong>ï¼šå”¯ä¸€éµï¼Œå¯ä»¥ç¢ºä¿è³‡æ–™ä¸æœƒé‡è¤‡çš„ç²å–ï¼Œä¹Ÿå°±æ˜¯å¦‚æœ Key ç›¸åŒä¾¿ä¸æœƒå†ç™¼é€ç›¸åŒçš„è«‹æ±‚ï¼Œé™¤éé‡æ–°æ•´ç†é é¢ç”±å¾Œç«¯å†æ¬¡æ¸²æŸ“ç²å–ï¼Œæˆ–å‘¼å« <code>useAsyncData</code> å›å‚³çš„ <code>refresh()</code> å‡½æ•¸é‡æ–°å–å¾—è³‡æ–™ã€‚</li><li><strong>server</strong>ï¼šæ˜¯å¦åœ¨ä¼ºæœå™¨ç«¯ç²å–è³‡æ–™ï¼Œé è¨­ç‚º <code>true</code>ã€‚</li><li><strong>lazy</strong>ï¼šæ˜¯å¦æ–¼è¼‰å…¥è·¯ç”±å¾Œæ‰é–‹å§‹åŸ·è¡Œç•°æ­¥è«‹æ±‚å‡½æ•¸ï¼Œé è¨­ç‚º <code>false</code>ï¼Œæ‰€ä»¥æœƒé˜»æ­¢è·¯ç”±è¼‰å…¥ç›´åˆ°è«‹æ±‚å®Œæˆå¾Œæ‰é–‹å§‹æ¸²æŸ“é é¢å…ƒä»¶ã€‚</li><li><strong>immediate</strong>ï¼šé è¨­ç‚º <code>true</code>ï¼Œè«‹æ±‚å°‡æœƒç«‹å³è§¸ç™¼ã€‚</li><li><strong>default</strong>ï¼šç•¶å‚³å…¥é€™å€‹ factory functionï¼Œå¯ä»¥å°‡ç•°æ­¥è«‹æ±‚ç™¼é€èˆ‡å›å‚³è§£æå‰ï¼Œè¨­å®šè³‡æ–™çš„é è¨­å€¼ï¼Œå°æ–¼è¨­å®š <code>lazy: true</code> é¸é …ç‰¹åˆ¥æœ‰ç”¨è™•ï¼Œè‡³å°‘æœ‰å€‹é è¨­å€¼å¯ä»¥ä½¿ç”¨åŠæ¸²æŸ“é¡¯ç¤ºã€‚</li><li><strong>transform</strong>ï¼šä¿®æ”¹åŠ å·¥ <code>handler</code> å›å‚³çµæœçš„å‡½æ•¸ã€‚</li><li><strong>pick</strong>ï¼š<code>handler</code> è‹¥å›å‚³ä¸€å€‹ç‰©ä»¶ï¼Œåªå¾ä¸­ä¾ç…§éœ€è¦çš„ key å–å‡ºè³‡æ–™ï¼Œä¾‹å¦‚åªå¾ JSON ç‰©ä»¶ä¸­å–çš„æŸå¹¾å€‹ key çµ„æˆæ–°çš„ç‰©ä»¶ã€‚</li><li><strong>watch</strong>ï¼šç›£è½ <code>ref</code> æˆ– <code>reactive</code> éŸ¿æ‡‰å¼è³‡æ–™ç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œè§¸ç™¼é‡æ–°è«‹æ±‚è³‡æ–™ï¼Œé©ç”¨æ–¼è³‡æ–™åˆ†é ã€éæ¿¾çµæœæˆ–æœå°‹ç­‰æƒ…å¢ƒã€‚</li><li><strong>initialCache</strong>ï¼šé è¨­ç‚º <code>true</code>ï¼Œç•¶ç¬¬ä¸€æ¬¡è«‹æ±‚è³‡æ–™æ™‚ï¼Œå°‡æœƒæŠŠæœ‰æ•ˆçš„ payload å¿«å–ï¼Œä¹‹å¾Œçš„è«‹æ±‚åªè¦æ˜¯ç›¸åŒçš„ keyï¼Œéƒ½æœƒç›´æ¥å›å‚³å¿«å–çš„çµæœã€‚</li></ul></li></ul><h4 id=usefetch-çš„å›å‚³å€¼>useFetch() çš„å›å‚³å€¼</h4><ul><li><strong>data</strong>ï¼šå‚³å…¥ç•°æ­¥å‡½æ•¸çš„å›å‚³çµæœã€‚</li><li><strong>pending</strong>ï¼šä»¥ <code>true</code> æˆ– <code>false</code> è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç²å–è³‡æ–™ã€‚</li><li><strong>refresh / execute</strong>ï¼šä¸€å€‹å‡½æ•¸ï¼Œå¯ä»¥ç”¨ä¾†é‡æ–°åŸ·è¡Œ <code>handler</code> å‡½æ•¸ï¼Œå›å‚³æ–°çš„è³‡æ–™ï¼Œé¡ä¼¼é‡æ–°æ•´ç†ã€é‡æ‰“ä¸€æ¬¡ API çš„æ¦‚å¿µã€‚é è¨­æƒ…æ³ä¸‹ <code>refresh()</code> åŸ·è¡Œå®Œä¸¦å›å‚³å¾Œæ‰èƒ½å†æ¬¡åŸ·è¡Œã€‚</li><li><strong>error</strong>ï¼šè³‡æ–™ç²å–å¤±æ•—æ™‚å›å‚³çš„ç‰©ä»¶ã€‚</li></ul><p>èˆ‰å€‹ä¾‹å­ï¼Œæˆ‘å€‘æ–°å¢ä¸€å€‹ Server APIï¼Œ<strong>./server/api/about.js</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapiaboutjs>server/api/about.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>counter</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Ryan&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;ç”·&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;ryanchien8125@gmail.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>counter</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ä¸€å€‹è·¯ç”±é é¢ï¼Œ<strong>./pages/about/useFetch.vue</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesaboutusefetchvue>pages/about/useFetch.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-2xl text-gray-600&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>è«‹æ±‚ç‹€æ…‹</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=nx>pending</span> <span class=o>?</span> <span class=s1>&#39;è«‹æ±‚ä¸­&#39;</span> <span class=o>:</span> <span class=s1>&#39;å®Œæˆ&#39;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=nt>v-if</span><span class=s>=&#34;error&#34; class=&#34;mt-4 text-6xl text-gray-600&#34;&gt;æ˜¯å¦éŒ¯èª¤: {{ error }}&lt;/span&gt;
</span></span></span><span class=line><span class=cl><span class=s>    &lt;span class=&#34;mt-4 text-2xl text-gray-600&#34;&gt;å›å‚³è³‡æ–™:&lt;/span&gt;
</span></span></span><span class=line><span class=cl><span class=s>    &lt;p class=&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=na>data</span> <span class=p>}}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>      <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 rounded-sm bg-blue-500 py-3 px-8 text-xl font-medium text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nt>@click</span><span class=s>=&#34;refresh&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>é‡æ–°ç²å–è³‡æ–™</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>pending</span><span class=p>,</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>refresh</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/about&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>pick</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;counter&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é€é <code>useFetch()</code> æˆ‘å€‘èƒ½æ›´ç°¡å–®çš„ç™¼é€ API è«‹æ±‚ï¼Œä¸¦èƒ½å¾—åˆ°ç‹€æ…‹èˆ‡é‡æ–°ç²å–è³‡æ–™çš„å‡½æ•¸ï¼Œç”šè‡³åœ¨ç¬¬ä¸€æ¬¡é€²å…¥é é¢æ™‚ï¼Œåˆ©ç”¨ <code>$fetch</code> å¯ä»¥ç›´æ¥å‘¼å«ä¼ºæœå™¨ API å‡½æ•¸çš„ç‰¹æ€§ä¾†é™ä½ API çš„è«‹æ±‚æ¬¡æ•¸ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964759_a9278ba6d0_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=æ””æˆªå™¨>æ””æˆªå™¨</h3><p>æˆ‘å€‘ä¹Ÿå¯ä»¥é€é <code>$fetch</code> æä¾›çš„é¸é …ä¾†è¨­ç½®æ””æˆªå™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>pending</span><span class=p>,</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>refresh</span> <span class=p>}</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/auth/login&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>onRequest</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>options</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¨­å®šè«‹æ±‚æ™‚å¤¾å¸¶çš„æ¨™é ­
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>options</span><span class=p>.</span><span class=nx>headers</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>headers</span> <span class=o>||</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>options</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>authorization</span> <span class=o>=</span> <span class=s1>&#39;...&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onRequestError</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>options</span><span class=p>,</span> <span class=nx>error</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è™•ç†è«‹æ±‚æ™‚ç™¼ç”Ÿçš„éŒ¯èª¤
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onResponse</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>response</span><span class=p>,</span> <span class=nx>options</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è™•ç†è«‹æ±‚å›æ‡‰çš„è³‡æ–™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>response</span><span class=p>.</span><span class=nx>_data</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onResponseError</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>response</span><span class=p>,</span> <span class=nx>options</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è™•ç†è«‹æ±‚å›æ‡‰ç™¼ç”Ÿçš„éŒ¯èª¤
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=uselazyasyncdata>useLazyAsyncData</h3><p>é è¨­çš„æƒ…æ³ä¸‹ï¼Œ<code>useAsyncData()</code> çš„ <code>options.lazy</code> ç‚º <code>false</code>ï¼Œæ„æ€æ˜¯ï¼Œé è¨­å¾—æƒ…æ³ä¸‹ï¼Œç•¶é€²å…¥è·¯ç”±å¾Œï¼Œæœƒé–‹å§‹åŸ·è¡Œç•°æ­¥è«‹æ±‚å‡½æ•¸ï¼Œä¸¦æœƒæœƒé˜»æ­¢è·¯ç”±è¼‰å…¥å…ƒä»¶ç­‰ï¼Œç›´åˆ°è«‹æ±‚å®Œæˆå¾Œæ‰é–‹å§‹æ¸²æŸ“é é¢å…ƒä»¶ã€‚</p><p><code>useLazyAsyncData()</code> å‰‡æ˜¯ <code>options.lazy</code> é è¨­ç‚º <code>true</code> çš„å°è£ï¼Œä¹Ÿå°±æ˜¯è«‹æ±‚è³‡æ–™æ™‚å®ƒå°‡ä¸æœƒé˜»å¡ï¼Œä¸¦è®“é é¢ç¹¼çºŒæ¸²æŸ“å…ƒä»¶ã€‚</p><p>èˆ‰å€‹ä¾‹å­ï¼Œæˆ‘å€‘æ–°å¢ä¸€å€‹ Server APIï¼Œä¸¦ç¨å¾®æ·»åŠ ä¸€ä¸‹å»¶é²ï¼Œæ¨¡æ“¬ API ç´„éœ€è¦è™•ç† 2 ç§’æ‰å›å‚³è³‡æ–™ï¼Œ<strong>./server/api/count.js</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapicountjs-1>server/api/count.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>counter</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>2000</span><span class=p>))</span> <span class=c1>// ç­‰å¾… 2 ç§’
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ä¸€å€‹è·¯ç”±é é¢ï¼Œ<strong>./pages/count/useLazyAsyncData.vue</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountuselazyasyncdatavue>pages/count/useLazyAsyncData.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>ç€è¦½æ¬¡æ•¸</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-semibold text-sky-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>data</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/count&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useLazyAsyncData</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/count&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾ï¼Œæˆ‘å€‘ä½¿ç”¨ <code>useLazyAsyncData()</code> å¾Œï¼Œæœƒèˆ‡å‰é¢ä½¿ç”¨ <code>useAsyncData()</code> çš„æ•ˆæœä¸ä¸€æ¨£ï¼Œæœƒå…ˆæ¸²æŸ“å‡ºå…ƒä»¶ï¼Œå³çœ‹åˆ°çš„æ–‡å­—ã€Œç€è¦½æ¬¡æ•¸ã€ï¼Œä¸¦å† API å›å‚³å¾Œæ‰éŸ¿æ‡‰è³‡æ–™é‡æ–°æ¸²æŸ“æ•¸å€¼ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617186908_7d896f5934_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é€é <code>default</code> é¸é …å¯ä»¥ä¾†å»ºç«‹ API å›å‚³å‰çš„é è¨­å€¼ï¼Œåœ¨ <code>options.lazy</code> ç‚º <code>true</code> çš„æƒ…æ³ä¸‹ï¼Œéƒ½å»ºè­°è¨­å®šä¸€ä¸‹é è¨­å€¼ï¼Œå¯ä»¥è®“ä½¿ç”¨è€…é«”é©—æ›´å¥½ä¸€äº›ã€‚</p><p>æ·»åŠ  <strong>default</strong> é¸é …ï¼Œ<strong>./pages/count/useLazyAsyncData.vue</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountuselazyasyncdatavue-1>pages/count/useLazyAsyncData.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>ç€è¦½æ¬¡æ•¸</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-9xl font-semibold text-sky-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>data</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useLazyAsyncData</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/count&#39;</span><span class=p>),</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>default</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=s1>&#39;-&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ API è«‹æ±‚å›ä¾†å‰ï¼Œé è¨­å€¼æœƒæ˜¯ <code>-</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964784_390b71eeb8_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=uselazyfetch>useLazyFetch</h3><p>å¦‚åŒ <code>useLazyAsyncData</code> æ‰€æè¿°ï¼Œ<code>useLazyFetch</code> å‰‡æ˜¯ <strong>useFetch</strong> çš„ <code>options.lazy</code> é¸é …é è¨­ç‚º <code>true</code> çš„å°è£ã€‚</p><h4 id=é‡æ–°ç²å–è³‡æ–™>é‡æ–°ç²å–è³‡æ–™</h4><p>å‰é¢æœ‰æåˆ°æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>refresh()</code> ä¾†é‡æ–°ç²å–å…·æœ‰ä¸åŒæŸ¥è©¢åƒæ•¸çš„è³‡æ–™ã€‚</p><h4 id=refreshnuxtdata>refreshNuxtData</h4><p>ä½ ä¹Ÿå¯ä»¥é€é <code>refreshNuxtData</code> ä¾†ä½¿ <strong>useAsyncData</strong>ã€<strong>useLazyAsyncData</strong>ã€<strong>useFetch</strong> èˆ‡ <strong>useLazyFetch</strong> çš„å¿«å–å¤±æ•ˆï¼Œå†è§¸ç™¼åˆ·æ–°è³‡æ–™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=nx>pending</span> <span class=o>?</span> <span class=s1>&#39;Loading&#39;</span> <span class=o>:</span> <span class=nx>count</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>button</span> <span class=nt>@click</span><span class=s>=&#34;refresh&#34;</span><span class=p>&gt;</span><span class=na>Refresh</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>pending</span><span class=p>,</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>count</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useLazyAsyncData</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>$fetch</span><span class=p>(</span><span class=s1>&#39;/api/count&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>refresh</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>refreshNuxtData</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Nuxt å·²ç¶“ç‚ºæˆ‘å€‘å°è£å¥½å¯ä»¥æ‰“ API çš„çµ„åˆå‡½æ•¸ï¼Œç”¨èµ·ä¾†ä¹Ÿç›¸ç•¶ç°¡å–®æ–¹ä¾¿ï¼Œç…§è‘—<a class=link href=https://nuxt.com/docs/api/composables/use-async-data#example target=_blank rel=noopener>å®˜ç¶²ç¯„ä¾‹</a>åŠ <a class=link href=https://github.com/unjs/ofetch target=_blank rel=noopener>ohmyfetch</a> å¥—ä»¶çš„èªªæ˜ï¼Œç›¸ä¿¡å¾ˆå¿«å°±èƒ½ä¸Šæ‰‹ã€‚</p><hr><h2 id=ç‹€æ…‹ç®¡ç†-state-management>ç‹€æ…‹ç®¡ç† (State Management)</h2><p>Vue 3 çˆ¶å­å…ƒä»¶é–“è³‡æ–™å‚³éèˆ‡è®€å¯«æˆ–æ˜¯è·¨å…ƒä»¶é–“çš„ç‹€æ…‹å…±äº«ï¼Œå¯ä»¥é¸æ“‡ä½¿ç”¨ <strong>Props / Emit</strong>ã€<strong>Provide / Inject</strong> æˆ– <strong>Vuex store</strong> ä¾†è™•ç†ï¼Œé€™ä¸‰ç¨®è³‡æ–™æµéƒ½ä¸å¤§ä¸€æ¨£ï¼Œæˆ‘å€‘ä¹Ÿæœƒä¾æ“šæƒ…å¢ƒä¾†æ±ºå®šç‹€æ…‹ç®¡ç†çš„æ–¹å¼ã€‚é€™é‚Šæœƒé‡å° Nuxt 3 æ‰€æä¾›çš„çµ„åˆå¼å‡½æ•¸ <code>useState</code> ä¾†è¬›è¿°å…ƒä»¶é–“çš„å…±äº«ç‹€æ…‹ï¼Œæ‡‰è©²å¦‚ä½•åšå®šç¾©ï¼Œä»¥åŠä½¿ç”¨ <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a> æ›¿ä»£ <a class=link href=https://vuex.vuejs.org/ target=_blank rel=noopener>Vuex</a> ä¾†åšç‹€æ…‹ç®¡ç†ã€‚</p><h3 id=hydration>Hydration</h3><p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆä¾†çœ‹ä¸€å€‹ä¾‹å­ï¼Œå»ºç«‹ <strong>./pages/random.vue</strong> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesrandomvue>pages/random.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-sky-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>count</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é é¢å‘ˆç¾å‡ºï¼Œæ¯æ¬¡é‡æ–°æ•´ç†é é¢ï¼Œé é¢æœƒé¡¯ç¤ºæ–°çš„äº‚æ•¸ï¼š</p><p><img src=https://live.staticflickr.com/65535/52617186923_40cff8bd77_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç´°å¿ƒä½ çš„å¯èƒ½æœƒç™¼ç¾ï¼Œæ¯æ¬¡é‡æ•´é é¢ï¼Œæ•¸å­—å¥½åƒ<code>è®ŠåŒ–äº†å…©æ¬¡</code>ï¼Œåœ–ä¸­æ•¸å­—åœç•™åœ¨ <strong>517</strong>ï¼Œé‡æ–°æ•´ç†ç¶²é å¾Œç«Ÿç„¶å…ˆè®Šæˆäº† <strong>163</strong> å¾Œå†è®Šæˆ <strong>101</strong>ã€‚</p><p>é€™å€‹ç¾è±¡å…¶å¯¦æ˜¯ä¼ºæœå™¨ç«¯æ¸²æŸ“å¾Œèˆ‡å®¢æˆ¶ç«¯å†æ¬¡æ¸²æŸ“æ‰€å°è‡´çš„ã€‚è¬›çš„ç™½è©±ä¸€é»å°±æ˜¯ï¼Œå› ç‚º Nuxt é è¨­çš„æ¸²æŸ“æ¨¡å¼ <a class=link href=https://nuxt.com/docs/guide/concepts/rendering/#universal-rendering target=_blank rel=noopener>Universal Rendering</a> åœ¨ SSR æ™‚æœŸï¼Œå°‡ <code>random.vue</code> å…§å®¹æ–¼ä¼ºæœå™¨ç«¯æ¸²æŸ“å®Œæˆå¾Œäº‚å‡ºç”¢ç”Ÿå‡º <strong>163</strong> ä½œç‚ºåˆå§‹å€¼ï¼Œæ„å³ <strong>const count = ref(<code>163</code>)</strong>ï¼Œæ‰€ä»¥ç¶²é å…ˆé¡¯ç¤ºäº† <strong>163</strong> é€™å€‹æ•¸å­—ï¼ŒåŒæ™‚ï¼Œç€è¦½å™¨çš„èƒŒæ™¯ä¹Ÿæ­£åœ¨ä¸‹è¼‰å®¢æˆ¶ç«¯æ‰€éœ€è¦çš„ JS æº–å‚™æ¥æ‰‹åš CSRï¼Œç•¶ JS è¼‰å…¥å®Œæˆå¾Œåˆå†ä¸€æ¬¡çš„åŸ·è¡Œ Vue å…ƒä»¶çš„ <strong>const count = ref(Math.round(Math.random() * 1000))</strong> é€™æ®µç¨‹å¼ç¢¼ï¼Œæ­¤æ™‚äº‚æ•¸ç”¢ç”Ÿäº† <strong>101</strong> é€™å€‹æ•¸å­—ï¼Œå®¢æˆ¶ç«¯ä¹Ÿå°±é‡æ–°æ¸²æŸ“å‡ºäº† <strong>101</strong> æ–¼é é¢ä¸Šï¼Œé€™ä¹Ÿå°±æ˜¯ç‚ºä»€éº¼æ¯æ¬¡é‡æ–°æ•´ç†æ•¸å­—æœƒè®ŠåŒ–å…©æ¬¡çš„åŸå› ã€‚</p><p>Nuxt é è¨­çš„<strong>é€šç”¨æ¸²æŸ“ (Universal Rendering)</strong> æ¨¡å¼ï¼Œæ˜¯çµåˆäº† SSR èˆ‡ CSR çš„æŠ€è¡“ï¼Œåœ¨ Nuxt æ”¶åˆ°ç¶²é è«‹æ±‚å¾Œï¼Œæœƒåœ¨ä¼ºæœå™¨æ¸²æŸ“å‡º HTML å›å‚³è‡³ç€è¦½å™¨æ¸²æŸ“é¡¯ç¤ºå‡ºéœæ…‹é é¢ï¼ŒåŒæ™‚é–‹å§‹è¼‰å…¥éœ€è¦çš„ Vue ç¨‹å¼ç¢¼ï¼Œè®“å®¢æˆ¶ç«¯æ¥æ‰‹ç‚º SPA ä½¿å¾—ç¶²é å…·æœ‰äº’å‹•æ€§ï¼Œæ¥æ‰‹å¾Œçš„æ¸²æŸ“è¡Œç‚ºéƒ½æ˜¯åœ¨å®¢æˆ¶ç«¯é€²è¡Œçš„ CSRï¼Œé€™ä¹Ÿå°±è®“é€šç”¨æ¸²æŸ“åŒæ™‚å…¼å…· SSR å° SEO çš„å‹å–„ä»¥åŠ CSR è‰¯å¥½äº’é€šæ€§çš„ä½¿ç”¨è€…é«”é©—ã€‚</p><p>é€™ç¨®åœ¨ç€è¦½å™¨ä¸­ä½¿å¾Œç«¯æ¸²æŸ“å‡ºçš„éœæ…‹é é¢å…·æœ‰äº¤äº’æ€§ï¼Œç¨±ä¹‹ç‚ºã€Œ<strong>Hydration</strong>ã€ã€‚</p><p>ä¾æ“šå®˜ç¶²æ‰€æä¾›çš„<a class=link href=https://nuxt.com/docs/guide/concepts/rendering/ target=_blank rel=noopener>åœ–ç‰‡</a>ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›æ–‡å­—ä¾†å¹«åŠ©ç†è§£ã€‚å‰è¿°æåˆ°äº†åœ¨ä¼ºæœå™¨æ¸²æŸ“ç¶²é  HTML çµ¦ç€è¦½å™¨æ™‚ï¼Œä½¿ç”¨å¯ä»¥æ­£å¸¸çš„çœ‹è¦‹ç¶²é ï¼Œä½†æ˜¯åœ¨ JS ä¸‹è¼‰å®Œæˆä¹‹å‰ï¼Œç¶²é æ˜¯<code>ä¸å…·æœ‰äº’å‹•æ€§</code>çš„ï¼Œä¹Ÿå°±æ˜¯é‚„ä¸å…·æœ‰è·¯ç”±è·³è½‰ç­‰ Vue äº’å‹•é‚è¼¯ï¼Œç›´è‡³ JS ä¸‹è¼‰å®Œå¾Œæœƒ Hydrate Vue ç¨‹å¼ç¢¼ï¼Œé€™æ™‚å®¢æˆ¶ç«¯å°±å®Œå…¨æ¥æ‰‹å¾ŒçºŒçš„äº’å‹•èˆ‡ CSRï¼Œåˆ°é€™é‚Š Hydration å®Œæˆï¼Œæˆ‘å€‘ä¹Ÿå°±èƒ½èˆ‡ç¶²ç«™å®Œæ•´çš„äº’å‹•äº†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964794_a7eaeeb3ef_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å›åˆ°ä¸€é–‹å§‹çš„ä¾‹å­ï¼Œæˆ‘å€‘åœ¨ç€è¦½å™¨æ‰“é–‹é–‹ç™¼è€…å·¥å…·çš„ä¸»æ§å° (Console)ï¼Œå¯ä»¥ç™¼ç¾åˆ°å…¶å¯¦é–‹ç™¼çš„éç¨‹ï¼Œä¹Ÿå‡ºç¾äº†éŒ¯èª¤æç¤ºã€Œ<code>Hydration completed but contains mismatches.</code>ã€ï¼Œå‘Šè¨´æˆ‘å€‘ <strong>Hydration</strong> å®Œæˆäº†ä½†æ˜¯åŒ…å«äº†ä¸åŒ¹é…ï¼Œæ­£æ˜¯å‰ç«¯èˆ‡å¾Œç«¯åˆå§‹å€¼ä¸åŒçš„éŒ¯èª¤ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964799_2110719e1c_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä»‹ç´¹ Nuxt æä¾›çš„çµ„åˆå¼å‡½æ•¸ <code>useState</code>ï¼Œä¾†å¯ä»¥è§£æ±ºé€™å€‹å•é¡Œã€‚</p><h3 id=nuxt-3-çš„ç‹€æ…‹ç®¡ç†-state-management>Nuxt 3 çš„ç‹€æ…‹ç®¡ç† (State Management)</h3><p>Nuxt æä¾›äº†ä¸€å€‹çµ„åˆå¼å‡½æ•¸ <code>useState</code> ç”¨ä¾†å»ºç«‹å…·æœ‰éŸ¿æ‡‰å¼åŠå°æ–¼ SSR å‹å–„çš„å…±äº«ç‹€æ…‹ã€‚</p><p>åœ¨å‰é¢çš„ä¾‹å­æˆ‘å€‘æåˆ°å› ç‚º <strong>Hydration</strong> è€Œå°è‡´å‰å¾Œç«¯çš„åˆå§‹å€¼å¯èƒ½ä¸ä¸€è‡´ï¼Œè€Œ <code>useState</code> æ˜¯ä¸€å€‹å° SSR å‹å–„çš„ <code>ref</code> æ›¿ä»£å“ï¼Œä½¿ç”¨ <code>useState</code> å»ºç«‹çš„éŸ¿æ‡‰å¼è®Šæ•¸ï¼Œå®ƒçš„å€¼æœƒåœ¨ä¼ºæœå™¨ç«¯æ¸²æŸ“å¾Œèˆ‡å®¢æˆ¶ç«¯ <strong>Hydration</strong> æœŸé–“çš„å¾—ä»¥è¢«ä¿ç•™ã€‚</p><p><code>useState</code> æœ‰å…©ç¨®æ¥æ”¶ä¸åŒæ•¸é‡åƒæ•¸çš„å‘¼å«æ–¹å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>useState</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;(</span><span class=nx>init</span><span class=o>?:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>T</span> <span class=o>|</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;)</span><span class=o>:</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>useState</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;(</span><span class=nx>key</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>init</span><span class=o>?:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>T</span> <span class=o>|</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;)</span><span class=o>:</span> <span class=nx>Ref</span><span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>key</strong>ï¼šå”¯ä¸€éµï¼Œç”¨æ–¼ç¢ºä¿è³‡æ–™èƒ½è¢«æ­£ç¢ºè«‹æ±‚ä¸”ä¸é‡è¤‡ã€‚</li><li><strong>init</strong>ï¼šç”¨æ–¼æä¾›çš„åˆå§‹å€¼çµ¦ State çš„å‡½æ•¸ï¼Œé€™å€‹å‡½æ•¸ä¹Ÿå¯ä»¥å›å‚³ä¸€å€‹ <code>ref</code>ã€‚</li></ul><p>èˆ‰å€‹ä¾‹å­ï¼Œæ–°å¢ <strong>./pages/count.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountvue-1>pages/count.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-emerald-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>count</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾ï¼Œä½¿ç”¨ <code>useState</code> åˆå§‹åŒ– count çš„å€¼å¾Œï¼Œç€è¦½å™¨é‡æ•´é é¢ï¼Œå°±ä¸åƒå‰é¢çš„ä¾‹å­æœƒç™¼ç”Ÿå…©æ¬¡çš„æ•¸å€¼è®Šå‹•ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698646_9098f6524f_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç•¶æˆ‘å€‘ä½¿ç”¨ <code>useState</code> ä¸¦ä»¥ <strong>count</strong> ç•¶ä½œ keyï¼Œåœ¨ç¶²é è«‹æ±‚é€²å…¥ä¼ºæœå™¨ç«¯åŸ·è¡Œæ™‚ï¼Œé‚„æ²’æœ‰é€™å€‹ <strong>count</strong> ç‹€æ…‹ï¼Œæ‰€ä»¥åŸ·è¡Œäº†åˆå§‹åŒ–å‡½æ•¸ç”¢ç”Ÿå‡ºä¸€å€‹äº‚æ•¸ï¼Œä¾‹å¦‚ <strong>888</strong> å°±æœƒå›å‚³çµ¦ <strong>count</strong> ç•¶ä½œéŸ¿æ‡‰å¼è®Šæ•¸çš„åˆå§‹å€¼ï¼Œæ­¤æ™‚é€™å€‹ç¶²é è«‹æ±‚ï¼Œå·²ç¶“æœ‰ä¸€å€‹ <strong>count</strong> çš„éŸ¿æ‡‰å¼ç‹€æ…‹ï¼Œç•¶å‰ç«¯æ–¼ <strong>Hydration</strong> æ­¥é©Ÿå†æ¬¡çš„åŸ·è¡Œäº†ä¸‹é¢é€™æ®µç¨‹å¼ç¢¼ï¼Œ<code>useState</code> ä¸€æ¨£æ˜¯ä»¥ <strong>count</strong> ç•¶ä½œ <strong>key</strong>ï¼Œä½†æ˜¯å­˜åœ¨äº†ä¸€å€‹ç”±ä¼ºæœå™¨ç«¯å»ºç«‹å¥½çš„ <strong>count</strong>ï¼Œå°±æœƒç›´æ¥ä½¿ç”¨è©²ç‹€æ…‹ï¼Œä¹Ÿå°±ä¸æœƒåœ¨åŸ·è¡Œåˆå§‹åŒ–å‡½æ•¸ï¼Œè€Œå°è‡´å‰å¾Œç«¯çš„åˆå§‹ç‹€æ…‹ä¸ä¸€è‡´çš„å•é¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=usestate-çš„åŸºæœ¬ç”¨æ³•>useState çš„åŸºæœ¬ç”¨æ³•</h3><p>æ–°å¢ <strong>./pages/counter/increment.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescounterincrementvue>pages/counter/increment.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-sky-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>counter</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 flex flex-row&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counter++&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>å¢åŠ </span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counter--&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>æ¸›å°‘</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-slate-500&#34;</span><span class=p>&gt;</span><span class=nx>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡é€²å…¥é€™å€‹é é¢</span><span class=err>ï¼Œ</span><span class=nx>æ•¸å€¼åˆå§‹è¨­å®šç‚º</span> <span class=mi>0</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counter</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘ä½¿ç”¨ <code>useState</code> ä¸¦ä»¥ <strong>counter</strong> ç•¶ä½œ keyï¼Œé¦–æ¬¡æ–¼å¾Œç«¯æ¸²æŸ“æ™‚æœƒåˆå§‹åŒ–ç‚º 0ï¼Œç•¶å‰ç«¯Hydration æ­¥é©Ÿè¼‰å…¥ Vue æˆ–è·³è½‰é é¢ï¼Œå› ç‚ºä½¿ç”¨ç›¸åŒçš„ key æ‰€ä»¥é€™å€‹ç‹€æ…‹ä¹Ÿæœƒç¹¼çºŒè¢«ä¿ç•™ï¼Œç›´è‡³æˆ‘å€‘ä¸‹ä¸€æ¬¡é‡æ–°æ•´ç†ç¶²é ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698666_a945fe9cc8_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=usestate-çš„å…±äº«ç‹€æ…‹>useState çš„å…±äº«ç‹€æ…‹</h3><p>å‰é¢ <code>useState</code> çš„åŸºæœ¬ç”¨æ³•ä»¥ <code>counter</code> ç•¶ä½œ <strong>key</strong>ï¼Œæˆ‘å€‘å¯ä»¥å†å»ºç«‹ä¸åŒçš„é é¢å…ƒä»¶ä¸¦ä½¿ç”¨ <code>useState('counter')</code> å°±å¯ä»¥æŠŠé€™å€‹ç‹€æ…‹æ‹¿åšå‡ºä¾†ç”¨ï¼Œä¹Ÿå°±é”åˆ°äº†åœ¨ä»»ä½•å…ƒä»¶ä¸­å¯ä»¥å…±äº«ç›¸åŒçš„éŸ¿æ‡‰å¼ç‹€æ…‹ã€‚</p><p>æ–°å¢ <strong>./pages/counter/surprise.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountersurprisevue>pages/counter/surprise.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-sky-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>counter</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 flex flex-row&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counter++&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>å¢åŠ </span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counter--&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>æ¸›å°‘</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-slate-500&#34;</span><span class=p>&gt;</span><span class=nx>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡é€²å…¥é€™å€‹é é¢</span><span class=err>ï¼Œ</span><span class=nx>æ•¸å€¼åˆå§‹è¨­å®šç‚ºäº‚æ•¸</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counter</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¯ä»¥ä»»æ„å°èˆªè‡³ <strong>/counter/increment</strong> èˆ‡ <strong>/counter/surprise</strong> é é¢ï¼Œå¯ä»¥ç™¼ç¾å…©å€‹é é¢å¯ä»¥å…±äº«ç›¸åŒçš„ <code>counter</code> ç‹€æ…‹ï¼Œç•¶é¦–æ¬¡é€²å…¥æˆ–é‡æ–°æ•´ç† <strong>increment.vue</strong> é é¢ï¼Œæœƒå°‡ <code>counter</code> åˆå§‹åŒ–ç‚º <strong>0</strong>ï¼›è€Œé¦–æ¬¡é€²å…¥æˆ–é‡æ–°æ•´ç† <code>surprise.vue</code> é é¢å‰‡æ˜¯ç”¢ç”Ÿä¸€å€‹äº‚æ•¸çµ¦äºˆ <strong>counter</strong>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616964824_e6466ee572_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç•¶ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å…¶ä»–å…ƒä»¶ä¸­ä½¿ç”¨ <code>useState('counter')</code>ï¼Œå°±å¯ä»¥å–å¾—å…±äº«çš„éŸ¿æ‡‰å¼è£æ…‹ï¼Œä½†å¦‚æœé€™å€‹å…ƒä»¶æ˜¯åˆæ¬¡é€²å…¥è€Œæ²’æœ‰é è¨­å€¼çš„å»ºç«‹å‡½æ•¸ï¼Œå¯èƒ½æœƒå¼•ç™¼ä¸€äº›éŒ¯èª¤ï¼Œè¦ç‰¹åˆ¥çš„æ³¨æ„ã€‚</p><h3 id=ä½¿ç”¨çµ„åˆå¼å‡½æ•¸å»ºç«‹å…±äº«ç‹€æ…‹>ä½¿ç”¨çµ„åˆå¼å‡½æ•¸å»ºç«‹å…±äº«ç‹€æ…‹</h3><p>å¦‚ä¸‹ä¾‹å­ï¼Œæˆ‘å€‘å¯ä»¥å»ºç«‹çµ„åˆå¼å‡½æ•¸ (Composables) ä¾†æ­é… <code>useState</code>ã€‚</p><p>æ–°å¢ <strong>./composables/states.ts</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=composablesstatests>composables/states.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useColor</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=nx>useState</span><span class=p>&lt;</span><span class=nt>string</span><span class=p>&gt;(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=s1>&#39;green&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ <strong>./pages/color.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescolorvue>pages/color.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-emerald-400&#34;</span><span class=p>&gt;{{</span> <span class=nx>color</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>color</span> <span class=o>=</span> <span class=nx>useColor</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æ­¤ä¸€ä¾†æˆ‘å€‘å®šç¾©å¥½çš„çµ„åˆå¼å‡½æ•¸å°±å¯ä»¥è¢«è‡ªå‹•çš„å°å…¥åŠå»ºç«‹å…·æœ‰é¡å‹å®‰å…¨çš„ç‹€æ…‹ï¼Œåœ¨å„å€‹å…ƒä»¶ä¹‹é–“å°±å¯ä»¥å‘¼å«é€™å€‹çµ„åˆå‡½æ•¸ä¾†å–å¾—å…±äº«ç‹€æ…‹ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617134505_9cb332e17c_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>åœ¨é€šç”¨æ¸²æŸ“çš„æ¨¡å¼ä¹‹ä¸‹ï¼Œç€è¦½å™¨æ–¼ Hydration å®Œæˆå‰ï¼Œç¶²é é›–ç„¶èƒ½ç€è¦½ä½†æ˜¯å°šä¸å…·æœ‰äº’å‹•æ€§ï¼Œç›´è‡³ Hydration å®Œæˆå¾Œï¼ŒVue çš„é é¢å…ƒä»¶æœƒé‡æ–°è¼‰å…¥èˆ‡ç¶å®šï¼Œå› æ­¤æˆ‘å€‘å°æ–¼éŸ¿æ‡‰å¼çš„è®Šæ•¸ï¼Œå„˜é‡ä½¿ç”¨ <code>useState</code> ä¾†æ›¿ä»£ <code>ref</code> ä»¥ç¢ºä¿ Hydration å‰å¾Œçš„åˆå§‹å€¼å¾—ä»¥è¢«ä¿ç•™ï¼Œè€Œä¸” <code>useState</code> å› ç‚ºå¯ä»¥ä½¿ç”¨ <code>key</code> ä¾†ä½¿ç‹€æ…‹æ–¼å…ƒä»¶é–“å…±äº«ã€‚</p><hr><h2 id=ç‹€æ…‹ç®¡ç†---store--pinia>ç‹€æ…‹ç®¡ç† - Store & Pinia</h2><p>ä¸Šè¿°æˆ‘å€‘ä»‹ç´¹äº†å¦‚ä½•åœ¨ Nuxt 3 ä½¿ç”¨ useState ä¾†å»ºç«‹ä¸€å€‹å…ƒä»¶é–“çš„å…±äº«ç‹€æ…‹ï¼Œéš¨è‘—å°ˆæ¡ˆçš„å¥å£¯å¢å¤§ï¼Œæˆ‘å€‘å°±éœ€è¦ä¸€å€‹æ›´å¥½çš„æ–¹å¼ä¾†ç®¡ç†èˆ‡å„²å­˜é€™äº›ç‹€æ…‹ï¼Œä¾‹å¦‚åœ¨ Vue ä¸­ä½¿ç”¨ <a class=link href=https://vuex.vuejs.org/ target=_blank rel=noopener>Vuex</a> æˆ– <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a> ä¾†å»ºç«‹ä¸€å€‹ Store ç®¡ç†é€™äº›ç‹€æ…‹å°±æ˜¯ä¸€å€‹è§£æ±ºæ–¹æ¡ˆã€‚å¦‚æœä½ é‚„ä¸äº†è§£ <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a>ï¼Œå¯ä»¥ç†è§£ç‚ºæ˜¯ Vuex v5ã€‚å› ç‚ºç›®å‰ <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a> å·²ç¶“æˆç‚º Vue å®˜æ–¹æ¨è–¦çš„ç‹€æ…‹ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œæœ¬ç¯‡å°‡é‡å° Nuxt ä½¿ç”¨ <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a> åšä¸€å€‹ç°¡å–®çš„ä»‹ç´¹ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616698686_1ffe5c9e82_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=pinia>Pinia</h3><p>å¦‚æœä½ ä½¿ç”¨é Vuex å¤§æ¦‚æœƒçŸ¥é“ Vue å¦‚ä½•å»ºç«‹ Store ä¾†åšç‹€æ…‹ç®¡ç†ï¼Œéš¨è‘—æ™‚é–“ Vuex å¾ˆç©æ¥µçš„è’é›†ç¤¾ç¾¤åŠä½¿ç”¨è€…çš„<a class=link href=https://github.com/vuejs/rfcs/discussions/270 target=_blank rel=noopener>æ„è¦‹</a>ä¾†è¦åŠƒ Vuex v5ã€‚Pinia çš„ä½œè€… <a class=link href=https://github.com/posva target=_blank rel=noopener>Eduardo</a> æ˜¯ Vue.js æ ¸å¿ƒåœ˜éšŠçš„æˆå“¡ä¹‹ä¸€ï¼Œä¹Ÿåƒèˆ‡è‘— Vuex çš„é–‹ç™¼ï¼Œç•¶æ™‚ä»–æ­£æ¸¬è©¦è‘— Vuex v5 çš„<a class=link href=https://github.com/kiaking/rfcs/blob/vuex-5/active-rfcs/0000-vuex-5.md target=_blank rel=noopener>ææ¡ˆ</a>ï¼Œè€Œ <a class=link href=https://pinia.vuejs.org/ target=_blank rel=noopener>Pinia</a> æˆç‚ºæ¢ç´¢é€™äº›æ„è¦‹åŠå¯èƒ½æ€§çš„å…ˆé©…ï¼Œå¯¦ç¾äº† Vuex v5 å¯èƒ½çš„æ¨£å­ï¼Œç¾åœ¨ Pinia çš„ API å·²ç¶“é€²å…¥ç©©å®šç‹€æ…‹ï¼Œä¹Ÿæˆç‚º Vue å®˜æ–¹æ¨è–¦ä½¿ç”¨çš„ç‹€æ…‹ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œä¸¦éµå¾ªè‘— Vue ç”Ÿæ…‹çš„ RFC æµç¨‹ã€‚</p><p>Pinia ç›¸è¼ƒæ–¼ Vuex æœ‰ä»¥ä¸‹å·®ç•°ï¼š</p><ul><li>æ²’æœ‰ <code>mutation</code>ï¼Œåªéœ€è¦ä½¿ç”¨ <code>action</code> å°±å¯ä»¥æ”¹ç‹€æ…‹ã€‚</li><li>ä¸å†æœ‰ <code>modules</code> å·¢ç‹€çš„çµæ§‹ï¼Œä¹Ÿä¸å†éœ€è¦ç‚ºæ¨¡çµ„å®šç¾©å‘½åç©ºé–“ï¼Œå› ç‚ºåœ¨ Pinia ä¸­ï¼Œå¯ä»¥å®šç¾©å¤šå€‹ Store è€Œä¸”æ¯å€‹éƒ½æ˜¯ç¨ç«‹çš„ä¹Ÿéƒ½å…·æœ‰è‡ªå·±çš„å‘½åç©ºé–“ã€‚</li><li>æ›´å®Œæ•´çš„æ”¯æ´ TypeSctiptï¼Œä¹Ÿä¸å†éœ€è¦ä½¿ç”¨å¤šé¤˜çš„ types ä¾†å°è£ï¼Œæ‰€æœ‰çš„å…§å®¹éƒ½æ˜¯é¡å‹åŒ–çš„ï¼ŒPinia API çš„è¨­è¨ˆæ–¹å¼ç›¡å¯èƒ½ä½¿ç”¨ TypeSctipt é¡å‹æ¨æ–·ã€‚</li><li>éå¸¸è¼•å·§ï¼Œç´„åƒ…æœ‰ 1 KBï¼Œè€Œä¸”å¯ä»¥è‡ªå®šç¾©æ’ä»¶ã€‚</li><li>æ”¯æ´ä¼ºæœå™¨ç«¯æ¸²æŸ“ (SSR) èˆ‡ç¨‹å¼ç¢¼è‡ªå‹•æ‹†åˆ†ã€‚</li></ul><h3 id=nuxt-3-å®‰è£-pinia>Nuxt 3 å®‰è£ Pinia</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D pinia @pinia/nuxt --force
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D pinia @pinia/nuxt --force</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ç›®å‰ç…§è‘—å®˜æ–¹å®‰è£ Piniaï¼Œæœƒç™¼ç”Ÿä¸€äº›å•é¡Œï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨å®‰è£æ™‚åŠ ä¸Š <strong>&ndash;force</strong> åƒæ•¸</p></blockquote><p>æ·»åŠ  <code>@pinia/nuxt</code> è‡³ <code>nuxt.config.ts</code> çš„ <strong>modules</strong> å±¬æ€§ä¸­ã€‚</p><h5 id=nuxtconfigts-3>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kr>module</span><span class=nx>s</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;@pinia/nuxt&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å»ºç«‹ç¬¬ä¸€å€‹-pinia-çš„-store>å»ºç«‹ç¬¬ä¸€å€‹ Pinia çš„ Store</h3><p>Pinia æä¾›äº†ä¸€å€‹å‡½æ•¸ <code>defineStore</code> ç”¨ä¾†å®šç¾© storeï¼Œå‘¼å«æ™‚éœ€è¦ä¸€å€‹å”¯ä¸€çš„åç¨±ä¾†ç•¶ä½œç¬¬ä¸€å€‹åƒæ•¸å‚³éï¼Œä¹Ÿç¨±ä¹‹ç‚º <code>id</code>ï¼ŒPinia æœƒä½¿ç”¨å®ƒä¾†å°‡ store é€£æ¥åˆ° devtoolsã€‚</p><p>å»ºè­°å°‡å›å‚³çš„å‡½æ•¸å‘½åç‚º <code>use...</code>ï¼Œä¾‹å¦‚ <code>useCounterStore</code>ï¼Œ<code>use</code> ä½œç‚ºé–‹é ­æ˜¯çµ„åˆå¼å‡½æ•¸å‘½åçš„ç´„å®šï¼Œä¾†ç¬¦åˆä½¿ç”¨ä¸Šçš„ç¿’æ…£ã€‚</p><p>è€Œ <code>defineStore</code> çš„ç¬¬äºŒå€‹åƒæ•¸ï¼Œå¯ä»¥å‚³å…¥ <code>Options ç‰©ä»¶</code>æˆ–æ˜¯ <code>Setup å‡½æ•¸</code>ï¼Œä¾‹å¦‚æˆ‘å€‘ä½¿ç”¨ Options ä¾†å®šç¾©ä¸€å€‹ Storeï¼Œæ–°å¢ <strong>./stores/counter.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=storescounterjs>stores/counter.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCounterStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>actions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>decrement</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>count</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>getters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>doubleCount</span><span class=o>:</span> <span class=p>(</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>state</span><span class=p>.</span><span class=nx>count</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ç™¼ç¾åˆ°èˆ‡ Vue çš„ Options API éå¸¸é¡ä¼¼ï¼Œæˆ‘å€‘å¯ä»¥å‚³éå¸¶æœ‰ <strong>state</strong>ã€<strong>actions</strong> å’Œ <strong>getters</strong> å±¬æ€§çš„ç‰©ä»¶ã€‚é€™äº›å±¬æ€§æ­£å¥½è®“ Store èˆ‡ Options API å‘¼æ‡‰å½¼æ­¤çš„é—œä¿‚ï¼Œå¦‚ <strong>state</strong> å°æ‡‰ <strong>data</strong>ã€<strong>actions</strong> å°æ‡‰ <strong>methods</strong> è€Œ <strong>getters</strong> å°æ‡‰ <strong>computed</strong>ã€‚</p><p>é‚„æœ‰å¦ä¸€ç¨®æ–¹å¼å¯ä»¥ä¾†å®šç¾© Storeï¼Œèˆ‡ Vue Composition API çš„ setup å‡½æ•¸é¡ä¼¼ï¼Œæˆ‘å€‘å¯ä»¥å‚³å…¥ä¸€å€‹å‡½æ•¸ï¼Œé€™å€‹å‡½æ•¸è£¡é¢å®šç¾©éŸ¿æ‡‰å¼å±¬æ€§ã€æ–¹æ³•ç­‰å‡½æ•¸ï¼Œæœ€å¾Œå›å‚³æˆ‘å€‘æƒ³å…¬é–‹çš„å±¬æ€§å’Œæ–¹æ³•æ‰€çµ„æˆçš„ç‰©ä»¶ã€‚</p><p>ä»¥ setup å‡½æ•¸å®šç¾© counter storeï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCounterStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>increment</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>decrement</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>doubleCount</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>decrement</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>doubleCount</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é–‹å§‹ä½¿ç”¨-store>é–‹å§‹ä½¿ç”¨ Store</h3><p>æˆ‘å€‘åªéœ€è¦åœ¨å…ƒä»¶ä¸­ï¼Œå¦‚ä¸‹ç¨‹å¼ç¢¼åŒ¯å…¥ä¸¦å‘¼å« <code>useCounterStore()</code> å°±å¯ä»¥æ“ä½œ store è£¡é¢çš„æ–¹æ³•æˆ–å±¬æ€§å›‰ï¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useCounterStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@/stores/counter&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterStore</span> <span class=o>=</span> <span class=nx>useCounterStore</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘æ–°å¢ä¸€å€‹é é¢å…ƒä»¶ <strong>./pages/counter.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescountervue>pages/counter.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-9xl font-semibold text-sky-600&#34;</span><span class=p>&gt;{{</span> <span class=nx>counterStore</span><span class=p>.</span><span class=nx>count</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8 flex flex-row&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counterStore.increment&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>å¢åŠ </span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;font-base mx-2 rounded-full bg-sky-500 px-4 py-2 text-xl text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;counterStore.decrement&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>æ¸›å°‘</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useCounterStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@/stores/counter&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterStore</span> <span class=o>=</span> <span class=nx>useCounterStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™æ¨£æˆ‘å€‘å°±å®Œæˆäº†ä¸€å€‹ store çš„é¡¯ç¤ºç‹€æ…‹å€¼ï¼Œé€éå‘¼å« <code>counterStore</code> å…§å®šç¾©çš„ <strong>increment</strong> èˆ‡ <strong>decrement</strong> ä¾†æ”¹è®Šç‹€æ…‹ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188807_576821f99a_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>åœ¨ä¸åŒçš„å…ƒä»¶é–“ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>useCounterStore</code> å–å¾—å·²ç¶“å»ºç«‹å¥½çš„ store ä¾†å…±äº«é€™äº›ç‹€æ…‹æˆ–é€²è¡Œæ“ä½œã€‚</p><p><img src=https://live.staticflickr.com/65535/52617187013_1e1f4c217e_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=pinia-store-çš„-state>Pinia Store çš„ State</h3><p>é è¨­æƒ…æ³ä¸‹ï¼Œå¯ä»¥ç›´æ¥å° store çš„å¯¦ä¾‹ä¾†å–å¾—ç‹€æ…‹ï¼Œè€Œä½¿ç”¨ Pinia å®šç¾©çš„ store æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ï¼Œæˆ‘å€‘å¯ä»¥ä¸ç”¨é€éå‘¼å«å‡½æ•¸ä¾†ä¿®æ”¹ç‹€æ…‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å° store çš„ç‹€æ…‹é€²è¡Œä¿®æ”¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterStore</span> <span class=o>=</span> <span class=nx>useCounterStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>counterStore</span><span class=p>.</span><span class=nx>count</span> <span class=o>+=</span> <span class=mi>10</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ”¹è®Šç‹€æ…‹>æ”¹è®Šç‹€æ…‹</h4><p>é™¤äº†ç›´æ¥ä½¿ç”¨ <code>counterStore.count += 10</code> ä¿®æ”¹ storeï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ store æä¾›çš„ helper <code>$patch</code> ä¾†ä¿®æ”¹éƒ¨åˆ†çš„ç‹€æ…‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>userStore</span><span class=p>.</span><span class=nx>$patch</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Ryan&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>money</span><span class=o>:</span> <span class=s1>&#39;88888888&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å°æ–¼é›†åˆé¡å‹çš„ä¿®æ”¹ï¼Œä¾‹å¦‚é™£åˆ—çš„æ–°å¢ã€åˆªé™¤æˆ–æŒ‡å®šä¿®æ”¹æŸä¸€å€‹å…ƒç´ ç­‰æ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>$patch</code> å‚³å…¥ä¸€å€‹å‡½æ•¸ï¼Œé€™å€‹å‡½æ•¸æœƒæ¥æ”¶ä¸€å€‹ <code>state</code> è®“ä½ å¯ä»¥ä¿®æ”¹ï¼Œå°æ–¼æ¯”è¼ƒè¤‡é›œçš„æ“ä½œæœƒå¾ˆæ–¹ä¾¿ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>cartStore</span><span class=p>.</span><span class=nx>$patch</span><span class=p>((</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;shoes&#39;</span><span class=p>,</span> <span class=nx>quantity</span><span class=o>:</span> <span class=mi>1</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=p>.</span><span class=nx>hasChanged</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ éœ€è¦ï¼Œä¹Ÿå¯ä»¥å°‡ store çš„æ•´å€‹ state é‡æ–°è¨­ç½®æˆä¸€å€‹æ–°çš„ç‰©ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>cartStore</span><span class=p>.</span><span class=nx>$state</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>items</span><span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nx>hasChanged</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=é‡ç½®ç‹€æ…‹>é‡ç½®ç‹€æ…‹</h4><p>store çš„å¯¦ä¾‹æä¾›äº†ä¸€å€‹ <code>$reset()</code> çš„ helperï¼Œå‘¼å«å®ƒå°±å¯ä»¥å°‡ store çš„ç‹€æ…‹é‡ç½®è‡³åˆå§‹å€¼ï¼Œä¸éç›®å‰åªåœ¨ä½¿ç”¨ Option ç‰©ä»¶å®šç¾©çš„ store æ‰æœ‰å¯¦ä½œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterStore</span> <span class=o>=</span> <span class=nx>useCounterStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>counterStore</span><span class=p>.</span><span class=nx>$reset</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=pinia-store-çš„-getters>Pinia Store çš„ Getters</h3><h4 id=ä½¿ç”¨åŒä¸€å€‹-store-ä¸­çš„å…¶ä»–-getter>ä½¿ç”¨åŒä¸€å€‹ store ä¸­çš„å…¶ä»– getter</h4><p>åœ¨ store å…§ä½ å¯ä»¥çµ„åˆå¤šå€‹ getterï¼Œåœ¨ Option ç‰©ä»¶ä¸‹ï¼Œå¯ä»¥é€éä½¿ç”¨ <code>this</code> ä¾†å‘¼å«ä½¿ç”¨å…¶ä»–çš„ getterã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;main&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>counter</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>getters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>doubleCount</span><span class=o>:</span> <span class=p>(</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>state</span><span class=p>.</span><span class=nx>counter</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>doubleCountPlusOne</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>doubleCount</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨å…¶ä»–-store-çš„-getter>ä½¿ç”¨å…¶ä»– store çš„ getter</h4><p>åœ¨ store å…§ä½ ä¹Ÿå¯ä»¥çµ„åˆå…¶ä»– store çš„ getterï¼Œåªè¦å»ºç«‹å‡ºå…¶ä»– store å¯¦ä¾‹å°±å¯ä»¥å‘¼å«ä½¿ç”¨äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useOtherStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./other-store&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;main&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>getters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>otherGetter</span><span class=p>(</span><span class=nx>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>otherStore</span> <span class=o>=</span> <span class=nx>useOtherStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>state</span><span class=p>.</span><span class=nx>localData</span> <span class=o>+</span> <span class=nx>otherStore</span><span class=p>.</span><span class=nx>data</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=pinia-store-çš„-actions>Pinia Store çš„ Actions</h4><p>Actions ç›¸ç•¶æ–¼å…ƒä»¶ä¸­çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¿®æ”¹ç‹€æ…‹çš„å•†æ¥­é‚è¼¯å®šç¾©çš„ä½ç½®ï¼Œaction å¯ä»¥æ˜¯åŒæ­¥ä¹Ÿå¯ä»¥æ˜¯ç•°æ­¥çš„ï¼Œå› æ­¤ï¼Œæˆ‘å€‘ä¹Ÿèƒ½åœ¨ action ä¸­æ‰“å¾Œç«¯ API ä¾†å–å¾—è³‡æ–™å¾Œæ›´æ–°ç‹€æ…‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useUserStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>profile</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>gender</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>actions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getUserProfile</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/profile&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>profile</span> <span class=o>=</span> <span class=nx>data</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>error</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=store-çš„è§£æ§‹>Store çš„è§£æ§‹</h3><p>æœ‰äº›æƒ…æ³ï¼Œä½ å¯èƒ½éœ€è¦å°‡ Store ä¸­çš„å±¬æ€§æˆ–æ–¹æ³•ç¨ç«‹çš„æå–å‡ºä¾†ï¼Œä½†ç‚ºäº†ä¿æŒå±¬æ€§çš„éŸ¿æ‡‰æ€§ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>storeToRefs</code> ä¾†å»ºç«‹å±¬æ€§çš„åƒè€ƒï¼Œå°±åƒä½¿ç”¨ <code>toRefs</code> ä¾†å»ºç«‹ <code>props</code> çš„åƒè€ƒä¸€æ¨£ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>storeToRefs</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useCounterStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@/stores/counter&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterStore</span> <span class=o>=</span> <span class=nx>useCounterStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>count</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>storeToRefs</span><span class=p>(</span><span class=nx>counterStore</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>increment</span><span class=p>,</span> <span class=nx>decrement</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>counterStore</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=pinia-æŒä¹…åŒ–æ’ä»¶---pinia-plugin-persistedstate>Pinia æŒä¹…åŒ–æ’ä»¶ - Pinia Plugin Persistedstate</h2><p>Pinia æ˜¯å€‹éå¸¸è¼•é‡çš„ç‹€æ…‹ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œè€Œä¸”ä¹Ÿæä¾›åº•å±¤ API ä½¿å¾— Pinia èƒ½å¤ è‡ªå®šç¾©æ’ä»¶ä¾†æ“´å±•åŠŸèƒ½ï¼Œèˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å€‘æœ‰äº›ç‹€æ…‹éœ€è¦å„²å­˜åœ¨ä½¿ç”¨è€…ç€è¦½å™¨ä¸­ï¼Œä¸‹æ¬¡å†ç€è¦½æ™‚å¯ä»¥å–çš„ç•¶æ™‚å„²å­˜çš„ç‹€æ…‹è³‡æ–™ï¼Œæˆ‘å€‘å°±éœ€è¦å°‡ store çš„ç‹€æ…‹æŒä¹…åŒ–ã€‚</p><p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <a class=link href=https://github.com/prazdevs/pinia-plugin-persistedstate target=_blank rel=noopener>Pinia Plugin Persistedstate</a> é€™å€‹æ’ä»¶ï¼Œä¾†åšåˆ°æŒä¹…åŒ–é€™ä»¶äº‹ï¼Œé€™å°æ–¼å„²å­˜ä½¿ç”¨è€…è³‡è¨Šæˆ–ç™»å…¥ç‹€æ…‹éå¸¸çš„æ–¹ä¾¿ã€‚</p><h3 id=åœ¨-nuxt-3-ä¸­é…ç½®ä½¿ç”¨-pinia-plugin-persistedstate>åœ¨ Nuxt 3 ä¸­é…ç½®ä½¿ç”¨ Pinia Plugin Persistedstate</h3><h4 id=step-1-å®‰è£å¥—ä»¶-2>Step 1. å®‰è£å¥—ä»¶</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D pinia-plugin-persistedstate --force
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D pinia-plugin-persistedstate --force</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ç›®å‰ç…§è‘—å®˜æ–¹å®‰è£ Piniaï¼Œæœƒç™¼ç”Ÿä¸€äº›å•é¡Œï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨å®‰è£æ™‚åŠ ä¸Š <strong>&ndash;force</strong> åƒæ•¸</p></blockquote><h4 id=step-2-åœ¨-nuxt-3-ç‚º-pinia-æ·»åŠ -persist-æ’ä»¶>Step 2. åœ¨ Nuxt 3 ç‚º Pinia æ·»åŠ  Persist æ’ä»¶</h4><p>å»ºç«‹ <strong>./plugins/pinia-plugin-persistedstate.client.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pluginspinia-plugin-persistedstateclientjs>plugins/pinia-plugin-persistedstate.client.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>piniaPersistedstate</span> <span class=nx>from</span> <span class=s1>&#39;pinia-plugin-persistedstate&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>((</span><span class=nx>nuxtApp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>nuxtApp</span><span class=p>.</span><span class=nx>$pinia</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>piniaPersistedstate</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-ç‚ºä½ çš„-store-æ·»åŠ æŒä¹…åŒ–é…ç½®>Step 3. ç‚ºä½ çš„ Store æ·»åŠ æŒä¹…åŒ–é…ç½®</h4><p>åœ¨ç¾æœ‰çš„ store å®šç¾©ä¸­æ·»åŠ ï¼Œ<code>persist</code> å±¬æ€§ï¼Œä¾†é…ç½® store æŒä¹…åŒ–ï¼Œå°‡ç‹€æ…‹å„²å­˜åœ¨ç€è¦½å™¨çš„ <code>localStorage</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCounterStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>actions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>increment</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>decrement</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>count</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>getters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>doubleCount</span><span class=o>:</span> <span class=p>(</span><span class=nx>state</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>state</span><span class=p>.</span><span class=nx>count</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>persist</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>enabled</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>strategies</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>key</span><span class=o>:</span> <span class=s1>&#39;counter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>storage</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>client</span> <span class=o>?</span> <span class=nx>localStorage</span> <span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæ˜¯ä½¿ç”¨ setup å‡½æ•¸å®šç¾© storeï¼Œä½ å¯ä»¥åœ¨ defineStore å‚³å…¥ç¬¬ä¸‰å€‹åƒæ•¸ä¸¦æ·»åŠ  <code>persist</code> å±¬æ€§ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>useCounterStore</span> <span class=o>=</span> <span class=nx>defineStore</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;counter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>count</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s1>&#39;count&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>increment</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>decrement</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>doubleCount</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>count</span><span class=p>.</span><span class=nx>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>increment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>decrement</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>doubleCount</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>persist</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>enabled</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>strategies</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>key</span><span class=o>:</span> <span class=s1>&#39;counter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>storage</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>client</span> <span class=o>?</span> <span class=nx>localStorage</span> <span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-4-æŒä¹…åŒ–æ•ˆæœ>Step 4. æŒä¹…åŒ–æ•ˆæœ</h4><p>ç•¶æˆ‘å€‘è¨­ç½®å¥½ counterStore çš„æŒä¹…åŒ–å¾Œï¼Œæˆ‘å€‘çš„ç‹€æ…‹å°±æœƒè¢«å„²å­˜åœ¨ç€è¦½å™¨çš„ <code>localStorage</code> ä¹‹ä¸­ï¼Œå°±ç®—é—œé–‰ç€è¦½å™¨æˆ–é‡æ–°æ•´ç†ç¶²é ï¼Œstore çš„ç‹€æ…‹éƒ½æœƒå†å¾ <code>localStorage</code> è®€å–å‡ºä¾†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617187033_e0fd11b0a5_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>åœ¨å°å‹çš„å°ˆæ¡ˆä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ useState ä¾†ç®¡ç†ï¼Œä½†å¤§å°ˆæ¡ˆä½ å°±éœ€è¦ä¸€å€‹æ›´å¥½çš„æ–¹å¼ä¾†ç®¡ç†é€™äº›ç‹€æ…‹ï¼Œå¦‚ Pinia ä¾†ç‚ºæˆ‘å€‘ç®¡ç†é€™äº›ç‹€æ…‹ï¼Œç”šè‡³å®šç¾©å¤šå€‹ storeï¼ŒPinia æ”¯æ´çš„æ’ä»¶èƒ½å”åŠ©æˆ‘å€‘æ“´å±• Pinia çš„åŠŸèƒ½ï¼ŒPinia Plugin Persistedstate å°±æ˜¯ä¸€å€‹å¾ˆå¸¸ç”¨çš„æ’ä»¶ï¼Œèƒ½å”åŠ©æˆ‘å€‘å°‡ Pinia çš„ç‹€æ…‹æŒä¹…åŒ–è‡³ç€è¦½å™¨çš„ <code>localStorage</code> æˆ– <code>sessionStorage</code> ä¸­ã€‚</p><hr><h2 id=runtime-config--app-config>Runtime Config & App Config</h2><p>åœ¨ Nuxt 3 ä¸­æä¾›äº†å…©ç¨®å¯ä»¥æ–¹å¼è¨­å®šç’°å¢ƒè®Šæ•¸æˆ–å‰ç«¯éœ€è¦ä½¿ç”¨çš„å…±ç”¨è¨­å®šï¼Œåˆ†åˆ¥æ˜¯åœ¨ Nuxt å•Ÿå‹•æ™‚æœƒåœ¨å¾Œç«¯è¼‰å…¥ä½¿ç”¨çš„ Runtime Config åŠå¯ä»¥åœ¨å‰ç«¯è¢«ä½¿ç”¨çš„ App Config é€™å…©è€…é–“çš„å€åˆ¥é€™é‚Šåšä¸€äº›è¬›è§£ã€‚</p><h3 id=runtime-config>Runtime Config</h3><p>åœ¨é–‹ç™¼ç¶²ç«™æˆ–éƒ¨ç½²æ™‚ï¼Œæˆ‘å€‘ç¸½æ˜¯æœ‰ä¸€äº›ç’°å¢ƒè®Šæ•¸éœ€è¦åšè¨­ç½®ï¼Œ<a class=link href=https://github.com/motdotla/dotenv target=_blank rel=noopener>dotenv</a> å°±æ˜¯ä¸€å€‹å¾ˆå¥½ç”¨çš„å¥—ä»¶ï¼Œèƒ½å¹«åŠ©æˆ‘å€‘å°‡å°ˆæ¡ˆä¸‹çš„ <code>.env</code> æª”æ¡ˆè¼‰å…¥åˆ° Node.js çš„ <code>process.env</code> ä¹‹ä¸­ï¼Œå°¤å…¶åœ¨å¾Œç«¯ä¼ºæœå™¨çš„ API é–‹ç™¼ï¼Œé€™äº›ä¸èƒ½å…¬é–‹æˆ–æ•æ„Ÿçš„ Key æˆ–è¨­å®šå€¼ï¼Œé€šå¸¸ä¸æœƒèˆ‡æ•´å€‹å°ˆæ¡ˆä¸€èµ·é€²è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œæ˜¯é‡å°ä¸åŒç’°å¢ƒèˆ‡æ©Ÿå™¨ï¼Œé…ç½®æ–¼ <code>.env</code> æˆ–ç’°å¢ƒè®Šæ•¸ä¹‹ä¸­ã€‚</p><p>é€™å€‹ <code>.env</code> è¨­å®šæª”å…§çš„ç’°å¢ƒè®Šæ•¸ï¼Œä¾‹å¦‚ï¼šè³‡æ–™åº«çš„å¸³è™Ÿå¯†ç¢¼ã€ç¬¬ä¸‰æ–¹æœå‹™çš„ Token æˆ– API Key &mldr;ç­‰ï¼Œé€šå¸¸åªæœƒåœ¨ä¼ºæœå™¨è¢«è®€å–åšä½¿ç”¨ï¼Œä¹Ÿä¸æœƒæ´©æ¼é€™äº›è¨­å®šçµ¦ä½¿ç”¨è€…çŸ¥é“ï¼Œæˆ‘å€‘ä¹Ÿç¨±ä¹‹ç‚º<code>åŸ·è¡Œæ™‚çš„è¨­å®š (Runtime Config)</code>ã€‚</p><p>Nuxt 3 æä¾›äº†å¯ä»¥è¨­å®š <strong>Runtime Config</strong> çš„æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¾†è¨­å®šé€™äº›ç’°å¢ƒè®Šæ•¸çµ¦äºˆä¼ºæœå™¨åŸ·è¡Œæ™‚ä½¿ç”¨ã€‚</p><h4 id=é…ç½®-runtimeconfig>é…ç½® runtimeConfig</h4><p>æˆ‘å€‘å¯ä»¥åœ¨ <code>nuxt.config.ts</code> ä¸­æ·»åŠ  <code>runtimeConfig</code> å±¬æ€§ï¼Œå°±å¯ä»¥ä¾†è¨­å®šåªæœ‰ä¼ºæœå™¨ç«¯å¯ä»¥ä½¿ç”¨çš„ç’°å¢ƒè®Šæ•¸ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ <strong>nuxt.config.ts</strong> æª”æ¡ˆä¸­ï¼Œæ·»åŠ ä¸€å€‹ <code>apiSecret</code> è‡³ <code>runtimeConfig</code> å±¬æ€§å…§ï¼š</p><h5 id=nuxtconfigts-4>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>runtimeConfig</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>apiSecret</span><span class=o>:</span> <span class=s1>&#39;æ€éº¼å¯ä»¥è®“ä½ çŸ¥é“å‘¢ :P&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°±å¯ä»¥åœ¨ Server API ä½¿ç”¨ <code>useRuntimeConfig()</code> ç²å¾—åŸ·è¡Œæ™‚çš„è¨­å®šï¼Œå†å¾ä¸­å–å¾— <code>apiSecret</code> ç’°å¢ƒè®Šæ•¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>apiSecret</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`æ¥æ”¶åˆ°äº†ä¸€å€‹ Server API è«‹æ±‚: </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`åŸ·è¡Œæ™‚çš„ç’°å¢ƒè®Šæ•¸ [apiSecret]: </span><span class=si>${</span><span class=nx>apiSecret</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=s1>&#39;ok&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å› ç‚ºæˆ‘å€‘æ˜¯å®šç¾©åœ¨ Server APIï¼Œæ‰€ä»¥å¯ä»¥åœ¨æ¸¬è©¦ä¼ºæœå™¨å•Ÿå‹•çš„ Terminal çœ‹è¦‹ console.log çš„çµæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52617187068_2610474e64_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ­¤å¤–ä½ ä¹Ÿå¯ä»¥åœ¨æ’ä»¶æˆ– Vue ä¸­ä½¿ç”¨ <code>useRuntimeConfig()</code> ä¾†å–å¾—åŸ·è¡Œæ™‚çš„è¨­ç½®ï¼Œä½†ä¹Ÿåƒ…åœ¨ <strong>setup</strong> æˆ– <strong>Nuxt Lifecycle Hooks</strong> ä¸­æœ‰æ•ˆã€‚</p><h4 id=å®¢æˆ¶ç«¯ä½¿ç”¨-runtimeconfig>å®¢æˆ¶ç«¯ä½¿ç”¨ runtimeConfig</h4><p>é€šå¸¸ä¸€äº›å¯†é‘°æˆ–æ•æ„Ÿè³‡è¨Šï¼Œæˆ‘å€‘éƒ½æœƒå®šç¾©åœ¨ <code>runtimeConfig</code> åƒ…ä¾›ä¼ºæœå™¨ç«¯åšä½¿ç”¨ï¼Œè€Œ <code>runtimeConfig</code> ä¹Ÿå¯ä»¥é…ç½®ä¸€å€‹ <code>public</code> çš„å±¬æ€§ï¼Œä¾†æŠŠä¸€äº›ç’°å¢ƒè®Šæ•¸æ–¼ä¼ºæœå™¨ç«¯æˆ–å®¢æˆ¶ç«¯åšä½¿ç”¨ï¼Œä¾‹å¦‚ï¼ŒAPI çš„ Base URL é€™é¡åœ¨ä¼ºæœå™¨ç«¯æ‰“ API æ™‚æœƒéœ€è¦ä½¿ç”¨ï¼Œè€Œå®¢æˆ¶ç«¯çš„æ“ä½œæµç¨‹ä¹Ÿæœƒæ‰“åŒæ¨£çš„ API ä½ç½®ï¼Œæˆ‘å€‘å°±å¯ä»¥ä½¿ç”¨ <code>public</code> çš„å±¬æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ <strong>nuxt.config.ts</strong> æª”æ¡ˆä¸­ï¼Œæ·»åŠ ä¸€å€‹ <code>apiBase</code> è‡³ <code>runtimeConfig.public</code> å±¬æ€§å…§ï¼š</p><h5 id=nuxtconfigts-5>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>runtimeConfig</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>apiSecret</span><span class=o>:</span> <span class=s1>&#39;æ€éº¼å¯ä»¥è®“ä½ çŸ¥é“å‘¢ :P&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=kr>public</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>apiBase</span><span class=o>:</span> <span class=s1>&#39;/api&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢ <strong>./pages/profile.vue</strong> é é¢ï¼š</p><h5 id=pagesprofilevue>pages/profile.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-2xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>å›å‚³è³‡æ–™</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>data</span> <span class=p>}}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>apiBase</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=kr>public</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>toRaw</span><span class=p>(</span><span class=nx>runtimeConfig</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>apiBase</span><span class=si>}</span><span class=sb>/hello`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ·»åŠ åœ¨ <code>runtimeConfig.public</code> å±¬æ€§çš„ç’°å¢ƒè®Šæ•¸ï¼Œåœ¨ä¼ºæœå™¨ç«¯èˆ‡å®¢æˆ¶ç«¯éƒ½å¯ä»¥è®€å–å¾—åˆ°ã€‚</p><p>ä¸‹åœ–ä¸­å¯ä»¥ç™¼ç¾ï¼Œåœ¨ç€è¦½å™¨ä¸­çš„ Console æ‰€å°å‡ºçš„ <code>runtimeConfig</code> æ˜¯ä¸æœƒåŒ…å«åƒ…æœ‰åœ¨ä¼ºæœå™¨ç«¯èƒ½ä½¿ç”¨çš„ <code>apiSecret</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617134565_8558d435e9_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=ä½¿ç”¨-env-å»ºç«‹ç’°å¢ƒè®Šæ•¸>ä½¿ç”¨ .env å»ºç«‹ç’°å¢ƒè®Šæ•¸</h4><p>Nuxt åœ¨é–‹ç™¼æ¨¡å¼æˆ–åŸ·è¡Œæ™‚ï¼Œå·²ç¶“æœ‰å…§å»º <a class=link href=https://github.com/motdotla/dotenv target=_blank rel=noopener>dotenv</a>ï¼Œå¦‚æœåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹æ·»åŠ äº† <code>.env</code>ï¼ŒNuxt æœƒåœ¨é–‹ç™¼æœŸé–“ã€å»ºæ§‹æ™‚æˆ–ç”¢ç”Ÿéœæ…‹ç¶²ç«™æ™‚ï¼Œè‡ªå‹•è¼‰å…¥ <code>.env</code> å…§çš„ç’°å¢ƒè®Šæ•¸ã€‚</p><p>ä¾‹å¦‚å»ºç«‹ <strong>.env</strong> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=env>.env</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=cl><span class=nv>NUXT_API_SECRET</span><span class=o>=</span>api_secret_token
</span></span><span class=line><span class=cl><span class=nv>NUXT_PUBLIC_API_BASE</span><span class=o>=</span>https://nuxtjs.org
</span></span></code></pre></td></tr></table></div></div><p>é€™å…©å€‹å€¼ï¼Œå°‡è¢« <a class=link href=https://github.com/motdotla/dotenv target=_blank rel=noopener>dotenv</a> è‡ªå‹•è¼‰å…¥è‡³ <code>process.env</code> ä¸­ï¼Œä½œç‚ºç’°å¢ƒè®Šæ•¸ã€‚</p><h4 id=ç’°å¢ƒè®Šæ•¸çš„è¦†è“‹>ç’°å¢ƒè®Šæ•¸çš„è¦†è“‹</h4><p>ä¸è«–æ˜¯é€é <a class=link href=https://github.com/motdotla/dotenv target=_blank rel=noopener>dotenv</a> è‡ªå‹•è¼‰å…¥ <strong>.env</strong> æˆ–å…¶ä»–æ–¹å¼é…ç½®çš„ç’°å¢ƒè®Šæ•¸ï¼Œåªè¦ç’°å¢ƒè®Šæ•¸å‘½åæ˜¯ <code>NUXT_</code> é–‹é ­ï¼Œé€™å€‹ç’°å¢ƒè®Šæ•¸å°‡æœƒè¦†è“‹ <code>runtimeConfig</code> çš„è¨­ç½®ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œç•¶æˆ‘å€‘ <code>runtimeConfig</code> è¨­ç½®å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>runtimeConfig</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>apiSecret</span><span class=o>:</span> <span class=s1>&#39;æ€éº¼å¯ä»¥è®“ä½ çŸ¥é“å‘¢ :P&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=kr>public</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>apiBase</span><span class=o>:</span> <span class=s1>&#39;/api&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <strong>.env</strong> æª”æ¡ˆæˆ–å…¶ä»–æ–¹å¼è¨­ç½®ä¸‹åˆ—ç’°å¢ƒè®Šæ•¸ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=cl><span class=nv>NUXT_API_SECRET</span><span class=o>=</span>api_secret_token
</span></span><span class=line><span class=cl><span class=nv>NUXT_PUBLIC_API_BASE</span><span class=o>=</span>https://nuxtjs.org
</span></span></code></pre></td></tr></table></div></div><p>é‚£éº¼ <code>NUXT_API_SECRET</code> ç’°å¢ƒè®Šæ•¸ï¼Œå°‡æœƒè¦†è“‹ <code>runtimeConfig.apiSecret</code>ï¼Œè€Œ <code>NUXT_PUBLIC_API_BASE</code> å°‡æœƒè¦†è“‹ <code>runtimeConfig.public.apiBase</code>ï¼Œæœ€çµ‚ runtimeConfig çš„è¨­å®šæœƒè®Šæˆå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>apiSecret:</span> <span class=nt>&#34;api_secret_token&#34;</span><span class=p>,</span>     <span class=c1>// è¢« NUXT_API_SECRET ç’°å¢ƒè®Šæ•¸è¦†è“‹
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>public:</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=err>apiBase:</span> <span class=nt>&#34;https://nuxtjs.org&#34;</span>    <span class=c1>// è¢« NUXT_PUBLIC_API_BASE ç’°å¢ƒè®Šæ•¸è¦†è“‹ 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœƒæœ‰é€™æ¨£å­çš„ç‰¹æ€§æ˜¯å› ç‚º Nuxt æœƒåœ¨å•Ÿå‹•æ™‚ï¼Œå…ˆè¼‰å…¥ <code>nuxt.conf.ts</code> å…§çš„ <code>runtimeConfig</code>ï¼Œå»ºç«‹å‡ºå‘¼å« <code>useRuntimeConfig()</code> æ‰€å¾—åˆ°çš„åŸ·è¡Œæ™‚è¨­å®šï¼Œä¾‹å¦‚ï¼Œå…ˆå»ºæ§‹å‡ºäº† <code>_runtimeConfig</code> ç‰©ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>_runtimeConfig</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>apiSecret</span><span class=o>:</span> <span class=s1>&#39;æ€éº¼å¯ä»¥è®“ä½ çŸ¥é“å‘¢ :P&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kr>public</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>apiBase</span><span class=o>:</span> <span class=s1>&#39;/api&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æœƒèµ°è¨ªé€™å€‹ <strong>_runtimeConfig</strong> ç‰©ä»¶è£¡é¢çš„ <code>key</code>ï¼Œé€ä¸€å°‡ <strong>key</strong> çš„åç¨±è½‰æ›<strong>è›‡å½¢å‘½åæ³• (Snake case)</strong>ï¼Œä¸¦è½‰æˆå…¨å¤§å¯«å†åŠ ä¸Š <code>NUXT_</code> å‰ç¶´å¾Œå–å¾—å°æ‡‰çš„ç’°å¢ƒè®Šæ•¸ï¼Œå¦‚æœå­˜åœ¨å°±æœƒä»¥æ–°å€¼ä¾†è¦†è“‹ <strong>_runtimeConfig</strong> å…§çš„å±¬æ€§ã€‚</p><p>ä¾‹å¦‚ <strong>apiSecret</strong> ç¶“éè½‰æ›è®Šæˆ <strong>api_secret</strong>ï¼Œæ¥è‘—è½‰å¤§å¯« <strong>API_SECRET</strong> æœ€å¾ŒåŠ ä¸Šå‰ç¶´è®Šæˆ <strong>NUXT_API_SECRET</strong>ï¼Œå¦‚æ­¤ç’°å¢ƒè®Šæ•¸ <strong>NUXT_API_SECRET</strong> çš„å€¼å°±è¦†è“‹ <strong>runtimeConfig.apiSecret</strong>ã€‚</p><p>è€Œåœ¨ <strong>public</strong> ä¸‹çš„è¨­ç½®ï¼Œä¹Ÿæœƒå…ˆè½‰ç‚º <strong>public_apiBase</strong> å†ç¶“éè›‡è¡Œå‘½åæˆ <strong>public_api_base</strong> ç­‰æ­¥é©Ÿï¼Œæœ€å¾Œè®Šæˆ <strong>NUXT_PUBLIC_API_BASE</strong> ä¾†è¼‰å…¥ç’°å¢ƒè®Šæ•¸ä¸¦è¦†è“‹ã€‚</p><blockquote><p>æœ€å¾Œå°æé†’ï¼Œç•¶å»ºæ§‹å‡ºç”Ÿç”¢ç’°å¢ƒçš„ç¶²ç«™ï¼Œå¦‚ .output ç›®éŒ„å¾Œï¼Œdotenv ä¸¦ä¸æœƒåŒ…å«åœ¨å»ºæ§‹çš„ç¶²ç«™å…§ï¼Œ ä½ éœ€è¦å†è‡ªå·±è¼‰å…¥æˆ–é…ç½®ç’°å¢ƒè®Šæ•¸æ‰èƒ½æ­£å¸¸é‹ä½œå“¦ï¼Œä¾‹å¦‚åœ¨ PM2 é…ç½® envã€‚</p></blockquote><h3 id=app-config>App Config</h3><h4 id=é…ç½®-appconfig>é…ç½® appConfig</h4><p>åœ¨ <code>nuxt.config.ts</code> æª”æ¡ˆä¸­ï¼Œå¯ä»¥åœ¨ <code>appConfig</code> å±¬æ€§å…§æ·»åŠ è¨­ç½®ï¼Œä¾‹å¦‚ï¼Œé€šå¸¸æˆ‘å€‘æœƒæ·»åŠ åƒç¶²ç«™ä¸»é¡Œçš„ä¸»è‰²ç­‰é€™é¡<code>å¯ä»¥å…¬é–‹</code>çš„é…ç½®ï¼Œè®“ç¶²ç«™å¯ä»¥ä½¿ç”¨é€™å€‹è¨­ç½®ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>appConfig</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>primaryColor</span><span class=o>:</span> <span class=s1>&#39;#0ea5e9&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶å»ºç«‹å¥½ appConfig å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨çµ„åˆå¼å‡½æ•¸ <code>useAppConfig()</code> ä¾†å–å¾—è¨­ç½®ã€‚</p><p>ä¾‹å¦‚ï¼Œå»ºç«‹ <strong>./pages/config.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesconfigvue>pages/config.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-2xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>theme</span><span class=p>.</span><span class=nx>primaryColor</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>primaryColor</span> <span class=p>}}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>appConfig</span> <span class=o>=</span> <span class=nx>useAppConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>theme</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>appConfig</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=appconfig-æª”æ¡ˆ>app.config æª”æ¡ˆ</h4><p>ä½ ä¹Ÿå¯ä»¥åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ <code>app.config.ts</code> ä¾†é…ç½® App Configï¼Œé€™å€‹æª”æ¡ˆçš„å‰¯æª”åå¯ä»¥æ˜¯ <strong>.ts</strong>ã€<strong>.js</strong> æˆ– <strong>.mjs</strong>ã€‚</p><h5 id=appconfigts>app.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineAppConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>primaryColor</span><span class=o>:</span> <span class=s1>&#39;#3b82f6&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶å»ºç«‹äº† <code>app.config.ts</code> æª”æ¡ˆï¼Œè©²è¨­å®šæœƒèˆ‡ <strong>nuxt.config.ts</strong> æª”æ¡ˆä¸­çš„ <strong>appConfig</strong> å±¬æ€§çµåˆï¼Œå¦‚æœå…·æœ‰ç›¸åŒçš„å‘½åï¼Œå‰‡ä»¥ <code>app.config.ts</code> æª”æ¡ˆå…§çš„è¨­ç½®ç‚ºä¸»ã€‚</p><h4 id=å…·æœ‰éŸ¿æ‡‰å¼çš„è¨­å®š>å…·æœ‰éŸ¿æ‡‰å¼çš„è¨­å®š</h4><p>ç•¶è¨­å®šå¥½çš„ App Config åœ¨ä½¿ç”¨æ™‚ï¼Œè§£æ§‹å‡ºçš„è®Šæ•¸æ˜¯å…·æœ‰éŸ¿æ‡‰æ€§çš„ï¼Œä¹Ÿå°±æ˜¯èªªåœ¨å…¶ä»–é é¢ä¿®æ”¹ä¸»é¡Œé¡è‰²çš„è¨­å®šï¼Œå¯ä»¥éŸ¿æ‡‰è‡³æ‰€æœ‰ä½¿ç”¨é€™å€‹è¨­å®šçš„å…ƒä»¶ã€‚</p><p>èˆ‰å€‹ä¾‹å­ï¼Œæ–°å¢ä¸€å€‹ <strong>darkMode</strong> çš„å±¬æ€§è‡³ <strong>app.config.ts</strong> æª”æ¡ˆå…§çš„ themeï¼š</p><h5 id=appconfigts-1>app.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineAppConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>primaryColor</span><span class=o>:</span> <span class=s1>&#39;#3b82f6&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>darkMode</span>: <span class=kt>false</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <strong>./pages/index.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesindexvue-4>pages/index.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white py-24&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-6xl font-semibold text-gray-800&#34;</span><span class=p>&gt;</span><span class=nx>é€™è£¡æ˜¯é¦–é </span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-4 flex flex-col space-y-4&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/config&#34;</span><span class=p>&gt;</span><span class=nx>å‰å¾€</span> <span class=o>/</span><span class=nx>config</span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-2xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>theme</span><span class=p>.</span><span class=nx>darkMode</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>darkMode</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>appConfig</span> <span class=o>=</span> <span class=nx>useAppConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>theme</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>appConfig</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ <strong>./pages/config.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagesconfigvue-1>pages/config.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;my-24 flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-2xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>theme</span><span class=p>.</span><span class=nx>primaryColor</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>primaryColor</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-2xl text-gray-600&#34;</span><span class=p>&gt;</span><span class=nx>theme</span><span class=p>.</span><span class=nx>darkMode</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-4 text-3xl font-semibold text-blue-500&#34;</span><span class=p>&gt;{{</span> <span class=nx>theme</span><span class=p>.</span><span class=nx>darkMode</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>      <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 rounded-sm bg-blue-500 py-2 px-4 text-base font-medium text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=err>@</span><span class=na>click</span><span class=o>=</span><span class=s>&#34;theme.darkMode = !theme.darkMode&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{{</span> <span class=sb>`</span><span class=si>${</span><span class=nx>theme</span><span class=p>.</span><span class=nx>darkMode</span> <span class=o>?</span> <span class=s1>&#39;å–æ¶ˆ&#39;</span> <span class=o>:</span> <span class=s1>&#39;å•Ÿç”¨&#39;</span><span class=si>}</span><span class=sb>æ·±è‰²æ¨¡å¼`</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>NuxtLink</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=nx>å›é¦–é </span><span class=p>&lt;/</span><span class=nt>NuxtLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>appConfig</span> <span class=o>=</span> <span class=nx>useAppConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>theme</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>appConfig</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚ä¸‹åœ–ï¼Œæˆ‘å€‘çš„é¦–é å–å¾—äº† <strong>App Config</strong> ä¸­çš„ <strong>theme.darkMode</strong> é è¨­ç‚º <code>false</code>ï¼Œæ¥è‘—æˆ‘å€‘åˆ‡æ›è‡³ <strong>/config</strong> é é¢ï¼Œå¯ä»¥å°‡å¾ <code>useAppConfig()</code> è§£æ§‹å‡ºçš„ theme é€²è¡Œè®Šæ›´ï¼Œæˆ‘å€‘ä½¿ç”¨æŒ‰éˆ•ä¾†è¨­ç½® <strong>theme.darkMode</strong> ç‚º <code>true</code> æˆ– <code>false</code> è¡¨ç¤ºå•Ÿç”¨æˆ–å–æ¶ˆæ·±è‰²æ¨¡å¼ã€‚ç•¶è®Šæ›´å®Œæˆå¾Œï¼Œå›è‡³é¦–é ï¼Œå¯ä»¥ç™¼ç¾ <strong>theme.darkMode</strong> ç™¼ç”Ÿäº†éŸ¿æ‡‰ã€‚</p><p><img src=https://live.staticflickr.com/65535/52616188867_a568b0a7c2_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=å°çµ-1>å°çµ</h3><p>Nuxt 3 æä¾›äº† <strong>Runtime Config</strong> åŠ <strong>App Config</strong> ä¾†è®“æˆ‘å€‘å°‡å¸¸ç”¨æˆ–é è¨­è¨­å®šæ‡‰ç”¨åœ¨ä¸åŒçš„æƒ…å¢ƒï¼Œä½¿ç”¨æ™‚ï¼Œæˆ‘å€‘åƒ…éœ€è¨˜å¾—ï¼Œ<code>ä¸èƒ½å…¬é–‹çš„é‡‘é‘°</code>æˆ–<code>æ•æ„Ÿè¨Šæ¯</code>ï¼Œåƒ…æ”¾ç½®åœ¨ <code>runtimeConfig</code> ä¸­è€Œä¸”<code>ä¸åœ¨ public å±¬æ€§å…§</code>ï¼Œ<code>runtimeConfig.public</code> é€šå¸¸æ”¾çš„æ˜¯<code>å‰å¾Œç«¯æœƒä½¿ç”¨åˆ°ä¸”ä¸å¸¸ä¿®æ”¹çš„å¸¸æ•¸</code>ã€‚è€Œ <code>App Config</code> å‰‡æ˜¯ç•¶ä¼ºæœå™¨ç«¯èˆ‡å®¢æˆ¶ç«¯<code>éœ€è¦ä½¿ç”¨çš„è¨­ç½®</code>ï¼Œå¦‚ä¸»é¡Œé¡è‰²ã€æ˜¯å¦å•Ÿç”¨æ·±è‰²æ¨¡å¼ç­‰é€™é¡å¯ä»¥è¢«ä½¿ç”¨è€…èª¿æ•´è®Šå‹•çš„ä¸”éœ€è¦å…·æœ‰éŸ¿æ‡‰æ€§ï¼Œå°±å¯ä»¥æ”¾ç½®åœ¨ <code>appConfig</code> ä¹‹ä¸­ã€‚</p><hr><h2 id=å¯¦ä½œç·´ç¿’>å¯¦ä½œç·´ç¿’</h2><p>é€™è£¡ä»‹ç´¹ç¶²ç«™çš„æœƒå“¡ç³»çµ±å¸¸æœƒä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹ç™»å…¥ï¼Œå°‡ä»¥ Google OAuth ç‚ºä¾‹ä¾†å¯¦éš›æ–¼ Nuxt 3 ä¸­åšä¸²æ¥ã€‚</p><h3 id=ä¸²æ¥-google-oauth-ç™»å…¥>ä¸²æ¥ Google OAuth ç™»å…¥</h3><p>é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦æœ‰ä¸€çµ„ Google OAuth ä½¿ç”¨çš„ <code>Client ID</code>ï¼Œä½ å¯ä»¥åˆ° <a class=link href=https://console.cloud.google.com/apis/credentials target=_blank rel=noopener>Google Console</a> æ–°å¢ä¸€å€‹ã€Œ<strong>OAuth 2.0 ç”¨æˆ¶ç«¯ ID</strong>ã€ï¼Œé€™è£¡æˆ‘å°±ä¸å†è´…è¿°ç¶²é æ‡‰ç”¨ç¨‹å¼ç”¨çš„ç”³è«‹éç¨‹ã€‚</p><p>é€™é‚Šå°æé†’ä¸€ä¸‹ï¼Œåœ¨å»ºç«‹ OAuth Client ID æ™‚ï¼Œ<strong>å·²æˆæ¬Šçš„ JavaScript ä¾†æº</strong>ï¼Œè¨˜å¾—å¡«å¯«ä¸Šæ‚¨çš„æ­£å¼ç’°å¢ƒæˆ–é–‹ç™¼ç’°å¢ƒçš„ Domainï¼Œä¸”å»ºè­°ä½¿ç”¨ HTTPSã€‚</p><p><img src=https://live.staticflickr.com/65535/52618245251_3509e645c4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å®Œæˆå¾Œï¼Œè¨˜å¾—ä¿ç®¡å¥½<code>ç”¨æˆ¶ç«¯å¯†ç¢¼</code>ã€<code>ç”¨æˆ¶ç«¯ ID (Client ID)</code> æ˜¯æˆ‘å€‘ç¨å¾Œæœƒéœ€è¦çš„ï¼Œç”¨æˆ¶ç«¯ç·¨è™Ÿæ ¼å¼å¤§æ¦‚å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>168152363730-b37gnijdpa2rdvvbq0qc29cjh4082t3b.apps.googleusercontent.com
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°‡é€™çµ„ Client IDï¼Œæ”¾ç½®åœ¨ Nuxt çš„ Runtime Config ä¹‹ä¸­ã€‚èª¿æ•´ <strong>nuxt.config.ts</strong> å…§å®¹ï¼Œåœ¨ runtimeConfig.public æ·»åŠ  <code>googleClientId</code>ã€‚</p><h5 id=nuxtconfigts-6>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>runtimeConfig</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>public</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>googleClientId</span><span class=o>:</span> <span class=s1>&#39;é€™é‚Šæ”¾ä¸Šä½ çš„ Google Client ID&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹ä¾†ï¼Œå®‰è£ Vue çš„ Google OAuth æ’ä»¶ï¼Œé€™é‚Šä½¿ç”¨çš„æ˜¯ <a class=link href=https://github.com/yobaji/vue3-google-login target=_blank rel=noopener>vue3-google-login</a>ï¼Œä¹Ÿæœ‰è©³ç´°çš„<a class=link href=https://yobaji.github.io/vue3-google-login/ target=_blank rel=noopener>èªªæ˜æ–‡ä»¶</a>å¯ä»¥åƒè€ƒã€‚</p><p>å®‰è£ <a class=link href=https://yobaji.github.io/vue3-google-login/ target=_blank rel=noopener>vue3-google-login</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D vue3-google-login
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D vue3-google-login</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ Nuxt 3 æ’ä»¶ä¾†ä½¿ç”¨ <a class=link href=https://yobaji.github.io/vue3-google-login/ target=_blank rel=noopener>vue3-google-login</a>ï¼Œæ–°å¢ <strong>./plugins/vue3-google-login.client.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pluginsvue3-google-loginclientjs>plugins/vue3-google-login.client.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>vue3GoogleLogin</span> <span class=nx>from</span> <span class=s1>&#39;vue3-google-login&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtPlugin</span><span class=p>((</span><span class=nx>nuxtApp</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>googleClientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=kr>public</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>nuxtApp</span><span class=p>.</span><span class=nx>vueApp</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>vue3GoogleLogin</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘åœ¨å…ƒä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>&lt;GoogleLogin></code> å…ƒä»¶ï¼Œä¸¦æ·»åŠ ä¸€å€‹ <code>callback</code> å±¬æ€§ï¼›æ­¤å¤–ï¼Œæˆ‘ä½¿ç”¨äº† Nuxt 3 æä¾›çš„ <code>&lt;ClientOnly></code> å…ƒä»¶ï¼Œå°‡ <code>&lt;GoogleLogin></code> åŒ…è£¹èµ·ä¾†ï¼Œä»¥ç¢ºä¿è©²å…ƒä»¶åƒ…åœ¨å®¢æˆ¶ç«¯åšæ¸²æŸ“ï¼Œä»¥å…ç™»å…¥æŒ‰éˆ•åœ¨åˆå§‹åŒ–ç™¼ç”Ÿå•é¡Œã€‚</p><h5 id=pagesloginvue>pages/login.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>GoogleLogin</span> <span class=nt>:callback</span><span class=s>=&#34;callback&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ClientOnly</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>callback</span> <span class=o>=</span> <span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘å•Ÿå‹• Nuxt ä¼ºæœå™¨ï¼Œé€™é‚Šæˆ‘æœƒç¿’æ…£ä½¿ç”¨ <code>yarn run dev -- --https</code> ä¾†å•Ÿç”¨ <strong>HTTPS</strong> åšæ¸¬è©¦ï¼Œå°±èƒ½ç™¼ç¾ä½¿ç”¨ Google å¸³è™Ÿç™»å…¥æˆåŠŸå¾Œï¼Œæ‰€è¿”å›çš„ Credentialã€‚</p><p><img src=https://live.staticflickr.com/65535/52618682810_b13a4d8304_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=one-tap-prompt>One Tap prompt</h3><p>ä½ å¯ä»¥åœ¨ <code>&lt;GoogleLogin></code> å…ƒä»¶æ·»åŠ  <code>prompt</code> å±¬æ€§ä¸¦è¨­ç‚º <code>true</code>ï¼Œé€™æ¨£å°±èƒ½åŒæ™‚å•Ÿç”¨ <strong>Google ä¸€éµç™»å…¥ (One Tap prompt)</strong> çš„åŠŸèƒ½å›‰ï¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>GoogleLogin</span> <span class=nt>:callback</span><span class=s>=&#34;callback&#34;</span> <span class=na>prompt</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨ <code>onMounted</code> ä¸­å‘¼å« <strong>vue3-google-login</strong> çš„ <code>googleOneTap()</code> æ–¹æ³•ï¼Œä¾†å–®ç¨ä½¿ç”¨ <strong>One Tap prompt</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>googleOneTap</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue3-google-login&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>onMounted</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>googleOneTap</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªè¨‚æŒ‰éˆ•>è‡ªè¨‚æŒ‰éˆ•</h3><p>å¦‚æœä½ æƒ³è‡ªè¨‚ç™»å…¥æŒ‰éˆ•çš„æ¨£å¼ï¼Œå¯ä»¥åœ¨ <code>&lt;GoogleLogin></code> çš„é è¨­æ’æ§½ (Slot) åšå»ºç«‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>GoogleLogin</span> <span class=nt>:callback</span><span class=s>=&#34;callback&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span><span class=nx>ä½¿ç”¨</span> <span class=nx>Google</span> <span class=nx>é€²è¡Œç™»å…¥</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>GoogleLogin</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨è‡ªè¨‚æŒ‰éˆ•æœƒè®“ OAuth æµç¨‹ç¨å¾®æœ‰é»ä¸ä¸€æ¨£ï¼Œç•¶ä½ ç™»å…¥æˆåŠŸå¾Œé è¨­æœƒå›å‚³ <a class=link href=https://developers.google.com/identity/oauth2/web/guides/use-code-model#auth_code_handling target=_blank rel=noopener>Auth Code</a>ã€‚</p><p>å¦‚æœè¨­å®šå±¬æ€§ <code>popup-type="TOKEN"</code>ï¼Œå‰‡å›å‚³ <a class=link href=https://developers.google.com/identity/oauth2/web/guides/use-token-model target=_blank rel=noopener>Access Token</a>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>GoogleLogin</span> <span class=nt>:callback</span><span class=s>=&#34;callback&#34;</span> <span class=na>popup</span><span class=nt>-type</span><span class=err>=&#34;</span><span class=na>TOKEN</span><span class=err>&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span><span class=nx>ä½¿ç”¨</span> <span class=nx>Google</span> <span class=nx>é€²è¡Œç™»å…¥</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>GoogleLogin</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä½¿ç”¨-googletokenlogin>ä½¿ç”¨ googleTokenLogin()</h3><p>åœ¨å…ƒä»¶ä¸­æˆ‘å€‘ä¹Ÿå¯ä»¥è‡ªå·±å»ºç«‹ <code>handleGoogleLogin</code> é»æ“Šäº‹ä»¶ï¼Œå‘¼å« <code>googleTokenLogin()</code> æ–¹æ³•ä¸¦å‚³å…¥è¨­å®šåœ¨ <strong>Runtime Config</strong> ä¸­çš„ <strong>Google Client ID</strong>ï¼Œé€™æ¨£é»æ“Šç™»å…¥æŒ‰éˆ•å°±èƒ½è™•ç† Google ç™»å…¥å–å¾— <strong>Access Token</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>googleTokenLogin</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue3-google-login&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>googleClientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=kr>public</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleGoogleLogin</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>googleTokenLogin</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span>
</span></span><span class=line><span class=cl>  <span class=p>}).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ä¸€å€‹ç™»å…¥æŒ‰éˆ•ä¾†å‘¼å« <code>handleGoogleLogin</code> é»æ“Šäº‹ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>      <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nt>@click</span><span class=s>=&#34;handleGoogleLogin&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>ä½¿ç”¨</span> <span class=nx>Google</span> <span class=nx>ç¹¼çºŒ</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ <strong>vue3-google-login</strong> æä¾›çš„ <code>googleTokenLogin()</code> æ–¹æ³•ï¼Œæˆ‘å€‘å°±èƒ½å–å¾— Google ä½¿ç”¨è€…çš„ <strong>Access Token</strong> å›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52617734947_56a5365817_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä½¿ç”¨-googleauthcodelogin>ä½¿ç”¨ googleAuthCodeLogin()</h3><p>æˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>googleAuthCodeLogin()</code> ä¾†å–å¾— <strong>Auth Code</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>googleAuthCodeLogin</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue3-google-login&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>googleClientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=kr>public</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleGoogleLogin</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>googleAuthCodeLogin</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span>
</span></span><span class=line><span class=cl>  <span class=p>}).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52618245191_6103912bce_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä¼ºæœå™¨ç«¯é©—è­‰>ä¼ºæœå™¨ç«¯é©—è­‰</h3><p>ç•¶ä½¿ç”¨è€…æ–¼å‰ç«¯æˆåŠŸç™»å…¥å¾Œï¼Œé€šå¸¸æœƒå‚³è‡³å¾Œç«¯é€²è¡Œç™»å…¥æˆ–è¨˜éŒ„ä½¿ç”¨è€…ï¼Œå†ç”¢ç”Ÿä½¿ç”¨æ–¼ç¶²ç«™çš„ Tokenã€Cookie æˆ– Session ç­‰ï¼Œä»¥ä¾›å¾ŒçºŒçš„ç¶²ç«™é©—è­‰åšä½¿ç”¨ã€‚</p><p>æˆ‘å€‘å¯ä½¿ç”¨ <a class=link href=https://github.com/googleapis/google-auth-library-nodejs target=_blank rel=noopener>google-auth-library</a> æ–¼å¾Œç«¯é€²è¡Œä¸€ç³»åˆ—çš„é©—è­‰æˆ–å–å¾—ä½¿ç”¨è€…è³‡è¨Šã€‚</p><p>å®‰è£ <a class=link href=https://github.com/googleapis/google-auth-library-nodejs target=_blank rel=noopener>google-auth-library</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D google-auth-library
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add -D google-auth-library</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å°±èƒ½ä¾ç…§ä¸åŒçš„ç™»å…¥æ–¹å¼å–å¾—çš„ <code>Credential</code>ã€<code>Access Token</code> æˆ– <code>Auth Code</code> é€è‡³å¾Œç«¯åšé©—è­‰ã€‚</p><h4 id=é©—è­‰-access-token>é©—è­‰ Access Token</h4><p>æ–°å¢ä¸€å€‹ Server APIï¼Œåªæ¥å— POST æ–¹æ³•ï¼Œåœ¨ Body ä¸­å¤¾å¸¶ <code>accessToken</code> ç™¼é€è‡³å¾Œç«¯ã€‚</p><p>å»ºç«‹ <strong>./server/api/auth/google.post.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapiauthgooglepostjs>server/api/auth/google.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OAuth2Client</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;google-auth-library&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>readBody</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>oauth2Client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OAuth2Client</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>setCredentials</span><span class=p>({</span> <span class=nx>access_token</span><span class=o>:</span> <span class=nx>body</span><span class=p>.</span><span class=nx>accessToken</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>oauth2Client</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>request</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;https://www.googleapis.com/oauth2/v3/userinfo&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>revokeCredentials</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>userInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>createError</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusMessage</span><span class=o>:</span> <span class=s1>&#39;Invalid token&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>sub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>avatar</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>picture</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>emailVerified</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email_verified</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>èª¿æ•´å…ƒä»¶å…§çš„ç™»å…¥æµç¨‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>googleTokenLogin</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue3-google-login&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>googleClientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=kr>public</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleGoogleLogin</span> <span class=o>=</span> <span class=nx>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>accessToken</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>googleTokenLogin</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientId</span><span class=o>:</span> <span class=nx>GOOGLE_CLIENT_ID</span>
</span></span><span class=line><span class=cl>  <span class=p>}).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=o>?</span><span class=p>.</span><span class=nx>access_token</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>accessToken</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;ç™»å…¥å¤±æ•—&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/auth/google&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>body</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>accessToken</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>initialCache</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>userInfo</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘ä½¿ç”¨ Google OAuth ç™»å…¥æˆåŠŸå¾Œï¼Œæœƒå–å¾— <strong>Access Token</strong>ï¼Œä¸¦å°‡å…¶å‚³è‡³ Server APIï¼Œ<code>/api/auth/google</code> æ¥æ”¶ <strong>Access Token</strong> ä¸¦ä½¿ç”¨ Google API å–å¾—ä½¿ç”¨è€…çš„è³‡è¨Šï¼Œæœ€å¾Œå›å‚³çµ¦å‰ç«¯ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618245256_903381f8c0_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=é©—è­‰-credential>é©—è­‰ Credential</h4><p>åœ¨å…ƒä»¶ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨çš„ç™»å…¥æ–¹å¼å¦‚æœæ˜¯ <code>Google æ¸²æŸ“çš„é è¨­æŒ‰éˆ•</code>æˆ– <code>One Tap prompt</code>ï¼Œå›å‚³å€¼å°±æœƒåŒ…å« <code>Credential</code>ï¼Œæˆ‘å€‘å°‡å°±å¯ä½¿ç”¨ä¸‹é¢ä¿®æ”¹å¾Œçš„ Server API é€²è¡Œé©—è­‰ã€‚</p><p><strong>server/api/auth/google.post.js</strong> å…§å®¹ä¿®æ”¹ç‚ºå¦‚ä¸‹ï¼š</p><h5 id=serverapiauthgooglepostjs-1>server/api/auth/google.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OAuth2Client</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;google-auth-library&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>readBody</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>oauth2Client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OAuth2Client</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>ticket</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>verifyIdToken</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>idToken</span><span class=o>:</span> <span class=nx>body</span><span class=p>.</span><span class=nx>credential</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>payload</span> <span class=o>=</span> <span class=nx>ticket</span><span class=p>.</span><span class=nx>getPayload</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>payload</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>createError</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusMessage</span><span class=o>:</span> <span class=s1>&#39;Invalid token&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>payload</span><span class=p>.</span><span class=nx>sub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=nx>payload</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>avatar</span><span class=o>:</span> <span class=nx>payload</span><span class=p>.</span><span class=nx>picture</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>payload</span><span class=p>.</span><span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>emailVerified</span><span class=o>:</span> <span class=nx>payload</span><span class=p>.</span><span class=nx>email_verified</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=é©—è­‰-auth-code>é©—è­‰ Auth Code</h4><p>æˆ‘å€‘ä½¿ç”¨çš„ç™»å…¥æ–¹å¼å¦‚æœæ˜¯å‘¼å« <strong>vue3-google-login</strong> çš„ <code>googleAuthCodeLogin()</code>ï¼Œå›å‚³å€¼å°±æœƒåŒ…å« <code>Auth Code</code>ï¼Œæˆ‘å€‘å°±å¯ä½¿ç”¨ä¸‹é¢ä¿®æ”¹å¾Œçš„ Server API é€²è¡Œé©—è­‰ã€‚</p><p><strong>server/api/auth/google.post.js</strong> å…§å®¹ä¿®æ”¹ç‚ºå¦‚ä¸‹ï¼š</p><h5 id=serverapiauthgooglepostjs-2>server/api/auth/google.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OAuth2Client</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;google-auth-library&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>readBody</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>oauth2Client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OAuth2Client</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientId</span><span class=o>:</span> <span class=s1>&#39;ä½ çš„ Google Client ID&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientSecret</span><span class=o>:</span> <span class=s1>&#39;ä½ çš„ Google Client Secret&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>redirectUri</span><span class=o>:</span> <span class=s1>&#39;ä½ çš„ Google Redirect Uri&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=p>{</span> <span class=nx>tokens</span> <span class=p>}</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>getToken</span><span class=p>(</span><span class=nx>body</span><span class=p>.</span><span class=nx>authCode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>client</span><span class=p>.</span><span class=nx>setCredentials</span><span class=p>({</span> <span class=nx>access_token</span><span class=o>:</span> <span class=nx>tokens</span><span class=p>.</span><span class=nx>access_token</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>oauth2Client</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>request</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;https://www.googleapis.com/oauth2/v3/userinfo&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>revokeCredentials</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>userInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>createError</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusMessage</span><span class=o>:</span> <span class=s1>&#39;Invalid token&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>sub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>avatar</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>picture</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>emailVerified</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email_verified</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ä»¥ä¸Šå¯¦ç¾äº†ä¸²æ¥ Google OAuth ç™»å…¥ï¼Œä¸¦å°‡ <code>Access Token</code> è³‡è¨Šç™¼é€è‡³å¾Œç«¯é€²è¡Œé©—è­‰ï¼Œå¤§å®¶å¯ä»¥åœ¨ä¾ç…§ä½¿ç”¨æƒ…å¢ƒè‡ªå·±æŒ‘é¸ç™»å…¥æ–¹å¼åŠé©—è­‰æ–¹å¼ï¼Œå¾ŒçºŒä¹Ÿèƒ½å°‡ä½¿ç”¨è€…è³‡è¨Šå„²å­˜åˆ°è³‡æ–™åº«ä¸­ï¼Œæœ‰äº†è³‡æ–™åº«æˆ‘å€‘å°±èƒ½ä¾ç…§ä½¿ç”¨è€…è³‡è¨Šï¼Œä¾†æ¯”å°è³‡æ–™åº«é€²è¡Œè¨»å†Šã€é©—è­‰ç™»å…¥åŠç”¢ç”Ÿå¾ŒçºŒçš„ Session æˆ– Cookie ç­‰ã€‚</p><hr><h2 id=cookie-çš„è¨­ç½®èˆ‡-jwt-çš„æ­é…>Cookie çš„è¨­ç½®èˆ‡ JWT çš„æ­é…</h2><p>Cookie åœ¨ç€è¦½ç¶²ç«™æ™‚å¤šæœƒä½¿ç”¨åˆ°ï¼Œä¸è«–æ˜¯ç”¨ä¾†å„²å­˜è‡¨æ™‚çš„è³‡è¨Šæˆ–æ˜¯è¾¨è­˜ä½¿ç”¨è€…ç­‰ï¼Œé€™ä¸€å€‹å„²å­˜åœ¨ç€è¦½å™¨çš„ä¸€å°æ®µæ–‡å­—è³‡æ–™ï¼Œæœƒåœ¨æ¯æ¬¡ç™¼é€ HTTP è«‹æ±‚æ™‚è‡ªå‹•å¤¾å¸¶ï¼Œæ‰€ä»¥ Cookie æœ€å¸¸è¦‹çš„ç”¨é€”å°±åŒ…å«äº†ç™»å…¥ç‹€æ…‹ã€é©—è­‰èº«ä»½ç­‰ã€‚</p><p>ä»¥ä¸‹å°‡è¬›è¿°åœ¨ Nuxt 3 å¦‚ä½•è¨­ç½® Cookieï¼Œä¸¦çµåˆ JWT (JSON Web Token) ä¾†åšä¸€å€‹å¯¦éš›ä½¿ç”¨è€…é©—è­‰ã€‚</p><h3 id=nuxt-3-cookie-çš„è¨­ç½®æ–¹å¼>Nuxt 3 Cookie çš„è¨­ç½®æ–¹å¼</h3><h4 id=usecookie>useCookie</h4><p>Nuxt 3 æä¾›äº†ä¸€å€‹çµ„åˆå¼å‡½æ•¸ <code>useCookie()</code> ä¾†è®“æˆ‘å€‘å¯ä»¥è®€å¯« Cookieï¼Œä¸¦ä¸”å°æ–¼ SSR ä¹Ÿæœ‰æ”¯æ´ï¼Œåœ¨é é¢ã€å…ƒä»¶æˆ–æ’ä»¶ä¸­ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ <code>useCookie()</code> ä¾†å»ºç«‹ä¸€å€‹ cookie å…·æœ‰éŸ¿æ‡‰æ€§çš„åƒè€ƒã€‚</p><p>ä½¿ç”¨æ–¹å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>cookie</span> <span class=o>=</span> <span class=nx>useCookie</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>options</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>name</strong>ï¼šå°æ‡‰çš„å°±æ˜¯ cookie çš„ keyã€‚</li><li><strong>options</strong>ï¼šå‚³å…¥ä¸€å€‹ç‰©ä»¶ä¾†è¨­ç½®å¤šå€‹ cookie å±¬æ€§ï¼š<ul><li><strong>maxAge</strong>ï¼šæŒ‡å®š <code>Max-Age</code> å±¬æ€§çš„å€¼ï¼Œå–®ä½æ˜¯ç§’ã€‚å¦‚æœæ²’æœ‰è¨­ç½®ï¼Œå‰‡é€™å€‹ cookie å°‡æœƒæ˜¯ Session Onlyï¼Œæ„å³ç¶²é é—œé–‰å¾Œå°±æœƒæ¶ˆå¤±ã€‚</li><li><strong>expires</strong>ï¼šæŒ‡å®šä¸€å€‹ Date ç‰©ä»¶ä¾†ä½œç‚ºéæœŸçš„æ™‚é–“ï¼Œé€šå¸¸æ˜¯è¦ç›¸å®¹æ¯”è¼ƒèˆŠçš„ç€è¦½å™¨åšä½¿ç”¨ï¼Œå¦‚æœ <strong>maxAge</strong> èˆ‡ <strong>expires</strong> å±¬æ€§éƒ½æœ‰è¨­å®šï¼Œå‰‡éæœŸæ™‚é–“æ‡‰è©²è¦è¨­å®šç‚ºä¸€æ¨£ã€‚</li><li><strong>httpOnly</strong>ï¼šæ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œé è¨­ç‚º <code>false</code>ï¼Œç•¶è¨­ç½®ç‚º <code>true</code> æ™‚ï¼Œè¡¨ç¤ºå®¢æˆ¶ç«¯çš„ JavaScript å°‡ç„¡æ³•ä½¿ç”¨ <code>document.cookie</code> ä¾†æŸ¥çœ‹é€™å€‹ cookieã€‚é€šå¸¸æ˜¯æ¯”è¼ƒæ•æ„Ÿæˆ–æ©Ÿå¯†çš„è¨Šæ¯ï¼Œå¦‚ Token æˆ– Session Id æœƒè¨­å®šç‚º <code>true</code>ï¼Œåªè®“ç€è¦½å™¨ç™¼å‡ºè«‹æ±‚æ™‚è‡ªå‹•å¤¾å¸¶ã€‚</li><li><strong>secure</strong>ï¼šæ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œé è¨­ç‚º <code>false</code>ï¼Œç•¶è¨­ç½®ç‚º <code>true</code> æ™‚ç€è¦½å™¨å¾—æ˜¯ HTTPS çš„åŠ å¯†å‚³è¼¸å”å®šçš„æƒ…å¢ƒä¸‹ï¼Œæ‰æœƒè‡ªå‹•å¤¾å¸¶é€™å€‹ cookieã€‚</li><li><strong>domain</strong>ï¼šæŒ‡å®š cookie å¯ä»¥é©ç”¨çš„ Domainï¼Œé€šå¸¸æœƒä¿æŒé è¨­ï¼Œè¡¨ç¤ºé©ç”¨æ–¼è‡ªå·±çš„ Domain ä¹‹ä¸‹ã€‚</li><li><strong>path</strong>ï¼šæŒ‡å®š cookie é©ç”¨çš„è·¯å¾‘ã€‚</li><li><strong>sameSite</strong>ï¼šç‚ºä¸€å€‹å¸ƒæ—å€¼æˆ–æ˜¯å­—ä¸²ï¼Œç”¨æ–¼è¨­å®š<a class=link href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite target=_blank rel=noopener>å®‰å…¨ç­–ç•¥</a>ã€‚</li><li><strong>encode</strong>ï¼šç”±æ–¼ cookie çš„å€¼åªèƒ½ä½¿ç”¨æœ‰é™çš„å­—å…ƒé›†ï¼Œæ‰€ä»¥é€™å€‹è¨­ç½®å¯ä»¥å°‡ cookie ç·¨ç¢¼æˆåˆæ³•çš„å­—ä¸²å€¼ï¼Œé è¨­çš„ç·¨ç¢¼æ˜¯ä½¿ç”¨ <code>JSON.stringify</code> + <code>encodeURIComponent()</code>ã€‚</li><li><strong>decode</strong>ï¼šcookie æœƒç¶“éä¸€å€‹è§£ç¢¼çš„éç¨‹ï¼Œé è¨­çš„è§£ç¢¼æ˜¯ä½¿ç”¨ <code>decodeURIComponent</code> + <code>destr</code>ã€‚</li><li><strong>default</strong>ï¼šç‚ºä¸€å€‹å‡½æ•¸ï¼Œå¯ä»¥ç”¨æ–¼å›å‚³ cookie çš„é è¨­å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å›å‚³ä¸€å€‹ <code>Ref</code>ã€‚</li></ul></li></ul><p>èˆ‰å€‹ä¾‹å­ï¼Œæ–°å¢ <strong>pages/cookie.vue</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=pagescookievue>pages/cookie.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;w-full max-w-md&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h2</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 text-center text-3xl font-bold tracking-tight text-gray-700&#34;</span><span class=p>&gt;</span><span class=nx>Cookie</span><span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 flex w-full max-w-md flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 w-fit rounded-sm bg-emerald-500 py-2 px-4 text-sm text-white hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;setNameCookie&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>è¨­ç½®</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 flex&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>label</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-lg font-semibold text-emerald-500&#34;</span><span class=p>&gt;</span><span class=nx>name</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ml-2 flex text-lg text-slate-700&#34;</span><span class=p>&gt;{{</span> <span class=nx>name</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 flex w-full max-w-md flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>          <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 w-fit rounded-sm bg-emerald-500 py-2 px-4 text-sm text-white hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;setCounterCookie&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>è¨­ç½®</span> <span class=nx>counter</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 flex&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>label</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-lg font-semibold text-emerald-500&#34;</span><span class=p>&gt;</span><span class=nx>counter</span><span class=o>:</span><span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ml-2 flex text-lg text-slate-700&#34;</span><span class=p>&gt;{{</span> <span class=nx>counter</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>name</span> <span class=o>=</span> <span class=nx>useCookie</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counter</span> <span class=o>=</span> <span class=nx>useCookie</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>60</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>setNameCookie</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=s1>&#39;Ryan&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>setCounterCookie</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°±å¯ä»¥è¨­ç½®ä¸€å€‹åªæœ‰ç›®å‰ç¶²é æœ‰æ•ˆçš„ cookie åç‚º <code>name</code> åŠä¸€å€‹éæœŸæ™‚é–“ç‚º 60 ç§’å¾Œçš„ <code>counter</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618245241_9307ee8408_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä¼ºæœå™¨ç«¯ä½¿ç”¨-getcookie-èˆ‡-setcookie>ä¼ºæœå™¨ç«¯ä½¿ç”¨ getCookie èˆ‡ setCookie</h3><p>ä½ å¯ä»¥åœ¨ä¼ºæœå™¨ç«¯ä½¿ç”¨ <code>getCookie()</code> ä¾†å–å¾—å‰ç«¯å¤¾å¸¶éä¾†çš„ cookieï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>setCookie</code> ä¾†è¨­ç½® cookie å›æ‡‰çµ¦å‰ç«¯ã€‚</p><p>èˆ‰å€‹ä¾‹å­ï¼Œæ–°å¢ <strong>server/api/coookie.js</strong>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=serverapicoookiejs>server/api/coookie.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>counter</span> <span class=o>=</span> <span class=nx>getCookie</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=s1>&#39;counter&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>counter</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span> <span class=o>||</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>setCookie</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=nx>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=nx>counter</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶å‰ç«¯æ‰“ <code>/api/cookie</code> é€™éš» Server API æ™‚ï¼Œå°±æœƒè‡ªå‹•å¤¾å¸¶ç€è¦½å™¨ä¸­çš„ cookieï¼Œä¼ºæœå™¨ç«¯æ”¶åˆ°è«‹æ±‚è§£æ cookie å¾Œå¾—åˆ° <code>counter</code>ï¼Œå°‡å…¶è½‰ç‚ºæ•¸å€¼æˆ–é è¨­ç‚º 0 å¾Œå¢åŠ  1ï¼Œå†é‡æ–°è¨­å®šå›å»çµ¦å‰ç«¯ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618682865_832fc7b792_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=ä½¿ç”¨-cookie-åšä½¿ç”¨è€…é©—è­‰>ä½¿ç”¨ Cookie åšä½¿ç”¨è€…é©—è­‰</h3><p>æˆ‘å€‘å¯ä»¥å°‡ Cookie çš„é‹ä½œæ©Ÿåˆ¶æ‡‰ç”¨åœ¨æœƒå“¡ç³»çµ±ç•¶ä¸­ï¼Œä½¿ç”¨è€…ç™»å…¥æˆåŠŸå¾Œï¼Œå¾Œç«¯ç”¢ç”Ÿçš„ Token æˆ– Session å›å‚³ä¸¦å„²å­˜åœ¨ä½¿ç”¨è€…çš„ç€è¦½å™¨ä¸­ï¼Œä¹‹å¾Œçš„è«‹æ±‚å°‡æœƒè‡ªå‹•å¤¾å¸¶å¯ä»¥è¾¨è­˜å‡ºä½¿ç”¨è€…çš„ cookieï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨å¾Œç«¯è§£ææˆ–æ¯”å° cookie ä¾†é©—è­‰ä½¿ç”¨è€…çš„è³‡è¨Šï¼Œä¸¦ä¾ç…§ç­–ç•¥çµ¦äºˆä¸åŒçš„è™•ç†é‚è¼¯ã€‚</p><p>æˆ‘å€‘å»¶çºŒä¸Šè¿°çš„<a class=link href=#%e4%b8%b2%e6%8e%a5-google-oauth-%e7%99%bb%e5%85%a5>ä½¿ç”¨ Google OAuth ç™»å…¥</a>ï¼Œæˆ‘å€‘å¯ä»¥åœ¨å¾Œç«¯å¯¦ä½œç”¢ç”Ÿæˆ‘å€‘è‡ªå·±ç³»çµ±ä½¿ç”¨çš„ Tokenï¼Œä¸¦è¨­ç½®åœ¨ <code>access_token</code> é€™å€‹ cookie ä¹‹ä¸­ï¼Œå¾Œç«¯å¯ä»¥å¯«å¦‚ä¸‹ç¨‹å¼ç¢¼ï¼Œä¾†è¨­ç½® <code>httpOnly</code> åŠ <code>maxAge</code> éæœŸæ™‚é–“ç­‰åƒæ•¸ã€‚</p><h5 id=serverapiauthgooglepostjs-3>server/api/auth/google.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=nx>setCookie</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=s1>&#39;access_token&#39;</span><span class=p>,</span> <span class=nx>accessToken</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>httpOnly</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>maxAge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>expires</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>expires</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>secure</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>===</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘ä½¿ç”¨ <a class=link href=https://github.com/auth0/node-jsonwebtoken target=_blank rel=noopener>jsonwebtoken</a> ç”¢ç”Ÿ JWTï¼Œè£¡é¢çš„ Payload æ”¾ç½®äº†ä½¿ç”¨è€…è³‡è¨Šï¼Œå…¶ä¸­ <code>jwtSignSecret</code> ä½œç‚ºæ ¸ç™¼ JWT çš„ç°½ç½²é‡‘é‘°ï¼Œæˆ‘å€‘å®šç¾©åœ¨ <code>nuxt.config.ts</code> ä¸­çš„ <code>runtimeConfig.jwtSignSecret</code>ã€‚</p><p>å®‰è£ <a class=link href=https://github.com/auth0/node-jsonwebtoken target=_blank rel=noopener>jsonwebtoken</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install jsonwebtoken
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn add jsonwebtoken</span>
</span></span></code></pre></td></tr></table></div></div><p>å®Œæ•´çš„ <strong>./server/api/auth/google.post.js</strong> ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p><h5 id=serverapiauthgooglepostjs-4>server/api/auth/google.post.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OAuth2Client</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;google-auth-library&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>jwt</span> <span class=nx>from</span> <span class=s1>&#39;jsonwebtoken&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>readBody</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>oauth2Client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OAuth2Client</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>setCredentials</span><span class=p>({</span> <span class=nx>access_token</span><span class=o>:</span> <span class=nx>body</span><span class=p>.</span><span class=nx>accessToken</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>oauth2Client</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>request</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;https://www.googleapis.com/oauth2/v3/userinfo&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>oauth2Client</span><span class=p>.</span><span class=nx>revokeCredentials</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>userInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>createError</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusMessage</span><span class=o>:</span> <span class=s1>&#39;Invalid token&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>jwtTokenPayload</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>sub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>nickname</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>maxAge</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>24</span> <span class=o>*</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>expires</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>/</span> <span class=mi>1000</span><span class=p>)</span> <span class=o>+</span> <span class=nx>maxAge</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>jwtToken</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>exp</span><span class=o>:</span> <span class=nx>expires</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=o>:</span> <span class=nx>jwtTokenPayload</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>runtimeConfig</span><span class=p>.</span><span class=nx>jwtSignSecret</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>setCookie</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=s1>&#39;access_token&#39;</span><span class=p>,</span> <span class=nx>jwtToken</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>httpOnly</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>maxAge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>expires</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nx>expires</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>secure</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>===</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>nickname</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>avatar</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>picture</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>JWT åœ¨æ ¸ç™¼æ™‚ä½¿ç”¨çš„åŠ å¯†é‡‘é‘°ï¼Œå»ºè­°ä½¿ç”¨éå°ç¨±å¼çš„é‡‘é‘°é€²è¡ŒåŠ å¯†ï¼Œé€™é‚Šåƒ…æ˜¯ç‚ºäº†ç¯„ä¾‹å±•ç¤ºæ–¹ä¾¿è€Œä½¿ç”¨ç›¸åŒçš„ Secret é€²è¡ŒåŠ è§£å¯†ã€‚</p></blockquote><p>æ¥è‘—ï¼Œæˆ‘å€‘å¯ä»¥å¯¦ä½œä¸€å€‹ Server APIï¼Œ<strong>./server/api/whoami.js</strong> ä¾†å¾ cookie å¾—åˆ° <code>access_token</code>ï¼Œå†ç”¨ <code>jwt.verify()</code> æ–¹æ³•ï¼Œä¾†é©—è­‰ JTW å¾Œçš„åˆ°ä½¿ç”¨è€…è³‡è¨Šã€‚</p><h5 id=serverapiwhoamijs>server/api/whoami.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>jwt</span> <span class=nx>from</span> <span class=s1>&#39;jsonwebtoken&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>runtimeConfig</span> <span class=o>=</span> <span class=nx>useRuntimeConfig</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineEventHandler</span><span class=p>((</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>jwtToken</span> <span class=o>=</span> <span class=nx>getCookie</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=s1>&#39;access_token&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>userInfo</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>jwtToken</span><span class=p>,</span> <span class=nx>runtimeConfig</span><span class=p>.</span><span class=nx>jwtSignSecret</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>nickname</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>nickname</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>email</span><span class=o>:</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>email</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>createError</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>401</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusMessage</span><span class=o>:</span> <span class=s1>&#39;Unauthorized&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘åœ¨å‰ç«¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>/api/whoami</code> é€™éš» API ä¾†å¾—åˆ°ä½¿ç”¨è€…çš„è³‡è¨Šå›‰ï¼</p><p><img src=https://live.staticflickr.com/65535/52618515934_2af8149c8f_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä¸Šåœ–çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>å‰å¾€ç™»å…¥é é¢ï¼Œä¸¦ä½¿ç”¨ Google é€²è¡Œç™»å…¥</li><li>ç™»å…¥æˆåŠŸå¾Œï¼Œæ‰“ <strong>/api/auth/google</strong> APIï¼ŒBody å¤¾å¸¶ Google OAuth å›å‚³çš„ <code>access_token</code>ã€‚</li><li><strong>/api/auth/google</strong> API å›å‚³å¾Œç«¯ç”¢ç”Ÿçš„æ™‚æ•ˆä¸ƒå¤©çš„ JWTï¼Œä¸¦è¨­ç½®æ–¼ cookie çš„ <code>access_token</code>ï¼Œä¸¦å°‡å‰ç«¯é é¢å°èˆªè‡³ <strong>/whoami</strong> é é¢ã€‚</li><li>åœ¨ <strong>/whoami</strong> é é¢ï¼Œé»æ“Šã€Œ<strong>æ‰“ /api/whoami API</strong>ã€æŒ‰éˆ•ï¼Œé€å‡º <strong>/api/whoami</strong> API è«‹æ±‚ï¼Œç€è¦½å™¨æœƒè‡ªå‹•å¤¾å¸¶ cookie è‡³å¾Œç«¯ã€‚</li><li>å¾Œç«¯ API <strong>/api/whoami</strong> æ”¶åˆ°è«‹æ±‚å¾Œï¼Œå¾ cookie ä¸­è§£æå‡º <code>access_token</code> çš„å€¼ï¼Œä¸¦é©—è­‰è§£æå‡º JWT å…§å«çš„ä½¿ç”¨è€…è³‡è¨Šï¼Œä¸¦å°‡å…¶å›å‚³è‡³å‰ç«¯æ¸²æŸ“ã€‚</li></ol><p><strong>pages/whoami.vue</strong> å®Œæ•´ç¨‹å¼ç¢¼ï¼š</p><h5 id=pageswhoamivue>pages/whoami.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;w-full max-w-md&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h2</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 text-center text-3xl font-bold tracking-tight text-gray-700&#34;</span><span class=p>&gt;</span><span class=nx>æˆ‘æ˜¯èª°</span><span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-6 flex w-full max-w-md flex-col items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>button</span>
</span></span><span class=line><span class=cl>        <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-2 w-fit rounded-sm bg-emerald-500 py-2 px-4 text-sm text-white hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nt>@click</span><span class=s>=&#34;whoami&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>æ‰“</span> <span class=o>/</span><span class=nx>api</span><span class=o>/</span><span class=nx>whoami</span> <span class=nx>API</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=nt>v-if</span><span class=s>=&#34;userInfo&#34; class=&#34;mt-8 flex w-full max-w-md flex-col&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s>      &lt;div v-for=&#34;key in Object.keys(userInfo)&#34; :key=&#34;key&#34; class=&#34;mt-1 flex flex-wrap break-all&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s>        &lt;label class=&#34;text-lg font-semibold text-emerald-500&#34;&gt; {{ key }}:&lt;/label&gt;
</span></span></span><span class=line><span class=cl><span class=s>        &lt;span class=&#34;ml-2 flex flex-1 text-lg text-slate-700&#34;</span><span class=p>&gt;{{</span> <span class=na>userInfo</span><span class=err>[</span><span class=na>key</span><span class=err>]</span> <span class=p>}}&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>whoami</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/whoami&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>userInfo</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ï¼Œæˆ‘å€‘å°±å¯¦ä½œå‡ºä¸€å€‹ Google OAuth çš„ç™»å…¥åŠé©—è­‰æ©Ÿåˆ¶ï¼Œå¾ŒçºŒå¯ä»¥å†å°‡é€™äº›è³‡è¨Šå„²å­˜è‡³è³‡æ–™åº«ä¹‹ä¸­åšå¾ŒçºŒçš„ä½¿ç”¨ã€‚</p><p>é€™å€‹ç¯„ä¾‹çš„å®Œæ•´ç¨‹å¼ç¢¼å¯ä»¥åƒè€ƒ <a class=link href=https://github.com/wjdesign/ithome-2022-ironman-nuxt3/tree/day20/nuxt-app-whoami target=_blank rel=noopener>Nuxt 3 - ä½¿ç”¨ Cookie èˆ‡ JWT åšä½¿ç”¨è€…é©—è­‰</a></p><p>å°æé†’ï¼Œå¦‚æœæ˜¯åœ¨ä¼ºæœå™¨ç«¯æ‰“ APIï¼Œå¯ä»¥ä½¿ç”¨ <a class=link href=https://nuxt.com/docs/api/composables/use-request-headers target=_blank rel=noopener>useRequestHeaders</a> å°±å¯ä»¥å¾ä¼ºæœå™¨ç«¯è¨ªå•å’Œä»£ç† cookie åˆ° APIã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>userInfo</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>await</span> <span class=nx>useFetch</span><span class=p>(</span><span class=s1>&#39;/api/whoami&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>headers</span><span class=o>:</span> <span class=nx>useRequestHeaders</span><span class=p>([</span><span class=s1>&#39;cookie&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=cookielocalstoragetoken-èˆ‡-jwt>Cookieã€LocalStorageã€Token èˆ‡ JWT</h3><p>åœ¨åšä½¿ç”¨è€…é©—è­‰çš„æ™‚å€™ï¼ŒCookieã€LocalStorageã€Token èˆ‡ JWT æ˜¯å€‹é‡è¦çš„æ¦‚å¿µï¼Œé€™é‚Šç¨å¾®ç°¡è¿°ä¸€ä¸‹ä¹‹é–“çš„å·®ç•°èˆ‡ä½¿ç”¨æƒ…å¢ƒã€‚</p><h4 id=cookie>Cookie</h4><p>é€šå¸¸æ¡ç”¨ Cookie ä¾†é©—è­‰ä½¿ç”¨è€…æ™‚ï¼Œç•¶ä½¿ç”¨è€…ç™»å…¥æˆåŠŸï¼Œæœƒç”±ä¼ºæœå™¨ç«¯ç”¢ç”Ÿä¸€çµ„ cookie ä¾†ç•¶ä½œå¾ŒçºŒé©—è­‰ä½¿ç”¨çš„ä¾æ“šï¼Œé€™å€‹ä¾æ“šæœƒæ˜¯ä¸€å€‹å­—ä¸²å½¢å¼ï¼Œç€è¦½å™¨æ¯æ¬¡ç™¼é€è«‹æ±‚æ™‚æœƒ<code>è‡ªå‹•å¤¾å¸¶</code>ç¬¦åˆ Domainã€è·¯å¾‘è¨­å®šç­‰çš„ cookieï¼Œä¼ºæœå™¨ç«¯å°±å¯ä»¥ä¾æ“š cookie ä¾†è§£æé©—è­‰é€™å€‹å­—ä¸²æ‰€ä»£è¡¨çš„æ¶µæ„ï¼Œä¾‹å¦‚æ˜¯ä¸æ˜¯åŒ¹é…ä»£è¡¨æŸä½ä½¿ç”¨è€…å­—ä¸²ã€‚</p><p>å¦‚åŒå‰é¢çš„ä¾‹å­ï¼Œæˆ‘å€‘å°‡ä¸€çµ„èƒ½å¤ ä»£è¡¨ <strong>Ryan</strong> çš„ JWT ç”±ç™»å…¥å¾Œç”¢ç”Ÿï¼Œä¸¦åœ¨å¾ŒçºŒè«‹æ±‚ä¸­å¤¾å¸¶ï¼Œä»¥é”åˆ°é©—è­‰ä½¿ç”¨è€…çš„æ•ˆæœã€‚</p><p>é€™ä¸²å­—ä¸²ï¼Œä¸ä¸€å®šæ˜¯è¦ JWTï¼Œåªè¦ä¼ºæœå™¨ç«¯èƒ½å›æ¨æˆ–å¾è³‡æ–™åº«æ¯”å°å‡ºæ‰€ä»£è¡¨çš„ä½¿ç”¨è€…æˆ–ç‰¹å®šè³‡è¨Šï¼Œé‚£éº¼ä¹Ÿå¯ä»¥æ˜¯éš¨æ„ç”¢ç”Ÿçš„å­—ä¸²ã€‚</p><h4 id=localstorage>LocalStorage</h4><p>LocalStorage æ˜¯ç¾ä»Šç€è¦½å™¨åŸºæœ¬ä¸Šéƒ½æ”¯æ´çš„ä¸€å€‹å„²å­˜ç©ºé–“ï¼ŒåŒæ¨£å…·æœ‰ Domain çš„å¯«å…¥èˆ‡è®€å–çš„æ¦‚å¿µï¼Œåœ¨ cookie æˆ‘å€‘æœ€å¤šåªèƒ½å„²å­˜ <strong>4KB</strong> å·¦å³çš„å­—ä¸²è³‡æ–™ï¼Œä½†æ˜¯åœ¨ LocalStorage é€šå¸¸æœ‰ <code>5MB</code> æ‰€ä»¥èƒ½å¤ å„²å­˜æ›´å¤šçš„è³‡è¨Šã€‚</p><p>ä¹Ÿæœ‰ç¶²ç«™æœƒæŠŠé©—è­‰ä½¿ç”¨è€…çš„ Token æˆ–æ†‘è­‰ä¾æ“šå„²å­˜åœ¨ LocalStorageï¼Œä¹‹å¾Œç™¼é€è«‹æ±‚æˆ–éœ€è¦æ™‚å†å¾ä¸­æ‹¿å–å‡ºä¾†ä¸¦æ‰‹å‹•å¤¾å¸¶å‡ºå»ï¼ŒåŒæ¨£ä¹Ÿå¯ä»¥å¯¦ä½œå‡ºé©—è­‰ä½¿ç”¨è€…çš„æµç¨‹ã€‚</p><p>åœ¨ç€è¦½å™¨çš„å„²å­˜ç©ºé–“ï¼Œé‚„æœ‰ä¸€å€‹ SessionStorageï¼Œå„²å­˜åœ¨é€™è£¡é¢çš„è³‡æ–™ï¼Œç•¶ç¶²é é—œé–‰æ™‚ï¼Œå°±æœƒè‡ªå‹•æ¸…é™¤ã€‚èˆ‡ LocalStorage ä¸åŒï¼Œé™¤éæ‰‹å‹•æˆ–ä½¿ç”¨ JS æ¸…é™¤ï¼Œä¸ç„¶è³‡æ–™æ°¸é å­˜åœ¨ï¼Œä¹Ÿä¸æœƒæœ‰éæœŸæ™‚é–“ã€‚</p><h4 id=token>Token</h4><p>ç”¨æ–¼æä¾›çµ¦ä½¿ç”¨è€…å¾ŒçºŒå¤¾å¸¶çµ¦å¾Œç«¯çš„æ†‘æ“šï¼Œç›¸ç•¶æ–¼ä¸€å€‹èº«åˆ†è­‰ï¼ŒToken é€šå¸¸ç”±å­—ä¸²çµ„æˆï¼Œä¸”éœ€è¦å¤ é•·ä¸å®¹æ˜“è¢«æš´åŠ›å˜—è©¦ç ´è§£ï¼ŒToken å­—ä¸²é€šå¸¸ä¸å…·æœ‰ä»»ä½•æ„ç¾©ï¼Œç›´è‡³å¾Œç«¯èˆ‡è³‡æ–™åº«æˆ–å…¶ä»–æ–¹å¼æ¯”å°å¾Œï¼Œæœƒå°æ‡‰å‡º Token æ‰€ä»£è¡¨çš„æ„ç¾©ï¼Œä¾‹å¦‚ä½¿ç”¨è€…è³‡è¨Šã€‚</p><p>é€šå¸¸è«‹æ±‚å¤¾å¸¶çš„ Tokenï¼Œéœ€è¦æ¯æ¬¡å¾€å¿«å–æˆ–è³‡æ–™åº«åšæ¯”å°ï¼Œæ‰èƒ½çŸ¥é“ Token æ‰€ä»£è¡¨çš„ä½¿ç”¨è€…ã€‚</p><h4 id=jwtjson-web-token>JWT(JSON Web Token)</h4><p>JWT æ˜¯ä¸€ç¨®é–‹æ”¾çš„æ¨™æº– <a class=link href=https://www.rfc-editor.org/rfc/rfc7519 target=_blank rel=noopener>RFC 7519</a>ï¼Œå¦‚åŒåå­— JWT æ˜¯åŸºæ–¼ JSON Object æ‰€ç·¨ç¢¼å‡ºä¾†çš„ï¼ŒJWT æ˜¯ç”±ä¸‰å€‹éƒ¨åˆ† <code>Header</code>ã€<code>Payload</code> åŠ <code>Signature</code> çµ„åˆè€Œæˆã€‚</p><p>å…¶ä¸­æœ€å¤§çš„ç‰¹è‰²å°±æ˜¯ <code>Payload</code> é€™å€‹éƒ¨åˆ†ï¼Œç•¶å¾Œç«¯ä¼ºæœå™¨æ”¶åˆ° JWT æ™‚ï¼Œå¯ä»¥å¾ <code>Payload</code> è§£æå‡ºç•¶åˆç°½ç™¼ JWT æ‰€åŒ…å«çš„è³‡è¨Šï¼Œé€šå¸¸æœƒåœ¨ <code>Payload</code> æ”¾ç½®ä½¿ç”¨è€…çš„ç›¸é—œè³‡æ–™ï¼Œå¦‚ Idã€å§“åæˆ–ä¿¡ç®±ç­‰ï¼Œå› ç‚ºé€™å€‹ç‰¹è‰²æˆ‘å€‘ä¸éœ€è¦å†æ¯”å°å¿«å–æˆ–è³‡æ–™åº«ï¼Œå°±å¯ä»¥ç›´æ¥è§£æå‡ºä½¿ç”¨è€…è³‡æ–™ã€‚</p><p>è€Œ <code>Payload</code> é€™å€‹æ¬„ä½ï¼Œå› ç‚ºå¯ä»¥è¢«è§£ç¢¼å‡ºä¾†ï¼Œå†ä»»æ„çš„ä¿®æ”¹å¾Œé‡æ–°ç·¨ç¢¼ï¼Œæ‰€ä»¥æˆ‘å€‘å°±æœƒå€ŸåŠ© <code>Header</code> åŠ <code>Signature</code> é€™å…©å€‹éƒ¨åˆ†ï¼Œä¾†ç¢ºèªç•¶åˆåŠ å¯†çš„æ¼”ç®—æ³•åŠé©—è­‰ç°½ç« æ˜¯å¦ç¬¦åˆï¼Œä»¥é˜²æ­¢ <code>Payload</code> è¢«ä»»æ„çš„ç«„æ”¹ã€‚</p><h4 id=token-æˆ–-jwt-é¸å“ªä¸€å€‹>Token æˆ– JWT é¸å“ªä¸€å€‹ï¼Ÿ</h4><p>é€™å…©è€…ä¹‹é–“å„æœ‰å„ªç¼ºé»ï¼Œé›–ç„¶è‡ªç”¢ Token éœ€è¦æ¯æ¬¡æ¯”å°è³‡æ–™åº«ï¼Œä½†æ˜¯èƒ½æœ‰æ•ˆçš„è¨˜éŒ„ä½¿ç”¨è€… Token æ ¸ç™¼ä½¿ç”¨çš„ä½ç½®åŠè¨»éŠ·ç‰¹å®šçš„ Tokenï¼Œå› ç‚º JWT åœ¨ç°½ç™¼å¾Œï¼Œä¸€å®šå¾—ç­‰åˆ°éæœŸæ‰æœƒå¤±æ•ˆç„¡æ³•ä½¿ç”¨ï¼Œä¹Ÿå°±å°è‡´ JWT åœ¨æ ¸ç™¼ä¹‹å¾Œæ˜¯ç„¡æ³•è¨»éŠ·çš„ï¼Œé™¤éè‡ªå·±åœ¨å¯¦ä½œä¸€å€‹é»‘åå–®æˆ–ç™½åå–®çš„æ©Ÿåˆ¶ã€‚</p><p>å¯ä»¥ä¾æ“šä½¿ç”¨çš„æƒ…å¢ƒä¾†æ±ºå®š Token æˆ– JWTï¼Œåªè¦è¨˜å¾—ä½¿ç”¨ Token ä½œç‚ºè§£æ±ºæ–¹æ¡ˆï¼Œè¦ä¿è­‰ Token è¶³å¤ è¤‡é›œæˆ–éš¨æ©Ÿï¼Œä¸å®¹æ˜“è¢«æ¨æ¸¬æˆ–æš´åŠ›å˜—è©¦ï¼Œå¦‚æœçœŸçš„è¦ä½¿ç”¨æ¯”è¼ƒçŸ­çš„ Token ä¹Ÿç¢ºä¿éæœŸçš„æ™‚é–“ä¸è¦è¨­å®šå¤ªé•·ï¼Œè¦é »ç¹çš„æ›´æ›é€™çµ„ Token æˆ–æ·»åŠ å…¶ä»–é©—è­‰æ©Ÿåˆ¶ã€‚</p><p>è€Œ JWT çš„åˆ©æ–¼å¯ä»¥åŒ…å« Payloadï¼Œä¹Ÿåˆ‡è¨˜åœ¨å¾Œç«¯æ ¸ç™¼æ™‚ä¸è¦å°‡æ•æ„Ÿè³‡æ–™æˆ–å¯†é‘°å¤¾å¸¶åœ¨ Payload ä¹‹ä¸­ï¼Œå› ç‚º JWT çš„ Payload å°±ç®—ä¸çŸ¥é“åŠ å¯†çš„ç§é‘°é‚„æ˜¯å¯ä»¥è¢«è§£ç¢¼çš„ã€‚è€Œç°½ç™¼ JWT é¸æ“‡åŠ å¯†çš„æ–¹å¼ä¹Ÿç›¡é‡æ¡ç”¨éå°ç¨±å¼çš„å®¶å§å¯†ï¼Œä¾‹å¦‚ä½¿ç”¨ ES256 (ECDSA-SHA256) æ¼”ç®—æ³•ç”¢ç”Ÿçš„éå°ç¨±é‡‘é‘°ä¾†é€²è¡ŒåŠ å¯†ã€‚</p><h4 id=token-è¦æ”¾åœ¨-cookie-é‚„æ˜¯-localstorage>Token è¦æ”¾åœ¨ Cookie é‚„æ˜¯ LocalStorageï¼Ÿ</h4><p>å¾Œç«¯ç”¢ç”Ÿçš„ Token æˆ– JWTï¼Œä¸ç®¡å­˜æ”¾åœ¨ Cookie æˆ– LocalStorage åªè¦æ³¨æ„å…¶ç‰¹æ€§åŠå®‰å…¨ï¼Œé‚£éº¼æƒ³å­˜åœ¨å“ªè£¡ï¼Œéƒ½æ˜¯å¯ä»¥è¢«æ¥å—çš„ã€‚</p><ul><li>æ”¾åœ¨ Cookie</li></ul><p>å°‡ Token å­˜æ”¾åœ¨ Cookie çš„å¥½è™•ï¼Œå¯ä»¥ç”¨ä¾†æ§åˆ¶ç¶²ç«™çš„ Domain æˆ– SubDomain é€²è¡Œå­˜å–ï¼Œä¹Ÿå¯ä»¥è¨­å®šéæœŸæ™‚é–“ä¾†æ§åˆ¶å‰ç«¯æ˜¯å¦è¦é‡æ–°å•å¾Œç«¯ç”¢ç”Ÿæ–°çš„ Tokenï¼Œæœ€å¤§çš„ç‰¹é»å°±æ˜¯è‡ªå‹•å¤¾å¸¶åœ¨æ¯å€‹è«‹æ±‚ç•¶ä¸­ï¼Œä¹Ÿå› ç‚ºé€™é …ç‰¹æ€§ï¼Œæœ‰ä¸€äº›è³‡å®‰é¢¨éšªå°±éœ€è¦ç¨å¾®æ³¨æ„ä¸€ä¸‹ã€‚</p><p><a class=link href=https://owasp.org/www-community/attacks/csrf target=_blank rel=noopener>è·¨ç«™è«‹æ±‚å½é€  (Cross Site Request Forgery, CSRF)</a> å°±æ˜¯ä¸€å€‹ cookie ä½¿ç”¨æ™‚æ‰€éœ€è¦æ³¨æ„çš„è³‡å®‰å•é¡Œï¼Œæ‰€ä»¥ç•¶ä½¿ç”¨ cookie ä½œç‚ºé©—è­‰æ©Ÿåˆ¶æ™‚ï¼Œå»ºè­°åœ¨æ•æ„Ÿçš„æ“ä½œä¸Šå¤šæ·»åŠ é©—è­‰çš„æ©Ÿåˆ¶ï¼Œæˆ–ä½¿ç”¨ CSRF Token ä¾†ä¿è­·ä½ çš„ cookie ä¸è¢«éš¨æ„å½é€ è«‹æ±‚çš„å¤¾å¸¶å‡ºå»ã€‚</p><p>å°‡ Token æˆ–æ•æ„Ÿè³‡æ–™å„²å­˜åœ¨ cooike æ™‚ï¼Œé‚„æ˜¯å¯ä»¥é€é JavaScript çš„ <code>document.cookie</code> åšå­˜å–ï¼Œæ‰€ä»¥å¦‚æœç¶²ç«™æœ‰å­˜åœ¨<a class=link href=https://owasp.org/www-community/attacks/xss/ target=_blank rel=noopener>è·¨ç¶²ç«™æŒ‡ä»¤ç¢¼ (Cross-site scripting, XSS)</a> çš„å¼±é»ï¼Œä½ çš„ cookie å¾ˆå¯èƒ½å°±æœƒç›´æ¥è¢«å·èµ°ï¼Œç‚ºäº†é˜²æ­¢ XSS å¼±é»å°è‡´ cookie å¤–æ´©ï¼Œä½ å¯ä»¥å°‡ cookie è¨­å€¼æ™‚çš„å±¬æ€§ <code>httpOnly</code> è¨­ç½®ç‚º <code>true</code>ï¼Œè®“å®¢æˆ¶ç«¯ç€è¦½å™¨ç„¡æ³•ç›´æ¥å­˜å–ï¼Œåƒ…æœ‰åœ¨ç™¼é€è«‹æ±‚æ™‚ï¼Œç”±ç€è¦½å™¨è‡ªå‹•å¤¾å¸¶è‡³å¾Œç«¯ï¼Œæ­¤å¤–ï¼Œä¹Ÿå¯ä»¥è¨­ç½® <code>secure</code> è®“ cookie åªåœ¨ HTTPS ä¸‹å‚³è¼¸ã€‚</p><ul><li>æ”¾åœ¨ LocalStorage</li></ul><p>é—œæ–¼ Token æ˜¯å¦å„²å­˜åœ¨ LocalStorage å…¶å¯¦æœ‰ä¸åŒçš„çœ‹æ³•ï¼Œå› ç‚º cookie å­˜åœ¨è‘— CSRF æˆ– XSS ç­‰å•é¡Œéœ€è¦è§£æ±ºï¼Œè€Œå­˜æ”¾åœ¨ LocalStorage ä¸åƒ…æœ‰æ›´å¤§çš„ç©ºé–“ï¼Œé‚„ä¸è‡ªå¸¶å…ç–« CSRFï¼Œé›£é“ä¸é¦™å—ï¼Ÿ</p><p>ä½†æ˜¯åˆ¥å¿˜äº† LocalStorage ä¹Ÿæ˜¯é€é JS ä¾†åšå„²å­˜èˆ‡è®€å–ï¼Œæ‰€ä»¥å°±ç®—ä½¿ç”¨ LocalStorage äº†ï¼Œä½† XSS å¼±é»å¦‚æœå­˜åœ¨ï¼Œä½ çš„ Token ä¸€æ¨£æœ‰å¤–æ´©çš„å¯èƒ½æ€§ã€‚</p><p>è€Œä¸” LocalStorage ä¸å…·æœ‰éæœŸè‡ªå‹•åˆªé™¤çš„ç‰¹æ€§ï¼Œé™¤éè‡ªå·±å¯¦ä½œæˆ–åˆªé™¤å¦å‰‡å°‡æ°¸é çš„å­˜åœ¨ç€è¦½å™¨ä¹‹ä¸­ã€‚</p><p>æ‰€ä»¥ï¼Ÿ</p><p>ç¶²è·¯ä¸Šæœ‰è¨±å¤šä½¿ç”¨ Cookie æˆ– LocalStorage å„²å­˜ Token èªªæ³•ï¼Œæœ‰èˆˆè¶£ä¹Ÿå¯ä»¥çœ‹çœ‹å…©æ´¾å„è‡ªè«–è¿°çš„å„ªç¼ºé»ï¼Œæ‰€ä»¥ï¼Œä¸ç®¡æ˜¯ Cookie é‚„æ˜¯ LocalStorage æ²’æœ‰èªªä¸€å®šä¸èƒ½ä½¿ç”¨èª°ï¼Œè€Œæ˜¯è¦ä¾æ“šç‰¹æ€§åŠæƒ…å¢ƒä¾†åšä½¿ç”¨ï¼Œä¸¦åšå¥½å®šæœŸé‡æ–°ç”¢ç”ŸåŠç›¸é—œçš„å®‰å…¨é…ç½®ã€‚</p><p>æˆ‘è‡ªå·±å¤§æ¦‚æœƒä¾ç…§é€™å€‹ç¶²ç«™æˆ–æœå‹™ï¼Œæ˜¯ç›¸å°ç°¡å–®ä¹Ÿæ¯”è¼ƒä¸æœƒæœ‰æœƒé€ æˆæ‚²åŠ‡çš„æ“ä½œæˆ–å…§å®¹ç®¡ç†ç‚ºä¸»çš„æœå‹™ï¼Œæˆ‘å¯èƒ½å°±æœƒæ¡ç”¨ cookie çš„æ–¹æ¡ˆè™•ç†é©—è­‰ï¼Œå› ç‚ºç›¸å°ä¾†èªªè‡ªå‹•å¤¾å¸¶èˆ‡æœ‰æ•ˆæœŸé™åŠ <code>httpOnly</code> ä¾†æ§åˆ¶å®¢æˆ¶ç«¯æ˜¯å¦èƒ½ç›´æ¥å­˜å–ï¼Œå°æˆ‘ä¾†èªªé‚„æ˜¯æŒºæ–¹ä¾¿èˆ‡å®‰å…¨çš„ï¼Œå¯èƒ½åœ¨é©ç•¶çš„æ™‚æ©Ÿå†æ·»åŠ  CSRF Token æˆ–å¤šé“é©—è­‰æ©Ÿåˆ¶ï¼Œå°±èƒ½å®‰å…¨çš„ä½¿ç”¨ cookieã€‚</p><p>è€Œåœ¨å¤šç‚ºå…§éƒ¨ç³»çµ±ä½¿ç”¨æˆ–æ˜¯ API åœ¨ Mobile App ç”šè‡³æ˜¯ä¸æ”¯æ´ Cookie ç’°å¢ƒä¹‹ä¸‹éœ€è¦ä½¿ç”¨ Token ä¾†é©—è­‰ï¼Œæˆ‘å°±æœƒæ¡ç´å°‡ Token å„²å­˜åœ¨ LocalStorageã€‚</p><hr><h2 id=æœå°‹å¼•æ“æœ€ä½³åŒ–-seo-èˆ‡-html-meta-tag>æœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) èˆ‡ HTML Meta Tag</h2><p>é¸æ“‡ä½¿ç”¨ Nuxt 3 ä½œç‚ºç¶²ç«™é–‹ç™¼æ¡†æ¶çš„é–‹ç™¼è€…ï¼Œå¤šæ•¸éƒ½æ˜¯ç‚ºäº†è¦ä½¿ç”¨ SSR æˆ– SSG ä¾†åŠ å¼·å° SEO çš„å„ªåŒ–è¨­ç½®ï¼Œé€™ç¯‡å°‡æœƒè¬›è¿° Nuxt æä¾›çš„å¹¾å€‹çµ„åˆå¼å‡½æ•¸ï¼Œä¾†å”åŠ©æˆ‘å€‘è¨­ç½®ç¶²é çš„æ¨™é¡Œã€å…§æ–‡ã€Meta ç­‰ï¼Œä»¥æ­¤ä¾†è¨­ç½® SEO æˆ–å¤–éƒ¨é€£çµå¯èƒ½æœƒè§£æåˆ°çš„æ¨™ç±¤èˆ‡æ•¸å€¼å…§å®¹ã€‚</p><h3 id=æœå°‹å¼•æ“æœ€ä½³åŒ–-seo---ç¶²ç«™çš„æ¨™é¡Œ-title-èˆ‡æè¿°-description>æœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) - ç¶²ç«™çš„æ¨™é¡Œ (Title) èˆ‡æè¿° (Description)</h3><p>ç•¶ç¶²ç«™éœ€è¦åšæœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) çš„æ™‚å€™ï¼Œ<strong>Meta Tag</strong> é€™å€‹åè©ä½ ä¸€å®šä¸èƒ½å¿½ç•¥ï¼Œ<strong>Meta Tag</strong> ç¨±ä¹‹ç‚º<strong>å…ƒæ¨™ç±¤</strong>æˆ–<strong>æè¿°æ¨™ç±¤</strong>ï¼Œé¡§åæ€ç¾©ï¼Œæ˜¯ä¾†é¡å¤–æè¿°ç¶²é çš„è³‡æ–™ä½¿ç”¨ï¼›<strong>Meta Tag</strong> é€šå¸¸æ”¾ç½®åœ¨ HTML çš„ ä¸­ï¼Œé›–ç„¶ <strong>Meta Tag</strong> ä¸æœƒç›´æ¥é¡¯ç¤ºåœ¨ç¶²é ä¸Šï¼Œä½†å°æ–¼æœå°‹å¼•æ“çš„çˆ¬èŸ²ä¾†èªªï¼Œæ˜¯ç›¸ç•¶é‡è¦çš„ä¸€é …è­˜åˆ¥è³‡è¨Šï¼Œä¹Ÿæ˜¯ Facebook æå‡ºçš„ <strong>Open Graph</strong> æ”¾ç½®çš„ä½ç½®ï¼Œè®“ç¶²é çš„æ¨™é¡Œã€æè¿°æˆ–ç¸®åœ–ç­‰ï¼Œèƒ½æ­£ç¢ºçš„è¢«è§£æé¡¯ç¤ºå‡ºä¾†ã€‚</p><p>é‚£éº¼ç¶²é æ¨™é¡Œèˆ‡æè¿°ï¼Œå¦‚æœæ­£ç¢ºè¨­å®šæœƒæœ‰ä»€éº¼æ¨£å­çš„æ•ˆæœå‘¢ï¼Ÿèˆ‰ä¾‹ä¾†èªªï¼Œå‰é¢çš„ã€ä¸²æ¥ Google OAuth ç™»å…¥ã€‘æˆ‘å€‘å¯ä»¥é€éç¶²é åŸå§‹ç¢¼ä¾†æŸ¥çœ‹ï¼Œå¯ä»¥ç™¼ç¾ <code>&lt;title></code> èˆ‡ <code>&lt;meta name="description" â€¦ /></code> éƒ½æœ‰è¨­å®šã€‚</p><p><img src=https://live.staticflickr.com/65535/52618814898_c2eb521b53_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æœå°‹å¼•æ“çˆ¬èŸ²åœ¨æ”¶éŒ„ç¶²é æ™‚ï¼Œå°±æœƒè§£æé€™äº›æ¨™ç±¤ä¾†å»ºç«‹ç´¢å¼•ï¼Œæˆ‘å€‘åœ¨ä½¿ç”¨æœå°‹è³‡æ–™æ™‚ï¼Œç¶²é çš„è³‡è¨Šä¹Ÿå°±å°æ‡‰è‘—é¡¯ç¤ºå‡ºä¾†ï¼Œå¦‚ä¸‹åœ–ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618326416_00c8081182_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å„å®¶çš„æœå°‹å¼•æ“çˆ¬èŸ²ï¼Œé›–ç„¶éƒ½æœ‰è‡ªå·±è§£æçš„è¦å‰‡ï¼Œä¸éæ ¹æ“š SEO çš„ç¶“é©—éƒ½æœ‰å¤§æ–¹å‘èƒ½å¤ ä¾å¾ªåšå»ºç«‹ï¼Œæ­¤å¤–å°±æ˜¯åœ¨é‡å°ç‰¹å®šçš„æœå°‹å¼•æ“åŠ å¼·è­˜åˆ¥æ¨™è¨˜ï¼Œéµç…§å®˜æ–¹æŒ‡å¼•å°±èƒ½è®“ç¶²ç«™çš„å…§å®¹èƒ½è¦‹åº¦æœ‰é¡¯è‘—æå‡ã€‚</p><h3 id=ç¶²ç«™çš„-open-graph-og>ç¶²ç«™çš„ Open Graph (OG)</h3><p><strong>OG</strong> æ˜¯ç”± Facebook æ‰€æå‡ºçš„è¨­å®šï¼Œå…¨åç‚º <strong>Open Graph Protocol</strong>ï¼Œå®˜æ–¹ç¿»è­¯ç‚ºã€Œ<strong>é–‹æ”¾ç¤¾äº¤é—œä¿‚åœ–</strong>ã€ï¼Œåœ¨è¨­å®šç¶²ç«™çš„ <strong>Meta</strong> æ™‚é€šå¸¸ä¹Ÿç¨± <strong>OG Tag</strong>ï¼ŒFacebook æä¾›äº†<a class=link href=https://developers.facebook.com/docs/sharing/webmasters target=_blank rel=noopener>ç¶²ç«™ç®¡ç†å“¡åˆ†äº«æŒ‡å—</a>ï¼Œç•¶åˆè¨­è¨ˆçš„ç›®çš„æ˜¯ï¼Œç•¶ç¶²é ä¸­è¨­å®šäº† <strong>OG Tag</strong>ï¼Œèƒ½è®“ç¶²é è¢«åˆ†äº«è‡³ç¤¾ç¾¤åª’é«”æ™‚ï¼Œèƒ½æœ‰å‘ˆç¾æ›´ç‚ºè±å¯Œçš„å…§å®¹ï¼Œä¾‹å¦‚æ¨™é¡Œã€æè¿°åŠç¸®åœ–ç­‰ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œç•¶<a class=link href=https://wayneblog.ga/2022-12-12/nodejs-create-openai-line-bot/ target=_blank rel=noopener>ç¶²é </a>è¨­å®šäº† <strong>OG Tag</strong>ï¼Œä»¥é€£çµå½¢å¼è¢«åˆ†äº«è‡³ Facebookï¼Œæœƒå‘ˆç¾å¦‚ä¸‹çš„è³‡è¨Šï¼ŒFacebook æœƒè§£æç¶²é å…§çš„ <strong>OG Tag</strong> å°‡å°æ‡‰çš„å¦‚æ¨™é¡ŒåŠç¸®åœ–ç­‰è³‡è¨Šé¡¯ç¤ºå‡ºä¾†ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618326446_7205784c15_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å…¶ä¸­ç¸®åœ–ä¾ç…§ Facebook çš„æŒ‡å¼•ï¼Œå³æ˜¯å°æ‡‰ç¶²é ä¸­çš„ <code>&lt;meta property="og:image" ... /></code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52617815467_ca6f72b1e6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä¸åªæ˜¯åœ¨ Facebook ä¸Šåˆ†äº«é€£çµæœƒæœ‰<code>é€£çµé è¦½</code>çš„æ•ˆæœï¼Œä¹Ÿå› ç‚ºå¤§å®¶éƒ½éµå¾ªè‘— <strong>OG Tag</strong> é€²è¡Œè¨­å®šï¼Œæ‰€ä»¥åœ¨å…¶ä»–ä¸»æµçš„ç¤¾ç¾¤åª’é«”æˆ–é€šè¨Šè»Ÿé«”ç­‰ä¹Ÿéƒ½æœ‰è·Ÿé€²è§£æã€‚ä¾‹å¦‚ï¼Œæˆ‘å€‘ä½¿ç”¨ LINE å‚³é€ä¸€æ¢é€£çµï¼Œä¹Ÿæœƒå› ç‚ºè¨­ç½®äº† <strong>OG Tag</strong> ä¹Ÿæœ‰æˆåŠŸè§£æå‡º<code>é€£çµé è¦½</code>çš„æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52618814953_27c41dfc45_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>LINE é–‹ç™¼è€…ä¹Ÿæœ‰æä¾›ä¸€äº›å•ç­”æŒ‡å¼•å¯ä»¥åšåƒè€ƒï¼Œ<code>é€£çµé è¦½</code>èˆ‡ <code>og:title</code>ã€<code>og:description</code> å’Œ <code>og:image</code> æœ‰è‘—ç›¸æ‡‰çš„è¨­å®šé—œä¿‚ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618595494_9fd4af0f1e_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=usehead>useHead</h3><p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨ Nuxt 3 æä¾›çš„ <code>useHead()</code> çµ„åˆå¼å‡½æ•¸ï¼Œä¾†è¨­å®šç¶²ç«™çš„ä¸€äº›æ¨™ç±¤æˆ–æ¨™è¨˜ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Nuxt 3 Blog&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>viewport</span><span class=o>:</span> <span class=s1>&#39;width=device-width, initial-scale=1, maximum-scale=1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>charset</span><span class=o>:</span> <span class=s1>&#39;utf-8&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;é€™è£¡æ˜¯ Nuxt 3 å­¸ç¿’ç­†è¨˜ å¯¦æˆ°éƒ¨è½æ ¼&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>bodyAttrs</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>class</span><span class=o>:</span> <span class=s1>&#39;test&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><code>useHead()</code> å‡½æ•¸æ¥å—åƒæ•¸çš„é¡å‹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>useHead</span><span class=p>(</span><span class=nx>meta</span>: <span class=kt>Computable</span><span class=p>&lt;</span><span class=nt>MetaObject</span><span class=p>&gt;)</span><span class=o>:</span> <span class=k>void</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>MetaObject</span> <span class=kr>extends</span> <span class=nx>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>charset?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>viewport?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta?</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>link?</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>style?</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>script?</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>noscript?</span>: <span class=kt>Array</span><span class=p>&lt;</span><span class=nt>Record</span><span class=err>&lt;</span><span class=na>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>titleTemplate?</span>: <span class=kt>string</span> <span class=o>|</span> <span class=p>((</span><span class=nx>title</span>: <span class=kt>string</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=kt>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>title?</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>bodyAttrs?</span>: <span class=kt>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>htmlAttrs?</span>: <span class=kt>Record</span><span class=p>&lt;</span><span class=nt>string</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>charset</strong>ï¼šæŒ‡å®š HTML çš„å­—å…ƒç·¨ç¢¼ï¼Œé è¨­ç‚º <code>utf-8</code>ã€‚</li><li><strong>viewport</strong>ï¼šè¨­å®šç¶²é çš„å¯è¦‹å€åŸŸï¼Œé è¨­ç‚º <code>width=device-width, initial-scale=1</code>ã€‚</li><li><strong>meta</strong>ï¼šæ¥å—ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼Œéƒ½å°‡æœƒå»ºç«‹ä¸€å€‹ <code>&lt;meta></code> æ¨™è¨˜ï¼Œå…ƒç´ ä¸­ç‰©ä»¶çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>link</strong>ï¼šæ¥å—ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼Œéƒ½å°‡æœƒå»ºç«‹ä¸€å€‹ <code>&lt;link></code> æ¨™è¨˜ï¼Œå…ƒç´ ä¸­ç‰©ä»¶çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>style</strong>ï¼šæ¥å—ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼Œéƒ½å°‡æœƒå»ºç«‹ä¸€å€‹ <code>&lt;style></code> æ¨™è¨˜ï¼Œå…ƒç´ ä¸­ç‰©ä»¶çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>script</strong>ï¼šæ¥å—ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼Œéƒ½å°‡æœƒå»ºç«‹ä¸€å€‹ <code>&lt;script></code> æ¨™è¨˜ï¼Œå…ƒç´ ä¸­ç‰©ä»¶çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>noscript</strong>ï¼šæ¥å—ä¸€å€‹é™£åˆ—ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼Œéƒ½å°‡æœƒå»ºç«‹ä¸€å€‹ <code>&lt;noscript></code> æ¨™è¨˜ï¼Œå…ƒç´ ä¸­ç‰©ä»¶çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>titleTemplage</strong>ï¼šæ¥å—ä¸€å€‹å­—ä¸²æˆ–å‡½æ•¸ï¼Œç”¨ä¾†å‹•æ…‹çš„è¨­å®šè©²é é¢å…ƒä»¶çš„<code>ç¶²é æ¨™é¡Œ</code>ã€‚</li><li><strong>title</strong>ï¼šåœ¨é é¢å…ƒä»¶è¨­ç½®éœæ…‹çš„<code>ç¶²é æ¨™é¡Œ</code>ã€‚</li><li><strong>bodyAttrs</strong>ï¼šæ¥å—ä¸€å€‹ç‰©ä»¶ï¼Œè¨­ç½®ç¶²é ä¸­ æ¨™ç±¤çš„å±¬æ€§ï¼Œç‰©ä»¶ä¸­çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li><li><strong>htmlAttrs</strong>ï¼šæ¥å—ä¸€å€‹ç‰©ä»¶ï¼Œè¨­ç½®ç¶²é ä¸­ æ¨™ç±¤çš„å±¬æ€§ï¼Œç‰©ä»¶ä¸­çš„å±¬æ€§å°‡å°æ‡‰è‡³ çš„å±¬æ€§ã€‚</li></ul><h4 id=è‡ªè¨‚-metadata>è‡ªè¨‚ Metadata</h4><p>ä½¿ç”¨ <code>useHead()</code> å‡½æ•¸è¨­å®šå±¬æ€§æ‰€å‚³å…¥çš„å­—ä¸²æˆ–ç‰©ä»¶å¯ä»¥æ˜¯å…·æœ‰éŸ¿æ‡‰æ€§çš„è®Šæ•¸ï¼Œç•¶æ•¸å€¼è®Šå‹•æ™‚ï¼Œç›¸å°æ‡‰çš„æ•¸å€¼ä¹Ÿæœƒä¸€åŒéŸ¿æ‡‰ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥å‹•æ…‹çš„è®Šæ›´æ¨™é¡Œæˆ–æè¿°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;Nuxt 3 Blog&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>description</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;é€™è£¡æ˜¯ Nuxt 3 å­¸ç¿’ç­†è¨˜ å¯¦æˆ°éƒ¨è½æ ¼&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>content</span><span class=o>:</span> <span class=nx>description</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ·»åŠ å‹•æ…‹ç¶²é çš„æ¨™é¡Œ>æ·»åŠ å‹•æ…‹ç¶²é çš„æ¨™é¡Œ</h4><p>æˆ‘å€‘å¯ä»¥åœ¨ <strong>app.vue</strong> æ·»åŠ å¦‚ä¸‹ç¨‹å¼ç¢¼ï¼Œ<strong>titleTemplage</strong> ä¸­çš„ <code>%s</code> å°‡æœƒå¸¶å…¥ç›®å‰é é¢ <code>title</code> æˆ–æ›´ä¸Šå±¤é é¢çš„ <code>title</code> å±¬æ€§ï¼š</p><h5 id=appvue-12>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;Nuxt 3 Blog&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>titleTemplate</span><span class=o>:</span> <span class=s1>&#39;%s - é¦–é &#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ç¶²é çš„æ¨™é¡Œè®Šç‚ºã€ŒNuxt 3 Blog - é¦–é ã€ã€‚</p><p><img src=https://live.staticflickr.com/65535/52618326576_756d879b60_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½ ä¹Ÿå¯ä»¥å‚³å…¥ä¸€å€‹å‡½æ•¸ä¾†å‹•æ…‹çš„æ·»åŠ ç¶²é çš„æ¨™é¡Œã€‚</p><h5 id=appvue-13>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;Nuxt 3 Blog&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>titleTemplate</span><span class=o>:</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>title</span> <span class=o>?</span> <span class=sb>`</span><span class=si>${</span><span class=nx>title</span><span class=si>}</span><span class=sb> - é¦–é `</span> <span class=o>:</span> <span class=s1>&#39;é¦–é &#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ·»åŠ å¤–éƒ¨-css>æ·»åŠ å¤–éƒ¨ CSS</h4><p>æˆ‘å¯ä»¥ä½¿ç”¨ <code>useHead()</code> ä¾†æ·»åŠ  Google å­—é«”è‡³ <code>link</code> å±¬æ€§ä¹‹ä¸­ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>  
</span></span><span class=line><span class=cl>  <span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>link</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>rel</span><span class=o>:</span> <span class=s1>&#39;preconnect&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>href</span><span class=o>:</span> <span class=s1>&#39;https://fonts.googleapis.com&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>rel</span><span class=o>:</span> <span class=s1>&#39;stylesheet&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>href</span><span class=o>:</span> <span class=s1>&#39;https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nx>crossorigin</span><span class=o>:</span> <span class=s1>&#39;&#39;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ·»åŠ ç¬¬ä¸‰æ–¹çš„-javascript>æ·»åŠ ç¬¬ä¸‰æ–¹çš„ JavaScript</h4><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>useHead()</code> ä¾†æ’å…¥ç¬¬ä¸‰æ–¹çš„ JSã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>script</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>src</span><span class=o>:</span> <span class=s1>&#39;https://third-party-script.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç›¸å°æ‡‰çš„å…ƒä»¶è¨­ç½®å±¬æ€§åŠæ¨™ç±¤>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç›¸å°æ‡‰çš„å…ƒä»¶è¨­ç½®å±¬æ€§åŠæ¨™ç±¤</h4><p>Nuxt æä¾› <code>&lt;Title></code>ã€<code>&lt;Base></code>ã€<code>&lt;Script></code>ã€<code>&lt;NoScript></code>ã€<code>&lt;Style></code>ã€<code>&lt;Meta></code>ã€<code>&lt;Link></code>ã€<code>&lt;Body></code>ã€<code>&lt;Html></code> å’Œ <code>&lt;Head></code>ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨å…ƒä»¶ä¸­æ¨¡æ¿ (Template) ä½¿ç”¨é€™äº›å…ƒä»¶é€²è¡Œè¨­å®šç¶²é çš„å±¬æ€§åŠæ¨™ç±¤ã€‚</p><p>å› ç‚ºé€™äº›å…ƒä»¶åç¨±èˆ‡åŸç”Ÿ HTML æ¨™è¨˜ç›¸ä¼¼ï¼Œæ‰€ä»¥è¨˜å¾—åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¦é–‹é ­ç‚º<code>å¤§å¯«</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Title</span><span class=p>&gt;{{</span> <span class=nx>title</span> <span class=p>}}&lt;/</span><span class=nt>Title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;description&#34;</span> <span class=nt>:content</span><span class=s>=&#34;description&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Style</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/css&#34;</span> <span class=na>children</span><span class=o>=</span><span class=s>&#34;body { background-color: green; }&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>Style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;{{</span> <span class=nx>title</span> <span class=p>}}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;Nuxt 3 Blog&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>description</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;é€™è£¡æ˜¯ Nuxt 3 å­¸ç¿’ç­†è¨˜ å¯¦æˆ°éƒ¨è½æ ¼&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=definepagemeta>definePageMeta()</h3><p>æˆ‘å€‘å…¶å¯¦åœ¨å‰é¢å°±æœ‰ä½¿ç”¨é <code>definePageMeta()</code> ä¾†è¨­ç½®é é¢çš„å¸ƒå±€æˆ–ä¸­é–“ä»¶ï¼Œåœ¨å„å€‹é é¢ä¹‹ä¸­ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>definePageMeta()</code> ä¾†è¨­ç½®ä¸€äº›å±¬æ€§èˆ‡ <code>useHead()</code> é€²è¡Œæ­é…ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘å€‘çš„ <strong>app.vue</strong> ä½¿ç”¨ <code>useHead</code> è¨­å®šçš„ä¸€å€‹ <strong>meta</strong>ï¼Œä¸¦ä¸”æ˜¯æ ¹æ“š <strong>route.meta.title</strong> æ‰€å‹•æ…‹çš„è¨­å®šã€‚</p><h5 id=appvue-14>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useHead</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;og:title&#39;</span><span class=p>,</span> <span class=nx>content</span><span class=o>:</span> <span class=sb>`</span><span class=si>${</span><span class=nx>route</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>title</span><span class=si>}</span><span class=sb> | Nuxt 3 Blog`</span> <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘åœ¨ <strong>pages/articles.vue</strong> æ·»åŠ å¦‚ä¸‹ç¨‹å¼ç¢¼ï¼š</p><h5 id=pagesarticlesvue>pages/articles.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>definePageMeta</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;æ‰€æœ‰æ–‡ç« &#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶æˆ‘å€‘ç€è¦½ <strong>/articles</strong> é é¢æ™‚ï¼ŒNuxt åœ¨ä¼ºæœå™¨ç«¯å°±å¹«æˆ‘å€‘æ¸²æŸ“å¥½ <code>og:title</code> çš„ <code>meta</code> äº†ã€‚æˆ‘å€‘å¯ä»¥é€éæª¢è¦–åŸå§‹ç¢¼çš„æ–¹å¼ä¾†çœ‹çœ‹æ•ˆæœã€‚</p><p><img src=https://live.staticflickr.com/65535/52618815023_04fb4a9b6a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>åœ¨ Nuxt 3 æä¾›äº†ä¸€äº›å¯ä»¥è¨­ç½®ç¶²é å±¬æ€§èˆ‡ <strong>Meta</strong> çš„çµ„åˆå¼å‡½æ•¸ï¼Œæ›´èƒ½å‹•æ…‹çš„èª¿æ•´èˆ‡éŸ¿æ‡‰ï¼Œçµåˆ SSR è®“é€™äº›æ¨™è¨˜åœ¨ä¼ºæœå™¨ç«¯å°±èƒ½æ¸²æŸ“å‡ºä¾†ï¼Œå°ç¶²ç«™åšæœå°‹å¼•æ“æœ€ä½³åŒ– (SEO) éå¸¸å¾—å‹å–„ï¼Œä¹Ÿæ˜¯å¤šæ•¸äººé¸æ“‡ Nuxt 3 ä¾†è™•ç† SSR èˆ‡ SEO çš„åŸå› ã€‚é™¤äº† SEO å¯èƒ½æœƒä½¿ç”¨åˆ°çš„æ¨™è¨˜å¤–ï¼Œä¹Ÿæœ‰ <strong>OG Tag</strong> å¯ä»¥åŠ å¼·ç¶²é çš„é€£çµé è¦½æ•ˆæœï¼Œé›–ç„¶ <strong>OG Tag</strong> èˆ‡ SEO æ²’æœ‰çµ•å°çš„é—œä¿‚ï¼Œä½†æ˜¯é€éä¼ºæœå™¨ç«¯æ¸²æŸ“èª¿æ•´é€™äº› <strong>Meta</strong> å°æœå°‹å¼•æ“æˆ–ç¶²ç«™éƒ½éå¸¸çš„æ–¹ä¾¿ï¼Œæˆ‘å€‘åªè¦æ ¹æ“šéœ€æ±‚åŠæŒ‡å¼•åšè¨­å®šï¼Œå°±èƒ½å°ç¶²ç«™çš„èƒ½è¦‹åº¦æœ‰æ‰€æå‡ã€‚</p><hr><h2 id=public-èˆ‡-assets-è³‡æºç›®éŒ„nuxt-3-çš„éœæ…‹è³‡æº>Public èˆ‡ Assets è³‡æºç›®éŒ„(Nuxt 3 çš„éœæ…‹è³‡æº)</h2><p>åœ¨ç¶²ç«™çš„é–‹ç™¼éç¨‹ä¸­ï¼Œå¤šå°‘æœƒä½¿ç”¨åˆ°åœ–ç‰‡ã€æ¨£å¼æˆ–è¨­å®šå­—é«”ï¼Œè€Œç•¶é€™äº›æª”æ¡ˆè‹¥æ²’æœ‰å¤–éƒ¨é€£çµæˆ–æŸäº›éœ€æ±‚ä¸‹éœ€è¦åŒ…å«åœ¨å°ˆæ¡ˆå…§åšä½¿ç”¨ï¼Œæœ€å¾Œé€£å¸¶é€™äº›æª”æ¡ˆä¸€èµ·éƒ¨ç½²ã€‚åœ¨ä½¿ç”¨ <a class=link href=https://github.com/vuejs/create-vue target=_blank rel=noopener>create-vue</a> å»ºç«‹çš„ Vue çš„å°ˆæ¡ˆä¸‹åŒ…å«äº† <code>public</code> èˆ‡ src å…§çš„ <code>assets</code> ç›®éŒ„ï¼Œé€™å…©å€‹ç›®éŒ„éƒ½æ˜¯å¯ä»¥æ”¾ç½®é€™é¡ä¸å¸¸è®Šå‹•çš„éœæ…‹è³‡æºï¼Œä½†é€™å…©å€‹ç›®éŒ„å„è‡ªå› ç‚ºä¸€äº›ç‰¹æ€§ï¼Œå»ºè­°æ”¾ç½®çš„æª”æ¡ˆé¡å‹ä¾æ“šä½¿ç”¨ç›®çš„æœ‰æ‰€å€åˆ¥ã€‚</p><p>Nuxt 3 ä½¿ç”¨å°ˆæ¡ˆä¸‹çš„å…©å€‹ç›®éŒ„ä¾†æä¾›ä½¿ç”¨è€…è™•ç†åœ–ç‰‡ã€æ¨£å¼æˆ–å­—é«”ï¼Œé€™å…©å€‹ç›®éŒ„åˆ†åˆ¥ç‚º <code>public</code> èˆ‡ <code>assets</code>ã€‚</p><h3 id=public-ç›®éŒ„>public ç›®éŒ„</h3><p>åœ¨ Nuxt 3 çš„å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹ï¼Œå­˜åœ¨ä¸€å€‹åç‚º <code>public</code> çš„ç›®éŒ„ï¼Œé€™å€‹ç›®éŒ„å¦‚åŒ Vue ä¸­çš„ <code>public</code> ç›®éŒ„æˆ– Nuxt 2 ä¸­çš„ <code>static</code> ç›®éŒ„ã€‚é€™å€‹ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼Œå°‡æœƒç”± Nuxt ç›´æ¥æ–¼ç¶²ç«™çš„æ ¹è·¯å¾‘ï¼Œä¾‹å¦‚ <code>/</code> æä¾›å­˜å–ã€‚</p><p>ä¾‹å¦‚å»ºç«‹ <strong>public/robots.txt</strong> å°‡å¯ä»¥ä½¿ç”¨ <a class=link href=http://localhost:3000/robots.txt target=_blank rel=noopener>http://localhost:3000/robots.txt</a> å­˜å–ã€‚</p><p>é€šå¸¸æˆ‘å€‘æœƒåœ¨ <code>public</code> ç›®éŒ„æ”¾ç½®ä¸å¸¸æ›´å‹•çš„æª”æ¡ˆï¼Œæˆ–æ˜¯éœ€è¦ä¿ç•™æª”æ¡ˆçš„åç¨±ï¼Œä¾‹å¦‚ <strong>robots.txt</strong> å°±éœ€è¦ä¸€å€‹å›ºå®šçš„åç¨±ï¼Œæ‰èƒ½æ­£ç¢ºçš„è¢«æœå°‹å¼•æ“çš„çˆ¬èŸ²æ‰€è§£æå†æ±ºå®šæª¢ç´¢çš„è¦å‰‡ï¼ŒæŠ‘æˆ– <strong>sitemap.xml</strong> èˆ‡ <strong>favicon.ico</strong> æª”æ¡ˆç­‰ï¼Œéƒ½å¾ˆé©åˆæ”¾ç½®åœ¨ <code>public</code> ç›®éŒ„ã€‚</p><p>ä½ å¯èƒ½ä¹Ÿæœƒæƒ³ï¼Œé‚£åœ–ç‰‡æˆ– CSS æ¨£å¼ï¼Œæˆ‘ä¹Ÿä¸å¸¸è®Šå‹•ï¼Œé›£é“å°±ä¸èƒ½æ”¾ç½®åœ¨ public ç›®éŒ„å—ï¼Ÿ</p><p><strong>è¡Œï¼Œç•¶ç„¶è¡Œï¼Œå“ªæ¬¡ä¸è¡Œï¼</strong></p><p><img src=https://live.staticflickr.com/65535/52630176588_1a720e08f8_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>èˆ‰å€‹ä¾‹å­ï¼Œæˆ‘å€‘å°‡é€™å¼µåœ–ç‰‡æ”¾ç½®æ–¼ <code>public</code> ç›®éŒ„ä¸‹ä¸¦å‘½åç‚º <strong>bg.png</strong>ï¼Œå°ˆæ¡ˆç›®éŒ„ä¸‹å…¶ä»–æª”æ¡ˆå°±å…ˆä¸åˆ—ï¼Œæ•´å€‹çµæ§‹å¤§æ¦‚é•·çš„åƒä¸‹é¢é€™æ¨£ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxt-app/
</span></span><span class=line><span class=cl>â”œâ”€â”€ public/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ bg.png
</span></span><span class=line><span class=cl>â””â”€â”€ app.vue
</span></span></code></pre></td></tr></table></div></div><p>æ ¹æ“šè¦å‰‡ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ <a class=link href=http://localhost:3000/bg.png target=_blank rel=noopener>http://localhost:3000/bg.png</a> å­˜å–ï¼Œå¦‚ä¸‹åœ–æˆ‘å€‘ç¢ºå¯¦æˆåŠŸçš„èƒ½å­˜å–åˆ°åœ–ç‰‡ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630176003_baa9c8737a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ‰€ä»¥ï¼Œæˆ‘å€‘åœ¨ <strong>app.vue</strong> æ–°å¢å¦‚ä¸‹ç¨‹å¼ç¢¼ï¼Œä½¿ç”¨ <code>/bg.png</code> ä¾†ç­‰åŒè¨ªå• <strong>public/bg.png</strong> æª”æ¡ˆï¼š</p><h5 id=appvue-15>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/bg.png&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¹Ÿç¢ºå¯¦èƒ½åœ¨ç¶²é ä¸­ä½¿ç”¨ <code>&lt;img src="/bg.png" /></code> ä¾†é¡¯ç¤ºåœ–ç‰‡ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629175752_c8f3b2c406_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ—¢ç„¶ <code>public</code> ç›®éŒ„å·²ç¶“èƒ½æä¾›éœæ…‹è³‡æºçš„é€£çµï¼Œé‚£éº¼ç‚ºä»€éº¼é‚„æœ‰ä¸€å€‹åç‚º <code>assets</code> çš„ç›®éŒ„å‘¢ï¼Ÿæ¥ä¸‹ä¾†æˆ‘å€‘å…ˆä»‹ç´¹ <code>assets</code> ç›®éŒ„ï¼Œæœ€å¾Œå†ä¾†ç¸½çµä¸€ä¸‹å·®ç•°ã€‚</p><h3 id=assets-ç›®éŒ„-1>assets ç›®éŒ„</h3><p>Nuxt 3 ä½¿ç”¨ <a class=link href=https://vitejs.dev/guide/assets.html target=_blank rel=noopener>Vite</a> æˆ– <a class=link href=https://webpack.js.org/guides/asset-management/ target=_blank rel=noopener>Webpack</a> ä¾†å»ºæ§‹å°ˆæ¡ˆé€²è¡Œæ‰“åŒ…ï¼Œé€™äº›å»ºæ§‹å·¥å…·ä¸»è¦åŠŸèƒ½æ˜¯ç”¨ä¾†è™•ç† JavaScript æª”æ¡ˆå°‡å…¶ç·¨è­¯ã€è½‰æ›æˆ–å£“ç¸®ç­‰ï¼Œä½†å®ƒå€‘å¯ä»¥é€éå„è‡ªçš„<strong>æ’ä»¶</strong>æˆ– <strong>Loader</strong> ä¾†è™•ç†å…¶ä»–æª”æ¡ˆé¡å‹çš„è³‡æºï¼Œä¾‹å¦‚æ¨£å¼ã€å­—é«”æˆ– SVG ç­‰ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å€‘åœ¨ <code>assets</code> ä¸‹å»ºç«‹ä¸€å€‹ Sass çš„æ¨£å¼ï¼Œç•¶é€™å€‹ Sass æª”æ¡ˆè¢«è¼‰å…¥ä½¿ç”¨ï¼Œå°±æœƒç¶“é<strong>æ’ä»¶</strong>æˆ– <strong>Loader</strong> ä¾†é€²è¡Œ CSS çš„é è™•ç†åŠç·¨è­¯ï¼Œæœ€çµ‚ç”¢ç”Ÿä¸€å€‹ CSS æª”æ¡ˆï¼Œä¹Ÿå¯ä»¥é‡å°å–®ç´”çš„ CSS æª”æ¡ˆé€²è¡Œå£“ç¸®ã€‚åˆæˆ–è€…èªªï¼Œç•¶ä½¿ç”¨ <code>&lt;img></code> çš„ <strong>src</strong> å±¬æ€§è¨­å®šè¼‰å…¥æˆ‘å€‘æ”¾ç½®åœ¨ <code>assets</code> çš„åœ–ç‰‡æˆ–åœ–ç¤ºï¼Œæœ€çµ‚éœ€è¦è½‰æ›ç‚º Base64 ç·¨ç¢¼è€Œä¸æ˜¯ç”¢ç”Ÿä¸€å€‹é€£çµï¼Œæˆ‘å€‘ä¹Ÿéœ€è¦ä¾è³´å»ºæ§‹å·¥å…·æ’ä»¶çš„æ“´å±•ä¾†å¹«åŠ©ã€‚</p><p>å…¶ä¸»è¦çš„ç›®çš„ï¼Œä¸å¤–ä¹å°±æ˜¯ç‚ºäº†æ•ˆèƒ½èˆ‡è§£æ±ºç€è¦½å™¨çš„å¿«å–ã€‚æ”¾ç½®åœ¨ <code>assets</code> ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼Œå¯èƒ½æœƒè¢«<strong>æ’ä»¶</strong>æˆ– <strong>Loader</strong> é€²è¡Œè½‰æ›æˆ–å£“ç¸®ï¼Œæœ€çµ‚ç”¢ç”Ÿå‡ºä¾†çš„æª”æ¡ˆä¹Ÿå…·å‚™é€£çµå¯ä»¥é€²è¡Œå­˜å–ã€‚</p><p>å¦‚æœä½¿ç”¨ <code>public</code> ç›®éŒ„ä¸‹å°å‡ºçš„ <strong>/bg.png</strong>ï¼Œå°±ç®—æˆ‘å€‘æ›¿æ›äº† <strong>bg.png</strong> åœ–ç‰‡ï¼Œå¯èƒ½å°±æœƒå› ç‚ºæª”æ¡ˆæ ¹æ“šæª”æ¡ˆåç¨±è¢«ç€è¦½å™¨å¿«å–ä½ï¼Œå°è‡´å‰ç«¯é‚„æ˜¯çœ‹åˆ°èˆŠçš„æª”æ¡ˆã€‚æˆ‘å€‘åœ¨ä½¿ç”¨ <code>assets</code> ç›®éŒ„ä¸‹çš„æª”æ¡ˆæ™‚é›–ç„¶æª”åéƒ½æ˜¯ <strong>bg.png</strong>ï¼Œä½†åœ¨å»ºæ§‹æ™‚ç”¢ç”Ÿçš„æª”æ¡ˆé€šå¸¸æœƒå¤¾å¸¶ <code>Hash</code>ï¼Œä¾‹å¦‚ï¼š<strong>bg.16a2f98c.png</strong>ï¼Œå¦‚æ­¤ä¸€ä¾†æˆ‘å€‘æ¯æ¬¡æ›´æ–°åœ–ç‰‡ï¼Œéƒ½éƒ½æœƒéš¨æ©Ÿçš„ç”¢ç”Ÿä¸€çµ„ Hash å°±èƒ½é˜²æ­¢ç€è¦½å™¨å¿«å–ï¼Œå°è‡´å¥½åƒç¶²ç«™æ›´æ–°å¤±æ•ˆçš„éŒ¯è¦ºã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å€‘ä»¥ç›¸åŒçš„åœ–ç‰‡ï¼Œæ”¹æ”¾ç½®æ–¼ <strong>assets/bg.png</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nuxt-app/
</span></span><span class=line><span class=cl>â”œâ”€â”€ assets/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ bg.png
</span></span><span class=line><span class=cl>â””â”€â”€ app.vue
</span></span></code></pre></td></tr></table></div></div><h5 id=appvue-16>app.vue</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;~/assets/bg.png&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨é–‹ç™¼ç’°å¢ƒ <code>~/assets/bg.png</code> æœƒè½‰æ›ç‚º <code>/_nuxt/assets/bg.png</code>ï¼Œå¯¦éš›ä¸Šä¹Ÿèƒ½ä½¿ç”¨ <a class=link href=http://localhost:3000/_nuxt/assets/bg.png target=_blank rel=noopener>http://localhost:3000/_nuxt/assets/bg.png</a> é€²è¡Œè¨ªå•ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630134105_59cf185408_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><blockquote><p>é™¤äº† ~/assets å¯ä»¥å°æ‡‰ assets ç›®éŒ„å¤–ï¼Œä¹Ÿå¯ä»¥åƒè€ƒå®˜æ–¹çš„ <a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config#alias target=_blank rel=noopener>alias</a> æ›´å¤šæˆ–è‡ªè¨‚åˆ¥åä¾†ä½¿ç”¨ç›¸å°è·¯å¾‘ã€‚</p></blockquote><p>ä½†ç•¶ä½ çš„ç¶²ç«™éƒ¨ç½²å®Œæˆæˆ–å•Ÿå‹•å»ºæ§‹å‡ºä¾†çš„å°ˆæ¡ˆï¼Œæœƒç™¼ç¾åœ–ç‰‡æª”ååŒ…å«äº† <code>Hash</code>ï¼Œä¾‹å¦‚ <code>/_nuxt/bg.0a299ea1.png</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630176173_dd37d79c67_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æœ€å¾Œæˆ‘å€‘ä»¥æœ€çµ‚å»ºæ§‹å‡ºä¾†çš„å°ˆæ¡ˆçµæ§‹å°æ¯”å¦‚ä¸‹åœ–ï¼Œåœ¨ <code>public</code> ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼ŒæœƒåŸå°ä¸å‹•çš„ç…§æ¬è‡³ <code>.output/public</code> ä¸‹ï¼Œä¹Ÿå°±å¯ä»¥ä½¿ç”¨ <strong>/bg.png</strong> å­˜å–ï¼›è€Œæ”¾ç½®åœ¨ <code>assets</code> ä¸‹çš„æª”æ¡ˆï¼Œå¯èƒ½æœƒè¢«è™•ç†åŠ å·¥ï¼Œæœ€å¾Œæª”æ¡ˆåç¨±æœƒåŠ ä¸Šä¸€å€‹ <code>Hash</code> ä¸¦æ”¾ç½®åœ¨ <code>.output/public/_nuxt</code> ä¸‹ï¼Œä¹Ÿå°±éœ€è¦ä½¿ç”¨ <strong>/_nuxt/bg.0a299ea1.png</strong> å­˜å–ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629175877_933064e5f8_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç¸½çµä¾†èªªå¤šæ•¸æƒ…æ³å»ºè­°æŠŠéœæ…‹è³‡æºæ”¾ç½®åœ¨ <code>assets</code>ï¼Œä¹Ÿå› ç‚ºéœæ…‹è³‡æºå¤šç‚º SFC æ‰€ä½¿ç”¨ï¼Œé€šå¸¸ä¹Ÿæœƒæ”¾ç½®æœ€å¤šæª”æ¡ˆï¼Œæœ€å¾Œå»ºæ§‹æ™‚ä¹Ÿæœƒå› ç‚ºå»ºæ§‹å·¥å…·çš„è¨­å®šä¾†é€²è¡Œè½‰æ›æˆ–å£“ç¸®ï¼Œæœ€å¾Œæ·»åŠ  <code>Hash</code> ä¾†æä¾›å­˜å–ï¼Œä¹Ÿå› ç‚ºæ¯æ¬¡å»ºæ§‹ç”¢ç”Ÿçš„æª”æ¡ˆéƒ½ä¸ä¸€æ¨£ï¼Œæ‰€ä»¥ä¸é©åˆç›´æ¥ä»¥å®Œæ•´çš„ URL ä¾›å¤–éƒ¨é€£çµä½¿ç”¨ã€‚è€Œç•¶æœ‰äº›ä¾‹å¤–æƒ…æ³ä¸é©åˆï¼Œä¾‹å¦‚ <code>robots.txt</code> æˆ– <code>sitemap.xml</code> é€™é¡çš„æª”æ¡ˆä¸éœ€è¦ç¶“éé¡å¤–è™•ç†ä¸”éœ€è¦çµ•å°è·¯å¾‘ä¿æŒæª”æ¡ˆåç¨±ï¼Œé‚£å°±å¾—æ”¾ç½®åœ¨ <code>public</code> ç›®éŒ„ä¸‹æä¾›å­˜å–ã€‚</p><hr><h2 id=ç™¼å¸ƒç¶²ç«™å‰çš„å»ºæ§‹æ‰“åŒ…-build-èˆ‡éœæ…‹ç¶²ç«™ç”Ÿæˆ-static-site-generation>ç™¼å¸ƒç¶²ç«™å‰çš„å»ºæ§‹æ‰“åŒ… (Build) èˆ‡éœæ…‹ç¶²ç«™ç”Ÿæˆ (Static Site Generation)</h2><p>ç•¶ç¶²ç«™é–‹ç™¼å®Œæˆæˆ–æœ‰å°å…¥ CI/CDï¼Œåœ¨æº–å‚™ç™¼å¸ƒç¶²ç«™å‰ï¼Œæˆ‘å€‘æœƒå°‡ Nuxt ç¶²ç«™çš„é–‹ç™¼å°ˆæ¡ˆé€é Nuxt æä¾›çš„æŒ‡ä»¤ï¼Œæˆ‘å€‘å¯ä»¥ä¾†å»ºæ§‹å‡º<strong>æ­£å¼ç’°å¢ƒ</strong>æ‰€éœ€è¦çš„ç‰ˆæœ¬ï¼Œé€™å€‹å»ºæ§‹çš„éç¨‹ä½ å¯ä»¥ç†è§£ç‚ºå°ˆæ¡ˆå°‡æœƒæ‰“åŒ…éœ€è¦çš„ä¾è³´å¥—ä»¶ã€ç·¨è­¯èˆ‡è½‰æ›ç›¸é—œçš„ Vue SFC èˆ‡æ¨£å¼ç­‰ï¼Œç”šè‡³å¹«ä½ å£“ç¸®é€™äº›æª”æ¡ˆç­‰è¨±å¤šæ­¥é©Ÿï¼Œé€™äº›ç¹ç‘£çš„éç¨‹éƒ½é€é Nuxt çš„å»ºæ§‹æŒ‡ä»¤ä¾†å¹«ä½ å®Œæˆï¼Œä½ å¯ä»¥çµåˆä¸€äº›è¨­å®šåƒæ•¸èˆ‡æŒ‡ä»¤ï¼Œä¾†å¹«åŠ©ä½ å»ºæ§‹å‡º<strong>æ­£å¼ç’°å¢ƒ</strong>æ‰€éœ€è¦çš„ç¶²ç«™å°ˆæ¡ˆï¼Œæœ€å¾Œå†é€²è¡Œéƒ¨ç½²çš„å‹•ä½œã€‚</p><h3 id=nuxt-3-å°ˆæ¡ˆå¦‚ä½•å»ºæ§‹æ­£å¼ç’°å¢ƒç‰ˆæœ¬>Nuxt 3 å°ˆæ¡ˆå¦‚ä½•å»ºæ§‹æ­£å¼ç’°å¢ƒç‰ˆæœ¬ï¼Ÿ</h3><p>ç•¶æˆ‘å€‘å»ºç«‹ä¸€å€‹ä¹¾æ·¨çš„ Nuxt 3 å°ˆæ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ <strong>package.json</strong> ä¸­ <strong>scripts</strong> å…§çš„æŒ‡ä»¤ä¾†é€²è¡Œå»ºæ§‹æˆ–é æ¸²æŸ“ç”¢ç”Ÿéœæ…‹é é¢ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl>npm run generate
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run build</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run generate</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Nuxt CLI ä¾†é”åˆ°ä¸€æ¨£çš„æ•ˆæœï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi build
</span></span><span class=line><span class=cl>npx nuxi generate
</span></span></code></pre></td></tr></table></div></div><p><code>generate</code> æŒ‡ä»¤æœƒè§¸ç™¼ <code>build</code> çš„æŒ‡ä»¤ä¸¦å¸¶æœ‰ <strong>prerender</strong> ç‚º <code>true</code> çš„åƒæ•¸ï¼Œæœ€çµ‚ç”¢ç”Ÿå‡ºä¾†çš„ç›®éŒ„å¯ä»¥ç›´æ¥é€²è¡Œéƒ¨ç½²ï¼Œä¸éœ€è¦å†åŸ·è¡Œä¸€æ¬¡ <code>build</code> çš„æŒ‡ä»¤ã€‚</p><h3 id=ä½¿ç”¨é è¨­é…ç½®é€²è¡Œå»ºæ§‹---å»ºæ§‹é€šç”¨æ¸²æŸ“-universal-rendering-çš„ç¶²ç«™>ä½¿ç”¨é è¨­é…ç½®é€²è¡Œå»ºæ§‹ - å»ºæ§‹é€šç”¨æ¸²æŸ“ (Universal Rendering) çš„ç¶²ç«™</h3><p>é€™é‚Šæˆ‘å€‘ä»¥ <a class=link href=https://wayneblog.ga/2023-01-16/nuxt-nuxt3-practice-project/>ã€Nuxt3ã€‘å¯¦æˆ°ç·´ç¿’ - å¯¦ä½œéƒ¨è½æ ¼</a> æ‰€å»ºç«‹çš„<a class=link href=https://github.com/wjdesign/ithome-2022-ironman-nuxt3/tree/nuxt-app-blog target=_blank rel=noopener>éƒ¨è½æ ¼</a>ä½œç‚ºç¯„ä¾‹ï¼Œä¾†å˜—è©¦ä»¥é è¨­çš„é…ç½®é€²è¡Œå»ºæ§‹ï¼Œç›®å‰ Nuxt 3 é è¨­ <code>nuxt.config.ts</code> ä¸­ <code>ssr</code> å±¬æ€§ç‚º <code>true</code>ï¼Œä¹Ÿå°±ä½¿ç”¨<strong>é€šç”¨æ¸²æŸ“ (Universal Rendering)</strong>ã€‚</p><p>æˆ‘å€‘é€²å…¥å°ˆæ¡ˆç›®éŒ„ï¼ŒåŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run build</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸éœ€è¦åœ¨é¡å¤–çš„é…ç½®æˆ–æ­¥é©Ÿï¼ŒNuxt å°±æœƒè‡ªå‹•å¹«æˆ‘å€‘æ‰“åŒ…ä¸¦å»ºæ§‹å‡ºå¯ä»¥éƒ¨ç½²çš„ç¶²ç«™ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630176278_33ffb31297_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å»ºæ§‹å®Œæˆå¾Œæœƒåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å¤šå‡ºä¸€å€‹ <code>.output</code> ç›®éŒ„ï¼Œ<code>public</code> å°±æ˜¯åœ¨ç¶²ç«™æ ¹ç›®éŒ„ç›´æ¥å…¬é–‹æ‰“åŒ…å¾Œçš„ JSã€CSS åœ–ç‰‡ç­‰ç›¸é—œæª”æ¡ˆã€‚ç”±æ–¼é€šç”¨æ¸²æŸ“ä½¿ç”¨ Nitro ä½œç‚ºæœå‹™å¼•æ“ï¼Œæ‰€ä»¥æœƒéœ€è¦ä½¿ç”¨ Node.js ä¾†å•Ÿå‹•æˆ‘å€‘çš„æœå‹™ï¼Œæ‰€ä»¥ <code>server</code> å‰‡æ˜¯æœƒæ”¾ç½®ä¼ºæœå™¨ç«¯çš„ Nitroã€Server API è™•ç†é‚è¼¯ç­‰ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630134450_bf00a38cea_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æˆ‘å€‘å¯ä»¥å…ˆåœ¨æœ¬åœ°åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ä¾†é è¦½å»ºæ§‹å‡ºä¾†çš„ç¶²ç«™èˆ‡ Nitro æ˜¯å¦èƒ½é‹ä½œæ­£å¸¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>node .output/server/index.mjs
</span></span></code></pre></td></tr></table></div></div><p>ç•¶ç¢ºèªæ²’å•é¡Œå¾Œï¼Œå°±èƒ½ä»¥ <code>.output</code> ç›®éŒ„é€²è¡Œç¶²ç«™éƒ¨ç½²ã€‚</p><h3 id=ä½¿ç”¨é æ¸²æŸ“å»ºç½®å…¨éœæ…‹é é¢ç¶²ç«™>ä½¿ç”¨é æ¸²æŸ“å»ºç½®å…¨éœæ…‹é é¢ç¶²ç«™</h3><p>æˆ‘å€‘å¯ä»¥åœ¨ Nuxt 3 å»ºæ§‹æ™‚æœŸä¾†é€²è¡Œ<strong>é æ¸²æŸ“ (pre-rendering)</strong>ï¼Œå°‡å°ˆæ¡ˆå…§éœ€è¦æ‰“ API è«‹æ±‚åŠå‹•æ…‹æ¸²æŸ“å…ƒä»¶çš„åœ°æ–¹ï¼Œå…ˆæ¸²æŸ“ç”Ÿæˆå‡º HTML ç¶²é ï¼Œé€™å€‹éç¨‹ä¹Ÿç¨±ä¹‹ç‚º<strong>éœæ…‹ç¶²ç«™ç”Ÿæˆ (Static Site Generation)</strong>ï¼Œé€²è€Œå»ºæ§‹å‡ºå…¨éœæ…‹é é¢çš„ç¶²ç«™ã€‚</p><p>åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤é€²è¡Œéœæ…‹é é¢ç”Ÿæˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run generate
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run generate</span>
</span></span></code></pre></td></tr></table></div></div><p><code>generate</code> æŒ‡ä»¤æœƒè§¸ç™¼ <code>build</code> çš„æŒ‡ä»¤ä¸¦å¸¶æœ‰ <strong>prerender</strong> ç‚º <code>true</code> çš„åƒæ•¸ï¼Œæœ€çµ‚æœƒæç¤ºç”¢ç”Ÿçš„ç›®éŒ„ <code>.output/public</code> å¯ä»¥ç”¨ä¾†éƒ¨ç½²è‡³éœæ…‹è¨—ç®¡ä¼ºæœå™¨ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629943864_15a3b70736_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç•¶å»ºæ§‹å®Œæˆå¾Œï¼Œæœƒåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å¤šå‡ºä¸€å€‹ <code>.output</code> ç›®éŒ„åŒæ™‚ä¹Ÿæœƒæœ‰ <code>dist</code> ç›®éŒ„ï¼Œå¯ä»¥ç™¼ç¾ <code>.output/public</code> ç›®éŒ„å…§å®¹èˆ‡ <code>dist</code> ç›®éŒ„ç›¸åŒã€‚</p><p><img src=https://live.staticflickr.com/65535/52629176072_058cbabe22_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>éœæ…‹é é¢çš„ç”Ÿæˆå› ç‚º Nuxt ä½¿ç”¨åŸºæ–¼çˆ¬èŸ²çš„æŠ€è¡“ç‚ºæ¯å€‹é é¢ç”¢ç”Ÿ HTML èˆ‡ Payload æª”æ¡ˆï¼Œå¯ä»¥ç™¼ç¾ç”¢ç”Ÿçš„éœæ…‹é é¢ç›®éŒ„çµæ§‹ï¼Œä¹Ÿå°æ‡‰è‘—æˆ‘å€‘å°ˆæ¡ˆçš„è·¯ç”±é é¢ï¼Œè€Œé é¢å…ƒä»¶è³‡æ–™å¤¾å…§æœƒç”±ä¸€å€‹ <code>index.html</code> èˆ‡ <code>_payload.js</code> çµ„æˆã€‚</p><p>ä¸‹åœ–æ‰€ç”¢ç”Ÿçš„çµæ§‹ï¼Œæ˜¯å› ç‚ºæˆ‘å€‘çš„éƒ¨è½æ ¼è³‡æ–™åº«å…§å·²ç¶“æœ‰ä¸‰ç­†æ–‡ç« è³‡æ–™ï¼Œ<code>/articles</code> é é¢æœƒå–å¾—æ‰€æœ‰çš„æ–‡ç« ï¼Œä¸¦åˆ—å‡ºå°æ‡‰è‘— <code>/articles/1</code>ã€<code>/articles/2</code> èˆ‡ <code>/articles/3</code> ç›®éŒ„ï¼Œæ¯å€‹é é¢å…§ä¹Ÿéƒ½åŒ…å«é å…ˆå¾ Server API è«‹æ±‚å¥½çš„æ–‡ç« è³‡æ–™ä¸¦å­˜æ–¼ <code>_payload.js</code> ä¹‹ä¸­ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630134335_4a264f46cd_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>è‡³æ­¤æˆ‘å€‘å°±å¯ä»¥å°‡ <code>.output</code> ç›®éŒ„éƒ¨ç½²è‡³ä¼ºæœå™¨æˆ–éœæ…‹è¨—ç®¡æœå‹™ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦åœ¨ä½¿ç”¨ Node.js ä¼ºæœå™¨ä¾†æœå‹™é€™äº›éœæ…‹æª”æ¡ˆã€‚</p><h3 id=æ‰‹å‹•è¨­å®šé æ¸²æŸ“çš„è·¯ç”±è¦å‰‡>æ‰‹å‹•è¨­å®šé æ¸²æŸ“çš„è·¯ç”±è¦å‰‡</h3><p>æˆ‘å€‘ä½¿ç”¨ <code>generate</code> æŒ‡ä»¤æ‰€ç”¢ç”Ÿçš„å…¨éœæ…‹é é¢ç¶²ç«™ï¼Œæ˜¯åŸºæ–¼ Nuxt çš„çˆ¬èŸ²æŠ€è¡“ä¾†åˆ†æé é¢ï¼Œå¦‚åŒå‰å€‹ä¾‹å­æ–‡ç« é é¢çš„ç”¢ç”Ÿæ‰€æè¿°ï¼Œå¦‚æœæˆ‘å€‘çš„è³‡æ–™åº«å­˜åœ¨è‘— <strong>200</strong> ç­†è³‡æ–™ï¼Œä½† <code>/articles</code> é é¢æ‰€æ‰“çš„ API ç¸½æ˜¯åªå›å‚³æœ€æ–°çš„ <strong>10</strong> ç­†ï¼Œé‚£éº¼é‚£äº›æ²’æœ‰è·¯ç”±é€£çµå¯ä»¥é€£çµéå»çš„æ–‡ç« é é¢ï¼Œå°±ç„¡æ³•è¢« Nuxt çš„çˆ¬èŸ²æ‰€åˆ†æåˆ°ï¼Œä¹Ÿå°±ç„¡æ³•ç”¢ç”Ÿå°æ‡‰çš„éœæ…‹é é¢ã€‚</p><p>ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥è—‰ç”±é…ç½® Nitro çš„é æ¸²æŸ“è·¯ç”±ï¼Œä¾†æ‰‹å‹•çš„è¨­å®šå“ªäº›é é¢è¦é€²è¡Œé æ¸²æŸ“ç”¢ç”Ÿéœæ…‹é é¢ï¼Œæˆ–è€…å¿½ç•¥ç”¢ç”Ÿéœæ…‹é é¢ã€‚</p><h5 id=nuxtconfigts-7>nuxt.config.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>nitro</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>prerender</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>ignore</span><span class=o>:</span> <span class=p>[],</span>       <span class=c1>// å¿½ç•¥ç‰¹å®šè·¯ç”±ä¸é€²è¡Œé æ¸²æŸ“
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>routes</span><span class=o>:</span> <span class=p>[],</span>       <span class=c1>// æŒ‡å®šè·¯ç”±é€²è¡Œé æ¸²æŸ“
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>crawlLinks</span>: <span class=kt>true</span>  <span class=c1>// å•Ÿç”¨ Nuxt çˆ¬èŸ²è’é›†é é¢é€£çµä¾†é€²è¡Œé æ¸²æŸ“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç•¶ç„¶ï¼Œä¹Ÿå¯ä»¥æ­é… <code>build</code> æˆ– <code>generate</code> æŒ‡ä»¤åšä½¿ç”¨ï¼Œä½†æœƒç¨å¾®æœ‰äº›ä¸ä¸€æ¨£ã€‚</p><h4 id=build>build</h4><p>ä¾‹å¦‚ï¼šè¨­ç½®å¦‚ä¸‹ï¼Œä¸¦ä½¿ç”¨ <code>npm run build</code> æŒ‡ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>nitro</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>prerender</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;/articles&#39;</span><span class=p>,</span> <span class=s1>&#39;/articles/2&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>é‚£éº¼å»ºæ§‹å‡ºä¾†çš„é€šç”¨æ¸²æŸ“ç¶²ç«™ï¼Œå°±æœƒåŒ…å«éƒ¨åˆ†é é¢æ˜¯å·²ç¶“é æ¸²æŸ“å¥½çš„éœæ…‹é é¢ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629696171_a693e5422d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=generate>generate</h4><p>ç•¶æˆ‘å€‘ä½¿ç”¨ <code>generate</code> æ™‚ï¼Œå› ç‚ºæ˜¯é€²è¡Œå…¨ç«™çš„éœæ…‹é é¢ç”Ÿæˆï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ¶µè“‹äº†æ‰€æœ‰è·¯ç”±é é¢ï¼Œä¸¦ä¸” <code>nitro.prerender.crawlLinks</code> å±¬æ€§é è¨­ç‚º <code>true</code> æœƒå•Ÿç”¨ Nuxt çˆ¬èŸ²ä¾†è’é›†æ•´çš„ç¶²ç«™çš„è·¯ç”±é é¢ï¼Œé€²è€Œé–‹å§‹é æ¸²æŸ“ç”¢ç”Ÿéœæ…‹é é¢ã€‚</p><p>ä¾‹å¦‚ï¼šè¨­ç½®å¦‚ä¸‹ï¼Œä¸¦ä½¿ç”¨ <code>npm run generate</code> æŒ‡ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineNuxtConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>nitro</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>prerender</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>ignore</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=s1>&#39;/register&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>routes</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;/articles/2&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>crawlLinks</span>: <span class=kt>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>é‚£éº¼å»ºæ§‹å‡ºä¾†çš„ <code>.output</code> ç›®éŒ„ï¼Œå°±æœƒå› ç‚ºè¨­ç½®äº† <code>nitro.prerender.ignore</code> è€Œå¿½ç•¥ <strong>/login</strong> èˆ‡ <strong>/register</strong> é é¢çš„éœæ…‹ç”Ÿæˆ ï¼Œè€Œ <strong>/articles/2</strong> åœ¨ç¶²ç«™ä¸­å› ç‚ºæ²’æœ‰ä»»ä½•é é¢èƒ½é€£çµåˆ°æ­¤ï¼Œæ‰€ä»¥ Nuxy çˆ¬èŸ²ç„¡æ³•è’é›†åˆ°ï¼Œæ‰€ä»¥å¯ä»¥æ‰‹å‹•æ·»åŠ é€² <code>nitro.prerender.routes</code> ä¹‹ä¸­ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629696156_f6e435c338_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¦‚æœæˆ‘å€‘å°‡ <code>nitro.prerender.crawlLinks</code> å±¬æ€§è¨­ç‚º <code>false</code>ï¼Œé‚£éº¼åœ¨ç”¢ç”Ÿéœæ…‹é é¢çš„æ™‚å€™ï¼Œå°±ç®— <code>/articles</code> åŒ…å«äº†æ‰€æœ‰æ–‡ç« çš„é€£çµï¼ŒNuxt çˆ¬èŸ²ä¹Ÿå°±ä¸æœƒè’é›†é€£çµä¾†ç”¢ç”Ÿéœæ…‹é é¢ï¼Œè€Œæ˜¯åƒ…ä¾ç…§å°ˆæ¡ˆç›®éŒ„ä¸‹çš„ <code>pages</code> æ‰€ç”¢ç”Ÿå‡ºçš„è·¯ç”±ä½†ä¸åŒ…å« <code>[id].vue</code> é€™é¡å‹•æ…‹åŒ¹é…çš„è·¯ç”±ä¾†ç”¢ç”Ÿéœæ…‹é é¢ã€‚</p><h3 id=å»ºæ§‹åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“çš„ç¶²ç«™>å»ºæ§‹åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“çš„ç¶²ç«™</h3><p>åŒæ¨£çš„ä½¿ç”¨<a class=link href=https://github.com/wjdesign/ithome-2022-ironman-nuxt3/tree/nuxt-app-blog target=_blank rel=noopener>éƒ¨è½æ ¼</a>ä½œç‚ºç¯„ä¾‹ï¼Œä¾†å˜—è©¦å°‡ <code>nuxt.config.ts</code> ä¸­ <code>ssr</code> å±¬æ€§è¨­ç‚º <code>false</code>ï¼Œä¹Ÿå°±è®“ç¶²ç«™<strong>åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“ (Client-side Only Rendering)</strong>ã€‚</p><p>åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤é€²è¡Œå»ºæ§‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run build</span>
</span></span></code></pre></td></tr></table></div></div><p>å»ºæ§‹å®Œæˆå¾Œï¼Œæœƒåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹å¤šå‡ºä¸€å€‹ <code>.output</code> ç›®éŒ„ï¼Œå¯ä»¥ç™¼ç¾ <code>public</code> ç›®éŒ„çµæ§‹èˆ‡é€šç”¨æ¸²æŸ“å»ºæ§‹å‡ºçš„ä¸å¤§ä¸€æ¨£ï¼Œå¤šå‡ºäº†åƒ Vue å°ˆæ¡ˆå»ºæ§‹å®Œæˆå¾Œçš„ <code>index.html</code> æª”æ¡ˆï¼Œä¾†ä½œç‚ºé¡¯ç¤ºçš„å®¹å™¨ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629176037_b1ec094f74_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>é€™é‚Šæ¯”è¼ƒéœ€è¦ç•™æ„çš„åœ°æ–¹æ˜¯ï¼Œç•¶æˆ‘å€‘å°‡ <code>ssr</code> å±¬æ€§è¨­ç‚º <code>false</code>ï¼Œä¹Ÿé‚„æ˜¯æœƒåœ¨ <code>.output</code> å»ºæ§‹å‡º <code>server</code> ç›®éŒ„ï¼Œä¹Ÿæ“æœ‰è‘— <code>.output/server/index.mjs</code>ã€‚</p><p>é‚£é€™ä¸å°±æ„è¬‚è‘—æˆ‘é‚„æ˜¯å¾—æœ‰ Node.js æœå‹™æ‰èƒ½éƒ¨ç½²å—ï¼Ÿå…¶å¯¦ä½ å¯ä»¥é€™éº¼ç†è§£ï¼Œç•¶æˆ‘å€‘è¨­å®š Nuxt åƒ…åœ¨å®¢æˆ¶ç«¯é€²è¡Œæ¸²æŸ“ï¼Œä½† Nuxt å°ˆæ¡ˆä¸­ä»ç„¶å¯èƒ½æœ‰ Server APIï¼Œé€™å€‹å±¬æ–¼ä¼ºæœå™¨ç«¯çš„ APIï¼Œç¸½ä¸å¯èƒ½ä¸€åŒæ‰“åŒ…è‡³å‰ç«¯å»åšæ¶è¨­å§ï¼æ‰€ä»¥ä½¿ç”¨ <code>npm run build</code> å»ºæ§‹å‡ºä¾†çš„å°ˆæ¡ˆï¼Œéƒ½æœƒä½¿ç”¨ Nitro å¼•æ“ä¾†å•Ÿå‹•æœå‹™ï¼Œè‹¥æœ‰ Server API çš„è™•ç†é‚è¼¯ï¼Œå‰‡æœƒé€£å¸¶æ‰“åŒ…é€² <code>.output/server</code> ç›®éŒ„ä¹‹ä¸‹ã€‚</p><p>å¦‚æœä½ ç¢ºå®š Nuxt çš„å°ˆæ¡ˆå…§æ²’æœ‰è‡ªå·±å¯¦ä½œçš„ Server APIï¼Œå…¨éƒ¨æ˜¯ä¾è³´éå°ˆæ¡ˆå…§çš„ Server APIï¼Œé‚£éº¼ä½ å¯ä»¥ç›´æ¥å°‡ <code>public</code> ç›®éŒ„ï¼Œè¦–ç‚º Vue å»ºæ§‹å‡ºçš„ <code>dist</code> ç›®éŒ„ä¾†é€²è¡Œéƒ¨ç½²ï¼Œå› ç‚ºé¸æ“‡ä¸å†éœ€è¦ Nitro å¼•æ“ä¾†ç‚ºæˆ‘å€‘æä¾› Web Server çš„æœå‹™ï¼Œä¸”å°ˆæ¡ˆå…§çš„å‰ç«¯ä¹Ÿéƒ½æ‰“åŒ…å®Œåœ¨ <code>public</code> ä¸‹å¯ä»¥è¦–ç‚º SPA ç¶²ç«™ã€‚</p><h3 id=æ•´ç†é€™äº›æ’åˆ—å»ºæ§‹åƒæ•¸çš„çµ„åˆ>æ•´ç†é€™äº›æ’åˆ—å»ºæ§‹åƒæ•¸çš„çµ„åˆ</h3><p>ç›¸ä¿¡çœ‹åˆ°é€™è£¡ï¼Œå¯èƒ½å°å»ºæ§‹èˆ‡ç”¢ç”Ÿéœæ…‹é é¢æœ‰ä¸€é»æ··äº‚äº†ï¼Œé€™é‚Šç¨å¾®æ•´ç†äº†ä¸€ä¸‹ï¼Œå¤§å®¶å¯ä»¥å†ä¾æ“šéœ€æ±‚ä¾†å•Ÿç”¨ç›¸å°æ‡‰çš„é…ç½®ï¼š</p><h4 id=npm-run-build--ssr-true>npm run build + ssr: true</h4><ul><li>build + ssr: true</li></ul><p>Nuxt 3 é è¨­çš„å»ºæ§‹åƒæ•¸ï¼Œä½¿ç”¨<strong>é€šç”¨æ¸²æŸ“ (Universal Rendering) æ¨¡å¼</strong>ã€‚</p><ul><li>build + ssr: true + nitro.prerender.crawlLinks: true</li></ul><p>ä½¿ç”¨é€šç”¨æ¸²æŸ“æ¨¡å¼ï¼Œé é¢ä¸­éœ€è¦æ‰“ API å‹•æ…‹ç”¢ç”Ÿçš„é€£çµè€Œè¢« Nuxt çˆ¬èŸ²æ‰€è’é›†åˆ°çš„é é¢å°‡è¢«é æ¸²æŸ“æˆéœæ…‹é é¢ã€‚</p><ul><li>build + ssr: true + nitro.prerender.routes + nitro.prerender.crawlLinks: false</li></ul><p>ä½¿ç”¨é€šç”¨æ¸²æŸ“æ¨¡å¼ï¼Œä½†æŒ‡å®šé é¢é æ¸²æŸ“æˆéœæ…‹é é¢ã€‚</p><h4 id=npm-run-build--ssr-false>npm run build + ssr: false</h4><ul><li>build + ssr: false</li></ul><p><strong>åƒ…åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“ (Client-side Only Rendering)</strong> çš„æ¨¡å¼ï¼Œéƒ¨ç½²æ™‚åŒæ¨£éœ€è¦ä½¿ç”¨ <code>server</code> ä¸­çš„ <code>index.mjs</code> ä¾†å•Ÿå‹• Nitro ä¼ºæœå™¨ï¼Œé€™æ¨£æ‰èƒ½æ­£ç¢ºçš„é‹ä½œ Server APIï¼›é™¤éç¢ºèªå°ˆæ¡ˆå…§å®Œå…¨ç„¡ä¾è³´å°ˆæ¡ˆå…§çš„ Server APIï¼Œå‰‡å¯ä»¥ç›´æ¥å°‡ <code>.output/public</code> è¦–ç‚º Vue çš„ <code>dist</code> ç›®éŒ„é€²è¡Œéƒ¨ç½²ã€‚</p><h4 id=npm-run-generate--ssr-true>npm run generate + ssr: true</h4><ul><li>generate + ssr: true</li></ul><p>ä½¿ç”¨é æ¸²æŸ“ç”¢ç”Ÿéœæ…‹é é¢ï¼Œé è¨­ç”¢ç”Ÿå…¨ç«™éœæ…‹é é¢ï¼Œ<code>generate</code> ä¸‹ <code>nitro.prerender.crawlLinks</code> å±¬æ€§é è¨­è®Šç‚º <code>true</code>ï¼Œæ•´å€‹ç¶²ç«™åŒ…å« Nuxt çˆ¬èŸ²æ‰€è’é›†åˆ°çš„é é¢å°‡è¢«é æ¸²æŸ“æˆéœæ…‹é é¢ã€‚</p><ul><li>generate + ssr: true + nitro.prerender.ignore</li></ul><p>ä½¿ç”¨ <code>generate</code> å·²ç¶“åŒ…å«æ•´å€‹ç¶²ç«™ï¼Œå¦‚æœæƒ³è¦å¿½ç•¥æŸäº›é é¢é€²è¡Œé æ¸²æŸ“ï¼Œå¯ä»¥æ·»åŠ è·¯ç”±è‡³ <code>nitro.prerender.ignore</code> ä¸­ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œé€™äº›è¢«å¿½ç•¥çš„é é¢å¦‚æœæœ‰ä½¿ç”¨å°ˆæ¡ˆå…§çš„ Server API éœ€æ±‚ï¼Œå¯èƒ½å°±ç„¡æ³•æ­£ç¢ºçš„åœ¨éœæ…‹è¨—ç®¡å¹³å°é‹ä½œï¼Œè€Œå¤–éƒ¨çš„å€’æ˜¯ä¸å—å½±éŸ¿ã€‚</p><ul><li>generate + ssr: true + nitro.prerender.routes</li></ul><p>é›–ç„¶ä½¿ç”¨ <code>generate</code> å·²ç¶“åŒ…å«æ•´å€‹ç¶²ç«™ï¼Œä½† Nuxt çˆ¬èŸ²æ‰€è’é›†åˆ°çš„é é¢åƒ…ç‚ºé é¢ä¸­ç”¢ç”Ÿçš„ï¼Œå¦‚æœé€£çµä¸å­˜åœ¨é€™äº›é é¢å…§ï¼Œåªèƒ½ç›´æ¥å¾ç€è¦½å™¨ç¶²å€åˆ—è¼¸å…¥é€²å…¥ï¼Œé‚£éº¼æˆ‘å€‘å¯ä»¥å°‡è·¯ç”±æ·»åŠ è‡³ <code>nitro.prerender.routes</code> ä¾†é¡å¤–è£œå……éœ€è¦é æ¸²æŸ“çš„é é¢ã€‚</p><ul><li>generate + ssr: true + nitro.prerender.routes + nitro.prerender.crawlLinks: false</li></ul><p>åŒæ¨£æœƒç”¢ç”Ÿå…¨ç«™éœæ…‹é é¢ï¼Œä½†ä¸ä½¿ç”¨ Nuxt çˆ¬èŸ²æ‰€è’é›†åˆ°çš„é€£çµé é¢ï¼Œæ‰€ä»¥é€™äº›å‹•æ…‹åŒ¹é…æˆ–éœ€è¦æ‰“ API ç²å–è³‡æ–™å†æ¸²æŸ“çš„é é¢ï¼Œå°‡ä¸æœƒæ˜¯éœæ…‹é é¢ï¼Œå› æ­¤ä¹Ÿéœ€è¦æ³¨æ„ï¼Œå¦‚æœé€™äº›é é¢æœ‰ä½¿ç”¨å°ˆæ¡ˆå…§çš„ Server API éœ€æ±‚ï¼Œå¯èƒ½å°±ç„¡æ³•æ­£ç¢ºçš„åœ¨éœæ…‹è¨—ç®¡å¹³å°é‹ä½œï¼Œè€Œå¤–éƒ¨çš„å€’æ˜¯ä¸å—å½±éŸ¿ã€‚</p><blockquote><p>å…¶å®ƒè·Ÿå»ºæ§‹æœ‰é—œçš„åƒæ•¸å±¬æ€§å¯ä»¥å†åƒè€ƒ<a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config/#build target=_blank rel=noopener>å®˜æ–¹æ–‡ä»¶</a>ã€<a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config/#vite target=_blank rel=noopener>Vite</a> èˆ‡ <a class=link href=https://nuxt.com/docs/api/configuration/nuxt-config/#webpack-1 target=_blank rel=noopener>webpack</a> å»ºæ§‹å·¥å…·ä¹Ÿéƒ½èƒ½é¡å¤–è¨­å®šåƒæ•¸å±¬æ€§ã€‚</p></blockquote><p>Nuxt çš„å»ºæ§‹æŒ‡ä»¤ <code>build</code> èˆ‡ç”¢ç”Ÿéœæ…‹é é¢çš„ <code>generate</code> æŒ‡ä»¤ï¼Œè®“æˆ‘å€‘å¯ä»¥ä¾æ“šä¸åŒçš„æƒ…å¢ƒä¾†æ±ºå®šæ¸²æŸ“æ¨¡å¼èˆ‡é æ¸²æŸ“çš„é é¢ï¼Œæœ€çµ‚ç”¢ç”Ÿçš„ <code>.output</code> ç›®éŒ„ä¹Ÿæœƒæœ‰ä¸ä¸€æ¨£çš„çµæ§‹ã€‚é æ¸²æŸ“çš„é é¢èˆ‡å–®ç´”çš„ SPA ä¹Ÿè¦æ³¨æ„ä½¿å¦æœ‰ä½¿ç”¨åˆ° Nuxt å°ˆæ¡ˆå»ºç«‹çš„ Server APIï¼Œå†æ±ºå®šæ˜¯å¦éœ€è¦ Nitro ä¼ºæœå™¨ä¾†å•Ÿå‹•æ­£å¼ç’°å¢ƒçš„ç¶²ç«™æœå‹™ã€‚ç•¶ä¸€åˆ‡å°±ç·’ä¹‹å¾Œæœ€å¾Œå°±èƒ½å°‡è¼¸å‡ºçš„ç›®éŒ„æ‰“åŒ…é€²è¡Œéƒ¨ç½²ã€‚</p><hr><h2 id=å°±å‰©æœ€å¾Œä¸€æ­¥äº†---éƒ¨ç½²-deployment>å°±å‰©æœ€å¾Œä¸€æ­¥äº† - éƒ¨ç½² (Deployment)</h2><p>Nuxt 3 çš„å°ˆæ¡ˆæ‡‰ç”¨ç¨‹å¼ï¼Œå¯ä»¥éƒ¨ç½²åœ¨ Node.js çš„ä¼ºæœå™¨ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å°‡é æ¸²æŸ“çš„éœæ…‹ç¶²ç«™ç”±éœæ…‹è¨—ç®¡å¹³å°ä¾†æœå‹™ï¼Œæˆ–é€™éƒ¨ç½²è‡³ç„¡ä¼ºæœå™¨ (serverless) æˆ– CDN ç’°å¢ƒä¸Šã€‚</p><h3 id=ä½¿ç”¨-nodejs-ä¼ºæœå™¨>ä½¿ç”¨ Node.js ä¼ºæœå™¨</h3><p>Nuxt 3 çš„å°ˆæ¡ˆé è¨­ä½¿ç”¨ <a class=link href=https://nuxt.com/docs/guide/concepts/server-engine/ target=_blank rel=noopener>Nitro</a> ä¾†ä½œç‚ºæœå‹™å¼•æ“ï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨ä»»ä½• Node.js ä¼ºæœå™¨ç’°å¢ƒä¹‹ä¸‹ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥å•Ÿå‹• Nuxt å»ºç½®å‡ºä¾†çš„ Nitro Serverã€‚</p><p>ç•¶æˆ‘å€‘ä½¿ç”¨ <code>npm run build</code> å»ºæ§‹å°ˆæ¡ˆå¾Œï¼Œè¼¸å‡ºçš„ <code>.output/server/index.mjs</code> æª”æ¡ˆï¼Œå³æ˜¯ä¸€å€‹æº–å‚™å•Ÿå‹• Node ä¼ºæœå™¨çš„å…¥å£é»ã€‚</p><p>æˆ‘å€‘å¯ä»¥é€éä¸‹åˆ—æŒ‡ä»¤ä¾†å•Ÿå‹•æˆ‘å€‘å»ºæ§‹å¥½çš„å°ˆæ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>node .output/server/index.mjs
</span></span></code></pre></td></tr></table></div></div><p>åŸ·è¡Œå¾Œå¦‚ä¸‹é¢åœ–ç¤ºé¡¯ç¤ºï¼Œç¶²ç«™å°‡æ–¼ <strong>Prot: 3000</strong> é€²è¡Œæœå‹™ç›£è½ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629762661_a3a806890c_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½ å¯ä»¥è¨­å®šä¸‹åˆ—ç’°å¢ƒè®Šæ•¸ä¾†èª¿æ•´é è¨­ç›£è½çš„ <strong>Port</strong> æˆ– <strong>Host</strong>ã€‚</p><ul><li><strong>NITRO_PORT</strong> æˆ– <strong>PORT</strong>ï¼šç›£è½çš„ Port (é è¨­ç‚º <strong>3000</strong>)</li><li><strong>NITRO_HOST</strong> æˆ– <strong>HOST</strong>ï¼šæœå‹™çš„ Host (æ²’æœ‰é è¨­å€¼ï¼Œä½†é è¨­ç›£è½æ‰€æœ‰çš„ç¶²è·¯ä»‹é¢åŒ…å« IPv4 èˆ‡ IPv6 çš„ä½å€ )</li><li><strong>NITRO_SSL_CERT</strong> èˆ‡ <strong>NITRO_SSL_KEY</strong>ï¼šå¦‚æœå…©è€…çš†è¨­å®šï¼Œå°‡ä»¥ HTTPS æ¨¡å¼ä¸‹å•Ÿå‹•ä¼ºæœå™¨ï¼Œé€šå¸¸åƒ…ä½œç‚ºæ¸¬è©¦ç”¨é€”ï¼Œå› ç‚ºå»ºè­°å°‡ SSL æ†‘è­‰ç­‰è¨­å®šæ–¼æä¾›åå‘ä»£ç†çš„æœå‹™ï¼Œä¾‹å¦‚ NGINX æˆ– CloudFlareï¼ŒNitro ä¼ºæœå™¨å‰‡åŸ·è¡Œåœ¨åå‘ä»£ç†å¾Œé¢ã€‚</li></ul><p>éƒ¨ç½²æ™‚ï¼Œä½ å¯ä»¥å°‡æ•´å€‹ <code>.output</code> ä¸Šå‚³è‡³æ­£å¼ç’°å¢ƒçš„æ©Ÿå™¨ä¸Šï¼Œä¸¦ä½¿ç”¨ Node.js åšåŸ·è¡Œï¼Œä½†ç‚ºäº†é˜²æ­¢æˆ‘å€‘çš„æœå‹™å› ç‚ºç•°å¸¸ï¼Œå°è‡´ Node.js æœå‹™æ„å¤–å´©æ½°ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹ <strong>Process</strong> çš„ <strong>Daemon</strong>ï¼Œä¾†å°‡æœå‹™å¸¸é§ï¼Œæ„å¤–å´©æ½°æ™‚èƒ½è‡ªå‹•é‡å•Ÿï¼Œä¾†ç¶­æŒæ•´å€‹ç¶²ç«™çš„æ­£å¸¸æœå‹™ã€‚</p><p>é€šå¸¸æˆ‘å€‘æœƒåœ¨æ­£å¼ç’°å¢ƒä½¿ç”¨ <a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a> ä¾†ç®¡ç† Node.js çš„æœå‹™ï¼Œ<a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a> æ˜¯ç¶­æŒä¸€å€‹ Process åŸ·è¡Œçš„ç®¡ç†å™¨ï¼Œæˆ‘å€‘å¯ä»¥è—‰ç”± <a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a> ä¾†å•Ÿå‹•æˆ‘å€‘çš„ Nitro Serverï¼Œç•¶æœå‹™å´©æ½°æ™‚èƒ½è‡ªå‹•çš„é‡æ–°å•Ÿå‹•ï¼Œä»¥ç¶­æŒæœå‹™çš„æ­£å¸¸é‹ä½œï¼Œé™¤æ­¤ä¹‹å¤– <a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a> å¯ä»¥å•Ÿç”¨å¢é›† (Cluster) çš„åŠŸèƒ½çµåˆè«‹æ±‚çš„é™„è¼‰å¹³è¡¡ï¼Œä¾†è®“å¤šæ ¸å¿ƒçš„æ©Ÿå™¨æå‡è³‡æºçš„åˆ©ç”¨ç‡èˆ‡æ•ˆèƒ½ï¼Œæ›´é‚„æœ‰ç›£æ¸¬å¤šé …æ•¸æ“šç­‰åŠŸèƒ½å¯ä¾›æ­£å¼ç’°å¢ƒåšä½¿ç”¨ã€‚</p><h3 id=ä½¿ç”¨-pm2>ä½¿ç”¨ PM2</h3><p>ä½¿ç”¨çš„æ–¹å¼ä¹Ÿå¾ˆç°¡å–®ï¼Œé¦–å…ˆä½¿ç”¨ NPM å®‰è£ <a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a>ï¼Œå¯ä»¥åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -g pm2
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ Nuxt å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ <code>ecosystem.config.js</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=ecosystemconfigjs>ecosystem.config.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>apps</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;NuxtAppName&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>exec_mode</span><span class=o>:</span> <span class=s1>&#39;cluster&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>instances</span><span class=o>:</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>script</span><span class=o>:</span> <span class=s1>&#39;./.output/server/index.mjs&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥è‘—æˆ‘å€‘å°±èƒ½ä½¿ç”¨ <a class=link href=https://pm2.keymetrics.io/ target=_blank rel=noopener>PM2</a> ä¾†åŸ·è¡Œæˆ‘å€‘çš„æœå‹™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pm2 start ecosystem.config.js
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52630242508_e873a0929c_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½ ä¹Ÿå¯ä»¥åœ¨ <code>ecosystem.config.js</code> ä¸­æ·»åŠ ç’°å¢ƒè®Šæ•¸ã€‚</p><h5 id=ecosystemconfigjs-1>ecosystem.config.js</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>apps</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;NuxtAppName&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>exec_mode</span><span class=o>:</span> <span class=s1>&#39;cluster&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>instances</span><span class=o>:</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>script</span><span class=o>:</span> <span class=s1>&#39;./.output/server/index.mjs&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>env</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>NITRO_PORT</span><span class=o>:</span> <span class=mi>3001</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>NITRO_HOST</span><span class=o>:</span> <span class=s1>&#39;127.0.0.1&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è£½ä½œ-docker-image>è£½ä½œ Docker Image</h3><p>ç›®å‰ä½¿ç”¨ Docker ä¾†éƒ¨ç½²æœå‹™çš„ä¹Ÿä¸åœ¨å°‘æ•¸ï¼Œå€‹äººä¹Ÿæ˜¯æ¡ç”¨å®¹å™¨åŒ–ä¾†å•Ÿå‹•ç¶²ç«™æœå‹™ä¸¦æ•´åˆ CI/CD è‡ªå‹•åŒ–çš„æµç¨‹ä¾†å»ºæ§‹èˆ‡éƒ¨ç½² Nuxt 3 å°ˆæ¡ˆï¼Œä»¥ä¸‹å°‡åˆ—å‡ºè‡ªå·±ä½¿ç”¨çš„ Dockerfileï¼Œæœ‰èˆˆè¶£çš„å¯ä»¥å†åƒè€ƒçœ‹çœ‹ã€‚</p><p>å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ <code>Dockerfile</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=dockerfile>Dockerfile</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> node:16-alpine AS builder</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> mkdir -p /nuxt-app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /nuxt-app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> . .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> npm ci <span class=o>&amp;&amp;</span> npm cache clean --force<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> npm run build<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> keymetrics/pm2:16-alpine</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> mkdir -p /nuxt-app/.output<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /nuxt-app/.output</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>builder /nuxt-app/.output .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./ecosystem.config.js /nuxt-app<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>NUXT_HOST</span><span class=o>=</span><span class=m>0</span>.0.0.0<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>NUXT_PORT</span><span class=o>=</span><span class=m>3000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>EXPOSE</span><span class=s> 3000 </span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;pm2-runtime&#34;</span><span class=p>,</span> <span class=s2>&#34;start&#34;</span><span class=p>,</span> <span class=s2>&#34;/nuxt-app/ecosystem.config.js&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>æ‰“é–‹çµ‚ç«¯æ©Ÿ (Terminal)ï¼Œä¸¦æ–¼å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -t nuxt-app .
</span></span></code></pre></td></tr></table></div></div><p>ç•¶é–‹å§‹è£½ä½œ Docker Image æ™‚ï¼Œæœƒä¾ç…§ Dockerfile ä¾†å»ºç½®ï¼Œä¸»è¦åˆ†æˆå…©å€‹éƒ¨åˆ†ï¼Œé¦–å…ˆæˆ‘æœƒå…ˆåœ¨ <code>node:16-alpine</code> å®¹å™¨ç’°å¢ƒä¸­åŸ·è¡Œå»ºæ§‹ (build) çš„æŒ‡ä»¤ï¼Œä¸¦å°‡éœ€è¦éƒ¨ç½²çš„ç›®éŒ„ <code>.output</code> è¤‡è£½è‡³ <code>keymetrics/pm2:16-alpine</code> å®¹å™¨ç’°å¢ƒä¸­ï¼Œé€™æ¨£æœ€çµ‚ä½¿ç”¨ PM2 åŸ·è¡Œæœå‹™çš„ Image å¤§å°å°±æœƒç¨å¾®å°ä¸€äº›ã€‚</p><p>ç•¶ Docker Image è£½ä½œå®Œç•¢å¾Œï¼Œå¯ä»¥å†è—‰ç”± docker run æˆ– docker compose ç”šè‡³ k8s ä¾†å•Ÿå‹•æœå‹™å¾Œï¼Œå†ç”±å¦‚ NGINX æä¾›åå‘ä»£ç†æœå‹™é€£æ¥åˆ°å…§éƒ¨çš„ Nitro Serverã€‚</p><h3 id=éƒ¨ç½²è‡³-cloudflare-workers>éƒ¨ç½²è‡³ CloudFlare Workers</h3><p>æˆ‘å€‘ä¹Ÿå¯ä»¥å°‡ Nuxt éƒ¨ç½²åˆ°ç„¡ä¼ºæœå™¨ (Serverless) çš„ç’°å¢ƒï¼Œå®˜æ–¹æä¾›äº†å¤šç¨®çš„é è¨­éƒ¨ç½²å¯ä»¥åšä½¿ç”¨ï¼Œæˆ‘å€‘å°±ç°¡å–®ä»¥ä¸€å€‹ä¹¾æ·¨çš„ Nuxt 3 å°ˆæ¡ˆä¾†åšç¯„ä¾‹ï¼Œå˜—è©¦éƒ¨ç½²åˆ° <a class=link href=https://workers.cloudflare.com/ target=_blank rel=noopener>CloudFlare Workers</a>ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆæº–å‚™ä¸€å€‹ Nuxt 3 å°ˆæ¡ˆï¼Œåœ¨æ­¤æˆ‘ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤å»ºç«‹ä¸€å€‹ä¹¾æ·¨çš„ Nuxt 3 å°ˆæ¡ˆï¼Œä¸¦é€²å…¥å°ˆæ¡ˆç›®éŒ„å®‰è£å¥—ä»¶ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx nuxi init nuxt-app
</span></span><span class=line><span class=cl><span class=nb>cd</span> nuxt-app
</span></span><span class=line><span class=cl>npm install
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ NPM å®‰è£ <a class=link href=https://www.npmjs.com/package/wrangler target=_blank rel=noopener>wrangler</a>ï¼Œå®ƒæ˜¯ç”¨æ–¼å»ºæ§‹ Cloudflare Workers çš„å‘½ä»¤åˆ—å·¥å…· (command line tool)ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -g wrangler
</span></span></code></pre></td></tr></table></div></div><p>ä½ å¯èƒ½éœ€è¦è¨»å†Šä¸€å€‹ CloudFlare çš„å¸³è™Ÿï¼Œä¸¦ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ä¾†ç™»å…¥ CloudFlare å¸³è™Ÿä¸¦æˆæ¬Š Wrangler ä¾†å»ºç«‹ CloudFlare Workersï¼Œæˆ‘å€‘é¸æ“‡å…è¨± (Allow) å³å¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wrangler login
</span></span></code></pre></td></tr></table></div></div><p>æ–¼å°ˆæ¡ˆç›®éŒ„ä¸‹å»ºç«‹ <code>wrangler.toml</code> å…§å®¹å¦‚ä¸‹ï¼š</p><h5 id=wranglertoml>wrangler.toml</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;nuxt-app-hello&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>main</span> <span class=p>=</span> <span class=s2>&#34;./.output/server/index.mjs&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>workers_dev</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>compatibility_date</span> <span class=p>=</span> <span class=s2>&#34;2022-10-15&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>site</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>bucket</span> <span class=p>=</span> <span class=s2>&#34;.output/public&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å°‡ <code>NITRO_PRESET</code> ç’°å¢ƒè®Šæ•¸ï¼Œè¨­ç½®ç‚º <code>cloudflare</code> ä¸¦é–‹å§‹å»ºæ§‹æˆ‘å€‘çš„å°ˆæ¡ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>NITRO_PRESET</span><span class=o>=</span>cloudflare npm run build
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52630011164_8598f2fb8a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ¥ä¸‹ä¾†ï¼Œå¯ä»¥é¸æ“‡åŸ·è¡Œçµ‚ç«¯æ©Ÿæç¤ºçš„æŒ‡ä»¤ä¾†å•Ÿå‹•ä¼ºæœå™¨é€²è¡Œç›¸é—œæ¸¬è©¦ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx wrangler dev .output/server/index.mjs --site .output/public --local
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52630011119_2100d3cd32_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ç•¶ç¢ºèªå°ˆæ¡ˆæœå‹™é‹ä½œä¸Šæ²’å•é¡Œå¾Œï¼Œå¯ä»¥åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤é€²è¡Œç™¼å¸ƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx wrangler publish
</span></span></code></pre></td></tr></table></div></div><p>å®Œæˆç™¼å¸ƒå¾Œï¼Œå°±æœƒæç¤ºæˆ‘å€‘ç™¼å¸ƒå®ŒæˆåŠæœå‹™çš„ç¶²å€ï¼Œä¾‹å¦‚ <a class=link href=https://nuxt-app-hello.ryanchien8125.workers.dev target=_blank rel=noopener>https://nuxt-app-hello.ryanchien8125.workers.dev</a>ï¼Œæˆ‘å€‘å°±å¯ä»¥ç€è¦½æˆ‘å€‘éƒ¨ç½²å¥½çš„ç¶²ç«™å›‰ã€‚</p><p><img src=https://live.staticflickr.com/65535/52630011089_34c0659438_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=éœæ…‹çš„ç¶²ç«™éƒ¨ç½²è‡³-cloudflare-pages>éœæ…‹çš„ç¶²ç«™éƒ¨ç½²è‡³ CloudFlare Pages</h3><p>æˆ‘å€‘ä½¿ç”¨ Nuxt 3 å¯ä»¥é æ¸²æŸ“å…¨éœæ…‹çš„ç¶²ç«™ï¼Œå› æ­¤ä¹Ÿå¯ä»¥å°‡å°ˆæ¡ˆéƒ¨ç½²è‡³éœæ…‹è¨—ç®¡å¹³å°ï¼Œä»¥ CloudFlare Pages ç‚ºä¾‹ï¼Œéƒ¨ç½²çš„æ­¥é©Ÿå¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œå…ˆåŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤é€²è¡Œå…¨ç«™çš„é æ¸²æŸ“ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run generate
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl><span class=c1># yarn run generate</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ NPM å®‰è£ <a class=link href=https://www.npmjs.com/package/wrangler target=_blank rel=noopener>wrangler</a>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -g wrangler
</span></span></code></pre></td></tr></table></div></div><p>ä½ å¯èƒ½éœ€è¦è¨»å†Šä¸€å€‹ CloudFlare çš„å¸³è™Ÿï¼Œä¸¦ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ä¾†ç™»å…¥ CloudFlare å¸³è™Ÿä¸¦æˆæ¬Š Wranglerï¼Œæˆ‘å€‘é¸æ“‡å…è¨± (Allow) å³å¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wrangler login
</span></span></code></pre></td></tr></table></div></div><p>å»ºç«‹ä¸€å€‹ CloudFlare Pages åç‚º <code>nuxt-app-blog</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wrangler pages project create nuxt-app-blog
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52630242568_959e7a5907_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ï¼Œå°‡é æ¸²æŸ“çš„ç¶²ç«™ç›®éŒ„é€²è¡Œéƒ¨ç½²ï¼Œä¸¦æŒ‡å®šå°ˆæ¡ˆåç¨±ç‚º <code>nuxt-app-blog</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wrangler pages publish ./.output/public --project-name nuxt-app-blog
</span></span></code></pre></td></tr></table></div></div><p>ç•¶éƒ¨ç½²å®Œæˆå¾Œï¼Œå°±æœƒå¾—åˆ°ä¸€å€‹é€£çµä¾†æŸ¥çœ‹éƒ¨ç½²çš„éœæ…‹ç¶²é ï¼Œä½ ä¹Ÿå¯ä»¥å¾ CloudFlare Pages å¾Œå°ï¼Œçœ‹è¦‹ç¶²ç«™ç¶²å€çš„åˆ¥å Aliases ä¾†ä½¿ç”¨è‡ªè¨‚çš„ç¶²å€ã€‚</p><p><img src=https://live.staticflickr.com/65535/52629762746_a0dc3bb113_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>ä»¥ä¸Šæ˜¯ä»‹ç´¹ Nuxt 3 çš„å¹¾å€‹éƒ¨ç½²æ–¹å¼çš„ä¾‹å­ï¼Œæ›´å¤šé›²ç«¯å¹³å°ä¸Šé¢çš„éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥åƒè€ƒ <a class=link href=https://nuxt.com/docs/getting-started/deployment#deployment target=_blank rel=noopener>Nuxt</a> èˆ‡ <a class=link href=https://nitro.unjs.io/deploy/node target=_blank rel=noopener>Nitro</a> å®˜æ–¹æ–‡ä»¶ã€‚</p><hr><h2 id=ä¸Šç·šå‰çš„æ¸¬è©¦é …ç›®>ä¸Šç·šå‰çš„æ¸¬è©¦é …ç›®</h2><p>æœ€å¾Œèˆ‡å¤§å®¶åˆ†äº«ä¸€ä¸‹ç¶²ç«™å°ˆæ¡ˆä¸Šç·šå‰çš„å¹¾å€‹æˆ‘æœƒç‰¹åˆ¥æ³¨æ„çš„å¹¾å€‹å°ç´°ç¯€ï¼Œä¹Ÿæ­¡è¿å¤§å®¶ä¸€èµ·ä¾†äº¤æµã€‚</p><h3 id=å‰ç«¯ç´°ç¯€>å‰ç«¯ç´°ç¯€</h3><ul><li>ç¶²é çš„æ¨™é¡Œ (Title)</li><li>ä½¿ç”¨ä¹‹è³‡æºæˆæ¬Š (ä½¿ç”¨æ¬Šã€æ™ºè²¡æ¬Š)</li><li>åœ–ç‰‡æ›¿ä»£æ–‡å­—</li><li>Favicon</li><li>HTML Meta data</li><li>Google Analytics</li></ul><h3 id=ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦>ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦</h3><ul><li>RWD</li><li>è·¨ç€è¦½å™¨<ul><li>BrowserStack</li><li>Comparium</li><li>TestingBot</li></ul></li></ul><h3 id=api-æ¸¬è©¦>API æ¸¬è©¦</h3><ul><li>å–®å…ƒæ¸¬è©¦</li><li>ä¸åŒå ´æ™¯æ¸¬è©¦ (æ¸¬è©¦ç’°å¢ƒã€æ­£å¼ç’°å¢ƒ)</li><li>æ•ˆèƒ½æ¸¬è©¦<ul><li>JMeter</li><li>k6</li></ul></li><li>å®‰å…¨æ€§æ¸¬è©¦</li></ul><h3 id=å£“åŠ›æ¸¬è©¦>å£“åŠ›æ¸¬è©¦</h3><ul><li>æ¨¡æ“¬ä½¿ç”¨è€…æˆ–é€£ç·šæ•¸</li><li>è§€å¯Ÿæ©Ÿå™¨è³‡æºä½¿ç”¨é‡</li><li>è³‡æ–™åº«é€£ç·šæ•¸è§€å¯Ÿ</li><li>æŒçºŒæé«˜æ¨¡æ“¬æ•¸é‡è§€å¯Ÿåˆ†æ</li><li>åˆ†ææ¯å€‹è«‹æ±‚æ–¼ä½µç™¼çš„å¹³å‡éŸ¿æ‡‰æ™‚é–“</li><li>æ˜¯å¦è«‹æ±‚ä¸­å¤¾é›œéé æœŸä¹‹ç‹€æ…‹ç¢¼ (HTTP Status Code)</li></ul><h3 id=api-æˆ–ç¶²ç«™å®‰å…¨æ€§>API æˆ–ç¶²ç«™å®‰å…¨æ€§</h3><ul><li>åƒè€ƒ OWASP Top 10</li><li>SQL åƒæ•¸åŒ–æŸ¥è©¢</li><li>è³‡å®‰å…¬å¸æ»²é€æ¸¬è©¦ã€ç´…éšŠæ¼”ç·´</li></ul><h3 id=é–‹ç™¼æˆ–é™¤éŒ¯ç”¨çš„è¨Šæ¯>é–‹ç™¼æˆ–é™¤éŒ¯ç”¨çš„è¨Šæ¯</h3><ul><li>è­¦å‘Šè¨Šæ¯æˆ–ç•°å¸¸è¨Šæ¯ç§»é™¤ï¼ˆconsole.log æˆ–è­¦å‘Šè¨Šæ¯ç­‰ï¼‰</li><li>JavaScript Source Maps è¨˜å¾—ç§»é™¤</li><li>æ•æ„Ÿè³‡è¨Šè¨˜å¾—ç§»é™¤ (é–‹ç™¼ç”¨ Keyã€å¸³è™Ÿå¯†ç¢¼ç­‰)</li></ul><h3 id=ç¶²ç«™ç›¸ä¾æ€§æª¢æŸ¥>ç¶²ç«™ç›¸ä¾æ€§æª¢æŸ¥</h3><ul><li>ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹ç¶²ç«™è³‡æºåŠç©©å®šæ€§</li><li>æª¢æŸ¥æ‰€æœ‰ç¶²å€çš†èƒ½æ­£å¸¸é‹ä½œ</li><li>ç•¶ç¬¬ä¸‰æ–¹ç¶²ç«™ç•°å¸¸æ™‚æ‡‰å°æªæ–½</li></ul><h3 id=éƒ¨ç½²ç›¸é—œ>éƒ¨ç½²ç›¸é—œ</h3><ul><li>æ˜¯å¦æœ‰é«˜å¯ç”¨æ€§ (HA)</li><li>Docker æˆ– Kubernetes æ•´åˆ</li><li>ç¶²åŸŸæ™‚æ•ˆ</li><li>SSL è­‰æ›¸æ—¥æœŸ</li><li>é˜²ç«ç‰†æˆ– WAF è¨­å®š</li><li>å…§ç¶²æˆ–å¤–ç¶²å€éš”</li></ul><h3 id=å‚™ä»½æ©Ÿåˆ¶>å‚™ä»½æ©Ÿåˆ¶</h3><ul><li>éœæ…‹æœ‰ç‹€æ…‹è³‡æ–™ (ä½¿ç”¨è€…ä¸Šå‚³çš„)</li><li>è³‡æ–™åº«è³‡æ–™</li></ul><p>é€™é‚Šä¸»è¦èˆ‡å¤§å®¶åˆ†äº«å¹¾ç¨® Nuxt çš„éƒ¨ç½²æ–¹å¼ï¼Œä¸ç®¡æ˜¯éƒ¨ç½²åœ¨è‡ªå·±çš„æ©Ÿæˆ¿ä¸»æ©Ÿæˆ–é›²ç«¯ï¼Œå¤§å®¶å¯ä»¥åœ¨æŒ‘é¸åˆé©çš„è§£æ±ºæ–¹æ¡ˆï¼ŒNitro ä¹Ÿæ”¯æ´ç„¡ä¼ºæœå™¨ (Serverless) ç­‰éƒ¨ç½²æ–¹å¼éå¸¸çš„æ–¹ä¾¿ï¼Œåªæ˜¯è¦ç‰¹åˆ¥æ³¨æ„åˆ° Serverless åŸ·è¡Œä¸€äº› binary çš„å•é¡Œï¼Œå†æŒ‘é¸è‡ªå·±é©åˆçš„éƒ¨ç½²èˆ‡æœå‹™æ–¹å¼ã€‚</p><p>ç¶“éæœ¬ç¯‡æ–‡ç« ï¼Œå¤§å®¶æ‡‰è©²éƒ½å°æ–¼ Nuxt 3 æœ‰åˆæ­¥çš„ç†è§£ï¼Œæ¥ä¸‹ä¾†ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘å€‘å°‡æœƒé€²å…¥å¯¦æˆ°ç·´ç¿’ï¼Œå°‡æœƒä»¥ Nuxt 3 ä¾†å¯¦ä½œä¸€å€‹éƒ¨è½æ ¼ç¶²ç«™ï¼</p><hr></section><footer class=article-footer><section class=article-tags><a href=https://wayneblog.ga/tags/javascript/>javascript</a>
<a href=https://wayneblog.ga/tags/typescript/>typescript</a>
<a href=https://wayneblog.ga/tags/vue/>vue</a>
<a href=https://wayneblog.ga/tags/nuxt/>nuxt</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸é—œæ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=https://wayneblog.ga/2023-01-16/nuxt-nuxt3-practice-project/><div class=article-image><img src=https://live.staticflickr.com/65535/52630283696_c93e29e870_o.png loading=lazy data-key=nuxt-nuxt3-practice-project data-hash=https://live.staticflickr.com/65535/52630283696_c93e29e870_o.png></div><div class=article-details><h2 class=article-title>ã€Nuxt3ã€‘å¯¦æˆ°ç·´ç¿’ - å¯¦ä½œéƒ¨è½æ ¼</h2></div></a></article><article class=has-image><a href=https://wayneblog.ga/2023-03-10/petite-vue-introduction/><div class=article-image><img src=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg loading=lazy data-key=petite-vue-introduction data-hash=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg></div><div class=article-details><h2 class=article-title>ã€Petite-Vueã€‘å¤§å°åªæœ‰ ~6KB çš„ mini Vueï¼</h2></div></a></article><article class=has-image><a href=https://wayneblog.ga/2023-02-21/ts-express-server/><div class=article-image><img src=https://live.staticflickr.com/65535/52702210344_fe78a142e7_o.png loading=lazy data-key=ts-express-server data-hash=https://live.staticflickr.com/65535/52702210344_fe78a142e7_o.png></div><div class=article-details><h2 class=article-title>ã€Node.jsã€‘ç”¨ Typescript èˆ‡ Express å»ºç«‹ä¸€å€‹ server</h2></div></a></article><article class=has-image><a href=https://wayneblog.ga/2022-12-30/npm-vueuse/><div class=article-image><img src=https://live.staticflickr.com/65535/52595409644_aa1fd7bf45_o.png loading=lazy data-key=npm-vueuse data-hash=https://live.staticflickr.com/65535/52595409644_aa1fd7bf45_o.png></div><div class=article-details><h2 class=article-title>ã€VueUseã€‘ä¸€æ¬¾åŸºæ–¼ Vue Composition API çš„å‡½å¼å·¥å…·é›†</h2></div></a></article><article class=has-image><a href=https://wayneblog.ga/2022-12-30/why-use-hooks/><div class=article-image><img src=https://live.staticflickr.com/65535/52595598278_3dc955c418_o.png loading=lazy data-key=why-use-hooks data-hash=https://live.staticflickr.com/65535/52595598278_3dc955c418_o.png></div><div class=article-details><h2 class=article-title>æ·ºè«‡ç‚ºä»€éº¼ Vue å’Œ React éƒ½é¸æ“‡äº† Hooksï¼Ÿ</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-blog-wayne.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=https://wayneblog.ga/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>"serviceWorker"in navigator&&(console.log("Check service worker register?"),navigator.serviceWorker.register("./service-worker.js").then(function(){console.log("service worker registed.")}).catch(function(e){console.log("service worker registed fail. This happened: ",e)}));function toggleBtnScrollTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=document.getElementById("btnScrollTop");if(t){e&&!e.classList.contains("show")&&e.classList.add("show");return}e&&e.classList.contains("show")&&e.classList.remove("show")}window.addEventListener("scroll",toggleBtnScrollTop),document.addEventListener("DOMContentLoaded",toggleBtnScrollTop);function clickToScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}</script><button id=btnScrollTop onclick=clickToScrollTop() title=å›åˆ°é é ‚>
<img src=https://wayneblog.ga/img/top_huf0c1dc16de3f1372c70e7aced5d60e6d_660_30x0_resize_box_3.png alt=scroll-top></button><div id=fb-root></div><div id=fb-customer-chat class=fb-customerchat></div><script>var chatbox=document.getElementById("fb-customer-chat");chatbox.setAttribute("page_id","100278986238046"),chatbox.setAttribute("attribution","biz_inbox")</script><script>window.fbAsyncInit=function(){FB.init({appId:"588798512613170",status:!0,xfbml:!0,version:"v16.0"})},function(e,t,n){var s,o=e.getElementsByTagName(t)[0];if(e.getElementById(n))return;s=e.createElement(t),s.id=n,s.src="https://connect.facebook.net/zh_TW/sdk/xfbml.customerchat.js",o.parentNode.insertBefore(s,o)}(document,"script","facebook-jssdk")</script></body></html>