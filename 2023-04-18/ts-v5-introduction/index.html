<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="æ­¤ç‰ˆæœ¬å¸¶ä¾†äº†è¨±å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ™‚æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç°¡å–®ã€æ›´å¿«ã€‚æˆ‘å€‘å·²ç¶“å¯¦æ–½äº†æ–°çš„è£é£¾å™¨æ¨™æº–ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é …ç›®çš„åŠŸèƒ½ï¼Œç‚ºåº«ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ“´å±•äº†æˆ‘å€‘çš„ JSDoc åŠŸèƒ½ï¼Œç°¡åŒ–äº†é…ç½®ï¼Œä¸¦é€²è¡Œäº†è¨±å¤šå…¶ä»–æ”¹é€²ã€‚"><meta name=keywords content="typescript,5.0,ç™¼å¸ƒ,announcing"><title>ã€Typescriptã€‘5.0 ç‰ˆæœ¬ç™¼å¸ƒ</title><link rel=canonical href=https://wayne-blog.com/2023-04-18/ts-v5-introduction/><link rel=stylesheet href=https://wayne-blog.com/scss/style.min.e3f888c5dd2d8234c7284a9b45d1b5916903fb544644cac31c873b6488e8d7a0.css><script>!function(e,t,n,s,o,i,a){if(e.fbq)return;o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],i=t.createElement(n),i.async=!0,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","843131703668116"),fbq("track","PageView")</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=843131703668116&ev=PageView&noscript=1"></noscript><meta property="og:title" content="ã€Typescriptã€‘5.0 ç‰ˆæœ¬ç™¼å¸ƒ"><meta property="og:description" content="æ­¤ç‰ˆæœ¬å¸¶ä¾†äº†è¨±å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ™‚æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç°¡å–®ã€æ›´å¿«ã€‚æˆ‘å€‘å·²ç¶“å¯¦æ–½äº†æ–°çš„è£é£¾å™¨æ¨™æº–ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é …ç›®çš„åŠŸèƒ½ï¼Œç‚ºåº«ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ“´å±•äº†æˆ‘å€‘çš„ JSDoc åŠŸèƒ½ï¼Œç°¡åŒ–äº†é…ç½®ï¼Œä¸¦é€²è¡Œäº†è¨±å¤šå…¶ä»–æ”¹é€²ã€‚"><meta property="og:url" content="https://wayne-blog.com/2023-04-18/ts-v5-introduction/"><meta property="og:site_name" content="Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="typescript"><meta property="article:published_time" content="2023-04-18T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-18T00:00:00+00:00"><meta property="og:image" content="https://live.staticflickr.com/65535/52826805634_6bd4cfd428_o.jpg"><meta name=twitter:site content="@4006wayne"><meta name=twitter:creator content="@4006wayne"><meta name=twitter:title content="ã€Typescriptã€‘5.0 ç‰ˆæœ¬ç™¼å¸ƒ"><meta name=twitter:description content="æ­¤ç‰ˆæœ¬å¸¶ä¾†äº†è¨±å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ™‚æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç°¡å–®ã€æ›´å¿«ã€‚æˆ‘å€‘å·²ç¶“å¯¦æ–½äº†æ–°çš„è£é£¾å™¨æ¨™æº–ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é …ç›®çš„åŠŸèƒ½ï¼Œç‚ºåº«ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ“´å±•äº†æˆ‘å€‘çš„ JSDoc åŠŸèƒ½ï¼Œç°¡åŒ–äº†é…ç½®ï¼Œä¸¦é€²è¡Œäº†è¨±å¤šå…¶ä»–æ”¹é€²ã€‚"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://live.staticflickr.com/65535/52826805634_6bd4cfd428_o.jpg"><link rel="shortcut icon" href=https://live.staticflickr.com/65535/52275825736_808b1fd4a8_o.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-FG6KQD7H6C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FG6KQD7H6C",{anonymize_ip:!1})}</script><link rel=stylesheet type=text/css href=./toastify/style.min.css><script type=text/javascript src=./toastify/index.js></script><script>const hackKey="hack",author="Wayne (å‰æ©)",link="https://wayne-blog.com/",source="Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢",warningText="è«‹é‡è¦–è‘—ä½œæ¬Šï¼Œå•†æ¥­è½‰è¼‰è«‹è¯ç¹«ä½œè€…ç²å¾—æˆæ¬Šï¼Œéå•†æ¥­è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ã€‚",warningBackgroundColor="linear-gradient(to right, rgb(108 47 87), rgb(191 86 86))",successBackgroundColor="linear-gradient(to right, rgb(47 151 127), rgb(69 195 137))",ignoreTagNames=["INPUT"];window.addEventListener("keyup",function(e){if(document.activeElement&&ignoreTagNames.includes(document.activeElement.tagName))return;if(e.key&&e.key.toLowerCase()==="h"){let e={text:"",duration:1e3,destination:"",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!1,style:{borderRadius:"50em"}};const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(n.has(hackKey)){e.text="Hackæ¨¡å¼å·²é—œé–‰",e.style.background=warningBackgroundColor,Toastify(e).showToast(),n.delete(hackKey),t.search=n.toString(),window.history.replaceState(null,"",t.toString());return}e.text="Hackæ¨¡å¼å·²é–‹å•Ÿ",e.style.background=successBackgroundColor,Toastify(e).showToast(),n.set(hackKey,"1"),t.search=n.toString(),window.history.replaceState(null,"",t.toString())}}),window.addEventListener("copy",function(e){const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(!n.has(hackKey)){e.preventDefault();const t=document.getSelection();e.clipboardData.setData("text/plain",`${t.toString()}

ä½œè€…ï¼š${author}
é€£çµï¼š${link}
ä¾†æºï¼š${source}
${warningText}`)}})</script><style>:root{--zh-font-family:"Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”";--code-font-family:Menlo, Monaco, Consolas, "Courier New"}</style><meta name=theme-color content="#57BCB9"><link rel=manifest href=./manifest.json><link rel=apple-touch-icon sizes=57x57 href=./apple-touch-icon-57x57.webp><link rel=apple-touch-icon sizes=114x114 href=./apple-touch-icon-114x114.webp><link rel=apple-touch-icon sizes=120x120 href=./apple-touch-icon-120x120.webp><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon-180x180.webp><link rel=apple-touch-icon sizes=192x192 href=./apple-touch-icon-192x192.webp><link rel=apple-touch-icon sizes=512x512 href=./apple-touch-icon-512x512.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ›é¸å–®>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=https://wayne-blog.com/><img src=https://wayne-blog.com/img/avatar2d.webp width=256 height=256 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ§§</span></figure><div class=site-meta><h1 class=site-name><a href=https://wayne-blog.com/>Wayne (å‰æ©)</a></h1><h2 class=site-description>è»Ÿé«”é–‹ç™¼ | ç¶²è·¯å·¥ç¨‹ | æŠ€è¡“åšå®¢</h2></div></header><ol class=social-menu><li><a href=https://www.facebook.com/wayne.blog.ga/ target=_blank title=Facebook rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><linearGradient id="CXanuwD9EGkBgTn76_1mxa" x1="9.993" x2="40.615" y1="-299.993" y2="-330.615" gradientTransform="matrix(1 0 0 -1 0 -290)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2aa4f4"/><stop offset="1" stop-color="#007ad9"/></linearGradient><path fill="url(#CXanuwD9EGkBgTn76_1mxa)" d="M24 4C12.954 4 4 12.954 4 24c0 10.028 7.379 18.331 17.004 19.777C21.981 43.924 22.982 41 24 41c.919.0 1.824 2.938 2.711 2.818C36.475 42.495 44 34.127 44 24 44 12.954 35.046 4 24 4z"/><path d="M27.707 21.169c0-1.424.305-3.121 1.757-3.121h4.283l-.001-5.617-.05-.852-.846-.114c-.608-.082-1.873-.253-4.206-.253-5.569.0-8.636 3.315-8.636 9.334v2.498H15.06v7.258h4.948V43.6C21.298 43.861 22.633 44 24 44c1.268.0 2.504-.131 3.707-.357V30.301h5.033l1.122-7.258h-6.155V21.169z" opacity=".05"/><path d="M27.207 21.169c0-1.353.293-3.621 2.257-3.621h3.783V12.46l-.026-.44-.433-.059c-.597-.081-1.838-.249-4.143-.249-5.323.0-8.136 3.055-8.136 8.834v2.998H15.56v6.258h4.948v13.874C21.644 43.876 22.806 44 24 44c1.094.0 2.16-.112 3.207-.281V29.801h5.104l.967-6.258h-6.072V21.169z" opacity=".05"/><path fill="#fff" d="M26.707 29.301h5.176l.813-5.258h-5.989v-2.874c0-2.184.714-4.121 2.757-4.121h3.283V12.46c-.577-.078-1.797-.248-4.102-.248-4.814.0-7.636 2.542-7.636 8.334v3.498H16.06v5.258h4.948v14.475C21.988 43.923 22.981 44 24 44c.921.0 1.82-.062 2.707-.182V29.301z"/></svg></a></li><li><a href=https://github.com/wjdesign target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.instagram.com/huai_lin/ target=_blank title=Instagram rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><path fill="#304ffe" d="M41.67 13.48c-.4.26-.97.5-1.21.77-.09.09-.14.19-.12.29v1.03l-.3 1.01-.3 1-.33 1.1-.68 2.25-.66 2.22-.5 1.67c0 .26-.01.52-.03.77-.07.96-.27 1.88-.59 2.74-.19.53-.42 1.04-.7 1.52-.1.19-.22.38-.34.56-.4.63-.88 1.21-1.41 1.72-.41.41-.86.79-1.35 1.11h-.01c-.08.07-.17.13-.27.18-.31.21-.64.39-.98.55-.23.12-.46.22-.7.31-.05.03-.11.05-.16.07-.57.27-1.23.45-1.89.54-.04.01-.07.01-.11.02-.4.07-.79.13-1.19.16-.18.02-.37.03-.55.03l-.71-.04-3.42-.18c0-.01-.01.0-.01.0l-1.72-.09c-.13.0-.27.0-.4-.01-.54-.02-1.06-.08-1.58-.19h-.01c-.95-.18-1.86-.5-2.71-.93-.47-.24-.93-.51-1.36-.82-.18-.13-.35-.27-.52-.42-.48-.4-.91-.83-1.31-1.27-.06-.06-.11-.12-.16-.18-.06-.06-.12-.13-.17-.19-.38-.48-.7-.97-.96-1.49-.24-.46-.43-.95-.58-1.49-.06-.19-.11-.37-.15-.57-.01-.01-.02-.03-.02-.05-.1-.41-.19-.84-.24-1.27-.06-.33-.09-.66-.09-1-.02-.13-.02-.27-.02-.4l1.91-2.95 1.87-2.88.85-1.31.77-1.18.26-.41v-1.03c.02-.23.03-.47.02-.69-.01-.7-.15-1.38-.38-2.03-.22-.69-.53-1.34-.85-1.94-.38-.69-.78-1.31-1.11-1.87C14 7.4 13.66 6.73 13.75 6.26 14.47 6.09 15.23 6 16 6h16c4.18.0 7.78 2.6 9.27 6.26C41.43 12.65 41.57 13.06 41.67 13.48z"/><path fill="#4928f4" d="M42 16v.27l-1.38.8-.88.51-.97.56-1.94 1.13-1.9 1.1-1.94 1.12-.77.45c0 .48-.12.92-.34 1.32-.31.58-.83 1.06-1.49 1.47-.67.41-1.49.74-2.41.98.0.0.0-.01-.01.0-3.56.92-8.42.5-10.78-1.26-.66-.49-1.12-1.09-1.32-1.78-.06-.23-.09-.48-.09-.73v-7.19c.01-.15-.09-.3-.27-.45-.54-.43-1.81-.84-3.23-1.25-1.11-.31-2.3-.62-3.3-.92-.79-.24-1.46-.48-1.86-.71.18-.35.39-.7.61-1.03 1.4-2.05 3.54-3.56 6.02-4.13C14.47 6.09 15.23 6 16 6h10.8c5.37.94 10.32 3.13 14.47 6.26.16.39.3.8.4 1.22.18.66.29 1.34.32 2.05C42 15.68 42 15.84 42 16z"/><path fill="#6200ea" d="M42 16v4.41l-.22.68-.75 2.33-.78 2.4-.41 1.28-.38 1.19-.37 1.13-.36 1.12-.19.59-.25.78c0 .76-.02 1.43-.07 2-.01.06-.02.12-.02.18-.06.53-.14.98-.27 1.36-.01.06-.03.12-.05.17-.26.72-.65 1.18-1.23 1.48-.14.08-.3.14-.47.2-.53.18-1.2.27-2.02.32-.6.04-1.29.05-2.07.05H31.4l-1.19-.05L30 37.61l-2.17-.09-2.2-.09-7.25-.3-1.88-.08h-.26c-.78-.01-1.45-.06-2.03-.14-.84-.13-1.49-.35-1.98-.68-.7-.45-1.11-1.11-1.35-2.03-.06-.22-.11-.45-.14-.7-.1-.58-.15-1.25-.18-2 0-.15.0-.3-.01-.46-.01-.01.0-.01.0-.01v-.58c-.01-.29-.01-.59-.01-.9l.05-1.61.03-1.15.04-1.34v-.19l.07-2.46.07-2.46.07-2.31.06-2.27.02-.6c0-.31-1.05-.49-2.22-.64-.93-.12-1.95-.23-2.56-.37.05-.23.1-.46.16-.68.18-.72.45-1.4.79-2.05.18-.35.39-.7.61-1.03 2.16-.95 4.41-1.69 6.76-2.17 2.06-.43 4.21-.66 6.43-.66 7.36.0 14.16 2.49 19.54 6.69.52.4 1.03.83 1.53 1.28C42 15.68 42 15.84 42 16z"/><path fill="#673ab7" d="M42 18.37v4.54l-.55 1.06-1.05 2.05-.56 1.08-.51.99-.22.43c0 .31.0.61-.02.9.0.43-.02.84-.05 1.22-.04.45-.1.86-.16 1.24-.15.79-.36 1.47-.66 2.03-.04.07-.08.14-.12.2-.11.18-.24.35-.38.51-.18.22-.38.41-.61.57-.34.26-.74.47-1.2.63-.57.21-1.23.35-2.01.43-.51.05-1.07.08-1.68.08l-.42.02-2.08.12h-.01L27.5 36.6l-2.25.13-3.1.18-3.77.22-.55.03c-.51.0-.99-.03-1.45-.09-.05-.01-.09-.02-.14-.02-.68-.11-1.3-.29-1.86-.54-.68-.3-1.27-.7-1.77-1.18-.44-.43-.82-.92-1.13-1.47-.07-.13-.14-.25-.2-.39-.3-.59-.54-1.25-.72-1.97-.03-.12-.06-.25-.08-.38-.06-.23-.11-.47-.14-.72-.11-.64-.17-1.32-.2-2.03v-.01c-.01-.29-.02-.57-.02-.87l-.49-1.17-.07-.18L9.5 25.99 8.75 24.2l-.12-.29-.72-1.73-.8-1.93H7.1L6.29 18.3 6 17.59V16c0-.63.06-1.25.17-1.85.05-.23.1-.46.16-.68.85-.49 1.74-.94 2.65-1.34 2.08-.93 4.31-1.62 6.62-2.04 1.72-.31 3.51-.48 5.32-.48 7.31.0 13.94 2.65 19.12 6.97.2.16.39.32.58.49C41.09 17.48 41.55 17.91 42 18.37z"/><path fill="#8e24aa" d="M42 21.35v5.14l-.57 1.19-1.08 2.25-.01.03c0 .43-.02.82-.05 1.17-.1 1.15-.38 1.88-.84 2.33-.33.34-.74.53-1.25.63-.03.01-.07.01-.1.02-.16.03-.33.05-.51.05-.62.06-1.35.02-2.19-.04-.09.0-.19-.01-.29-.02-.61-.04-1.26-.08-1.98-.11-.39-.01-.8-.02-1.22-.02h-.02l-1.01.08h-.01l-2.27.16-2.59.2-.38.03-3.03.22-1.57.12-1.55.11c-.27.0-.53.0-.79-.01.0.0-.01-.01-.01.0-1.13-.02-2.14-.09-3.04-.26-.83-.14-1.56-.36-2.18-.69-.64-.31-1.17-.75-1.6-1.31-.41-.55-.71-1.24-.9-2.07v-.01c-.14-.67-.22-1.45-.22-2.33l-.15-.27L9.7 26.35l-.13-.22L9.5 25.99l-.93-1.65-.46-.83-.58-1.03-1-1.79L6 19.75v-3.68c.88-.58 1.79-1.09 2.73-1.55 1.14-.58 2.32-1.07 3.55-1.47 1.34-.44 2.74-.79 4.17-1.02 1.45-.24 2.94-.36 4.47-.36 6.8.0 13.04 2.43 17.85 6.47.22.17.43.36.64.54.84.75 1.64 1.56 2.37 2.41C41.86 21.18 41.94 21.26 42 21.35z"/><path fill="#c2185b" d="M42 24.71v7.23c-.24-.14-.57-.31-.98-.49-.22-.11-.47-.22-.73-.32-.38-.17-.79-.33-1.25-.49-.1-.04-.2-.07-.31-.1-.18-.07-.37-.13-.56-.19-.59-.18-1.24-.35-1.92-.5-.26-.05-.53-.1-.8-.14-.87-.15-1.8-.24-2.77-.25-.08-.01-.17-.01-.25-.01l-2.57.02-3.5.02h-.01l-7.49.06c-2.38.0-3.84.57-4.72.8.0.0-.01.0-.01.01-.93.24-1.22.09-1.3-1.54-.02-.45-.03-1.03-.03-1.74l-.56-.43-.98-.74-.6-.46-.12-.09L8.88 24.1l-.25-.19-.52-.4-.96-.72L6 21.91v-3.4c.1-.08.19-.15.29-.21 1.45-1 3-1.85 4.64-2.54 1.46-.62 3-1.11 4.58-1.46.43-.09.87-.18 1.32-.24 1.33-.23 2.7-.34 4.09-.34 6.01.0 11.53 2.09 15.91 5.55.66.52 1.3 1.07 1.9 1.66.82.78 1.59 1.61 2.3 2.49.14.18.28.36.42.55C41.64 24.21 41.82 24.46 42 24.71z"/><path fill="#d81b60" d="M42 28.72V32c0 .65-.06 1.29-.18 1.91-.18.92-.49 1.8-.91 2.62-.22.05-.47.05-.75.01-.63-.11-1.37-.44-2.17-.87-.04-.01-.08-.03-.11-.05-.25-.13-.51-.27-.77-.43-.53-.29-1.09-.61-1.65-.91-.12-.06-.24-.12-.35-.18-.64-.33-1.3-.63-1.96-.86h-.01c-.14-.05-.29-.1-.44-.14-.57-.16-1.15-.26-1.71-.26l-1.1-.32-4.87-1.41h-.01l-2.99-.87h-.01l-1.3-.38c-3.76.0-6.07 1.6-7.19.99-.44-.23-.7-.81-.79-1.95-.03-.32-.04-.68-.04-1.1l-1.17-.57-.05-.02h-.01l-.84-.42L9.7 26.35l-.07-.03-.17-.09L7.5 25.28 6 24.55v-3.43c.17-.15.35-.29.53-.43.19-.15.38-.29.57-.44h.01c1.18-.85 2.43-1.6 3.76-2.22 1.55-.74 3.2-1.31 4.91-1.68.25-.06.51-.12.77-.16 1.42-.27 2.88-.41 4.37-.41 5.27.0 10.11 1.71 14.01 4.59 1.13.84 2.18 1.77 3.14 2.78.79.83 1.52 1.73 2.18 2.67.05.07.1.14.15.2.37.54.71 1.09 1.03 1.66C41.64 28.02 41.82 28.37 42 28.72z"/><path fill="#f50057" d="M41.82 33.91c-.18.92-.49 1.8-.91 2.62-.19.37-.4.72-.63 1.06-.14.21-.29.41-.44.6-.36-.14-.89-.34-1.54-.56v-.01c-.49-.17-1.05-.35-1.65-.52-.17-.05-.34-.1-.52-.15-.71-.19-1.45-.36-2.17-.46-.6-.1-1.19-.16-1.74-.16l-.46-.13h-.01l-2.42-.7-1.49-.43-1.66-.48h-.01l-.54-.15-6.53-1.88-1.88-.54-1.4-.33-2.28-.54-.28-.07h-.01l-2.29-.53v-.01l-.41-.09-.21-.05-1.67-.39-.19-.05-1.42-1.17L6 27.9v-4.08c.37-.36.75-.7 1.15-1.03.12-.11.25-.21.38-.31.12-.1.25-.2.38-.3.91-.69 1.87-1.31 2.89-1.84 1.3-.7 2.68-1.26 4.13-1.66.28-.09.56-.17.85-.23 1.64-.41 3.36-.62 5.14-.62 4.47.0 8.63 1.35 12.07 3.66 1.71 1.15 3.25 2.53 4.55 4.1.66.79 1.26 1.62 1.79 2.5.05.07.09.13.13.2.32.53.62 1.08.89 1.64.25.5.47 1 .67 1.52C41.34 32.25 41.6 33.07 41.82 33.91z"/><path fill="#ff1744" d="M40.28 37.59c-.14.21-.29.41-.44.6-.44.55-.92 1.05-1.46 1.49-.47.39-.97.74-1.5 1.04-.2-.05-.4-.11-.61-.19-.66-.23-1.35-.61-1.99-1.01-.96-.61-1.79-1.27-2.16-1.57-.14-.12-.21-.18-.21-.18l-1.7-.15L30 37.6l-2.2-.19-2.28-.2-3.37-.3-5.34-.47-.02-.01-1.88-.91-1.9-.92-1.53-.74-.33-.16-.41-.2-1.42-.69L7.43 31.9l-.59-.29L6 31.35v-4.47c.47-.56.97-1.09 1.5-1.6.34-.32.7-.64 1.07-.94.06-.05.12-.1.18-.14.04-.05.09-.08.13-.1.59-.48 1.21-.91 1.85-1.3.74-.47 1.52-.89 2.33-1.24.87-.39 1.78-.72 2.72-.97 1.63-.46 3.36-.7 5.14-.7 4.08.0 7.85 1.24 10.96 3.37 1.99 1.36 3.71 3.08 5.07 5.07.45.64.85 1.32 1.22 2.02.13.26.26.52.37.78.12.25.23.5.34.75.21.52.4 1.04.57 1.58.32 1 .56 2.02.71 3.08C40.21 36.89 40.25 37.24 40.28 37.59z"/><path fill="#ff5722" d="M38.39 39.42c0 .08.0.17-.01.26-.47.39-.97.74-1.5 1.04-.22.12-.44.24-.67.34-.23.11-.46.21-.7.3-.34-.18-.8-.4-1.29-.61-.69-.31-1.44-.59-2.02-.68-.14-.03-.27-.04-.39-.04l-1.64-.21h-.02l-2.04-.27-2.06-.27-.96-.12-7.56-.98c-.49.0-1.01-.03-1.55-.1-.66-.06-1.35-.16-2.04-.3-.68-.12-1.37-.28-2.03-.45-.69-.16-1.37-.35-2-.53-.73-.22-1.41-.43-1.98-.62-.47-.15-.87-.29-1.18-.4-.18-.43-.33-.88-.44-1.34C6.1 33.66 6 32.84 6 32v-1.67c.32-.53.67-1.05 1.06-1.54.71-.94 1.52-1.8 2.4-2.56.03-.04.07-.07.1-.09l.01-.01c.31-.28.63-.53.97-.77.04-.04.08-.07.12-.1.16-.12.33-.24.51-.35 1.43-.97 3.01-1.73 4.7-2.24 1.6-.48 3.29-.73 5.05-.73 3.49.0 6.75 1.03 9.47 2.79 2.01 1.29 3.74 2.99 5.06 4.98.16.23.31.46.46.7.69 1.17 1.26 2.43 1.68 3.75.05.15.09.3.13.46.08.27.15.55.21.83.02.07.04.14.06.22.14.63.24 1.29.31 1.95v.01C38.36 38.22 38.39 38.82 38.39 39.42z"/><path fill="#ff6f00" d="M36.33 39.42c0 .35-.02.73-.06 1.11-.02.18-.04.36-.06.53-.23.11-.46.21-.7.3-.45.17-.91.31-1.38.41-.32.07-.65.13-.98.16h-.01c-.31-.19-.67-.42-1.04-.68-.67-.47-1.37-1-1.93-1.43-.01-.01-.01-.01-.02-.02-.59-.45-1.01-.79-1.01-.79l-1.06.04-2.04.07-.95.04-3.82.14-3.23.12c-.21.01-.46.01-.77.0h-.01c-.42-.01-.92-.04-1.47-.09-.64-.05-1.34-.11-2.05-.18-.69-.08-1.39-.16-2.06-.24-.74-.08-1.44-.17-2.04-.25-.47-.06-.88-.11-1.21-.15-.28-.32-.53-.65-.77-1.01-.36-.54-.67-1.11-.91-1.72-.18-.43-.33-.88-.44-1.34.29-.89.67-1.73 1.12-2.54.36-.66.78-1.29 1.24-1.89.45-.59.94-1.14 1.47-1.64v-.01c.15-.15.3-.29.45-.42.28-.26.57-.5.87-.73h.01c.01-.02.02-.02.03-.03.24-.19.49-.36.74-.53 1.48-1.01 3.15-1.76 4.95-2.2 1.19-.29 2.44-.45 3.73-.45 2.54.0 4.94.61 7.05 1.71h.01c1.81.93 3.41 2.21 4.7 3.75.71.82 1.32 1.72 1.82 2.67.35.64.65 1.31.9 1.99.02.06.04.11.06.16.17.5.32 1.02.45 1.54.09.37.16.75.22 1.13.02.12.04.23.05.35C36.28 37.99 36.33 38.7 36.33 39.42z"/><path fill="#ff9800" d="M34.28 39.42v.1c0 .34-.03.77-.06 1.23-.03.34-.06.69-.09 1.02-.32.07-.65.13-.98.16h-.01C32.76 41.98 32.39 42 32 42h-1.75l-.38-.11-1.97-.6-2-.6-4.63-1.39-2-.6s-.83.33-2 .72h-.01c-.45.15-.94.31-1.46.47-.65.19-1.34.38-2.02.53-.7.16-1.39.28-2.01.33-.19.02-.38.03-.55.03-.56-.31-1.1-.68-1.59-1.09-.43-.36-.83-.75-1.2-1.18-.28-.32-.53-.65-.77-1.01.07-.45.15-.89.27-1.32.3-1.19.77-2.33 1.39-3.37.34-.59.72-1.16 1.16-1.69.01-.03.04-.06.07-.08-.01-.01.0-.01.0-.01.13-.17.27-.33.41-.48v-.01c.41-.44.83-.86 1.29-1.25.16-.13.31-.26.48-.39.03-.03.06-.05.1-.08 2.25-1.72 5.06-2.76 8.09-2.76 3.44.0 6.57 1.29 8.94 3.41 1.14 1.03 2.11 2.26 2.84 3.63.06.1.12.21.17.32.09.18.18.37.26.57.33.72.59 1.48.77 2.26.02.08.04.16.06.24.08.37.15.75.2 1.13C34.24 38.21 34.28 38.81 34.28 39.42z"/><path fill="#ffc107" d="M32.22 39.42c0 .2-.01.42-.02.65-.02.37-.05.77-.1 1.18-.02.25-.06.5-.1.75h-5.48l-1.06-.17-4.14-.66-.59-.09-1.35-.22c-.59.0-1.87.26-3.22.51-.71.13-1.43.27-2.08.36-.08.01-.16.02-.23.03h-.01c-.7-.15-1.38-.38-2.02-.68-.2-.09-.4-.19-.6-.3-.56-.31-1.1-.68-1.59-1.09-.01-.12-.02-.22-.02-.27.0-.26.01-.51.03-.76.04-.64.13-1.26.27-1.86.22-.91.54-1.79.97-2.6.08-.17.17-.34.27-.5.04-.08.09-.15.13-.23.18-.29.38-.57.58-.85.42-.55.89-1.07 1.39-1.54h.01c.04-.04.08-.08.12-.11.05-.04.09-.09.14-.12.2-.18.4-.34.61-.49.0-.01.01-.01.01-.01 1.89-1.41 4.23-2.24 6.78-2.24 1.98.0 3.82.5 5.43 1.38h.01c1.38.76 2.58 1.79 3.53 3.03.37.48.7.99.98 1.53h.01c.05.1.1.2.15.3.3.59.54 1.21.72 1.85h.01c.01.05.03.1.04.15.12.43.22.87.29 1.32.01.09.02.19.03.28C32.19 38.43 32.22 38.92 32.22 39.42z"/><path fill="#ffd54f" d="M30.17 39.31c0 .16.0.33-.02.49v.01.01c-.02.72-.12 1.43-.28 2.07.0.04-.01.07-.03.11h-4.67l-3.85-.83-.51-.11-.08.02-4.27.88L16.27 42H16c-.64.0-1.27-.06-1.88-.18-.09-.02-.18-.04-.27-.06h-.01c-.7-.15-1.38-.38-2.02-.68-.02-.11-.04-.22-.05-.33-.07-.43-.1-.88-.1-1.33.0-.17.0-.34.01-.51.03-.54.11-1.07.23-1.58.08-.38.19-.75.32-1.1.11-.31.24-.61.38-.9.12-.25.26-.49.4-.73.14-.23.29-.45.45-.67.4-.55.87-1.06 1.39-1.51.3-.26.63-.51.97-.73 1.46-.96 3.21-1.52 5.1-1.52.37.0.73.02 1.08.07h.02c1.07.12 2.07.42 2.99.87h.01c1.45.71 2.68 1.78 3.58 3.1.15.22.3.46.43.7.11.19.21.39.3.59.14.31.27.64.38.97h.01c.11.37.21.74.28 1.13v.01C30.11 38.16 30.17 38.73 30.17 39.31z"/><path fill="#ffe082" d="M28.11 39.52v.03c0 .59-.07 1.17-.21 1.74-.05.24-.12.48-.21.71h-4.48l-2.29-.63L18.63 42H16c-.64.0-1.27-.06-1.88-.18-.02-.03-.03-.06-.04-.09-.14-.43-.25-.86-.3-1.31-.04-.29-.06-.59-.06-.9.0-.12.0-.25.02-.37.01-.47.08-.93.2-1.37.06-.3.15-.59.27-.87.04-.14.1-.27.17-.4.15-.34.33-.67.53-.99.22-.32.46-.62.73-.9.32-.36.68-.69 1.09-.96.7-.51 1.5-.89 2.37-1.1.58-.16 1.19-.24 1.82-.24 2 0 3.79.8 5.09 2.09.05.05.11.11.16.18h.01c.14.15.27.3.4.47.37.47.68.98.92 1.54.12.26.22.53.3.81.01.04.02.07.03.11.14.49.23 1 .25 1.53C28.1 39.2 28.11 39.36 28.11 39.52z"/><path fill="#ffecb3" d="M26.06 39.52c0 .41-.05.8-.16 1.17-.1.4-.25.78-.44 1.14-.03.06-.1.17-.1.17h-8.88c-.01-.01-.02-.03-.02-.04-.12-.19-.22-.38-.3-.59-.2-.46-.32-.96-.36-1.48-.02-.12-.02-.25-.02-.37.0-.06.0-.13.01-.19.01-.44.07-.86.19-1.25.1-.36.23-.69.4-1.01.0.0.01-.01.01-.02.12-.21.25-.42.4-.62.49-.66 1.14-1.2 1.89-1.55h.01c.24-.12.49-.22.75-.29h.01c.46-.14.96-.21 1.47-.21.59.0 1.16.09 1.68.28.19.05.37.13.55.22h.01c.86.41 1.59 1.05 2.09 1.85.1.15.19.31.27.48.04.07.08.15.11.22.23.52.37 1.09.41 1.69.01.05.01.1.01.16C26.06 39.36 26.06 39.44 26.06 39.52z"/><g><path fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M30 11H18c-3.9.0-7 3.1-7 7v12c0 3.9 3.1 7 7 7h12c3.9.0 7-3.1 7-7V18c0-3.9-3.1-7-7-7z"/><circle cx="31" cy="16" r="1" fill="#fff"/></g><g><circle cx="24" cy="24" r="6" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/></g></svg></a></li><li><a href=https://twitter.com/4006wayne target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://wayne-blog.com/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>é—œæ–¼æœ¬ç«™</span></a></li><li><a href=https://wayne-blog.com/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>æ–‡ç« å·å®—</span></a></li><li><a href=https://wayne-blog.com/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æœå°‹æª¢ç´¢</span></a></li><li><a href=https://wayne-blog.com/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>ç›¸é—œé€£çµ</span></a></li><li><a href=https://wayne-blog.com/categories/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg><span>åˆ†é¡æª¢ç´¢</span></a></li><li><a href=https://wayne-blog.com/tags/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><span>æ¨™ç±¤æª¢ç´¢</span></a></li><li><a href=https://wayne-blog.com/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS Feed</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://wayne-blog.com/ selected>ç¹é«”ä¸­æ–‡</option><option value=https://wayne-blog.com/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>å¤œæ™šæ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®éŒ„</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#è‡ª-beta-å’Œ-rc-ä»¥ä¾†æœ‰ä»€éº¼æ–°åŠŸèƒ½>è‡ª Beta å’Œ RC ä»¥ä¾†æœ‰ä»€éº¼æ–°åŠŸèƒ½ï¼Ÿ</a></li><li><a href=#è£é£¾å™¨>è£é£¾å™¨</a><ol><li><a href=#èˆ‡å¯¦é©—æ€§éºç•™è£é£¾å™¨çš„å·®ç•°>èˆ‡å¯¦é©—æ€§éºç•™è£é£¾å™¨çš„å·®ç•°</a></li><li><a href=#ç·¨å¯«é¡å‹è‰¯å¥½çš„è£é£¾å™¨>ç·¨å¯«é¡å‹è‰¯å¥½çš„è£é£¾å™¨</a></li></ol></li><li><a href=#const-æ³›å‹åƒæ•¸>const æ³›å‹åƒæ•¸</a></li><li><a href=#extends-æ”¯æŒå¤šå€‹é…ç½®æ–‡ä»¶>extends æ”¯æŒå¤šå€‹é…ç½®æ–‡ä»¶</a></li><li><a href=#æ‰€æœ‰æšèˆ‰éƒ½æ˜¯è¯åˆæšèˆ‰>æ‰€æœ‰æšèˆ‰éƒ½æ˜¯è¯åˆæšèˆ‰</a></li><li><a href=#--moduleresolution-æ–°å¢-bundler-æ”¯æŒ><code>--moduleResolution</code> æ–°å¢ bundler æ”¯æŒ</a></li><li><a href=#è‡ªå®šç¾©è§£ææ¨™èªŒ>è‡ªå®šç¾©è§£ææ¨™èªŒ</a><ol><li><a href=#allowimportingtsextensions>allowImportingTsExtensions</a></li><li><a href=#resolvepackagejsonexports>resolvePackageJsonExports</a></li><li><a href=#resolvepackagejsonimports>resolvePackageJsonImports</a></li><li><a href=#allowarbitraryextensions>allowArbitraryExtensions</a><ol><li></li></ol></li><li><a href=#customconditions>customConditions</a></li></ol></li><li><a href=#--verbatimmodulesyntax><code>--verbatimModuleSyntax</code></a></li><li><a href=#æ”¯æŒ-export-type->æ”¯æŒ <code>export type *</code></a></li><li><a href=#jsdoc-æ”¯æŒ-satisfies>JSDoc æ”¯æŒ <code>@satisfies</code></a></li><li><a href=#jsdoc-æ”¯æŒ-overload>JSDoc æ”¯æŒ <code>@overload</code></a></li><li><a href=#åœ¨tsc---build-æ™‚å¯ä»¥å‚³å…¥çš„æ–°æŒ‡ä»¤>åœ¨tsc <code>--build</code> æ™‚å¯ä»¥å‚³å…¥çš„æ–°æŒ‡ä»¤</a></li><li><a href=#ç·¨è¼¯å™¨ä¸­ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº>ç·¨è¼¯å™¨ä¸­ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº</a></li><li><a href=#switchcase-èªæ³•è£œè¶³>switch/case èªæ³•è£œè¶³</a></li><li><a href=#é€Ÿåº¦å…§å­˜å’ŒåŒ…å¤§å°å„ªåŒ–>é€Ÿåº¦ã€å…§å­˜å’ŒåŒ…å¤§å°å„ªåŒ–</a></li><li><a href=#é‡å¤§æ›´æ”¹å’Œæ£„ç”¨>é‡å¤§æ›´æ”¹å’Œæ£„ç”¨</a><ol><li><a href=#é‹è¡Œæ™‚è¦æ±‚>é‹è¡Œæ™‚è¦æ±‚</a></li><li><a href=#libdtsè®ŠåŒ–><code>lib.d.ts</code>è®ŠåŒ–</a></li><li><a href=#api-é‡å¤§è®Šæ›´>API é‡å¤§è®Šæ›´</a></li><li><a href=#é—œä¿‚é‹ç®—ç¬¦ä¸­ç¦æ­¢çš„éš±å¼å¼·åˆ¶è½‰æ›>é—œä¿‚é‹ç®—ç¬¦ä¸­ç¦æ­¢çš„éš±å¼å¼·åˆ¶è½‰æ›</a></li><li><a href=#æšèˆ‰å¤§ä¿®>æšèˆ‰å¤§ä¿®</a></li><li><a href=#å°æ§‹é€ å‡½æ•¸ä¸­çš„åƒæ•¸è£é£¾å™¨é€²è¡Œæ›´æº–ç¢ºçš„é¡å‹æª¢æŸ¥---experimentaldecorators>å°æ§‹é€ å‡½æ•¸ä¸­çš„åƒæ•¸è£é£¾å™¨é€²è¡Œæ›´æº–ç¢ºçš„é¡å‹æª¢æŸ¥ <code>--experimentalDecorators</code></a></li><li><a href=#æ£„ç”¨å’Œé»˜èªæ›´æ”¹>æ£„ç”¨å’Œé»˜èªæ›´æ”¹</a></li></ol></li><li><a href=#ä¸‹ä¸€æ­¥æ˜¯ä»€éº¼>ä¸‹ä¸€æ­¥æ˜¯ä»€éº¼ï¼Ÿ</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><a class=btnBack href=javascript:void(0) onclick=backEvent()><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-back" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l-4 4 4 4m-4-4h11a4 4 0 000-8h-1"/></svg><span class=btnBackText>BACK</span></a>
<script>function backEvent(){if(document.referrer.indexOf(window.location.host)!==-1){history.go(-1);return}window.location.href=window.location.origin}</script><header class=article-header><div class=article-image><a href=https://wayne-blog.com/2023-04-18/ts-v5-introduction/><img src=https://live.staticflickr.com/65535/52826805634_6bd4cfd428_o.jpg loading=lazy alt="Featured image of post ã€Typescriptã€‘5.0 ç‰ˆæœ¬ç™¼å¸ƒ"></a></div><div class=article-details><header class=article-category><a href=https://wayne-blog.com/categories/typescript/ style=background-color:#2d79c7;color:#fff>Typescript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=https://wayne-blog.com/2023-04-18/ts-v5-introduction/>ã€Typescriptã€‘5.0 ç‰ˆæœ¬ç™¼å¸ƒ</a></h2><h3 class=article-subtitle>æ­¤ç‰ˆæœ¬å¸¶ä¾†äº†è¨±å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ™‚æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç°¡å–®ã€æ›´å¿«ã€‚æˆ‘å€‘å·²ç¶“å¯¦æ–½äº†æ–°çš„è£é£¾å™¨æ¨™æº–ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é …ç›®çš„åŠŸèƒ½ï¼Œç‚ºåº«ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ“´å±•äº†æˆ‘å€‘çš„ JSDoc åŠŸèƒ½ï¼Œç°¡åŒ–äº†é…ç½®ï¼Œä¸¦é€²è¡Œäº†è¨±å¤šå…¶ä»–æ”¹é€²ã€‚</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Apr 18, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é–±è®€æ™‚é–“: 17 åˆ†é˜</time></div></footer></div></header><section class=article-content><style>.article-content p code{background-color:#f5f5f5;color:#ff3860}.focus{background:#f1e2e2;color:#d62c2c;padding:0 5px}.text-center{text-align:center!important}</style><p><a class=link href=https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/ target=_blank rel=noopener>åŸæ–‡</a><br><a class=link href=https://juejin.cn/post/7219908995339173943 target=_blank rel=noopener>åƒè€ƒç¶²ç«™</a></p><p>æ­¤ç‰ˆæœ¬å¸¶ä¾†äº†è¨±å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ™‚æ—¨åœ¨ä½¿ TypeScript æ›´å°ã€æ›´ç°¡å–®ã€æ›´å¿«ã€‚æˆ‘å€‘å·²ç¶“å¯¦æ–½äº†æ–°çš„è£é£¾å™¨æ¨™æº–ï¼Œæ·»åŠ äº†æ›´å¥½åœ°æ”¯æŒ Node å’Œ bundlers ä¸­çš„ ESM é …ç›®çš„åŠŸèƒ½ï¼Œç‚ºåº«ä½œè€…æä¾›äº†æ§åˆ¶æ³›å‹æ¨ç†çš„æ–°æ–¹æ³•ï¼Œæ“´å±•äº†æˆ‘å€‘çš„ JSDoc åŠŸèƒ½ï¼Œç°¡åŒ–äº†é…ç½®ï¼Œä¸¦é€²è¡Œäº†è¨±å¤šå…¶ä»–æ”¹é€²ã€‚</p><p>å¦‚æœæ‚¨å·²ç¶“ç†Ÿæ‚‰ TypeScriptï¼Œä¹Ÿä¸ç”¨æ“”å¿ƒï¼5.0 ä¸æ˜¯ç ´å£æ€§ç‰ˆæœ¬ï¼Œä½ æ‰€çŸ¥é“çš„ä¸€åˆ‡ä»ç„¶é©ç”¨ã€‚é›–ç„¶ TypeScript 5.0 åŒ…æ‹¬æ­£ç¢ºæ€§æ›´æ”¹å’Œä¸€äº›ä¸å¸¸ç”¨é¸é …çš„æ£„ç”¨ï¼Œä½†æˆ‘å€‘ç›¸ä¿¡å¤§å¤šæ•¸é–‹ç™¼äººå“¡éƒ½æœƒæœ‰èˆ‡ä»¥å‰ç‰ˆæœ¬é¡ä¼¼çš„å‡ç´šé«”é©—ã€‚</p><p>è¦é–‹å§‹ä½¿ç”¨ TypeScript 5.0ï¼Œæ‚¨å¯ä»¥é€šé <a class=link href=https://www.nuget.org/packages/Microsoft.TypeScript.MSBuild target=_blank rel=noopener>NuGet</a> ç²å–å®ƒï¼Œæˆ–è€…ä½¿ç”¨ npm å’Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install -D typescript
</span></span></code></pre></td></tr></table></div></div><p>ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§æŒ‡ç¤ºåœ¨ Visual Studio Code ä¸­ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ TypeScript çš„<a class=link href=https://code.visualstudio.com/docs/typescript/typescript-compiling#_using-the-workspace-version-of-typescript target=_blank rel=noopener>èªªæ˜</a>é€²è¡Œæ“ä½œã€‚</p><p>ä»¥ä¸‹ TypeScript 5.0 ä¸­æ–°åŠŸèƒ½çš„å¿«é€Ÿåˆ—è¡¨ï¼</p><ul><li>è£é£¾å™¨</li><li>const æ³›å‹åƒæ•¸</li><li>extends æ”¯æŒå¤šå€‹é…ç½®æ–‡ä»¶</li><li>æ‰€æœ‰çš„æšèˆ‰éƒ½æ˜¯è¯åˆæšèˆ‰</li><li><code>--moduleResolution</code> é…ç½®æ–°å¢ bundler æ”¯æŒ</li><li>è‡ªå®šç¾©è§£ææ¨™èªŒ</li><li><code>--verbatimModuleSyntax</code></li><li>æ”¯æŒ <code>export type *</code></li><li>JSDoc æ”¯æŒ <code>@satisfies</code></li><li>JSDoc æ”¯æŒ <code>@overload</code></li><li>é‹è¡Œ tsc <code>--build</code> å¯ä»¥å‚³å…¥çš„æ–°æŒ‡ä»¤</li><li>ç·¨è¼¯å™¨ä¸­ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº</li><li><strong>switch/case</strong> èªæ³•è£œè¶³</li><li>é€Ÿåº¦ã€å…§å­˜å’ŒåŒ…å¤§å°å„ªåŒ–</li><li>é‡å¤§æ›´æ”¹å’Œæ£„ç”¨</li><li>ä¸‹ä¸€æ­¥æ˜¯ä»€éº¼ï¼Ÿ</li></ul><hr><h2 id=è‡ª-beta-å’Œ-rc-ä»¥ä¾†æœ‰ä»€éº¼æ–°åŠŸèƒ½>è‡ª Beta å’Œ RC ä»¥ä¾†æœ‰ä»€éº¼æ–°åŠŸèƒ½ï¼Ÿ</h2><p>è‡ª <a class=link href=https://devblogs.microsoft.com/typescript/announcing-typescript-5-0-beta/ target=_blank rel=noopener>beta ç‰ˆ</a> ç™¼å¸ƒä»¥ä¾†ï¼ŒTypeScript 5.0 æœ‰å¹¾å€‹é¡¯è‘—çš„è®ŠåŒ–ã€‚</p><p>è‡ª TypeScript 5.0 Beta ä»¥ä¾†ï¼Œä¸€å€‹æ–°å€åˆ¥æ˜¯ TypeScript å…è¨±å°‡<a class=link href=https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/#decorators target=_blank rel=noopener>è£é£¾å™¨</a>æ”¾ç½®åœ¨ <strong>export</strong> å’Œ <strong>export default</strong> ä¹‹å‰æˆ–ä¹‹å¾Œã€‚é€™ä¸€è®ŠåŒ–åæ˜ äº† TC39ï¼ˆECMAScript/JavaScript çš„æ¨™æº–æ©Ÿæ§‹ï¼‰å…§éƒ¨çš„è¨è«–å’Œå…±è­˜ã€‚</p><p>å¦ä¸€å€‹æ˜¯<code>æ–°çš„ bundler æ¨¡å¡Šè§£æé¸é …</code>åªèƒ½åœ¨ <code>--module</code> é¸é …è¨­ç½®ç‚º <code>esnext</code> æ™‚ä½¿ç”¨ã€‚é€™æ¨£åšæ˜¯ç‚ºäº†ç¢ºä¿åœ¨è¼¸å…¥æ–‡ä»¶ä¸­å¯«å…¥çš„ <code>import</code> èªå¥ä¸æœƒåœ¨æ†ç¶å™¨è§£æå®ƒå€‘ä¹‹å‰è½‰æ›ç‚º <code>require</code> èª¿ç”¨ï¼Œç„¡è«–æ†ç¶å™¨æˆ–åŠ è¼‰å™¨æ˜¯å¦éµå¾ TypeScript çš„ <code>module</code> é¸é …ã€‚æˆ‘å€‘é‚„åœ¨é€™äº›ç™¼å¸ƒèªªæ˜ä¸­æä¾›äº†ä¸€äº›ä¸Šä¸‹æ–‡ï¼Œå»ºè­°å¤§å¤šæ•¸åº«ä½œè€…å …æŒä½¿ç”¨ <code>node16</code> or <code>nodenext</code>ã€‚</p><p>é›–ç„¶ TypeScript 5.0 Beta é™„å¸¶äº†æ­¤åŠŸèƒ½ï¼Œä½†æˆ‘å€‘æ²’æœ‰è¨˜éŒ„æˆ‘å€‘åœ¨ç·¨è¼¯å™¨å ´æ™¯ä¸­æ”¯æŒ<code>ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº</code>çš„å·¥ä½œã€‚é€™éƒ¨åˆ†æ˜¯å› ç‚ºç”¨æ–¼è‡ªå®šç¾©çš„ UX ä»åœ¨è¨è«–ä¸­ï¼Œä½†é»˜èªæƒ…æ³ä¸‹ï¼ŒTypeScript ç¾åœ¨æ‡‰è©²å¯ä»¥æ›´å¥½åœ°èˆ‡æ‚¨çš„å…¶ä»–å·¥å…·ä¸€èµ·ä½¿ç”¨ã€‚</p><p>è‡ªæˆ‘å€‘çš„ <a class=link href=https://devblogs.microsoft.com/typescript/announcing-typescript-5-0-rc/ target=_blank rel=noopener>RC</a> ä»¥ä¾†ï¼Œæˆ‘å€‘æœ€é¡¯è‘—çš„è®ŠåŒ–æ˜¯ TypeScript 5.0 ç¾åœ¨åœ¨ <code>package.json</code> ä¸­æŒ‡å®šäº† Node.js çš„æœ€ä½ç‰ˆæœ¬ç‚º <strong><code>12.20</code></strong>ã€‚æˆ‘å€‘é‚„ç™¼å¸ƒäº†ä¸€ç¯‡é—œæ–¼ TypeScript 5.0 å‘ modules é·ç§»çš„<a class=link href=https://devblogs.microsoft.com/typescript/typescripts-migration-to-modules/ target=_blank rel=noopener>æ–‡ç« </a>ï¼Œä¸¦æä¾›äº†éˆæ¥ã€‚</p><p>è‡ª TypeScript 5.0 Beta å’Œ RC ç™¼å¸ƒä»¥ä¾†ï¼Œ<a class=link href=https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/#speed-memory-and-package-size-optimizations target=_blank rel=noopener>é€Ÿåº¦åŸºæº–å’ŒåŒ…å¤§å°å¢é‡</a>çš„å…·é«”æ•¸å­—ä¹Ÿé€²è¡Œäº†èª¿æ•´ï¼Œå„˜ç®¡å™ªéŸ³ä¸€ç›´æ˜¯é‹è¡Œéç¨‹ä¸­çš„ä¸€å€‹å› ç´ ã€‚ç‚ºäº†æ¸…æ™°èµ·è¦‹ï¼Œé‚„å°ä¸€äº›åŸºæº–çš„åç¨±é€²è¡Œäº†èª¿æ•´ï¼ŒåŒ…å¤§å°çš„æ”¹é€²ä¹Ÿè¢«ç§»è‡³å–®ç¨çš„åœ–è¡¨ä¸­ã€‚</p><hr><h2 id=è£é£¾å™¨>è£é£¾å™¨</h2><p>è£é£¾å™¨æ˜¯å³å°‡æ¨å‡ºçš„ ECMAScript åŠŸèƒ½ï¼Œå®ƒå…è¨±æˆ‘å€‘ä»¥å¯é‡ç”¨çš„æ–¹å¼è‡ªå®šç¾©é¡åŠå…¶æˆå“¡ã€‚</p><p>è®“æˆ‘å€‘æ€è€ƒä»¥ä¸‹ä»£ç¢¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>â€‹</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;Ron&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>p</span><span class=p>.</span><span class=nx>greet</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>greet é€™è£¡å¾ˆç°¡å–®ï¼Œä½†è®“æˆ‘å€‘æƒ³åƒå®ƒæ›´è¤‡é›œâ€”â€”ä¹Ÿè¨±å®ƒåŸ·è¡Œä¸€äº›ç•°æ­¥é‚è¼¯ï¼Œå®ƒæ˜¯éæ­¸çš„ï¼Œå®ƒæœ‰å‰¯ä½œç”¨&mldr;ç­‰ç­‰ã€‚ä¸ç®¡ä½ æƒ³åƒçš„æ˜¯å“ªç¨®å ´æ™¯ï¼Œå‡è¨­ä½ æ‹‹å‡ºäº†ä¸€äº› console.log èª¿ç”¨ä¾†å¹«åŠ©èª¿è©¦ greetã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LOG: Entering method.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LOG: Exiting method.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™ç¨®æ¨¡å¼ç›¸ç•¶æ™®éã€‚å¦‚æœæœ‰ä¸€ç¨®æ–¹æ³•æˆ‘å€‘å¯ä»¥ç‚ºæ¯ç¨®æ–¹æ³•åšåˆ°é€™ä¸€é»ï¼Œé‚£å°±å¤ªå¥½äº†ï¼</p><p>é€™å°±æ˜¯è£é£¾å™¨çš„ç”¨æ­¦ä¹‹åœ°ã€‚æˆ‘å€‘å¯ä»¥ç·¨å¯«ä¸€å€‹ <code>loggedMethod</code> çš„å‡½æ•¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggedMethod</span><span class=p>(</span><span class=nx>originalMethod</span>: <span class=kt>any</span><span class=p>,</span> <span class=nx>_context</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nx>replacementMethod</span><span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=kt>any</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span>: <span class=kt>any</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LOG: Entering method.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>originalMethod</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LOG: Exiting method.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>replacementMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol><li>è¼¸å‡º &ldquo;Entering&mldr;&rdquo;</li><li><strong>this</strong> å°‡å…¶æ‰€æœ‰åƒæ•¸å‚³éçµ¦åŸå§‹æ–¹æ³•</li><li>è¼¸å‡º &ldquo;Exiting&mldr;&rdquo; æ—¥èªŒ</li><li>è¿”å›åŸå§‹æ–¹æ³•è¿”å›çš„ä»»ä½•å…§å®¹</li></ol><p>ç¾åœ¨æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>loggedMethod</code> ä¾†è£é£¾æ–¹æ³• greetï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>@loggedMethod</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Output:
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// LOG: Entering method.
</span></span></span><span class=line><span class=cl><span class=c1>// Hello, my name is Ron.
</span></span></span><span class=line><span class=cl><span class=c1>// LOG: Exiting method.
</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘åªæ˜¯åœ¨ greet ä¸Šé¢ä½¿ç”¨äº† <code>loggedMethod</code> ä½œç‚ºè£é£¾å™¨ï¼Œæ³¨æ„æˆ‘å€‘æŠŠå®ƒå¯«æˆäº† <code>@loggedMethod</code>ã€‚ç•¶æˆ‘å€‘é€™æ¨£åšæ™‚ï¼Œå®ƒæœƒè¢« target æ–¹æ³•å’Œ context å°è±¡èª¿ç”¨ã€‚å› ç‚º <code>loggedMethod</code> è¿”å›äº†ä¸€å€‹æ–°å‡½æ•¸ï¼Œè©²å‡½æ•¸<code>æ›¿æ›äº† greet</code>ã€‚</p><p>æˆ‘å€‘é‚„æ²’æœ‰æåˆ° loggedMethod ç”¨ç¬¬äºŒå€‹åƒæ•¸å®šç¾©çš„ã€‚å®ƒè¢«ç¨±ç‚º &ldquo;<strong>ä¸Šä¸‹æ–‡å°è±¡</strong>"ï¼Œå®ƒæœ‰ä¸€äº›é—œæ–¼å¦‚ä½•è²æ˜ä¿®é£¾æ–¹æ³•çš„æœ‰ç”¨ä¿¡æ¯ï¼Œæ¯”å¦‚å®ƒæ˜¯ <code>#private</code> æˆå“¡é‚„æ˜¯éœæ…‹æˆå“¡ï¼Œæˆ–è€…æ–¹æ³•çš„åç¨±æ˜¯ä»€éº¼ã€‚è®“æˆ‘å€‘é‡å¯« <code>loggedMethod</code> ä»¥åˆ©ç”¨å®ƒä¸¦æ‰“å°å‡ºè¢«è£é£¾çš„æ–¹æ³•çš„åç¨±ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggedMethod</span><span class=p>(</span><span class=nx>originalMethod</span>: <span class=kt>any</span><span class=p>,</span> <span class=nx>context</span>: <span class=kt>ClassMethodDecoratorContext</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>methodName</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nx>replacementMethod</span><span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=kt>any</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span>: <span class=kt>any</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`LOG: Entering method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>originalMethod</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`LOG: Exiting method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>replacementMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘ç¾åœ¨ä½¿ç”¨ context åƒæ•¸ï¼Œå®ƒæ˜¯ <code>loggedMethod</code> ä¸­ç¬¬ä¸€å€‹å…·æœ‰æ¯” <code>any</code> å’Œ <code>any[]</code> æ›´åš´æ ¼çš„åƒæ•¸é¡å‹ã€‚</p><p>TypeScript æä¾›äº†ä¸€å€‹åç‚º <code>ClassMethodDecoratorContext</code> çš„é¡å‹ï¼Œä»–å°æ–¹æ³•è£é£¾å™¨æ‰€æ¥æ”¶çš„ä¸Šä¸‹æ–‡å°è±¡é€²è¡Œå»ºæ¨¡ã€‚</p><p>é™¤äº†å…ƒæ•¸æ“šä¹‹å¤–ï¼Œæ–¹æ³•çš„ä¸Šä¸‹æ–‡å°è±¡é‚„æœ‰ä¸€å€‹æœ‰ç”¨çš„å‡½æ•¸ï¼Œç¨±ç‚º <code>addInitializer</code>ã€‚é€™æ˜¯ä¸€ç¨®æ›é‰¤åˆ°æ§‹é€ å‡½æ•¸é–‹é ­çš„æ–¹æ³•ï¼ˆå¦‚æœæˆ‘å€‘ä½¿ç”¨ staticï¼Œå‰‡æ›é‰¤åˆ°é¡æœ¬èº«çš„åˆå§‹åŒ–ï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼šåœ¨ JavaScript ä¸­ï¼Œé€šå¸¸æœƒç·¨å¯«é¡ä¼¼ä»¥ä¸‹æ¨¡å¼çš„å…§å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>greet</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>greet</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ï¼Œgreet å¯ä»¥è²æ˜ç‚ºåˆå§‹åŒ–ç‚ºç®­é ­å‡½æ•¸çš„å±¬æ€§ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>greet</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>greet</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>greet</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç·¨å¯«æ­¤ä»£ç¢¼æ˜¯ç‚ºäº†ç¢ºä¿åœ¨ greet ä½œç‚ºç¨ç«‹å‡½æ•¸èª¿ç”¨æˆ–ä½œç‚ºå›èª¿å‚³é <strong>this</strong> æ™‚ä¸æœƒé‡æ–°ç¶å®šã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>greet</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;Ron&#34;</span><span class=p>).</span><span class=nx>greet</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// We don&#39;t want this to fail!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>greet</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¯ä»¥ç·¨å¯«ä¸€å€‹è£é£¾å™¨ï¼Œä½¿ç”¨ <code>addInitializer</code> åœ¨æ§‹é€ å‡½æ•¸ä¸­èª¿ç”¨ <strong>bind</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>bound</span><span class=p>(</span><span class=nx>originalMethod</span>: <span class=kt>any</span><span class=p>,</span> <span class=nx>context</span>: <span class=kt>ClassMethodDecoratorContext</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>methodName</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=kr>private</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`&#39;bound&#39; cannot decorate private properties like </span><span class=si>${</span><span class=nx>methodName</span> <span class=kr>as</span> <span class=kt>string</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>context</span><span class=p>.</span><span class=nx>addInitializer</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>[</span><span class=nx>methodName</span><span class=p>]</span> <span class=o>=</span> <span class=k>this</span><span class=p>[</span><span class=nx>methodName</span><span class=p>].</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>bound ä¸è¿”å›ä»»ä½•æ±è¥¿â€”â€”æ‰€ä»¥ç•¶å®ƒè£é£¾ä¸€å€‹æ–¹æ³•æ™‚ï¼Œå®ƒæœƒä¿ç•™åŸä¾†çš„æ–¹æ³•ã€‚ç›¸åï¼Œå®ƒå°‡åœ¨ä»»ä½•å…¶ä»–å­—æ®µåˆå§‹åŒ–ä¹‹å‰æ·»åŠ é‚è¼¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>  <span class=kd>@bound</span>
</span></span><span class=line><span class=cl>  <span class=kd>@loggedMethod</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;Ron&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>greet</span> <span class=o>=</span> <span class=nx>p</span><span class=p>.</span><span class=nx>greet</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Works!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>greet</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>è«‹æ³¨æ„ï¼Œæˆ‘å€‘å †ç–Šäº†å…©å€‹è£é£¾å™¨ï¼š<code>@bound</code> å’Œ <code>@loggedMethod</code>ã€‚é€™äº›è£é£¾ä»¥**<code>ç›¸åçš„é †åº</code>**é‹è¡Œã€‚å³ <code>@loggedMethod</code> è£é£¾åŸå§‹æ–¹æ³• greetï¼Œ<code>@bound</code> è£é£¾ <code>@loggedMethod</code> çš„çµæœã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œé€™ä¸¦ä¸é‡è¦ï¼Œä½†å¦‚æœæ‚¨çš„è£é£¾å™¨æœ‰å‰¯ä½œç”¨æˆ–æœŸæœ›ç‰¹å®šé †åºï¼Œå‰‡å¯èƒ½æœƒç™¼ç”Ÿé€™ç¨®æƒ…æ³ã€‚</p><p>åŒæ¨£å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæ ¹æ“šä½ å–œæ­¡ä»£ç¢¼é¢¨æ ¼ï¼Œå¯ä»¥å°‡é€™äº›è£é£¾å™¨æ”¾åœ¨åŒä¸€è¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>@bound</span> <span class=kd>@loggedMethod</span> <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯èƒ½ä¸å¤ªæ˜é¡¯çš„æ˜¯ï¼Œæˆ‘å€‘ç”šè‡³å¯ä»¥å‰µå»ºè¿”å›è£é£¾å™¨å‡½æ•¸çš„å‡½æ•¸ã€‚é€™ä½¿å¾—å®šåˆ¶æœ€çµ‚çš„è£é£¾å™¨æˆç‚ºå¯èƒ½ã€‚å¦‚æœæˆ‘å€‘é¡˜æ„ï¼Œæˆ‘å€‘å¯ä»¥è®“ <code>loggedMethod</code> è¿”å›ä¸€å€‹è£é£¾å™¨ä¸¦è‡ªå®šç¾©å®ƒè¨˜éŒ„æ¶ˆæ¯çš„æ–¹å¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggedMethod</span><span class=p>(</span><span class=nx>headMessage</span> <span class=o>=</span> <span class=s2>&#34;LOG:&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kd>function</span> <span class=nx>actualDecorator</span><span class=p>(</span><span class=nx>originalMethod</span>: <span class=kt>any</span><span class=p>,</span> <span class=nx>context</span>: <span class=kt>ClassMethodDecoratorContext</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>methodName</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>replacementMethod</span><span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=kt>any</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span>: <span class=kt>any</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>headMessage</span><span class=si>}</span><span class=sb> Entering method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>originalMethod</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>headMessage</span><span class=si>}</span><span class=sb> Exiting method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>replacementMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæˆ‘å€‘é€™æ¨£åšï¼Œæˆ‘å€‘å¿…é ˆåœ¨ä½¿ç”¨ <code>loggedMethod</code> ä½œç‚ºè£é£¾å™¨ä¹‹å‰èª¿ç”¨å®ƒã€‚ç„¶å¾Œæˆ‘å€‘å¯ä»¥å‚³å…¥ä»»ä½•å­—ç¬¦ä¸²ä½œç‚ºè¼¸å‡ºåˆ°æ§åˆ¶å°çš„æ—¥èªŒçš„å‰ç¶´ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>name</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>@loggedMethod</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>greet() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello, my name is </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>.`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;Ron&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>p</span><span class=p>.</span><span class=nx>greet</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Output:
</span></span></span><span class=line><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1>// Entering method &#39;greet&#39;.
</span></span></span><span class=line><span class=cl><span class=c1>// Hello, my name is Ron.
</span></span></span><span class=line><span class=cl><span class=c1>// Exiting method &#39;greet&#39;.
</span></span></span></code></pre></td></tr></table></div></div><p>è£é£¾å™¨ä¸åƒ…åƒ…å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼å®ƒå€‘å¯ç”¨æ–¼å±¬æ€§/å­—æ®µã€getterã€setter å’Œè‡ªå‹•è¨ªå•å™¨ã€‚ç”šè‡³é¡æœ¬èº«ä¹Ÿå¯ä»¥ç‚ºå­é¡åŒ–å’Œè¨»å†Šä¹‹é¡çš„äº‹æƒ…é€²è¡Œè£é£¾ã€‚</p><p>è¦æ·±å…¥äº†è§£æœ‰é—œè£é£¾å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é–±è®€ <a class=link href=https://2ality.com/2022/10/javascript-decorators.html target=_blank rel=noopener>Axel Rauschmayer çš„è©³ç›¡æ‘˜è¦</a>ã€‚</p><p>æœ‰é—œæ¶‰åŠçš„æ›´æ”¹çš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹<a class=link href=https://github.com/microsoft/TypeScript/pull/50820 target=_blank rel=noopener>åŸå§‹ pull request</a>ã€‚</p><h3 id=èˆ‡å¯¦é©—æ€§éºç•™è£é£¾å™¨çš„å·®ç•°>èˆ‡å¯¦é©—æ€§éºç•™è£é£¾å™¨çš„å·®ç•°</h3><p>å¦‚æœæ‚¨å·²ç¶“ä½¿ç”¨ TypeScript ä¸€æ®µæ™‚é–“ï¼Œæ‚¨å¯èƒ½æœƒæ„è­˜åˆ°å®ƒå¤šå¹´ä¾†ä¸€ç›´æ”¯æŒ&rdquo;<strong>å¯¦é©—æ€§</strong>&ldquo;è£é£¾å™¨ã€‚é›–ç„¶é€™äº›å¯¦é©—æ€§è£é£¾å™¨éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒå€‘æ¨¡æ“¬äº†ä¸€å€‹æ›´èˆŠç‰ˆæœ¬çš„è£é£¾å™¨ææ¡ˆï¼Œä¸¦ä¸”å§‹çµ‚éœ€è¦ä¸€å€‹åç‚º <code>--experimentalDecorators</code>ã€‚ä»»ä½•åœ¨æ²’æœ‰æ­¤æ¨™èªŒçš„æƒ…æ³ä¸‹å˜—è©¦åœ¨ TypeScript ä¸­ä½¿ç”¨è£é£¾å™¨éƒ½æœƒæç¤ºéŒ¯èª¤æ¶ˆæ¯ã€‚</p><p><code>--experimentalDecorators</code> åœ¨å¯é è¦‹çš„æœªä¾†å°‡ç¹¼çºŒå­˜åœ¨ï¼›ç„¶è€Œï¼Œå¦‚æœæ²’æœ‰é€™å€‹æ¨™èªŒï¼Œè£é£¾å™¨ç¾åœ¨å°‡æˆç‚ºæ‰€æœ‰æ–°ä»£ç¢¼çš„æœ‰æ•ˆèªæ³•ã€‚åœ¨ä¹‹å¤– <code>--experimentalDecorators</code>ï¼Œå®ƒå€‘å°‡ä»¥ä¸åŒæ–¹å¼é€²è¡Œé¡å‹æª¢æŸ¥å’Œé‡‹æ”¾ã€‚é¡å‹æª¢æŸ¥è¦å‰‡å’Œemit å®Œå…¨ä¸åŒï¼Œé›–ç„¶å¯ä»¥ç·¨å¯«è£é£¾å™¨ä¾†æ”¯æŒèˆŠçš„å’Œæ–°çš„è£é£¾å™¨è¡Œç‚ºï¼Œä½†ä»»ä½•ç¾æœ‰çš„è£é£¾å™¨å‡½æ•¸éƒ½ä¸å¤ªå¯èƒ½é€™æ¨£åšã€‚</p><p>é€™å€‹æ–°çš„è£é£¾å™¨ææ¡ˆèˆ‡ <code>--emitDecoratorMetadata</code> ä¸å…¼å®¹ï¼Œå®ƒä¸å…è¨±è£é£¾åƒæ•¸ã€‚æœªä¾†çš„ ECMAScript ææ¡ˆå¯èƒ½æœƒå¹«åŠ©å½Œåˆé€™ä¸€å·®è·ã€‚</p><p>æœ€å¾Œä¸€é»ï¼šé™¤äº†å…è¨±å°‡è£é£¾å™¨æ”¾åœ¨ <code>export</code> é—œéµå­—ä¹‹å‰ï¼Œè£é£¾å™¨ææ¡ˆç¾åœ¨é‚„æä¾›äº†åœ¨ <code>export</code> æˆ– <code>export default</code> ä¹‹å¾Œæ”¾ç½®è£é£¾å™¨çš„é¸é …ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯ä¸å…è¨±æ··åˆä½¿ç”¨é€™å…©ç¨®æ¨£å¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>@register</span> <span class=kr>export</span> <span class=k>default</span> <span class=kr>class</span> <span class=nx>Foo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// also allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>@register</span> <span class=kr>class</span> <span class=nx>Bar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// error - before *and* after is not allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>@before</span> <span class=kr>export</span> <span class=kd>@after</span> <span class=kr>class</span> <span class=nx>Bar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç·¨å¯«é¡å‹è‰¯å¥½çš„è£é£¾å™¨>ç·¨å¯«é¡å‹è‰¯å¥½çš„è£é£¾å™¨</h3><p>ä¸Šé¢çš„ <code>loggedMethod</code> å’Œ <code>bound</code> è£é£¾å™¨ç¤ºä¾‹æœ‰æ„ç°¡å–®åŒ–ä¸¦çœç•¥äº†å¾ˆå¤šé—œæ–¼é¡å‹çš„ç´°ç¯€ã€‚</p><p>éµå…¥è£é£¾å™¨å¯èƒ½ç›¸ç•¶è¤‡é›œã€‚ä¾‹å¦‚ï¼Œä¸Šé¢çš„é¡å‹æ­£ç¢ºçš„ç‰ˆæœ¬ <code>loggedMethod</code> å¯èƒ½çœ‹èµ·ä¾†åƒé€™æ¨£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggedMethod</span><span class=p>&lt;</span><span class=nt>This</span><span class=err>,</span> <span class=na>Args</span> <span class=na>extends</span> <span class=na>any</span><span class=err>[],</span> <span class=na>Return</span><span class=p>&gt;(</span>
</span></span><span class=line><span class=cl>  <span class=nx>target</span><span class=o>:</span> <span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=nx>This</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span>: <span class=kt>Args</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>Return</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>context</span>: <span class=kt>ClassMethodDecoratorContext</span><span class=p>&lt;</span><span class=nt>This</span><span class=err>,</span> <span class=err>(</span><span class=na>this</span><span class=err>:</span> <span class=na>This</span><span class=err>,</span> <span class=na>...args</span><span class=err>:</span> <span class=na>Args</span><span class=err>)</span> <span class=err>=</span><span class=p>&gt;</span> <span class=nx>Return</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>methodName</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nx>replacementMethod</span><span class=p>(</span><span class=k>this</span><span class=o>:</span> <span class=nx>This</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span>: <span class=kt>Args</span><span class=p>)</span><span class=o>:</span> <span class=nx>Return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`LOG: Entering method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>target</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=p>...</span><span class=nx>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`LOG: Exiting method &#39;</span><span class=si>${</span><span class=nx>methodName</span><span class=si>}</span><span class=sb>&#39;.`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>replacementMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¿…é ˆä½¿ç”¨é¡å‹åƒæ•¸ <strong>This</strong>ã€<strong>Args</strong> å’Œ <strong>Return</strong> åˆ†åˆ¥å®šç¾© <strong>this</strong> çš„é¡å‹ã€åƒæ•¸å’ŒåŸå§‹æ–¹æ³•çš„è¿”å›é¡å‹ã€‚</p><p>è£é£¾å™¨å‡½æ•¸å®šç¾©çš„å…·é«”è¤‡é›œç¨‹åº¦å–æ±ºæ–¼æ‚¨è¦ä¿è­‰çš„å…§å®¹ã€‚è«‹è¨˜ä½ï¼Œæ‚¨çš„è£é£¾å™¨å°‡è¢«ä½¿ç”¨çš„æ¬¡æ•¸å¤šæ–¼å®ƒå€‘è¢«ç·¨å¯«çš„æ¬¡æ•¸ï¼Œå› æ­¤é¡å‹è‰¯å¥½çš„ç‰ˆæœ¬é€šå¸¸æ›´å¯å–â€”â€”ä½†é¡¯ç„¶éœ€è¦èˆ‡å¯è®€æ€§é€²è¡Œæ¬Šè¡¡ï¼Œå› æ­¤è«‹ç›¡é‡ä¿æŒç°¡å–®ã€‚</p><p>å°‡ä¾†æœƒæä¾›æ›´å¤šé—œæ–¼ç·¨å¯«è£é£¾å™¨çš„æ–‡æª”ï¼Œä½†<a class=link href=https://2ality.com/2022/10/javascript-decorators.html target=_blank rel=noopener>é€™ç¯‡æ–‡ç« </a>æ‡‰è©²æœ‰å¤§é‡é—œæ–¼è£é£¾å™¨æ©Ÿåˆ¶çš„ç´°ç¯€ã€‚</p><hr><h2 id=const-æ³›å‹åƒæ•¸>const æ³›å‹åƒæ•¸</h2><p>åœ¨æ¨æ–·å°è±¡çš„é¡å‹æ™‚ï¼ŒTypeScript é€šå¸¸æœƒé¸æ“‡ä¸€ç¨®é€šç”¨çš„é¡å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œnames çš„æ¨æ–·é¡å‹æ˜¯ <code>string[]</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>type</span> <span class=nx>HasNames</span> <span class=o>=</span> <span class=p>{</span> <span class=kr>readonly</span> <span class=nx>names</span>: <span class=kt>string</span><span class=p>[]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getNamesExactly</span><span class=p>&lt;</span><span class=nt>T</span> <span class=na>extends</span> <span class=na>HasNames</span><span class=p>&gt;(</span><span class=nx>arg</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span><span class=p>[</span><span class=s2>&#34;names&#34;</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>arg</span><span class=p>.</span><span class=nx>names</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Inferred type: string[]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>names</span> <span class=o>=</span> <span class=nx>getNamesExactly</span><span class=p>({</span> <span class=nx>names</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Eve&#34;</span><span class=p>]});</span>
</span></span></code></pre></td></tr></table></div></div><p>é€šå¸¸é€™æ¨£åšçš„ç›®çš„æ˜¯ä½¿çªè®Šæˆç‚ºå¯èƒ½ã€‚</p><p>ä½†æ˜¯ï¼Œæ ¹æ“š <code>getNamesExactly</code> çš„å…·é«”åŠŸèƒ½å’Œç”¨é€”ï¼Œé€šå¸¸éœ€è¦æ›´å…·é«”çš„é¡å‹ã€‚</p><p>åˆ°ç›®å‰ç‚ºæ­¢ï¼ŒAPI ä½œè€…é€šå¸¸ä¸å¾—ä¸åœ¨æŸäº›åœ°æ–¹æ·»åŠ  <code>as const</code> ä»¥å¯¦ç¾æ‰€éœ€çš„æ¨ç†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// The type we wanted:
</span></span></span><span class=line><span class=cl><span class=c1>//   readonly [&#34;Alice&#34;, &#34;Bob&#34;, &#34;Eve&#34;]
</span></span></span><span class=line><span class=cl><span class=c1>// The type we got:
</span></span></span><span class=line><span class=cl><span class=c1>//   string[]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>names1</span> <span class=o>=</span> <span class=nx>getNamesExactly</span><span class=p>({</span> <span class=nx>names</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Eve&#34;</span><span class=p>]});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Correctly gets what we wanted:
</span></span></span><span class=line><span class=cl><span class=c1>//   readonly [&#34;Alice&#34;, &#34;Bob&#34;, &#34;Eve&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>names2</span> <span class=o>=</span> <span class=nx>getNamesExactly</span><span class=p>({</span> <span class=nx>names</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Eve&#34;</span><span class=p>]}</span> <span class=kr>as</span> <span class=kr>const</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™å¯èƒ½å¾ˆéº»ç…©ä¸”å®¹æ˜“å¿˜è¨˜ã€‚åœ¨ TypeScript 5.0 ä¸­ï¼Œæ‚¨ç¾åœ¨å¯ä»¥å°‡ <code>const</code> ä¿®é£¾ç¬¦æ·»åŠ åˆ°é¡å‹åƒæ•¸è²æ˜ä¸­ï¼Œä»¥ä½¿ <code>const-like</code> æ¨ç†æˆç‚ºé»˜èªå€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>type</span> <span class=nx>HasNames</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>names</span>: <span class=kt>readonly</span> <span class=kt>string</span><span class=p>[]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getNamesExactly</span><span class=p>&lt;</span><span class=nt>const</span> <span class=na>T</span> <span class=na>extends</span> <span class=na>HasNames</span><span class=p>&gt;(</span><span class=nx>arg</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=nx>T</span><span class=p>[</span><span class=s2>&#34;names&#34;</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=c1>//                       ^^^^^
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=nx>arg</span><span class=p>.</span><span class=nx>names</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Inferred type: readonly [&#34;Alice&#34;, &#34;Bob&#34;, &#34;Eve&#34;]
</span></span></span><span class=line><span class=cl><span class=c1>// Note: Didn&#39;t need to write &#39;as const&#39; here
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>names</span> <span class=o>=</span> <span class=nx>getNamesExactly</span><span class=p>({</span> <span class=nx>names</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>,</span> <span class=s2>&#34;Eve&#34;</span><span class=p>]</span> <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>è«‹æ³¨æ„ï¼Œconst ä¿®é£¾ç¬¦ä¸æ‹’çµ•å¯è®Šå€¼ï¼Œä¹Ÿä¸éœ€è¦ä¸å¯è®Šç´„æŸã€‚ä½¿ç”¨å¯è®Šé¡å‹ç´„æŸå¯èƒ½æœƒç”¢ç”Ÿä»¤äººé©šè¨çš„çµæœã€‚ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>declare</span> <span class=kd>function</span> <span class=nx>fnBad</span><span class=p>&lt;</span><span class=nt>const</span> <span class=na>T</span> <span class=na>extends</span> <span class=na>string</span><span class=err>[]</span><span class=p>&gt;(</span><span class=nx>args</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// &#39;T&#39; is still &#39;string[]&#39; since &#39;readonly [&#34;a&#34;, &#34;b&#34;, &#34;c&#34;]&#39; is not assignable to &#39;string[]&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fnBad</span><span class=p>([</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span> <span class=p>,</span><span class=s2>&#34;c&#34;</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨é€™è£¡ï¼Œæ¨æ–·çš„å€™é¸é … <code>T</code> æ˜¯ <code>readonly ["a", "b", "c"]</code>ï¼Œä¸¦ä¸” <code>readonly</code> ä¸èƒ½åœ¨éœ€è¦å¯è®Šæ•¸çµ„çš„åœ°æ–¹ä½¿ç”¨æ•¸çµ„ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæ¨ç†å›é€€åˆ°ç´„æŸæ¢ä»¶ï¼Œæ•¸çµ„è¢«è¦–ç‚º <code>string[]</code>ï¼Œä¸¦ä¸”èª¿ç”¨ä»ç„¶æˆåŠŸé€²è¡Œã€‚</p><p>æ­¤å‡½æ•¸çš„æ›´å¥½å®šç¾©æ‡‰è©²ä½¿ç”¨ <code>readonly string[]</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>declare</span> <span class=kd>function</span> <span class=nx>fnGood</span><span class=p>&lt;</span><span class=nt>const</span> <span class=na>T</span> <span class=na>extends</span> <span class=na>readonly</span> <span class=na>string</span><span class=err>[]</span><span class=p>&gt;(</span><span class=nx>args</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// T is readonly [&#34;a&#34;, &#34;b&#34;, &#34;c&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fnGood</span><span class=p>([</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span> <span class=p>,</span><span class=s2>&#34;c&#34;</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><p>åŒæ¨£ï¼Œè«‹è¨˜ä½ä¿®é£¾ç¬¦ <code>const</code> åƒ…å½±éŸ¿åœ¨èª¿ç”¨ä¸­ç·¨å¯«çš„å°è±¡ã€æ•¸çµ„å’ŒåŸå§‹è¡¨é”å¼çš„æ¨æ–·ï¼Œå› æ­¤ä¸æœƒï¼ˆæˆ–ä¸èƒ½ï¼‰ä¿®æ”¹çš„åƒæ•¸ä¸æœƒçœ‹åˆ° <code>as const</code> ä»»ä½•è¡Œç‚ºè®ŠåŒ–ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>declare</span> <span class=kd>function</span> <span class=nx>fnGood</span><span class=p>&lt;</span><span class=nt>const</span> <span class=na>T</span> <span class=na>extends</span> <span class=na>readonly</span> <span class=na>string</span><span class=err>[]</span><span class=p>&gt;(</span><span class=nx>args</span>: <span class=kt>T</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span> <span class=p>,</span><span class=s2>&#34;c&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// &#39;T&#39; is still &#39;string[]&#39;-- the &#39;const&#39; modifier has no effect here
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fnGood</span><span class=p>(</span><span class=nx>arr</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ‰é—œæ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹åƒé–±<a class=link href=https://github.com/microsoft/TypeScript/pull/51865 target=_blank rel=noopener>æ‹‰å–è«‹æ±‚</a>å’Œï¼ˆ<a class=link href=https://github.com/microsoft/TypeScript/issues/30680 target=_blank rel=noopener>ç¬¬ä¸€å€‹</a>å’Œ<a class=link href=https://github.com/microsoft/TypeScript/issues/41114 target=_blank rel=noopener>ç¬¬äºŒå€‹</a>ï¼‰æ¿€å‹µå•é¡Œã€‚</p><hr><h2 id=extends-æ”¯æŒå¤šå€‹é…ç½®æ–‡ä»¶>extends æ”¯æŒå¤šå€‹é…ç½®æ–‡ä»¶</h2><p>tsconfig.json ç®¡ç†å¤šå€‹é …ç›®æ™‚ï¼Œæ“æœ‰ä¸€å€‹å…¶ä»–æ–‡ä»¶å¯ä»¥æ“´å±•çš„"åŸºæœ¬"é…ç½®æ–‡ä»¶æœƒå¾ˆæœ‰å¹«åŠ©ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼ TypeScript æ”¯æŒ <code>extends</code> åœ¨ <code>compilerOptions</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// packages/front-end/src/tsconfig.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=s2>&#34;../../../tsconfig.base.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;outDir&#34;</span><span class=p>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å¾å¤šå€‹é…ç½®æ–‡ä»¶é€²è¡Œæ“´å±•ã€‚ä¾‹å¦‚ï¼šå‡è¨­ä½¿ç”¨ç™¼é€åˆ° npm çš„ TypeScript åŸºæœ¬é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ‚¨å¸Œæœ›æ‰€æœ‰é …ç›®ä¹Ÿä½¿ç”¨ npm åŒ…ä¸­çš„é¸é … <code>@tsconfig/strictest</code>ï¼Œé‚£éº¼æœ‰ä¸€å€‹ç°¡å–®çš„è§£æ±ºæ–¹æ¡ˆï¼šæ“´å±• <code>tsconfig.base.json</code> è‡ª <code>@tsconfig/strictest</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// tsconfig.base.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=s2>&#34;@tsconfig/strictest/tsconfig.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™åœ¨ä¸€å®šç¨‹åº¦ä¸Šèµ·ä½œç”¨ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é …ç›®ä¸æƒ³ä½¿ç”¨ <code>@tsconfig/strictest</code>ï¼Œä»–å€‘å¿…é ˆæ‰‹å‹•ç¦ç”¨é€™äº›é¸é …ï¼Œæˆ–è€…å‰µå»ºä¸€å€‹çŸ­åº¦çš„ <code>tsconfig.base.json</code> ç‰ˆæœ¬ï¼Œè©²ç‰ˆæœ¬ä¸æ“´å±• <code>@tsconfig/strictest</code>ã€‚</p><p>ç‚ºäº†åœ¨æ­¤è™•æä¾›æ›´å¤šéˆæ´»æ€§ï¼ŒTypescript 5.0 ç¾åœ¨å…è¨±è©² <code>extends</code> å­—æ®µæ¡ç”¨å¤šå€‹æ¢ç›®ã€‚ä¾‹å¦‚ï¼Œåœ¨é€™å€‹é…ç½®æ–‡ä»¶ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯«é€™å€‹æœ‰é»åƒ <code>c</code> ç›´æ¥æ“´å±•ï¼Œå…¶ä¸­ <code>c extends b</code> å’Œ <code>b extends a</code>ã€‚å¦‚æœä»»ä½•å­—æ®µ"è¡çª&rdquo;ï¼Œå‰‡å¾Œä¸€å€‹æ¢ç›®ç²å‹ã€‚</p><p>æ‰€ä»¥åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå’Œ <code>strictNullChecks</code> éƒ½ <code>noImplicitAny</code> åœ¨æœ€çµ‚çš„ <code>tsconfig.json</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// tsconfig1.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;strictNullChecks&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// tsconfig2.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;noImplicitAny&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// tsconfig.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;./tsconfig1.json&#34;</span><span class=p>,</span> <span class=s2>&#34;./tsconfig2.json&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;files&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;./index.ts&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å†èˆ‰ä¸€å€‹ä¾‹å­ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼é‡å¯«æˆ‘å€‘åŸä¾†çš„ä¾‹å­ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// packages/front-end/src/tsconfig.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;extends&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;@tsconfig/strictest/tsconfig.json&#34;</span><span class=p>,</span> <span class=s2>&#34;../../../tsconfig.base.json&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;outDir&#34;</span><span class=p>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ‰é—œæ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹é–±è®€<a class=link href=https://github.com/microsoft/TypeScript/pull/50403 target=_blank rel=noopener>æœ‰é—œåŸå§‹æ‹‰å–è«‹æ±‚</a>çš„æ›´å¤šä¿¡æ¯ã€‚</p><hr><h2 id=æ‰€æœ‰æšèˆ‰éƒ½æ˜¯è¯åˆæšèˆ‰>æ‰€æœ‰æšèˆ‰éƒ½æ˜¯è¯åˆæšèˆ‰</h2><p>ç•¶ TypeScript æœ€åˆå¼•å…¥æšèˆ‰æ™‚ï¼Œå®ƒå€‘åªä¸éæ˜¯ä¸€çµ„å…·æœ‰ç›¸åŒé¡å‹çš„æ•¸å­—å¸¸é‡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>E</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Foo</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>Bar</span> <span class=o>=</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><code>E.Foo</code> å’Œ <code>E.Bar</code> çš„å”¯ä¸€ç‰¹åˆ¥ä¹‹è™•åœ¨æ–¼å®ƒå€‘å¯ä»¥è³¦å€¼çµ¦é™¤ E é¡å‹ä¹‹å¤–çš„ä»»ä½•é¡å‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä»–å€‘å¹¾ä¹åªæ˜¯ <code>numbers</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>takeValue</span><span class=p>(</span><span class=nx>e</span>: <span class=kt>E</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>takeValue</span><span class=p>(</span><span class=nx>E</span><span class=p>.</span><span class=nx>Foo</span><span class=p>);</span> <span class=c1>// works
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>takeValue</span><span class=p>(</span><span class=mi>123</span><span class=p>);</span> <span class=c1>// error!
</span></span></span></code></pre></td></tr></table></div></div><p>ç›´åˆ° TypeScript 2.0 å¼•å…¥äº†æšèˆ‰æ–‡å­—é¡å‹ï¼Œæšèˆ‰æ‰è®Šå¾—æ›´åŠ ç‰¹æ®Šã€‚æšèˆ‰æ–‡å­—é¡å‹ç‚ºæ¯å€‹æšèˆ‰æˆå“¡æä¾›äº†è‡ªå·±çš„é¡å‹ï¼Œä¸¦å°‡æšèˆ‰æœ¬èº«è®Šæˆäº†æ¯å€‹æˆå“¡é¡å‹çš„è¯åˆã€‚å®ƒå€‘é‚„å…è¨±æˆ‘å€‘åƒ…å¼•ç”¨æšèˆ‰é¡å‹çš„ä¸€å€‹å­é›†ï¼Œä¸¦ç¸®å°é€™äº›é¡å‹çš„ç¯„åœã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Color is like a union of Red | Orange | Yellow | Green | Blue | Violet
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>enum</span> <span class=nx>Color</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Red</span><span class=p>,</span> <span class=nx>Orange</span><span class=p>,</span> <span class=nx>Yellow</span><span class=p>,</span> <span class=nx>Green</span><span class=p>,</span> <span class=nx>Blue</span><span class=p>,</span> <span class=cm>/* Indigo */</span><span class=p>,</span> <span class=nx>Violet</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Each enum member has its own type that we can refer to!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>type</span> <span class=nx>PrimaryColor</span> <span class=o>=</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Red</span> <span class=o>|</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Green</span> <span class=o>|</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Blue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>isPrimaryColor</span><span class=p>(</span><span class=nx>c</span>: <span class=kt>Color</span><span class=p>)</span><span class=o>:</span> <span class=nx>c</span> <span class=k>is</span> <span class=nx>PrimaryColor</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Narrowing literal types can catch bugs.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// TypeScript will error here because
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// we&#39;ll end up comparing &#39;Color.Red&#39; to &#39;Color.Green&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// We meant to use ||, but accidentally wrote &amp;&amp;.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=nx>c</span> <span class=o>===</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Red</span> <span class=o>&amp;&amp;</span> <span class=nx>c</span> <span class=o>===</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Green</span> <span class=o>&amp;&amp;</span> <span class=nx>c</span> <span class=o>===</span> <span class=nx>Color</span><span class=p>.</span><span class=nx>Blue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç‚ºæ¯å€‹æšèˆ‰æˆå“¡è³¦äºˆå…¶è‡ªå·±çš„é¡å‹çš„ä¸€å€‹å•é¡Œæ˜¯ï¼Œé€™äº›é¡å‹åœ¨æŸäº›éƒ¨åˆ†èˆ‡æˆå“¡çš„å¯¦éš›å€¼ç›¸é—œè¯ã€‚åœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œç„¡æ³•è¨ˆç®—è©²å€¼â€”â€”ä¾‹å¦‚ï¼Œæšèˆ‰æˆå“¡å¯ä»¥é€šéå‡½æ•¸èª¿ç”¨é€²è¡Œåˆå§‹åŒ–ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>E</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Blah</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¯ç•¶ TypeScript é‡åˆ°é€™äº›å•é¡Œæ™‚ï¼Œå®ƒéƒ½æœƒæ‚„æ‚„é€€å‡ºä¸¦ä½¿ç”¨èˆŠçš„æšèˆ‰ç­–ç•¥ã€‚é€™æ„å‘³è‘—æ”¾æ£„è¯åˆå’Œæ–‡å­—é¡å‹çš„æ‰€æœ‰å„ªå‹¢ã€‚</p><p>TypeScript 5.0 é€šéç‚ºæ¯å€‹è¨ˆç®—æˆå“¡å‰µå»ºå”¯ä¸€é¡å‹ï¼Œè¨­æ³•å°‡æ‰€æœ‰æšèˆ‰è®Šæˆè¯åˆæšèˆ‰ã€‚é€™æ„å‘³è‘—ç¾åœ¨å¯ä»¥ç¸®å°æ‰€æœ‰æšèˆ‰çš„ç¯„åœï¼Œä¸¦å°‡å…¶æˆå“¡ä¹Ÿä½œç‚ºé¡å‹å¼•ç”¨ã€‚</p><p>æœ‰é—œæ­¤æ›´æ”¹çš„æ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥<a class=link href=https://github.com/microsoft/TypeScript/pull/50528 target=_blank rel=noopener>é–±è®€GitHub ä¸Šçš„è©³ç´°ä¿¡æ¯</a>ã€‚</p><hr><h2 id=--moduleresolution-æ–°å¢-bundler-æ”¯æŒ><code>--moduleResolution</code> æ–°å¢ bundler æ”¯æŒ</h2><p>TypeScript 4.7 åœ¨ <code>--module</code> å’Œ <code>--moduleResolution</code> è¨­ç½®ä¸­å¼•å…¥äº† <code>node16</code> å’Œ <code>nodenext</code> é¸é …ã€‚é€™äº›é¸é …çš„ç›®çš„æ˜¯æ›´å¥½åœ°æ¨¡æ“¬ Node.js ä¸­ ECMAScript æ¨¡å¡Šçš„ç²¾ç¢ºæŸ¥æ‰¾è¦å‰‡ï¼›ç„¶è€Œé€™ç¨®æ¨¡å¼æœ‰å¾ˆå¤šé™åˆ¶ï¼Œå…¶ä»–å·¥å…·ä¸¦æ²’æœ‰çœŸæ­£å¼·åˆ¶åŸ·è¡Œã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ Node.js çš„ ECMAScript æ¨¡å¡Šä¸­ï¼Œä»»ä½•ç›¸å°å°å…¥éƒ½éœ€è¦åŒ…å«æ–‡ä»¶å‰¯æª”åã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// entry.mjs
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>utils</span> <span class=kr>from</span> <span class=s2>&#34;./utils&#34;</span><span class=p>;</span> <span class=c1>//  wrong - we need to include the file extension.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>utils</span> <span class=kr>from</span> <span class=s2>&#34;./utils.mjs&#34;</span><span class=p>;</span> <span class=c1>//  works
</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨ Node.js å’Œç€è¦½å™¨ä¸­é€™æ¨£åšæœ‰ä¸€å®šçš„åŸå› ï¼Œå®ƒä½¿æ–‡ä»¶æŸ¥æ‰¾æ›´å¿«ï¼Œä¸¦ä¸”æ›´é©åˆåŸå§‹æ–‡ä»¶æœå‹™å™¨ã€‚ä½†æ˜¯å°æ–¼è¨±å¤šä½¿ç”¨æ†ç¶å™¨ç­‰å·¥å…·çš„é–‹ç™¼äººå“¡ä¾†èªªï¼Œ<code>node16</code>/<code>nodenext</code> è¨­ç½®å¾ˆéº»ç…©ï¼Œå› ç‚ºæ†ç¶å™¨æ²’æœ‰é€™äº›é™åˆ¶ä¸­çš„å¤§éƒ¨åˆ†ã€‚åœ¨æŸäº›æ–¹é¢ï¼Œnode è§£ææ¨¡å¼å°ä»»ä½•ä½¿ç”¨æ†ç¶å™¨çš„äººä¾†èªªéƒ½æ›´å¥½ã€‚</p><p>ä½†åœ¨æŸäº›æ–¹é¢ï¼ŒåŸæœ‰çš„ node è§£æ±ºæ¨¡å¼å·²ç¶“è½ä¼äº†ã€‚å¤§å¤šæ•¸ç¾ä»£æ†ç¶å™¨åœ¨ Node.js ä¸­ä½¿ç”¨ ECMAScript æ¨¡å¡Šå’Œ CommonJS æŸ¥æ‰¾è¦å‰‡çš„èåˆã€‚ä¾‹å¦‚ï¼šç„¡æ“´å±•åçš„å°å…¥å°±åƒåœ¨ CommonJS ä¸­ä¸€æ¨£å·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨æŸ¥çœ‹åŒ…çš„ <code>export æ¢ä»¶</code>æ™‚ï¼Œä»–å€‘æœƒæ›´å–œæ­¡ ECMAScript æ–‡ä»¶ä¸­çš„ <code>import</code> æ¢ä»¶ã€‚</p><p>ç‚ºäº†æ¨¡æ“¬æ‰“åŒ…å™¨çš„å·¥ä½œæ–¹å¼ï¼ŒTypeScript ç¾åœ¨å¼•å…¥äº†ä¸€ç¨®æ–°ç­–ç•¥ï¼š<strong><code>--moduleResolution bundler</code></strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;esnext&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;moduleResolution&#34;</span><span class=p>:</span> <span class=s2>&#34;bundler&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨åƒ Viteã€esbuildã€swcã€Webpackã€Parcel å’Œå…¶ä»–å¯¦æ–½æ··åˆæŸ¥æ‰¾ç­–ç•¥çš„ç¾ä»£æ†ç¶å™¨ï¼Œé‚£éº¼æ–°é¸é … <code>bundler</code> æ‡‰è©²éå¸¸é©åˆæ‚¨ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç·¨å¯«ä¸€å€‹æ‰“ç®—åœ¨ npm ä¸Šç™¼å¸ƒçš„åº«ï¼Œå‰‡ä½¿ç”¨è©² <code>bundler</code> é¸é …å¯ä»¥éš±è—å…¼å®¹æ€§å•é¡Œï¼Œé€™äº›å•é¡Œå¯èƒ½æœƒå‡ºç¾åœ¨æ‚¨ä¸ä½¿ç”¨æ†ç¶å™¨çš„ç”¨æˆ¶èº«ä¸Šã€‚å› æ­¤ï¼Œåœ¨é€™äº›æƒ…æ³ä¸‹ï¼Œä½¿ç”¨ <code>node16</code> æˆ– <code>nodenext</code> è§£æ±ºæ–¹æ¡ˆå¯èƒ½æ˜¯æ›´å¥½çš„é€”å¾‘ã€‚</p><p>è¦äº†è§£æ›´å¤šä¿¡æ¯ <code>--moduleResolution bundler</code>ï¼Œè«‹æŸ¥çœ‹<a class=link href=https://github.com/microsoft/TypeScript/pull/51669 target=_blank rel=noopener>æ‹‰å–è«‹æ±‚</a>ã€‚</p><hr><h2 id=è‡ªå®šç¾©è§£ææ¨™èªŒ>è‡ªå®šç¾©è§£ææ¨™èªŒ</h2><p>JavaScript å·¥å…·ç¾åœ¨å¯ä»¥æ¨¡æ“¬"æ··åˆ"è§£æè¦å‰‡ï¼Œå°±åƒ <code>bundler</code> æˆ‘å€‘ä¸Šé¢æè¿°çš„æ¨¡å¼ä¸€æ¨£ã€‚ç”±æ–¼å·¥å…·çš„æ”¯æŒå¯èƒ½ç•¥æœ‰ä¸åŒï¼ŒTypeScript 5.0 æä¾›äº†å•Ÿç”¨æˆ–ç¦ç”¨ä¸€äº›åŠŸèƒ½çš„æ–¹æ³•ï¼Œé€™äº›åŠŸèƒ½å¯èƒ½é©ç”¨æ–¼æ‚¨çš„é…ç½®ï¼Œä¹Ÿå¯èƒ½ä¸é©ç”¨æ–¼æ‚¨çš„é…ç½®ã€‚</p><h3 id=allowimportingtsextensions>allowImportingTsExtensions</h3><p><code>--allowImportingTsExtensions</code> å…è¨±ä½¿ç”¨ç‰¹å®šæ–¼ TypeScript çš„æ“´å±•åï¼ˆå¦‚ <code>.ts</code>ã€<code>.mts</code>æˆ– <code>.tsx</code>ï¼‰ã€‚</p><p>æ­¤æ¨™èªŒåƒ…åœ¨ <code>--noEmit</code> æˆ– <code>--emitDeclarationOnly</code> å•Ÿç”¨æ™‚æ‰è¢«å…è¨±ï¼Œå› ç‚ºé€™äº›å°å…¥è·¯å¾‘åœ¨é‹è¡Œæ™‚ç„¡æ³•åœ¨ JavaScript è¼¸å‡ºæ–‡ä»¶ä¸­è§£æã€‚é€™è£¡çš„æœŸæœ›æ˜¯æ‚¨çš„è§£æå™¨ï¼ˆä¾‹å¦‚æ‚¨çš„æ†ç¶å™¨ã€é‹è¡Œæ™‚æˆ–å…¶ä»–ä¸€äº›å·¥å…·ï¼‰å°‡ä½¿é€™äº› <code>.ts</code> æ–‡ä»¶ä¹‹é–“çš„å°å…¥å·¥ä½œã€‚</p><h3 id=resolvepackagejsonexports>resolvePackageJsonExports</h3><p><code>--resolvePackageJsonExports</code> å¼·åˆ¶ TypeScript è§£æ package.json çš„ <code>exports</code> å­—æ®µï¼Œå¦‚æœæ›¾ç¶“å¾ node_modules ä¸­çš„è®€å–é json æ–‡ä»¶ã€‚</p><p>ç•¶é…ç½®é … <code>--modulerresolve</code> ç‚º <code>node16</code>ã€<code>nodenext</code> å’Œ <code>bundler</code> æ™‚ï¼Œè©²é¸é …é»˜èªç‚º <code>true</code>ã€‚</p><h3 id=resolvepackagejsonimports>resolvePackageJsonImports</h3><p><code>--resolvePackageJsonImports</code> å¼·åˆ¶ TypeScript åœ¨å¾å…¶ç¥–å…ˆç›®éŒ„åŒ…å« package.json çš„æ–‡ä»¶åŸ·è¡Œä»¥ <code>#</code> é–‹é ­çš„æŸ¥æ‰¾æ™‚æŸ¥è©¢ package.json æ–‡ä»¶çš„å°å…¥å­—æ®µã€‚</p><p>ç•¶é…ç½®é … <code>--modulerresolve</code> ç‚º <code>node16</code>ã€<code>nodenext</code> å’Œ <code>bundler</code> æ™‚ï¼Œè©²é¸é …é»˜èªç‚º <code>true</code>ã€‚</p><h3 id=allowarbitraryextensions>allowArbitraryExtensions</h3><p>åœ¨ TypeScript 5.0 ä¸­ï¼Œç•¶å°å…¥è·¯å¾‘ä¸æ˜¯å·²çŸ¥ JavaScript æˆ– TypeScript æ–‡ä»¶æ“´å±•åçš„æ“´å±•åçµå°¾æ™‚ï¼Œç·¨è­¯å™¨å°‡ä»¥ <code>{file basename}.d.{extension}.ts</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨æ†ç¶é …ç›®ä¸­ä½¿ç”¨ CSS åŠ è¼‰å™¨ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ç‚ºé€™äº›æ¨£å¼è¡¨ç·¨å¯«ï¼ˆæˆ–ç”Ÿæˆï¼‰è²æ˜æ–‡ä»¶ï¼š</p><h5 id=appcss>app.css</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>cookie-banner</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=appdcssts>app.d.css.ts</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>declare</span> <span class=kr>const</span> <span class=nx>css</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>cookieBanner</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>css</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=apptsx>App.tsx</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>styles</span> <span class=kr>from</span> <span class=s2>&#34;./app.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>styles</span><span class=p>.</span><span class=nx>cookieBanner</span><span class=p>;</span> <span class=c1>// string
</span></span></span></code></pre></td></tr></table></div></div><p>é»˜èªæƒ…æ³ä¸‹ï¼Œæ­¤å°å…¥æœƒå¼•ç™¼éŒ¯èª¤ï¼Œè®“æ‚¨çŸ¥é“ TypeScript ä¸ç†è§£æ­¤æ–‡ä»¶é¡å‹ï¼Œä¸¦ä¸”æ‚¨çš„é‹è¡Œæ™‚å¯èƒ½ä¸æ”¯æŒå°å…¥å®ƒã€‚ä½†æ˜¯å¦‚æœæ‚¨å·²é…ç½®é‹è¡Œæ™‚æˆ–æ†ç¶ç¨‹åºä¾†è™•ç†å®ƒï¼Œå‰‡å¯ä»¥ä½¿ç”¨æ–°çš„ <code>--allowArbitraryExtensions</code> ç·¨è­¯å™¨é¸é …ä¾†æŠ‘åˆ¶éŒ¯èª¤ã€‚</p><p>è«‹æ³¨æ„ï¼Œå¾æ­·å²ä¸Šçœ‹ï¼Œé€šéæ·»åŠ åç‚º <code>app.css.d.ts</code> çš„è²æ˜æ–‡ä»¶è€Œä¸æ˜¯ <code>app.d.css.ts</code>ï¼Œé€šå¸¸å¯ä»¥é”åˆ°é¡ä¼¼çš„æ•ˆæœâ€”â€”ç„¶è€Œï¼Œé€™åªæ˜¯é€šé Node å° CommonJS çš„ <code>require</code> è§£æè¦å‰‡èµ·ä½œç”¨ã€‚åš´æ ¼ä¾†èªªï¼Œå‰è€…è¢«è§£é‡‹ç‚ºä¸€å€‹åç‚º <code>app.css.js</code> çš„ JavaScript æ–‡ä»¶çš„è²æ˜æ–‡ä»¶ã€‚å› ç‚ºç›¸å°æ–‡ä»¶å°å…¥éœ€è¦åœ¨ Node çš„ ESM æ”¯æŒä¸­åŒ…å«æ“´å±•åï¼Œæ‰€ä»¥ TypeScript æœƒåœ¨æˆ‘å€‘çš„ç¤ºä¾‹ä¸­ <code>--moduleResolution</code> <code>node16</code> æˆ–åœ¨ <code>nodenext</code> ä¸‹çš„ESM æ–‡ä»¶ä¸­å‡ºéŒ¯ã€‚</p><p>æœ‰é—œæ›´å¤šä¿¡æ¯ï¼Œè«‹é–±è®€<a class=link href=https://github.com/microsoft/TypeScript/issues/50133 target=_blank rel=noopener>æ­¤åŠŸèƒ½çš„ææ¡ˆ</a>åŠå…¶ç›¸æ‡‰çš„<a class=link href=https://github.com/microsoft/TypeScript/pull/51435 target=_blank rel=noopener>æ‹‰å–è«‹æ±‚</a>ã€‚</p><h3 id=customconditions>customConditions</h3><p><code>--customConditions</code> æ¥æ”¶ä¸€å€‹é™„åŠ æ¢ä»¶åˆ—è¡¨ï¼Œç•¶ TypeScript å¾ package.json çš„ exports æˆ– imports å­—æ®µè§£ææ™‚ï¼Œé€™äº›æ¢ä»¶å°‡æ·»åŠ åˆ°è§£æå™¨é»˜èªä½¿ç”¨çš„ä»»ä½•ç¾æœ‰æ¢ä»¶ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼šç•¶åœ¨ tsconfig.json ä¸­è¨­ç½®æ­¤å­—æ®µæ™‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;compilerOptions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;target&#34;</span><span class=p>:</span> <span class=s2>&#34;es2022&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;moduleResolution&#34;</span><span class=p>:</span> <span class=s2>&#34;bundler&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;customConditions&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;my-condition&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä»»ä½•æ™‚å€™åœ¨ package.json ä¸­å¼•ç”¨ <code>exports</code> æˆ– <code>imports</code> å­—æ®µæ™‚ï¼ŒTypeScript éƒ½æœƒè€ƒæ…®èª¿ç”¨ <code>my-condition</code> çš„æ¢ä»¶ã€‚</p><p>å› æ­¤ï¼Œç•¶å¾å…·æœ‰ä»¥ä¸‹å…§å®¹çš„åŒ…ä¸­å°å…¥æ™‚ package.jsonï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nt>&#34;exports&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;.&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;my-condition&#34;</span><span class=p>:</span> <span class=s2>&#34;./foo.mjs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;node&#34;</span><span class=p>:</span> <span class=s2>&#34;./bar.mjs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;import&#34;</span><span class=p>:</span> <span class=s2>&#34;./baz.mjs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;require&#34;</span><span class=p>:</span> <span class=s2>&#34;./biz.mjs&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>TypeScript å°‡å˜—è©¦æŸ¥æ‰¾èˆ‡ <code>foo.mjs</code> å°æ‡‰çš„æ–‡ä»¶ã€‚</p><p>è©²å­—æ®µåƒ…åœ¨ <code>--moduleResolution</code> çš„ <code>node16</code>ã€<code>nodenext</code> å’Œ <code>bundler</code> é¸é …ä¸‹æœ‰æ•ˆã€‚</p><hr><h2 id=--verbatimmodulesyntax><code>--verbatimModuleSyntax</code></h2><p>é»˜èªæƒ…æ³ä¸‹ï¼ŒTypeScript æœƒåšä¸€äº›å«åš import elision çš„äº‹æƒ…ã€‚åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ å¯«é¡ä¼¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Car</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./car&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>drive</span><span class=p>(</span><span class=nx>car</span>: <span class=kt>Car</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>TypeScript æª¢æ¸¬åˆ°æ‚¨åªå°é¡å‹ä½¿ç”¨å°å…¥ï¼Œæ‰€ä»¥è¼¸å‡ºçµæœæœƒå°‡æ­¤å°å…¥ä»£ç¢¼åˆªé™¤ã€‚æ‚¨çš„è¼¸å‡º JavaScript å¯èƒ½çœ‹èµ·ä¾†åƒé€™æ¨£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>drive</span><span class=p>(</span><span class=nx>car</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¤§å¤šæ•¸æ™‚å€™é€™å¾ˆå¥½ï¼Œå› ç‚ºå¦‚æœ <code>Car</code> ä¸æ˜¯å¾ <code>./car</code> å°å‡ºçš„å€¼ï¼Œæˆ‘å€‘å°‡æ”¶åˆ°é‹è¡Œæ™‚éŒ¯èª¤ã€‚</p><p>ä½†å®ƒç¢ºå¯¦ç‚ºæŸäº›é‚Šç·£æƒ…æ³å¢åŠ äº†ä¸€å±¤è¤‡é›œæ€§ã€‚ä¾‹å¦‚ï¼šè«‹æ³¨æ„æ²’æœ‰åƒé€™æ¨£çš„èªå¥ <code>import "./car";</code>ï¼Œå°å…¥è¢«å®Œå…¨åˆªé™¤ã€‚é€™å¯¦éš›ä¸Šå°æœ‰ç„¡å‰¯ä½œç”¨çš„æ¨¡å¡Šç”¢ç”Ÿå½±éŸ¿ã€‚</p><p>TypeScript é‡å° JavaScript çš„ emit ç­–ç•¥é‚„æœ‰å¦å¤–å¹¾å±¤è¤‡é›œæ€§ï¼Œå°å…¥çœç•¥ä¸¦ä¸ç¸½æ˜¯ç”±å°å…¥çš„ä½¿ç”¨æ–¹å¼é©…å‹•ï¼Œå®ƒé€šå¸¸é‚„æœƒåƒè€ƒå€¼çš„è²æ˜æ–¹å¼ã€‚æ‰€ä»¥ä¸¦ä¸ç¸½æ˜¯å¾ˆæ¸…æ¥šæ˜¯å¦åƒä¸‹é¢é€™æ¨£çš„ä»£ç¢¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=p>{</span> <span class=nx>Car</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./car&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‡‰è©²ä¿ç•™æˆ–ä¸Ÿæ£„ã€‚å¦‚æœ <code>Car</code> ç”¨ <code>class</code> ä¹‹é¡çš„æ±è¥¿è²æ˜ï¼Œé‚£éº¼å®ƒå¯ä»¥ä¿å­˜åœ¨ç”Ÿæˆçš„ JavaScript æ–‡ä»¶ä¸­ã€‚ä½†å¦‚æœ <code>Car</code> åƒ…è²æ˜ç‚º <code>type</code> åˆ¥åæˆ– <code>interface</code>ï¼Œå‰‡ JavaScript æ–‡ä»¶ <code>Car</code> æ ¹æœ¬ä¸æ‡‰å°å‡ºã€‚</p><p>é›–ç„¶ TypeScript å¯èƒ½èƒ½å¤ æ ¹æ“šä¾†è‡ªè·¨æ–‡ä»¶çš„ä¿¡æ¯åšå‡ºé€™äº›ç™¼å‡ºæ±ºå®šï¼Œä½†ä¸¦éæ¯å€‹ç·¨è­¯å™¨éƒ½å¯ä»¥ã€‚</p><p>imports å’Œ exports çš„ä¿®é£¾ç¬¦ type å°é€™äº›æƒ…æ³æœ‰é»å¹«åŠ©ã€‚æˆ‘å€‘å¯ä»¥æ˜ç¢ºæŒ‡å‡ºå°å…¥æˆ–å°å‡ºæ˜¯å¦åƒ…ç”¨æ–¼é¡å‹åˆ†æï¼Œä¸¦ä¸”å¯ä»¥é€šéä½¿ç”¨ä¿®é£¾ç¬¦å°‡å…¶å®Œå…¨åˆªé™¤åˆ° JavaScript æ–‡ä»¶ä¸­ <code>type</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// This statement can be dropped entirely in JS output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=kr>type</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>car</span> <span class=kr>from</span> <span class=s2>&#34;./car&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// The named import/export &#39;Car&#39; can be dropped in JS output
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=kr>type</span> <span class=nx>Car</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./car&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=p>{</span> <span class=kr>type</span> <span class=nx>Car</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./car&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><code>type</code> ä¿®é£¾ç¬¦æœ¬èº«ä¸¦ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œé»˜èªæƒ…æ³ä¸‹ï¼Œæ¨¡å¡Šçœç•¥ä»ç„¶æœƒåˆªé™¤å°å…¥ï¼Œä¸¦ä¸”æ²’æœ‰ä»€éº¼å¼·åˆ¶æ‚¨å€åˆ† type æ™®é€šå°å…¥å’Œå°å‡ºã€‚æ‰€ä»¥ TypeScript æœ‰æ¨™èªŒ <code>--importsNotUsedAsValues</code> ä¾†ç¢ºä¿ä½ ä½¿ç”¨ <code>type</code> ä¿®é£¾ç¬¦ï¼Œ<code>--preserveValueImports</code> ä»¥é˜²æ­¢æŸäº›æ¨¡å¡Šçœç•¥è¡Œç‚ºï¼Œä¸¦ <code>--isolatedModules</code> ç¢ºä¿ä½ çš„ TypeScript ä»£ç¢¼é©ç”¨æ–¼ä¸åŒçš„ç·¨è­¯å™¨ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¾ˆé›£ç†è§£é€™ 3 å€‹æ¨™èªŒçš„ç´°ç¯€ï¼Œä¸¦ä¸”ä»ç„¶å­˜åœ¨ä¸€äº›å…·æœ‰æ„å¤–è¡Œç‚ºçš„é‚Šç·£æƒ…æ³ã€‚</p><p><code>--verbatimModuleSyntax</code> TypeScript 5.0 å¼•å…¥äº†ä¸€å€‹åç‚ºç°¡åŒ–æƒ…æ³çš„æ–°é¸é …ã€‚è¦å‰‡è¦ç°¡å–®å¾—å¤šï¼šä»»ä½•æ²’æœ‰ <code>type</code> ä¿®é£¾ç¬¦çš„å°å…¥æˆ–å°å‡ºéƒ½æœƒè¢«ä¿ç•™ã€‚ä»»ä½•ä½¿ç”¨ <code>type</code> ä¿®é£¾ç¬¦çš„æ±è¥¿éƒ½æœƒè¢«å®Œå…¨ä¸Ÿæ£„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Erased away entirely.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>A</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;a&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Rewritten to &#39;import { b } from &#34;bcd&#34;;&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>b</span><span class=p>,</span> <span class=kr>type</span> <span class=nx>c</span><span class=p>,</span> <span class=kr>type</span> <span class=nx>d</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;bcd&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Rewritten to &#39;import {} from &#34;xyz&#34;;&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=kr>type</span> <span class=nx>xyz</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;xyz&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ‰äº†é€™å€‹æ–°é¸é …ï¼Œæ‰€è¦‹å³æ‰€å¾—ã€‚</p><p>ä¸éç•¶æ¶‰åŠåˆ°æ¨¡å¡Šäº’æ“ä½œæ™‚ï¼Œé€™ç¢ºå¯¦æœ‰ä¸€äº›å½±éŸ¿ã€‚åœ¨æ­¤æ¨™èªŒä¸‹ï¼Œç•¶æ‚¨çš„è¨­ç½®æˆ–æ–‡ä»¶æ“´å±•åæš—ç¤ºä¸åŒçš„æ¨¡å¡Šç³»çµ±æ™‚ï¼ŒECMAScript <code>imports</code> å’Œ <code>exports</code> ä¸æœƒè¢«é‡å¯«ç‚º <code>require</code> èª¿ç”¨ã€‚ç›¸åï¼Œä½ æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ã€‚å¦‚æœæ‚¨éœ€è¦ç™¼å‡ºä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code> çš„ä»£ç¢¼ï¼Œå‰‡å¿…é ˆä½¿ç”¨æ—©æ–¼ ES2015 çš„ TypeScript æ¨¡å¡Šèªæ³•ï¼š</p><div class=table-wrapper><table><thead><tr><th>è¼¸å…¥ TypeScript</th><th>è¼¸å‡º JavaScript</th></tr></thead><tbody><tr><td>import foo = require(&ldquo;foo&rdquo;);</td><td>const foo = require(&ldquo;foo&rdquo;);</td></tr><tr><td>function foo() {}<br>function bar() {}<br>function baz() {}<br>export = { foo, bar, baz };</td><td>function foo() {}<br>function bar() {}<br>function baz() {}<br>module.exports = { foo, bar, baz };</td></tr></tbody></table></div><p>é›–ç„¶é€™æ˜¯ä¸€å€‹é™åˆ¶ï¼Œä½†å®ƒç¢ºå¯¦æœ‰åŠ©æ–¼ä½¿ä¸€äº›å•é¡Œæ›´åŠ æ˜é¡¯ã€‚ä¾‹å¦‚ï¼Œå¿˜è¨˜åœ¨ <a class=link href=https://nodejs.org/api/packages.html#type target=_blank rel=noopener>package.json ä¸­è¨­ç½® type å­—æ®µ</a>æ˜¯å¾ˆå¸¸è¦‹çš„ã€‚<code>--module node16</code>ã€‚å› æ­¤ï¼Œé–‹ç™¼äººå“¡æœƒåœ¨æ²’æœ‰æ„è­˜åˆ°çš„æƒ…æ³ä¸‹é–‹å§‹ç·¨å¯« CommonJS æ¨¡å¡Šè€Œä¸æ˜¯ ES æ¨¡å¡Šï¼Œå¾è€Œæä¾›ä»¤äººé©šè¨çš„æŸ¥æ‰¾è¦å‰‡å’Œ JavaScript è¼¸å‡ºã€‚é€™å€‹æ–°æ¨™èªŒç¢ºä¿æ‚¨æœ‰æ„ä½¿ç”¨æ‚¨æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶é¡å‹ï¼Œå› ç‚ºèªæ³•æ˜¯æœ‰æ„ä¸åŒçš„ã€‚</p><p>å› ç‚º <code>--verbatimModuleSyntax</code> æä¾›äº†æ¯” <code>--importsNotUsedAsValues</code> å’Œ <code>--preserveValueImports</code> æ›´ä¸€è‡´çš„æ•…äº‹ï¼Œæ‰€ä»¥é€™å…©å€‹ç¾æœ‰çš„æ¨™èªŒå·²è¢«æ£„ç”¨ã€‚</p><p>æœ‰é—œæ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹é–±è®€åŸå§‹<a class=link href=https://github.com/microsoft/TypeScript/pull/52203 target=_blank rel=noopener>æ‹‰å–è«‹æ±‚</a>åŠå…¶<a class=link href=https://github.com/microsoft/TypeScript/issues/51479 target=_blank rel=noopener>ææ¡ˆå•é¡Œ</a>ã€‚</p><hr><h2 id=æ”¯æŒ-export-type->æ”¯æŒ <code>export type *</code></h2><p>ç•¶ TypeScript 3.8 å¼•å…¥ç´”é¡å‹å°å…¥æ™‚ï¼Œæ–°èªæ³•ä¸å…è¨±ç”¨æ–¼ <code>export * from "module"</code> æˆ– <code>export * as ns from "module"</code> é‡æ–°å°å‡ºã€‚TypeScript 5.0 æ·»åŠ äº†å°é€™å…©ç¨®å½¢å¼çš„æ”¯æŒï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// models/vehicles.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>class</span> <span class=nx>Spaceship</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// models/index.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>type</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>vehicles</span> <span class=kr>from</span> <span class=s2>&#34;./vehicles&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// main.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>vehicles</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./models&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>takeASpaceship</span><span class=p>(</span><span class=nx>s</span>: <span class=kt>vehicles.Spaceship</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=c1>// ok - `vehicles` only used in a type position
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>makeASpaceship() {</span>
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=k>new</span> <span class=nx>vehicles</span><span class=p>.</span><span class=nx>Spaceship</span><span class=p>();</span>
</span></span><span class=line><span class=cl> <span class=c1>//         ^^^^^^^^
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>// &#39;vehicles&#39; cannot be used as a value because it was exported using &#39;export type&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‚¨å¯ä»¥åœ¨<a class=link href=https://github.com/microsoft/TypeScript/pull/52217 target=_blank rel=noopener>æ­¤è™•</a>é–±è®€æœ‰é—œå¯¦æ–½çš„æ›´å¤šä¿¡æ¯ã€‚</p><hr><h2 id=jsdoc-æ”¯æŒ-satisfies>JSDoc æ”¯æŒ <code>@satisfies</code></h2><p>TypeScript 4.9 å¼•å…¥äº† <code>satisfies</code> é‹ç®—ç¬¦ã€‚å®ƒç¢ºä¿è¡¨é”å¼çš„é¡å‹å…¼å®¹ï¼Œè€Œä¸å½±éŸ¿é¡å‹æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œè®“æˆ‘å€‘çœ‹ä¸‹é¢çš„ä»£ç¢¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>CompilerOptions</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>strict?</span>: <span class=kt>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>outDir?</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>ConfigSettings</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>compilerOptions?</span>: <span class=kt>CompilerOptions</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>?:</span> <span class=kt>string</span> <span class=o>|</span> <span class=kt>string</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myConfigSettings</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>compilerOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>strict</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>outDir</span><span class=o>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@tsconfig/strictest/tsconfig.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;../../../tsconfig.base.json&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=nx>satisfies</span> <span class=nx>ConfigSettings</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨é€™è£¡ï¼ŒTypeScript çŸ¥é“å®ƒ <code>myConfigSettings.extends</code> æ˜¯ç”¨æ•¸çµ„è²æ˜çš„ï¼Œå› ç‚ºåœ¨ satisfies é©—è­‰æˆ‘å€‘å°è±¡çš„é¡å‹æ™‚ï¼Œå®ƒä¸¦æ²’æœ‰ç›´æ¥å°‡å…¶æ›´æ”¹ç‚º <code>ConfigSettings</code> ä¸¦ä¸Ÿå¤±ä¿¡æ¯ã€‚æ‰€ä»¥å¦‚æœæˆ‘å€‘æƒ³æ˜ å°„éä¾† <code>extends</code>ï¼Œé‚£å¾ˆå¥½ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>declare</span> <span class=kd>function</span> <span class=nx>resolveConfig</span><span class=p>(</span><span class=nx>configPath</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>CompilerOptions</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>inheritedConfigs</span> <span class=o>=</span> <span class=nx>myConfigSettings</span><span class=p>.</span><span class=kr>extends</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>resolveConfig</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>é€™å° TypeScript ç”¨æˆ¶å¾ˆæœ‰å¹«åŠ©ï¼Œä½†æ˜¯å¾ˆå¤šäººä½¿ç”¨ TypeScript ä¾†ä½¿ç”¨ JSDoc è¨»é‡‹å°ä»–å€‘çš„ JavaScript ä»£ç¢¼é€²è¡Œé¡å‹æª¢æŸ¥ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼ TypeScript 5.0 æ”¯æŒä¸€å€‹åç‚º JSDoc çš„æ–°æ¨™ç±¤ï¼Œ<code>@satisfies</code> å®ƒåšçš„äº‹æƒ…å®Œå…¨ä¸€æ¨£ã€‚</p><p><code>/** @satisfies */</code> å¯ä»¥æ•ç²é¡å‹ä¸åŒ¹é…ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// @ts-check
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @typedef CompilerOptions
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {boolean} [strict]
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {string} [outDir]
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @satisfies {CompilerOptions}
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myCompilerOptions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>outdir</span><span class=o>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ~~~~~~ oops! we meant outDir
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½†å®ƒæœƒä¿ç•™æˆ‘å€‘è¡¨é”å¼çš„åŸå§‹é¡å‹ï¼Œå…è¨±æˆ‘å€‘ç¨å¾Œåœ¨ä»£ç¢¼ä¸­æ›´ç²¾ç¢ºåœ°ä½¿ç”¨æˆ‘å€‘çš„å€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// @ts-check
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @typedef CompilerOptions
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {boolean} [strict]
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {string} [outDir]
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @typedef ConfigSettings
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {CompilerOptions} [compilerOptions]
</span></span></span><span class=line><span class=cl><span class=cm> * @prop {string | string[]} [extends]
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @satisfies {ConfigSettings}
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myConfigSettings</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>compilerOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>strict</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>outDir</span><span class=o>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@tsconfig/strictest/tsconfig.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;../../../tsconfig.base.json&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>inheritedConfigs</span> <span class=o>=</span> <span class=nx>myConfigSettings</span><span class=p>.</span><span class=kr>extends</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>resolveConfig</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><code>/** @satisfies */</code> ä¹Ÿå¯ä»¥åœ¨ä»»ä½•å¸¶æ‹¬è™Ÿçš„è¡¨é”å¼ä¸Šå…§è¯ä½¿ç”¨ã€‚æˆ‘å€‘å¯ä»¥ <code>myConfigSettings</code> é€™æ¨£å¯«ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>myConfigSettings</span> <span class=o>=</span> <span class=cm>/** @satisfies {ConfigSettings} */</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>compilerOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>strict</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>outDir</span><span class=o>:</span> <span class=s2>&#34;../lib&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kr>extends</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@tsconfig/strictest/tsconfig.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;../../../tsconfig.base.json&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>ç‚ºä»€éº¼ï¼Ÿç•¶æ‚¨æ›´æ·±å…¥åœ°äº†è§£å…¶ä»–ä¸€äº›ä»£ç¢¼ï¼ˆä¾‹å¦‚å‡½æ•¸èª¿ç”¨ï¼‰æ™‚ï¼Œå®ƒé€šå¸¸æ›´æœ‰æ„ç¾©ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=nx>compileCode</span><span class=p>(</span><span class=cm>/** @satisfies {ConfigSettings} */</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}));</span>
</span></span></code></pre></td></tr></table></div></div><p><a class=link href=https://github.com/a-tarasyuk target=_blank rel=noopener>æ­¤åŠŸèƒ½</a>ç”± Oleksandr Tarasiukæä¾›ï¼</p><hr><h2 id=jsdoc-æ”¯æŒ-overload>JSDoc æ”¯æŒ <code>@overload</code></h2><p>åœ¨ TypeScript ä¸­ï¼Œæ‚¨å¯ä»¥ç‚ºå‡½æ•¸æŒ‡å®šé‡è¼‰ã€‚é‡è¼‰ç‚ºæˆ‘å€‘æä¾›äº†ä¸€ç¨®æ–¹å¼ï¼Œå¯ä»¥ç”¨ä¸åŒçš„åƒæ•¸èª¿ç”¨ä¸€å€‹å‡½æ•¸ï¼Œä¸¦å¯èƒ½è¿”å›ä¸åŒçš„çµæœã€‚ä»–å€‘å¯ä»¥é™åˆ¶èª¿ç”¨è€…å¯¦éš›ä½¿ç”¨æˆ‘å€‘å‡½æ•¸çš„æ–¹å¼ï¼Œä¸¦å„ªåŒ–ä»–å€‘å°‡è¿”å›çš„çµæœã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Our overloads:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>printValue</span><span class=p>(</span><span class=nx>str</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>printValue</span><span class=p>(</span><span class=nx>num</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>maxFractionDigits?</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Our implementation:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>printValue</span><span class=p>(</span><span class=nx>value</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>number</span><span class=p>,</span> <span class=nx>maximumFractionDigits?</span>: <span class=kt>number</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>value</span> <span class=o>===</span> <span class=s2>&#34;number&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>formatter</span> <span class=o>=</span> <span class=nx>Intl</span><span class=p>.</span><span class=nx>NumberFormat</span><span class=p>(</span><span class=s2>&#34;en-US&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>maximumFractionDigits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span> <span class=o>=</span> <span class=nx>formatter</span><span class=p>.</span><span class=nx>format</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨é€™è£¡ï¼Œæˆ‘å€‘èªªé <code>printValue</code> å°‡ string æˆ– number ä½œç‚ºå…¶ç¬¬ä¸€å€‹åƒæ•¸ã€‚å¦‚æœå®ƒéœ€è¦ä¸€å€‹ numberï¼Œå®ƒå¯ä»¥ä½¿ç”¨ç¬¬äºŒå€‹åƒæ•¸ä¾†ç¢ºå®šæˆ‘å€‘å¯ä»¥æ‰“å°å¤šå°‘å€‹å°æ•¸ä½ã€‚</p><p>TypeScript 5.0 ç¾åœ¨å…è¨± JSDoc ä½¿ç”¨æ–°æ¨™ç±¤è²æ˜é‡è¼‰ <code>@overload</code>ã€‚æ¯å€‹å¸¶æœ‰æ¨™è¨˜çš„ JSDoc è¨»é‡‹éƒ½ <code>@overload</code> è¢«è¦–ç‚ºä»¥ä¸‹å‡½æ•¸è²æ˜çš„ä¸åŒé‡è¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// @ts-check
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @overload
</span></span></span><span class=line><span class=cl><span class=cm> * @param {string} value
</span></span></span><span class=line><span class=cl><span class=cm> * @return {void}
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @overload
</span></span></span><span class=line><span class=cl><span class=cm> * @param {number} value
</span></span></span><span class=line><span class=cl><span class=cm> * @param {number} [maximumFractionDigits]
</span></span></span><span class=line><span class=cl><span class=cm> * @return {void}
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @param {string | number} value
</span></span></span><span class=line><span class=cl><span class=cm> * @param {number} [maximumFractionDigits]
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>printValue</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>maximumFractionDigits</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>value</span> <span class=o>===</span> <span class=s2>&#34;number&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>formatter</span> <span class=o>=</span> <span class=nx>Intl</span><span class=p>.</span><span class=nx>NumberFormat</span><span class=p>(</span><span class=s2>&#34;en-US&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>maximumFractionDigits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span> <span class=o>=</span> <span class=nx>formatter</span><span class=p>.</span><span class=nx>format</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç¾åœ¨ï¼Œç„¡è«–æˆ‘å€‘æ˜¯åœ¨ TypeScript é‚„æ˜¯ JavaScript æ–‡ä»¶ä¸­ç·¨å¯«ï¼ŒTypeScript éƒ½å¯ä»¥è®“æˆ‘å€‘çŸ¥é“æˆ‘å€‘æ˜¯å¦éŒ¯èª¤åœ°èª¿ç”¨äº†æˆ‘å€‘çš„å‡½æ•¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// all allowed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>printValue</span><span class=p>(</span><span class=s2>&#34;hello!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>printValue</span><span class=p>(</span><span class=mf>123.45</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>printValue</span><span class=p>(</span><span class=mf>123.45</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>printValue</span><span class=p>(</span><span class=s2>&#34;hello!&#34;</span><span class=p>,</span> <span class=mi>123</span><span class=p>);</span> <span class=c1>// error!
</span></span></span></code></pre></td></tr></table></div></div><p>é€™å€‹æ–°æ¨™ç±¤çš„<a class=link href=https://github.com/microsoft/TypeScript/pull/51234 target=_blank rel=noopener>å¯¦ç¾</a>è¦æ­¸åŠŸæ–¼ <a class=link href=https://github.com/apendua target=_blank rel=noopener>Tomasz Lenarcik</a>ã€‚</p><hr><h2 id=åœ¨tsc---build-æ™‚å¯ä»¥å‚³å…¥çš„æ–°æŒ‡ä»¤>åœ¨tsc <code>--build</code> æ™‚å¯ä»¥å‚³å…¥çš„æ–°æŒ‡ä»¤</h2><p>TypeScript ç¾åœ¨å…è¨±åœ¨ <code>--build</code> æ¨¡å¼ä¸‹å‚³éä»¥ä¸‹æŒ‡ä»¤ï¼š</p><ul><li><code>--declaration</code></li><li><code>--emitDeclarationOnly</code></li><li><code>--declarationMap</code></li><li><code>--sourceMap</code></li><li><code>--inlineSourceMap</code></li></ul><p>é€™ä½¿å¾—è‡ªå®šç¾©æ§‹å»ºçš„æŸäº›éƒ¨åˆ†è®Šå¾—æ›´åŠ å®¹æ˜“ï¼Œæ‚¨å¯èƒ½æœ‰ä¸åŒçš„é–‹ç™¼å’Œç”Ÿç”¢æ§‹å»ºã€‚</p><p>ä¾‹å¦‚ï¼Œåº«çš„é–‹ç™¼æ§‹å»ºå¯èƒ½ä¸éœ€è¦ç”Ÿæˆè²æ˜æ–‡ä»¶ï¼Œä½†ç”Ÿç”¢æ§‹å»ºéœ€è¦ã€‚é …ç›®å¯ä»¥å°‡è²æ˜ç™¼å°„é…ç½®ç‚ºé»˜èªé—œé–‰ï¼Œåªéœ€ä½¿ç”¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tsc --build -p ./my-project-dir
</span></span></code></pre></td></tr></table></div></div><p>ä¸€æ—¦åœ¨å…§å¾ªç’°ä¸­å®Œæˆè¿­ä»£ï¼Œ&ldquo;ç”Ÿç”¢"æ§‹å»ºå°±å¯ä»¥å‚³éæŒ‡ä»¤ <code>--declaration</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tsc --build -p ./my-project-dir --declaration
</span></span></code></pre></td></tr></table></div></div><p>æœ‰é—œæ­¤æ›´æ”¹çš„æ›´å¤šä¿¡æ¯ï¼Œè«‹åƒè¦‹<a class=link href=https://github.com/microsoft/TypeScript/pull/51241 target=_blank rel=noopener>æ­¤è™•</a>ã€‚</p><hr><h2 id=ç·¨è¼¯å™¨ä¸­ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº>ç·¨è¼¯å™¨ä¸­ä¸å€åˆ†å¤§å°å¯«çš„å°å…¥æ’åº</h2><p>åœ¨ Visual Studio å’Œ VS Code ç­‰ç·¨è¼¯å™¨ä¸­ï¼ŒTypeScript æ”¯æŒçµ„ç¹”å’Œæ’åºå°å…¥å’Œå°å‡ºçš„é«”é©—ã€‚ä½†æ˜¯ï¼Œå°æ–¼åˆ—è¡¨ä½•æ™‚"æ’åº&rdquo;ï¼Œé€šå¸¸æœƒæœ‰ä¸åŒçš„è§£é‡‹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„å°å…¥åˆ—è¡¨æ˜¯å¦æ’åºï¼Ÿ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Toggle</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>freeze</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>toBoolean</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./utils&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç­”æ¡ˆå¯èƒ½ä»¤äººé©šè¨åœ°æ˜¯"è¦–æƒ…æ³è€Œå®š"ã€‚å¦‚æœæˆ‘å€‘ä¸é—œå¿ƒå€åˆ†å¤§å°å¯«ï¼Œé‚£éº¼é€™å€‹åˆ—è¡¨é¡¯ç„¶æ²’æœ‰æ’åºã€‚é€™å°ä¿¡ <code>f</code> å‡ºç¾åœ¨ <code>t</code> å’Œä¹‹å‰ <code>T</code>ã€‚</p><p>ä½†åœ¨å¤§å¤šæ•¸ç·¨ç¨‹èªè¨€ä¸­ï¼Œæ’åºé»˜èªæ˜¯æ¯”è¼ƒå­—ç¬¦ä¸²çš„å­—ç¯€å€¼ã€‚JavaScript æ¯”è¼ƒå­—ç¬¦ä¸²çš„æ–¹å¼æ„å‘³è‘— <code>"Toggle"</code> ç¸½æ˜¯åœ¨å‰é¢ <code>"freeze"</code>ï¼Œå› ç‚ºæ ¹æ“š ASCII å­—ç¬¦ç·¨ç¢¼ï¼Œå¤§å¯«å­—æ¯åœ¨å°å¯«å­—æ¯ä¹‹å‰ã€‚æ‰€ä»¥å¾é€™å€‹è§’åº¦ä¾†çœ‹ï¼Œå°å…¥åˆ—è¡¨æ˜¯æ’åºçš„ã€‚</p><p>TypeScript ä¹‹å‰è€ƒæ…®å°å°å…¥åˆ—è¡¨é€²è¡Œæ’åºï¼Œå› ç‚ºå®ƒæ­£åœ¨é€²è¡ŒåŸºæœ¬çš„å€åˆ†å¤§å°å¯«çš„æ’åºã€‚å°æ–¼å–œæ­¡ä¸å€åˆ†å¤§å°å¯«æ’åºçš„é–‹ç™¼äººå“¡ï¼Œæˆ–è€…ä½¿ç”¨åƒ ESLint é€™æ¨£é»˜èªéœ€è¦ä¸å€åˆ†å¤§å°å¯«æ’åºçš„å·¥å…·çš„é–‹ç™¼äººå“¡ä¾†èªªï¼Œé€™å¯èƒ½æ˜¯ä¸€å€‹ä»¤äººæ²®å–ªçš„åœ°æ–¹ã€‚</p><p>TypeScript ç¾åœ¨é»˜èªæª¢æ¸¬å€åˆ†å¤§å°å¯«ã€‚é€™æ„å‘³è‘— TypeScript å’Œ ESLint ç­‰å·¥å…·é€šå¸¸ä¸æœƒå°±å¦‚ä½•æœ€å¥½åœ°å°å°å…¥é€²è¡Œæ’åºè€Œç›¸äº’"çˆ­åµ"ã€‚</p><p>æˆ‘å€‘çš„åœ˜éšŠä¹Ÿä¸€ç›´åœ¨è©¦é©—<a class=link href=https://github.com/microsoft/TypeScript/pull/52115 target=_blank rel=noopener>é€²ä¸€æ­¥çš„æ’åºç­–ç•¥ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤è™•é–±è®€æœ‰é—œå…§å®¹</a>ã€‚é€™äº›é¸é …æœ€çµ‚å¯èƒ½ç”±ç·¨è¼¯å™¨é…ç½®ã€‚ç›®å‰ï¼Œå®ƒå€‘ä»ç„¶ä¸ç©©å®šä¸”è™•æ–¼è©¦é©—éšæ®µï¼Œæ‚¨ç¾åœ¨å¯ä»¥é€šéä½¿ç”¨ <code>typescript.unstableJSON</code> é¸é …ä¸­çš„æ¢ç›®åœ¨VS Code ä¸­é¸æ“‡åŠ å…¥å®ƒå€‘ã€‚ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥å˜—è©¦çš„æ‰€æœ‰é¸é …ï¼ˆè¨­ç½®ç‚ºé»˜èªå€¼ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;typescript.unstable&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Should sorting be case-sensitive? Can be:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - true
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - false
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;auto&#34; (auto-detect)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsIgnoreCase&#34;</span><span class=o>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Should sorting be &#34;ordinal&#34; and use code points or consider Unicode rules? Can be:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;ordinal&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;unicode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsCollation&#34;</span><span class=o>:</span> <span class=s2>&#34;ordinal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Under `&#34;organizeImportsCollation&#34;: &#34;unicode&#34;`,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// what is the current locale? Can be:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - [any other locale code]
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;auto&#34; (use the editor&#39;s locale)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsLocale&#34;</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Under `&#34;organizeImportsCollation&#34;: &#34;unicode&#34;`,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// should upper-case letters or lower-case letters come first? Can be:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - false (locale-specific)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;upper&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - &#34;lower&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsCaseFirst&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Under `&#34;organizeImportsCollation&#34;: &#34;unicode&#34;`,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// do runs of numbers get compared numerically (i.e. &#34;a1&#34; &lt; &#34;a2&#34; &lt; &#34;a100&#34;)? Can be:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - true
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - false
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsNumericCollation&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Under `&#34;organizeImportsCollation&#34;: &#34;unicode&#34;`,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// do letters with accent marks/diacritics get sorted distinctly
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// from their &#34;base&#34; letter (i.e. is Ã© different from e)? Can be
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - true
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// - false
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;organizeImportsAccentCollation&#34;</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;javascript.unstable&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// same options valid here...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‚¨å¯ä»¥é–±è®€æœ‰é—œè‡ªå‹•æª¢æ¸¬å’ŒæŒ‡å®šä¸å€åˆ†å¤§å°å¯«çš„åŸå§‹å·¥ä½œçš„<a class=link href=https://github.com/microsoft/TypeScript/pull/51733 target=_blank rel=noopener>æ›´å¤šè©³ç´°ä¿¡æ¯</a>ï¼Œç„¶å¾Œæ˜¯<a class=link href=https://github.com/microsoft/TypeScript/pull/52115 target=_blank rel=noopener>æ›´å»£æ³›çš„é¸é …é›†</a>ã€‚</p><hr><h2 id=switchcase-èªæ³•è£œè¶³>switch/case èªæ³•è£œè¶³</h2><p>åœ¨ç·¨å¯« <code>switch</code> èªå¥æ™‚ï¼ŒTypeScript ç¾åœ¨æœƒæª¢æ¸¬è¢«æª¢æŸ¥çš„å€¼ä½•æ™‚å…·æœ‰æ–‡å­—é¡å‹ã€‚å¦‚æœæ˜¯é€™æ¨£ï¼Œå®ƒå°‡æä¾›ä¸€å€‹å®Œæˆæ¯å€‹æœªç™¼ç¾çš„è…³æ‰‹æ¶ <code>case</code>ã€‚</p><p><img src=https://live.staticflickr.com/65535/52826046242_6c175cb55e_o.gif max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>æ‚¨å¯ä»¥åœ¨ <a class=link href=https://github.com/microsoft/TypeScript/pull/50996 target=_blank rel=noopener>GitHub</a> ä¸ŠæŸ¥çœ‹å¯¦æ–½ç´°ç¯€ã€‚</p><hr><h2 id=é€Ÿåº¦å…§å­˜å’ŒåŒ…å¤§å°å„ªåŒ–>é€Ÿåº¦ã€å…§å­˜å’ŒåŒ…å¤§å°å„ªåŒ–</h2><p>TypeScript 5.0 åœ¨æˆ‘å€‘çš„ä»£ç¢¼çµæ§‹ã€æ•¸æ“šçµæ§‹å’Œç®—æ³•å¯¦ç¾ä¸­åŒ…å«è¨±å¤šå¼·å¤§çš„è®ŠåŒ–ã€‚é€™äº›éƒ½æ„å‘³è‘—ä½ çš„æ•´å€‹é«”é©—æ‡‰è©²æ›´å¿«ï¼Œä¸åƒ…åƒ…æ˜¯é‹è¡Œ TypeScriptï¼Œç”šè‡³å®‰è£å®ƒã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘å€‘ç›¸å°æ–¼ TypeScript 4.9 åœ¨é€Ÿåº¦å’Œå¤§å°æ–¹é¢å–å¾—çš„ä¸€äº›æœ‰è¶£çš„å‹åˆ©ã€‚</p><div class=table-wrapper><table><thead><tr><th>è¨­æƒ³</th><th>æ™‚é–“æˆ–å¤§å°ç›¸å°æ–¼ TS 4.9</th></tr></thead><tbody><tr><td>material-ui æ§‹å»ºæ™‚é–“</td><td>90%</td></tr><tr><td>TypeScript ç·¨è­¯å™¨å•Ÿå‹•æ™‚é–“</td><td>89%</td></tr><tr><td>ç·¨åŠ‡å»ºé€ æ™‚é–“</td><td>88%</td></tr><tr><td>TypeScript Compiler è‡ªå»ºæ™‚é–“</td><td>87%</td></tr><tr><td>Outlook Web æ§‹å»ºæ™‚é–“</td><td>82%</td></tr><tr><td>VS ä»£ç¢¼æ§‹å»ºæ™‚é–“</td><td>80%</td></tr><tr><td>æ‰“å­—ç¨¿ npm åŒ…å¤§å°</td><td>59%</td></tr></tbody></table></div><p><img src=https://live.staticflickr.com/65535/52827024715_7c544271f8_o.jpg max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><img src=https://live.staticflickr.com/65535/52826805674_381fa589c1_o.jpg max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>å¦‚ä½•ï¼Ÿæœ‰ä¸€äº›é¡¯è‘—çš„æ”¹é€²ï¼Œæˆ‘å€‘å¸Œæœ›åœ¨æœªä¾†æä¾›æ›´å¤šç´°ç¯€ã€‚ä½†æˆ‘å€‘ä¸æœƒè®“æ‚¨ç­‰å¾…é‚£ç¯‡åšæ–‡ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘å€‘æœ€è¿‘å°‡ TypeScript å¾å‘½åç©ºé–“é·ç§»åˆ°æ¨¡å¡Šï¼Œä½¿æˆ‘å€‘èƒ½å¤ åˆ©ç”¨ç¾ä»£æ§‹å»ºå·¥å…·ä¾†åŸ·è¡Œç¯„åœæå‡ç­‰å„ªåŒ–ã€‚ä½¿ç”¨æ­¤å·¥å…·ã€é‡æ–°å¯©è¦–æˆ‘å€‘çš„æ‰“åŒ…ç­–ç•¥ä¸¦åˆªé™¤ä¸€äº›å·²æ£„ç”¨çš„ä»£ç¢¼ï¼Œå·²å°‡ TypeScript 4.9 çš„ 63.8 MB åŒ…å¤§å°æ¸›å°‘äº†ç´„ 26.4 MBã€‚å®ƒé‚„é€šéç›´æ¥å‡½æ•¸èª¿ç”¨ç‚ºæˆ‘å€‘å¸¶ä¾†äº†é¡¯è‘—çš„åŠ é€Ÿã€‚æˆ‘å€‘åœ¨é€™è£¡æ•´ç†äº†ä¸€ä»½é—œæ–¼æˆ‘å€‘é·ç§»åˆ°æ¨¡å¡Šçš„<a class=link href=https://devblogs.microsoft.com/typescript/typescripts-migration-to-modules/ target=_blank rel=noopener>è©³ç´°æ–‡ç« </a>ã€‚</p><p>TypeScript é‚„ç‚ºç·¨è­¯å™¨ä¸­çš„å…§éƒ¨å°åƒé¡å‹å¢åŠ äº†æ›´å¤šçš„çµ±ä¸€æ€§ï¼Œä¸¦ä¸”é‚„ç²¾ç°¡äº†å­˜å„²åœ¨å…¶ä¸­ä¸€äº›å°åƒé¡å‹ä¸Šçš„æ•¸æ“šã€‚é€™æ¸›å°‘äº†å¤šæ…‹æ“ä½œï¼ŒåŒæ™‚å¹³è¡¡äº†å› ä½¿æˆ‘å€‘çš„å°è±¡å½¢ç‹€æ›´çµ±ä¸€è€Œå¢åŠ çš„å…§å­˜ä½¿ç”¨é‡ã€‚</p><p>åœ¨å°‡ä¿¡æ¯åºåˆ—åŒ–ç‚ºå­—ç¬¦ä¸²æ™‚ï¼Œæˆ‘å€‘é‚„åŸ·è¡Œäº†ä¸€äº›ç·©å­˜ã€‚é¡å‹é¡¯ç¤ºå¯èƒ½ä½œç‚ºéŒ¯èª¤å ±å‘Šã€è²æ˜ç™¼å‡ºã€ä»£ç¢¼å®Œæˆç­‰çš„ä¸€éƒ¨åˆ†ç™¼ç”Ÿï¼Œæœ€çµ‚å¯èƒ½æœƒç›¸ç•¶æ˜‚è²´ã€‚TypeScript ç¾åœ¨ç·©å­˜äº†ä¸€äº›å¸¸ç”¨çš„æ©Ÿåˆ¶ä»¥åœ¨é€™äº›æ“ä½œä¸­é‡ç”¨ã€‚</p><p>æˆ‘å€‘åšå‡ºçš„å¦ä¸€å€‹æ”¹é€²è§£æå™¨çš„é¡¯è‘—è®ŠåŒ–æ˜¯åˆ©ç”¨ <code>var</code> å¶çˆ¾è¿´é¿ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> è·¨é–‰åŒ…çš„æˆæœ¬ã€‚é€™æé«˜äº†æˆ‘å€‘çš„ä¸€äº›è§£ææ€§èƒ½ã€‚</p><p>ç¸½çš„ä¾†èªªï¼Œæˆ‘å€‘é è¨ˆå¤§å¤šæ•¸ä»£ç¢¼åº«æ‡‰è©²æœƒçœ‹åˆ° TypeScript 5.0 çš„é€Ÿåº¦æå‡ï¼Œä¸¦ä¸”å§‹çµ‚èƒ½å¤ é‡ç¾ 10% åˆ° 20% ä¹‹é–“çš„å‹åˆ©ã€‚ç•¶ç„¶ï¼Œé€™å°‡å–æ±ºæ–¼ç¡¬ä»¶å’Œä»£ç¢¼åº«ç‰¹æ€§ï¼Œä½†æˆ‘å€‘é¼“å‹µæ‚¨ä»Šå¤©å°±åœ¨æ‚¨çš„ä»£ç¢¼åº«ä¸Šå˜—è©¦ä¸€ä¸‹ï¼</p><p>æœ‰é—œè©³ç´°ä¿¡æ¯ï¼Œè«‹åƒé–±æˆ‘å€‘çš„ä¸€äº›é¡¯è‘—å„ªåŒ–ï¼š</p><ul><li><a class=link href=https://github.com/microsoft/TypeScript/pull/51387 target=_blank rel=noopener>é·ç§»åˆ°æ¨¡å¡Š</a></li><li><a class=link href=https://github.com/microsoft/TypeScript/pull/51682 target=_blank rel=noopener>Nodeå–®é«”åŒ–</a></li><li><a class=link href=https://github.com/microsoft/TypeScript/pull/51880 target=_blank rel=noopener>Symbolå–®é«”åŒ–</a></li><li><a class=link href=https://github.com/microsoft/TypeScript/pull/52170 target=_blank rel=noopener>Identifierç¸®å°å°ºå¯¸</a></li><li><a class=link href=https://github.com/microsoft/TypeScript/pull/52382 target=_blank rel=noopener>Printerç·©å­˜</a></li><li><a class=link href=https://github.com/microsoft/TypeScript/issues/52924 target=_blank rel=noopener>é™åˆ¶ä½¿ç”¨var</a></li></ul><hr><h2 id=é‡å¤§æ›´æ”¹å’Œæ£„ç”¨>é‡å¤§æ›´æ”¹å’Œæ£„ç”¨</h2><h3 id=é‹è¡Œæ™‚è¦æ±‚>é‹è¡Œæ™‚è¦æ±‚</h3><p>TypeScript ç¾åœ¨ä»¥ ECMAScript 2018 ç‚ºç›®æ¨™ã€‚TypeScript åŒ…é‚„è¨­ç½®äº†æœ€ä½é æœŸå¼•æ“ 12.20ã€‚å°æ–¼ Node ç”¨æˆ¶ï¼Œé€™æ„å‘³è‘— TypeScript 5.0 çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚è‡³å°‘ç‚º Node.js 12.20 åŠæ›´é«˜ç‰ˆæœ¬ã€‚</p><h3 id=libdtsè®ŠåŒ–><code>lib.d.ts</code>è®ŠåŒ–</h3><p>æ›´æ”¹ DOM é¡å‹çš„ç”Ÿæˆæ–¹å¼å¯èƒ½æœƒå°ç¾æœ‰ä»£ç¢¼ç”¢ç”Ÿå½±éŸ¿ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŸäº›å±¬æ€§å·²å¾ <code>number</code> æ•¸å­—æ–‡å­—é¡å‹è½‰æ›ç‚ºæ•¸å­—æ–‡å­—é¡å‹ï¼Œä¸¦ä¸”ç”¨æ–¼å‰ªåˆ‡ã€è¤‡è£½å’Œç²˜è²¼äº‹ä»¶è™•ç†çš„å±¬æ€§å’Œæ–¹æ³•å·²è·¨ç•Œé¢ç§»å‹•ã€‚</p><h3 id=api-é‡å¤§è®Šæ›´>API é‡å¤§è®Šæ›´</h3><p>åœ¨ TypeScript 5.0 ä¸­ï¼Œæˆ‘å€‘è½‰å‘äº†æ¨¡å¡Šï¼Œåˆªé™¤äº†ä¸€äº›ä¸å¿…è¦çš„æ¥å£ï¼Œä¸¦é€²è¡Œäº†ä¸€äº›æ­£ç¢ºæ€§æ”¹é€²ã€‚æœ‰é—œæ›´æ”¹å…§å®¹çš„æ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹åƒé–±æˆ‘å€‘çš„ API é‡å¤§æ›´æ”¹é é¢ã€‚</p><h3 id=é—œä¿‚é‹ç®—ç¬¦ä¸­ç¦æ­¢çš„éš±å¼å¼·åˆ¶è½‰æ›>é—œä¿‚é‹ç®—ç¬¦ä¸­ç¦æ­¢çš„éš±å¼å¼·åˆ¶è½‰æ›</h3><p>å¦‚æœæ‚¨ç·¨å¯«çš„ä»£ç¢¼å¯èƒ½æœƒå°è‡´éš±å¼çš„å­—ç¬¦ä¸²åˆ°æ•¸å­—å¼·åˆ¶è½‰æ›ï¼Œå‰‡ TypeScript ä¸­çš„æŸäº›æ“ä½œæœƒè­¦å‘Šæ‚¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>func</span><span class=p>(</span><span class=nx>ns</span>: <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>ns</span> <span class=o>*</span> <span class=mi>4</span><span class=p>;</span> <span class=c1>// Error, possible implicit coercion
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ 5.0 ä¸­ï¼Œé€™ä¹Ÿå°‡æ‡‰ç”¨æ–¼é—œä¿‚é‹ç®—ç¬¦ <code>></code>ã€<code>&lt;</code>ã€<code>&lt;=</code> å’Œ <code>>=</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>func</span><span class=p>(</span><span class=nx>ns</span>: <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>ns</span> <span class=o>&gt;</span> <span class=mi>4</span><span class=p>;</span> <span class=c1>// Now also an error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœéœ€è¦ï¼Œè¦å…è¨±é€™æ¨£åšï¼Œæ‚¨å¯ä»¥é¡¯å¼åœ°å°‡æ“ä½œæ•¸å¼·åˆ¶ç‚º <code>number</code> using <code>+</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>func</span><span class=p>(</span><span class=nx>ns</span>: <span class=kt>number</span> <span class=o>|</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>+</span><span class=nx>ns</span> <span class=o>&gt;</span> <span class=mi>4</span><span class=p>;</span> <span class=c1>// OK
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­¤<a class=link href=https://github.com/microsoft/TypeScript/pull/52048 target=_blank rel=noopener>æ­£ç¢ºæ€§æ”¹é€²</a>ç”± <a class=link href=https://github.com/Andarist target=_blank rel=noopener>Mateusz BurzyÅ„ski</a> æä¾›ã€‚</p><h3 id=æšèˆ‰å¤§ä¿®>æšèˆ‰å¤§ä¿®</h3><p><code>enum</code> è‡ªå¾å®ƒçš„ç¬¬ä¸€å€‹ç‰ˆæœ¬ä»¥ä¾†ï¼ŒTypeScript å°±ä¸€ç›´å­˜åœ¨ä¸€äº›é—œæ–¼ s çš„å¥‡æ€ªä¹‹è™•ã€‚åœ¨ 5.0 ä¸­ï¼Œæˆ‘å€‘æ­£åœ¨æ¸…ç†å…¶ä¸­çš„ä¸€äº›å•é¡Œï¼Œä¸¦æ¸›å°‘ç†è§£ enum æ‚¨å¯ä»¥è²æ˜çš„å„ç¨® s æ‰€éœ€çš„æ¦‚å¿µæ•¸ã€‚</p><p>ä½œç‚ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å¯èƒ½æœƒçœ‹åˆ°å…©å€‹ä¸»è¦çš„æ–°éŒ¯èª¤ã€‚é¦–å…ˆæ˜¯å°‡åŸŸå¤–æ–‡å­—åˆ†é…çµ¦é¡å‹ enum ç¾åœ¨æœƒåƒäººå€‘é æœŸçš„é‚£æ¨£å‡ºéŒ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>SomeEvenDigit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Zero</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>Two</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>Four</span> <span class=o>=</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Now correctly an error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>m</span>: <span class=kt>SomeEvenDigit</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦ä¸€å€‹æ˜¯ç”¨æ··åˆæ•¸å­—å’Œé–“æ¥å­—ç¬¦ä¸²æšèˆ‰å¼•ç”¨è²æ˜å€¼çš„æšèˆ‰æœƒéŒ¯èª¤åœ°å‰µå»ºä¸€å€‹å…¨æ•¸å­— <code>enum</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>Letters</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>A</span> <span class=o>=</span> <span class=s2>&#34;a&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>enum</span> <span class=nx>Numbers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>one</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>two</span> <span class=o>=</span> <span class=nx>Letters</span><span class=p>.</span><span class=nx>A</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Now correctly an error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>t</span>: <span class=kt>number</span> <span class=o>=</span> <span class=nx>Numbers</span><span class=p>.</span><span class=nx>two</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‚¨å¯ä»¥åœ¨<a class=link href=https://github.com/microsoft/TypeScript/pull/50528 target=_blank rel=noopener>ç›¸é—œæ›´æ”¹</a>ä¸­æŸ¥çœ‹æ›´å¤šè©³ç´°ä¿¡æ¯ã€‚</p><h3 id=å°æ§‹é€ å‡½æ•¸ä¸­çš„åƒæ•¸è£é£¾å™¨é€²è¡Œæ›´æº–ç¢ºçš„é¡å‹æª¢æŸ¥---experimentaldecorators>å°æ§‹é€ å‡½æ•¸ä¸­çš„åƒæ•¸è£é£¾å™¨é€²è¡Œæ›´æº–ç¢ºçš„é¡å‹æª¢æŸ¥ <code>--experimentalDecorators</code></h3><p>TypeScript 5.0 ä½¿ <code>--experimentalDecorators</code>ã€‚é€™ä¸€é»è®Šå¾—æ˜é¡¯çš„ä¸€å€‹åœ°æ–¹æ˜¯åœ¨æ§‹é€ å‡½æ•¸åƒæ•¸ä¸Šä½¿ç”¨è£é£¾å™¨æ™‚ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>declare</span> <span class=kr>const</span> <span class=nx>inject</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>entity</span>: <span class=kt>any</span><span class=p>)</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nx>target</span>: <span class=kt>object</span><span class=p>,</span> <span class=nx>key</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kt>symbol</span><span class=p>,</span> <span class=nx>index?</span>: <span class=kt>number</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>Foo</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>C</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kd>@inject</span><span class=p>(</span><span class=nx>Foo</span><span class=p>)</span> <span class=kr>private</span> <span class=nx>x</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­¤èª¿ç”¨å°‡å¤±æ•—ï¼Œå› ç‚º key éœ€è¦ä¸€å€‹ <code>string | symbol</code>ï¼Œä½†æ§‹é€ å‡½æ•¸åƒæ•¸æ”¶åˆ°ä¸€å€‹éµ <code>undefined</code>ã€‚key æ­£ç¢ºçš„è§£æ±ºæ–¹æ³•æ˜¯æ›´æ”¹ within çš„é¡å‹ <code>inject</code>ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç„¡æ³•å‡ç´šçš„åº«ï¼Œä¸€å€‹åˆç†çš„è§£æ±ºæ–¹æ³•æ˜¯åŒ…è£ <code>inject</code> ä¸€å€‹é¡å‹æ›´å®‰å…¨çš„è£é£¾å™¨å‡½æ•¸ï¼Œä¸¦åœ¨ <code>key</code>ã€‚</p><p>æ›´å¤šè©³æƒ…ï¼Œ<a class=link href=https://github.com/microsoft/TypeScript/issues/52435 target=_blank rel=noopener>è«‹åƒé–±æœ¬æœŸ</a>ã€‚</p><h3 id=æ£„ç”¨å’Œé»˜èªæ›´æ”¹>æ£„ç”¨å’Œé»˜èªæ›´æ”¹</h3><p>åœ¨ TypeScript 5.0 ä¸­ï¼Œæˆ‘å€‘æ£„ç”¨äº†ä»¥ä¸‹è¨­ç½®å’Œè¨­ç½®å€¼ï¼š</p><ul><li><code>--target: ES3</code></li><li><code>--out</code></li><li><code>--noImplicitUseStrict</code></li><li><code>--keyofStringsOnly</code></li><li><code>--suppressExcessPropertyErrors</code></li><li><code>--suppressImplicitAnyIndexErrors</code></li><li><code>--noStrictGenericChecks</code></li><li><code>--charset</code></li><li><code>--importsNotUsedAsValues</code></li><li><code>--preserveValueImports</code></li><li><code>prepend</code> åœ¨é …ç›®åƒè€ƒä¸­</li></ul><p>åœ¨ TypeScript 5.5 ä¹‹å‰ï¼Œé€™äº›é…ç½®å°‡ç¹¼çºŒè¢«å…è¨±ï¼Œå±†æ™‚å®ƒå€‘å°‡è¢«å®Œå…¨åˆªé™¤ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨é€™äº›è¨­ç½®ï¼Œæ‚¨å°‡æ”¶åˆ°è­¦å‘Šã€‚åœ¨ TypeScript 5.0 ä»¥åŠæœªä¾†ç‰ˆæœ¬ 5.1ã€5.2ã€5.3 å’Œ 5.4 ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®š <code>"ignoreDeprecations": "5.0"</code> å±è”½é€™äº›è­¦å‘Šæç¤ºã€‚æˆ‘å€‘é‚„å°‡å¾ˆå¿«ç™¼å¸ƒä¸€å€‹4.9 è£œä¸ï¼Œä»¥å…è¨±æŒ‡å®š <code>ignoreDeprecations</code> ä»¥å…è¨±æ›´å¹³æ»‘çš„å‡ç´šã€‚é™¤äº†æ£„ç”¨ä¹‹å¤–ï¼Œæˆ‘å€‘é‚„æ›´æ”¹äº†ä¸€äº›è¨­ç½®ä»¥æ›´å¥½åœ°æ”¹é€² TypeScript ä¸­çš„è·¨å¹³å°è¡Œç‚ºã€‚</p><p><code>--newLine</code>ï¼Œå®ƒæ§åˆ¶ JavaScript æ–‡ä»¶ä¸­ç™¼å‡ºçš„è¡Œå°¾ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œéå»å¸¸å¸¸æ ¹æ“šç•¶å‰æ“ä½œç³»çµ±é€²è¡Œæ¨æ–·ã€‚æˆ‘å€‘èªç‚ºæ§‹å»ºæ‡‰è©²ç›¡å¯èƒ½å…·æœ‰ç¢ºå®šæ€§ï¼Œä¸¦ä¸” Windows è¨˜äº‹æœ¬ç¾åœ¨æ”¯æŒæ›è¡Œç¬¦è¡Œçµå°¾ï¼Œå› æ­¤æ–°çš„é»˜èªè¨­ç½®æ˜¯ <code>LF</code>ã€‚èˆŠçš„ç‰¹å®šæ–¼æ“ä½œç³»çµ±çš„æ¨ç†è¡Œç‚ºä¸å†å¯ç”¨ã€‚</p><p><code>--forceConsistentCasingInFileNames</code>ï¼Œé€™ç¢ºä¿äº†é …ç›®ä¸­å°åŒä¸€æ–‡ä»¶åçš„æ‰€æœ‰å¼•ç”¨éƒ½åœ¨å¤§å°å¯«ä¸­é”æˆä¸€è‡´ï¼Œç¾åœ¨é»˜èªç‚º <code>true</code>ã€‚é€™æœ‰åŠ©æ–¼æ•ç²åœ¨ä¸å€åˆ†å¤§å°å¯«çš„æ–‡ä»¶ç³»çµ±ä¸Šç·¨å¯«çš„ä»£ç¢¼çš„å·®ç•°å•é¡Œã€‚</p><p>æ‚¨å¯ä»¥ç•™ä¸‹åé¥‹ä¸¦æŸ¥çœ‹<a class=link href=https://github.com/microsoft/TypeScript/issues/51909 target=_blank rel=noopener>æœ‰é—œ 5.0 æ£„ç”¨è·Ÿè¸ªå•é¡Œçš„æ›´å¤šä¿¡æ¯</a>ã€‚</p><hr><h2 id=ä¸‹ä¸€æ­¥æ˜¯ä»€éº¼>ä¸‹ä¸€æ­¥æ˜¯ä»€éº¼ï¼Ÿ</h2><p>ä¸è¦æ“ä¹‹éæ€¥ï¼ŒTypeScript 5.1 å·²ç¶“åœ¨é–‹ç™¼ä¸­äº†ï¼Œæˆ‘å€‘æ‰€æœ‰çš„è¨ˆåŠƒéƒ½å·²ç¶“åœ¨ <a class=link href=https://github.com/microsoft/TypeScript/issues/53031 target=_blank rel=noopener>GitHub</a> ä¸Šäº†ã€‚å¦‚æœä½ èºèºæ¬²è©¦ï¼Œæˆ‘å€‘é¼“å‹µä½ å˜—è©¦ TypeScript çš„<a class=link href=https://www.typescriptlang.org/docs/handbook/nightly-builds.html target=_blank rel=noopener>æ¯æ—¥æ§‹å»ºç‰ˆæœ¬</a>æˆ–é‡å° <a class=link href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-next" target=_blank rel=noopener>VS Code çš„ JavaScript å’Œ TypeScript Nightly æ“´å±•</a>ï¼</p><p>ç•¶ç„¶ï¼Œå¦‚æœæ‚¨é¸æ“‡åªäº«å— TypeScript çš„æ–°ç©©å®šç‰ˆï¼Œæˆ‘å€‘ä¹Ÿä¸æœƒæ„Ÿåˆ°å—å‚·ã€‚æˆ‘å€‘å¸Œæœ› TypeScript 5.0 è®“æ¯å€‹äººçš„ç·¨ç¢¼æ›´å¿«ã€æ›´æœ‰è¶£ã€‚</p><p>Happy Hackingï¼</p><p>by Daniel Rosenwasser å’Œ TypeScript åœ˜éšŠ</p><hr></section><footer class=article-footer><section class=article-tags><a href=https://wayne-blog.com/tags/typescript/>typescript</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸é—œæ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=https://wayne-blog.com/2023-03-10/petite-vue-introduction/><div class=article-image><img src=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg loading=lazy data-key=petite-vue-introduction data-hash=https://live.staticflickr.com/65535/52736941727_b3a1dcf3c3_o.jpg></div><div class=article-details><h2 class=article-title>ã€Petite-Vueã€‘å¤§å°åªæœ‰ ~6KB çš„ mini Vueï¼</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-03-07/ts-config-and-type/><div class=article-image><img src=https://live.staticflickr.com/65535/52731863500_76db7b3738_o.png loading=lazy data-key=ts-config-and-type data-hash=https://live.staticflickr.com/65535/52731863500_76db7b3738_o.png></div><div class=article-details><h2 class=article-title>ã€Typescriptã€‘tsconfig.json çš„è¨­å®šèˆ‡è³‡æ–™å‹åˆ¥ä»‹ç´¹ç­†è¨˜</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-02-21/ts-express-server/><div class=article-image><img src=https://live.staticflickr.com/65535/52702210344_fe78a142e7_o.png loading=lazy data-key=ts-express-server data-hash=https://live.staticflickr.com/65535/52702210344_fe78a142e7_o.png></div><div class=article-details><h2 class=article-title>ã€Node.jsã€‘ç”¨ Typescript èˆ‡ Express å»ºç«‹ä¸€å€‹ server</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-01-16/nuxt-nuxt3-practice-project/><div class=article-image><img src=https://live.staticflickr.com/65535/52630283696_c93e29e870_o.png loading=lazy data-key=nuxt-nuxt3-practice-project data-hash=https://live.staticflickr.com/65535/52630283696_c93e29e870_o.png></div><div class=article-details><h2 class=article-title>ã€Nuxt3ã€‘å¯¦æˆ°ç·´ç¿’ - å¯¦ä½œéƒ¨è½æ ¼</h2></div></a></article><article class=has-image><a href=https://wayne-blog.com/2023-01-14/nuxt-try-nuxt3/><div class=article-image><img src=https://live.staticflickr.com/65535/52616698791_b7b8bbce05_o.jpg loading=lazy data-key=nuxt-try-nuxt3 data-hash=https://live.staticflickr.com/65535/52616698791_b7b8bbce05_o.jpg></div><div class=article-details><h2 class=article-title>ã€Nuxt3ã€‘é–‹ç®±å³ç”¨çš„ Nuxt3 ç©è½‰ç­†è¨˜</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-blog-wayne.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Wayne's blog | å‰æ©çš„éƒ¨è½æ ¼ | æŠ€è¡“åšå®¢</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=https://wayne-blog.com/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>"serviceWorker"in navigator&&(console.log("Check service worker register?"),navigator.serviceWorker.register("./service-worker.js").then(function(){console.log("service worker registed.")}).catch(function(e){console.log("service worker registed fail. This happened: ",e)}));function toggleBtnScrollTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=document.getElementById("btnScrollTop");if(t){e&&!e.classList.contains("show")&&e.classList.add("show");return}e&&e.classList.contains("show")&&e.classList.remove("show")}window.addEventListener("scroll",toggleBtnScrollTop),document.addEventListener("DOMContentLoaded",toggleBtnScrollTop);function clickToScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}function clickToMessenger(){window.open("//m.me/100278986238046","_blank")}</script><button id=btnScrollTop onclick=clickToScrollTop() title=å›åˆ°é é ‚>
<img src=https://wayne-blog.com/img/top_huf0c1dc16de3f1372c70e7aced5d60e6d_660_30x0_resize_box_3.png alt=scroll-top></button>
<button id=btnMessenger onclick=clickToMessenger() title="Facebook Messenger">
<img src=https://wayne-blog.com/img/messenger_hu3f63590c9d474cc4c51a145f9812597b_7669_50x0_resize_box_3.png alt="facebook messenger"></button></body></html>