<!doctype html><html lang=zh-tw dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="利用 Telegram 機器人，在 Drone CI/CD 的過程中失敗時發出告警，避免上程式失敗而沒察覺。"><meta name=keywords content="drone,ci/cd,cicd,telegram bot,telegram bots,drone telegram,drone-telegram,drone plugins"><title>Telegram 機器人說明，並為你的 Drone CI/CD 配置 Telegram 機器人</title>
<link rel=canonical href=https://wayne-blog.com/2022-08-25/drone-cicd-with-telegram-bot/><link rel=stylesheet href=https://wayne-blog.com/scss/style.min.e3f888c5dd2d8234c7284a9b45d1b5916903fb544644cac31c873b6488e8d7a0.css><script>!function(e,t,n,s,o,i,a){if(e.fbq)return;o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],i=t.createElement(n),i.async=!0,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","843131703668116"),fbq("track","PageView")</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=843131703668116&ev=PageView&noscript=1"></noscript><meta property="og:title" content="Telegram 機器人說明，並為你的 Drone CI/CD 配置 Telegram 機器人"><meta property="og:description" content="利用 Telegram 機器人，在 Drone CI/CD 的過程中失敗時發出告警，避免上程式失敗而沒察覺。"><meta property="og:url" content="https://wayne-blog.com/2022-08-25/drone-cicd-with-telegram-bot/"><meta property="og:site_name" content="Wayne's blog | 偉恩的部落格 | 技術博客"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="telegram bot"><meta property="article:tag" content="drone"><meta property="article:tag" content="ci/cd"><meta property="article:published_time" content="2022-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-25T00:00:00+00:00"><meta property="og:image" content="https://live.staticflickr.com/65535/52309739568_a0d98a6137_o.png"><meta name=twitter:site content="@4006wayne"><meta name=twitter:creator content="@4006wayne"><meta name=twitter:title content="Telegram 機器人說明，並為你的 Drone CI/CD 配置 Telegram 機器人"><meta name=twitter:description content="利用 Telegram 機器人，在 Drone CI/CD 的過程中失敗時發出告警，避免上程式失敗而沒察覺。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://live.staticflickr.com/65535/52309739568_a0d98a6137_o.png"><link rel="shortcut icon" href=https://live.staticflickr.com/65535/52275825736_808b1fd4a8_o.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-FG6KQD7H6C"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FG6KQD7H6C",{anonymize_ip:!1})}</script><link rel=stylesheet type=text/css href=./toastify/style.min.css><script type=text/javascript src=./toastify/index.js></script><script>const hackKey="hack",author="Wayne (偉恩)",link="https://wayne-blog.com/",source="Wayne's blog | 偉恩的部落格 | 技術博客",warningText="請重視著作權，商業轉載請聯繫作者獲得授權，非商業轉載請註明出處。",warningBackgroundColor="linear-gradient(to right, rgb(108 47 87), rgb(191 86 86))",successBackgroundColor="linear-gradient(to right, rgb(47 151 127), rgb(69 195 137))",ignoreTagNames=["INPUT"];window.addEventListener("keyup",function(e){if(document.activeElement&&ignoreTagNames.includes(document.activeElement.tagName))return;if(e.key&&e.key.toLowerCase()==="h"){let e={text:"",duration:1e3,destination:"",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!1,style:{borderRadius:"50em"}};const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(n.has(hackKey)){e.text="Hack模式已關閉",e.style.background=warningBackgroundColor,Toastify(e).showToast(),n.delete(hackKey),t.search=n.toString(),window.history.replaceState(null,"",t.toString());return}e.text="Hack模式已開啟",e.style.background=successBackgroundColor,Toastify(e).showToast(),n.set(hackKey,"1"),t.search=n.toString(),window.history.replaceState(null,"",t.toString())}}),window.addEventListener("copy",function(e){const t=new URL(window.location.href),n=new URLSearchParams(t.search);if(!n.has(hackKey)){e.preventDefault();const t=document.getSelection();e.clipboardData.setData("text/plain",`${t.toString()}

作者：${author}
連結：${link}
來源：${source}
${warningText}`)}})</script><style>:root{--zh-font-family:"Microsoft JhengHei", "微軟正黑體";--code-font-family:Menlo, Monaco, Consolas, "Courier New"}</style><meta name=theme-color content="#57BCB9"><link rel=manifest href=./manifest.json><link rel=apple-touch-icon sizes=57x57 href=./apple-touch-icon-57x57.webp><link rel=apple-touch-icon sizes=114x114 href=./apple-touch-icon-114x114.webp><link rel=apple-touch-icon sizes=120x120 href=./apple-touch-icon-120x120.webp><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon-180x180.webp><link rel=apple-touch-icon sizes=192x192 href=./apple-touch-icon-192x192.webp><link rel=apple-touch-icon sizes=512x512 href=./apple-touch-icon-512x512.png><meta name=msvalidate.01 content="D1D0687C3DAA5A891295FC82A5EDD3B0"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切換選單>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=https://wayne-blog.com/><img src=https://wayne-blog.com/img/avatar2d.webp width=256 height=256 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🧧</span></figure><div class=site-meta><h1 class=site-name><a href=https://wayne-blog.com/>Wayne (偉恩)</a></h1><h2 class=site-description>軟體開發 | 網路工程 | 技術博客</h2></div></header><ol class=social-menu><li><a href=https://wayneblog.bobaboba.me target=_blank title=Bobaboba rel=me><svg width="16" height="25" viewBox="0 0 108 156" fill="none" xmlns="http://www.w3.org/2000/svg" class="ant-menu-item-icon"><g id="Frame" clip-path="url(#clip0_1286_9119)"><path id="Vector" d="M103.092 68.82c3.923-10.88 3.425-22.877-1.386-33.3898-4.8113-10.5128-13.5473-18.6939-24.3139-22.7695C66.6255 8.58519 54.6963 8.94396 44.1907 13.6589 33.6852 18.3738 25.4501 27.065 21.2715 37.848L103.092 68.82z" fill="#e3e7f5"/><path id="Vector_2" d="M20.6297 41.1675.0942412 133.077C-.0317631 133.774.0878744 134.493.432471 135.11.777068 135.727 1.325 136.203 1.98169 136.457L52.9429 155.789C53.6062 156.055 54.3425 156.073 55.0179 155.84 55.6933 155.607 56.2629 155.137 56.6233 154.517L101.337 71.7598C101.535 71.3808 101.649 70.9635 101.672 70.5363 101.694 70.109 101.626 69.6817 101.47 69.2836 101.314 68.8855 101.075 68.5258 100.769 68.2289 100.463 67.932 100.096 67.705 99.6951 67.5631L24.4802 39.0787C24.0918 38.9392 23.6786 38.8833 23.2674 38.9148 22.8561 38.9462 22.456 39.0642 22.093 39.2611S21.4122 39.7294 21.1601 40.0578 20.7273 40.7643 20.6297 41.1675z" fill="#f2f2f2"/><path id="Vector_3" d="M82.9934.252578 82.9758.245884C80.9074-.537125 78.5998.515063 77.8216 2.59602L48.9735 79.7314C48.1953 81.8123 49.2411 84.134 51.3094 84.917L51.3271 84.9237C53.3954 85.7067 55.703 84.6545 56.4813 82.5736L85.3293 5.43823C86.1076 3.35727 85.0618 1.03559 82.9934.252578z" fill="#ced8ed"/><path id="Vector_4" d="M104.866 63.6606 24.7538 33.3326C22.2172 32.3723 19.3869 33.6626 18.4324 36.2147L18.4258 36.2325C17.4713 38.7846 18.7541 41.632 21.2907 42.5923L101.403 72.9204C103.94 73.8806 106.77 72.5902 107.724 70.0381L107.731 70.0203C108.685 67.4682 107.403 64.6209 104.866 63.6606z" fill="#cbd3e8"/><path id="Vector_5" d="M89.6538 93.0834 56.7178 154.572C56.3574 155.192 55.7878 155.662 55.1124 155.895 54.437 156.129 53.7006 156.111 53.0374 155.844L2.07618 136.513C1.41948 136.259.87155 135.782.526954 135.165.182357 134.548.0627193 133.829.188724 133.133L15.4204 64.9219 89.6538 93.0834z" fill="#f8e0be"/><path id="Vector_6" d="M74.3088 11.125C77.2135 11.8219 79.9953 12.9619 82.5572 14.5052L69.2128 50.1868 60.2285 46.7876S74.6297 11.2579 74.3088 11.125z" fill="#e3e7f5"/><path id="Vector_7" d="M15.1374 125.272C17.7851 125.272 19.9315 123.112 19.9315 120.448 19.9315 117.784 17.7851 115.625 15.1374 115.625S10.3433 117.784 10.3433 120.448C10.3433 123.112 12.4897 125.272 15.1374 125.272z" fill="#d79b7a"/><path id="Vector_8" d="M15.3261 108.756C17.9738 108.756 20.1202 106.597 20.1202 103.933 20.1202 101.269 17.9738 99.1094 15.3261 99.1094S10.532 101.269 10.532 103.933C10.532 106.597 12.6784 108.756 15.3261 108.756z" fill="#d79b7a"/><path id="Vector_9" d="M23.0837 141.303c2.6477.0 4.7941-2.16 4.7941-4.82300000000001C27.8778 133.816 25.7314 131.656 23.0837 131.656S18.2896 133.816 18.2896 136.48C18.2896 139.143 20.436 141.303 23.0837 141.303z" fill="#d79b7a"/><path id="Vector_10" d="M58.9829 119.678c2.6477.0 4.7941-2.16 4.7941-4.82299999999999.0-2.664-2.1464-4.824-4.7941-4.824-2.6478.0-4.7942 2.16-4.7942 4.824C54.1887 117.518 56.3351 119.678 58.9829 119.678z" fill="#d79b7a"/><path id="Vector_11" d="M59.9643 138.022C62.612 138.022 64.7584 135.862 64.7584 133.198 64.7584 130.534 62.612 128.375 59.9643 128.375S55.1702 130.534 55.1702 133.198C55.1702 135.862 57.3166 138.022 59.9643 138.022z" fill="#d79b7a"/><path id="Vector_12" d="M41.3351 136.631C43.9829 136.631 46.1293 134.472 46.1293 131.808c0-2.66399999999999-2.1464-4.824-4.7942-4.824C38.6874 126.984 36.541 129.144 36.541 131.808 36.541 134.472 38.6874 136.631 41.3351 136.631z" fill="#d79b7a"/><path id="Vector_13" d="M50.5837 150.701C53.2314 150.701 55.3778 148.542 55.3778 145.878 55.3778 143.214 53.2314 141.055 50.5837 141.055S45.7896 143.214 45.7896 145.878C45.7896 148.542 47.936 150.701 50.5837 150.701z" fill="#d79b7a"/><path id="Vector_14" d="M35.7106 121.381C38.3584 121.381 40.5048 119.222 40.5048 116.558 40.5048 113.894 38.3584 111.734 35.7106 111.734 33.0629 111.734 30.9165 113.894 30.9165 116.558 30.9165 119.222 33.0629 121.381 35.7106 121.381z" fill="#d79b7a"/><path id="Vector_15" d="M68.8354 37.6381C67.5686 37.1053 66.5083 36.1721 65.8153 34.9795 65.7527 34.8551 65.7394 34.7115 65.778 34.5775 65.8165 34.4436 65.9042 34.3294 66.0231 34.2579 66.1435 34.1884 66.2861 34.1695 66.4203 34.205 66.5545 34.2405 66.6695 34.3277 66.7404 34.4477 66.7404 34.5996 68.7787 37.9797 72.0251 36.4985 72.0885 36.4533 72.1611 36.4229 72.2375 36.409 72.314 36.3952 72.3924 36.3984 72.4675 36.4185 72.5425 36.4387 72.6122 36.4755 72.6716 36.5259 72.731 36.5762 72.7785 36.6392 72.811 36.7102 72.8435 36.7812 72.86 36.8585 72.8594 36.9366 72.8588 37.0148 72.8409 37.0917 72.8073 37.1622 72.7737 37.2326 72.7251 37.2947 72.6649 37.3442 72.6047 37.3936 72.5345 37.429 72.4592 37.448 71.8991 37.7239 71.2894 37.8829 70.6666 37.9156 70.0439 37.9482 69.421 37.8539 68.8354 37.6381z" fill="#42210b"/><path id="Vector_16" d="M52.3767 34.5824c3.4921.0 6.3229-2.8481 6.3229-6.3615s-2.8308-6.3615-6.3229-6.3615-6.323 2.8481-6.323 6.3615 2.8309 6.3615 6.323 6.3615z" fill="#f2f2f2"/><path id="Vector_17" d="M46.3936 25.979C46.6783 25.1869 47.1165 24.4595 47.6829 23.8392 48.2493 23.2188 48.9326 22.7179 49.6929 22.3653 50.4533 22.0128 51.2757 21.8156 52.1124 21.7854 52.949 21.7551 53.7833 21.8922 54.5668 22.1889 55.3504 22.4857 56.0677 22.9361 56.6768 23.5139 57.286 24.0918 57.7751 24.7855 58.1157 25.555 58.4563 26.3245 58.6416 27.1543 58.6608 27.9964 58.6801 28.8385 58.5329 29.6761 58.2279 30.4605" fill="#51260e"/><path id="Vector_18" d="M53.4147 28.5224C53.2968 29.0523 53.0675 29.5504 52.742 29.9835 52.4164 30.4166 52.0024 30.7745 51.5277 31.0329 51.0531 31.2913 50.5289 31.4443 49.9905 31.4817 49.4521 31.519 48.9121 31.4396 48.4067 31.2492 47.9014 31.0587 47.4424 30.7614 47.0609 30.3773 46.6795 29.9933 46.3841 29.5315 46.1951 29.0229 46.0061 28.5143 45.9277 27.9709 45.9652 27.4292 46.0026 26.8875 46.1552 26.3602 46.4124 25.8828" fill="#47220d"/><path id="Vector_19" d="M87.4079 47.8559C90.9 47.8559 93.7309 45.0077 93.7309 41.4943 93.7309 37.981 90.9 35.1328 87.4079 35.1328c-3.492.0-6.3229 2.8482-6.3229 6.3615.0 3.5134 2.8309 6.3616 6.3229 6.3616z" fill="#f2f2f2"/><path id="Vector_20" d="M81.4246 39.2313C82.0304 37.6734 83.222 36.4183 84.741 35.7378 86.26 35.0572 87.9843 35.0059 89.5405 35.5952 91.0967 36.1845 92.3595 37.3671 93.0555 38.8864S93.8245 42.1397 93.2589 43.7129" fill="#51260e"/><path id="Vector_21" d="M88.446 41.8148C88.0132 42.6263 87.302 43.2519 86.445 43.5752 85.5879 43.8985 84.6434 43.8975 83.787 43.5724 82.9307 43.2473 82.2208 42.62 81.7897 41.8077 81.3586 40.9953 81.2355 40.0531 81.4434 39.1562" fill="#47220d"/></g><defs><clipPath id="clip0_1286_9119"><rect width="108" height="156" fill="#fff"/></clipPath></defs></svg></a></li><li><a href=https://www.facebook.com/wayne.blog.ga/ target=_blank title=Facebook rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><linearGradient id="CXanuwD9EGkBgTn76_1mxa" x1="9.993" x2="40.615" y1="-299.993" y2="-330.615" gradientTransform="matrix(1 0 0 -1 0 -290)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2aa4f4"/><stop offset="1" stop-color="#007ad9"/></linearGradient><path fill="url(#CXanuwD9EGkBgTn76_1mxa)" d="M24 4C12.954 4 4 12.954 4 24c0 10.028 7.379 18.331 17.004 19.777C21.981 43.924 22.982 41 24 41c.919.0 1.824 2.938 2.711 2.818C36.475 42.495 44 34.127 44 24 44 12.954 35.046 4 24 4z"/><path d="M27.707 21.169c0-1.424.305-3.121 1.757-3.121h4.283l-.001-5.617-.05-.852-.846-.114c-.608-.082-1.873-.253-4.206-.253-5.569.0-8.636 3.315-8.636 9.334v2.498H15.06v7.258h4.948V43.6C21.298 43.861 22.633 44 24 44c1.268.0 2.504-.131 3.707-.357V30.301h5.033l1.122-7.258h-6.155V21.169z" opacity=".05"/><path d="M27.207 21.169c0-1.353.293-3.621 2.257-3.621h3.783V12.46l-.026-.44-.433-.059c-.597-.081-1.838-.249-4.143-.249-5.323.0-8.136 3.055-8.136 8.834v2.998H15.56v6.258h4.948v13.874C21.644 43.876 22.806 44 24 44c1.094.0 2.16-.112 3.207-.281V29.801h5.104l.967-6.258h-6.072V21.169z" opacity=".05"/><path fill="#fff" d="M26.707 29.301h5.176l.813-5.258h-5.989v-2.874c0-2.184.714-4.121 2.757-4.121h3.283V12.46c-.577-.078-1.797-.248-4.102-.248-4.814.0-7.636 2.542-7.636 8.334v3.498H16.06v5.258h4.948v14.475C21.988 43.923 22.981 44 24 44c.921.0 1.82-.062 2.707-.182V29.301z"/></svg></a></li><li><a href=https://github.com/wjdesign target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/4006wayne target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://wayne-blog.com/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>關於本站</span></a></li><li><a href=https://wayne-blog.com/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>文章卷宗</span></a></li><li><a href=https://wayne-blog.com/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜尋檢索</span></a></li><li><a href=https://wayne-blog.com/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>相關連結</span></a></li><li><a href=https://wayne-blog.com/categories/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg><span>分類檢索</span></a></li><li><a href=https://wayne-blog.com/tags/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><span>標籤檢索</span></a></li><li><a href=https://wayne-blog.com/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS Feed</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://wayne-blog.com/ selected>繁體中文</option><option value=https://wayne-blog.com/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>夜晚模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目錄</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#telegram-聊天機器人原理>Telegram 聊天機器人原理</a><ol><li><a href=#機器人的運作原理>機器人的運作原理</a></li><li><a href=#機器人接收訊息的兩種模式>機器人接收訊息的兩種模式</a></li><li><a href=#機器人發送訊息的三種方式>機器人發送訊息的三種方式</a></li></ol></li><li><a href=#向-botfather-申請一隻機器人吧>向 <code>@BotFather</code> 申請一隻機器人吧！</a><ol><li><a href=#the-botfather>The BotFather</a></li><li><a href=#botfather-的功能>@BotFather 的功能</a></li><li><a href=#建立你的機器人吧>建立你的機器人吧</a></li><li><a href=#使用你的機器人吧>使用你的機器人吧</a></li></ol></li><li><a href=#telegram-機器人的設定>Telegram 機器人的設定</a><ol><li><a href=#api-token---查看-token>API Token - 查看 token</a></li><li><a href=#edit-bot---修改機器人>Edit Bot - 修改機器人</a><ol><li><a href=#edit-name---修改名字>Edit Name - 修改名字</a></li><li><a href=#edit-description---修改說明>Edit Description - 修改說明</a></li><li><a href=#edit-about---修改簡介>Edit About - 修改簡介</a></li><li><a href=#edit-botpic---修改大頭貼>Edit Botpic - 修改大頭貼</a></li><li><a href=#edit-commands---修改指令選單>Edit Commands - 修改指令選單</a></li></ol></li><li><a href=#bot-settings---設定機器人>Bot Settings - 設定機器人</a><ol><li><a href=#inline-mode---內聯模式內嵌模式>Inline Mode - 內聯模式（內嵌模式）</a></li><li><a href=#allow-group---是否能被加入群組>Allow Group? - 是否能被加入群組?</a></li><li><a href=#group-privacy---是否能讀取所有聊天室訊息>Group Privacy - 是否能讀取所有聊天室訊息</a></li><li><a href=#payments---付款相關設定>Payments - 付款相關設定</a></li><li><a href=#domain---網站登入用>Domain - 網站登入用</a></li></ol></li><li><a href=#payments---付款相關設定-1>Payments - 付款相關設定</a></li><li><a href=#transfer-ownership---轉移機器人>Transfer Ownership - 轉移機器人</a><ol><li><a href=#choose-recipient---選擇使用者>Choose recipient - 選擇使用者</a></li><li><a href=#yes-i-am-sure-proceed---確認轉移>Yes, I am sure, proceed. - 確認轉移</a></li></ol></li><li><a href=#delete-bot---刪除機器人>Delete Bot - 刪除機器人</a></li></ol></li><li><a href=#bonusdrone-cicd-流程失敗時叫你的-telegram-機器人通知你>Bonus：Drone CI/CD 流程失敗時，叫你的 Telegram 機器人通知你！</a><ol><li><a href=#建立群組並取得群組的-chat_id>建立群組，並取得群組的 chat_id</a></li><li><a href=#透過-drone-pluginhttppluginsdroneio>透過 <a href=http://plugins.drone.io/>Drone Plugin</a></a></li><li><a href=#drone-cicd-補上告警的-step>Drone CI/CD 補上告警的 step。</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><a class=btnBack href=javascript:void(0) onclick=backEvent()><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-back" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l-4 4 4 4m-4-4h11a4 4 0 000-8h-1"/></svg><span class=btnBackText>BACK</span>
</a><script>function backEvent(){if(document.referrer.indexOf(window.location.host)!==-1){history.go(-1);return}window.location.href=window.location.origin}</script><header class=article-header><div class=article-image><a href=https://wayne-blog.com/2022-08-25/drone-cicd-with-telegram-bot/><img src=https://live.staticflickr.com/65535/52309739568_a0d98a6137_o.png loading=lazy alt="Featured image of post Telegram 機器人說明，並為你的 Drone CI/CD 配置 Telegram 機器人"></a></div><div class=article-details><header class=article-category><a href=https://wayne-blog.com/categories/telegram-bot/ style=background-color:#29a9ea;color:#fff>Telegram bot
</a><a href=https://wayne-blog.com/categories/drone/ style=background-color:#000;color:#fff>Drone</a></header><div class=article-title-wrapper><h2 class=article-title><a href=https://wayne-blog.com/2022-08-25/drone-cicd-with-telegram-bot/>Telegram 機器人說明，並為你的 Drone CI/CD 配置 Telegram 機器人</a></h2><h3 class=article-subtitle>利用 Telegram 機器人，在 Drone CI/CD 的過程中失敗時發出告警，避免上程式失敗而沒察覺。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 25, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>閱讀時間: 7 分鐘</time></div></footer></div></header><section class=article-content><style>.focus{background:#f1e2e2;color:#d62c2c;padding:0 5px}</style><p><a class=link href=https://ithelp.ithome.com.tw/articles/10262450 target=_blank rel=noopener>參考網站 - Telegram 聊天機器人原理</a><br><a class=link href=https://ithelp.ithome.com.tw/articles/10262881 target=_blank rel=noopener>參考網站 - 向 @BotFather 申請一隻機器人吧！</a><br><a class=link href=https://ithelp.ithome.com.tw/articles/10263493 target=_blank rel=noopener>參考網站 - Telegram 機器人的設定</a><br><a class=link href=https://ithelp.ithome.com.tw/articles/10235182 target=_blank rel=noopener>參考網站 - CI/CD trigger WebHook to Telegram Bot</a><br><a class=link href=https://stanislas.blog/2018/08/setup-telegram-bot-for-drone-ci-cd-builds/ target=_blank rel=noopener>參考網站 - How to setup a Telegram bot for your Drone CI/CD builds</a></p><hr><h2 id=telegram-聊天機器人原理>Telegram 聊天機器人原理</h2><h3 id=機器人的運作原理>機器人的運作原理</h3><p><img src=https://live.staticflickr.com/65535/52308348357_cda336fda4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>現在你發了一段訊息給<a class=link href=https://t.me/userinfobot target=_blank rel=noopener>機器人</a><br>但是並不是機器人直接回你訊息</p><p>詳細情況如下圖：</p><p><img src=https://live.staticflickr.com/65535/52309597950_44f7f3008a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ul><li>一開始你的訊息會被傳送到 TG 伺服器</li><li>TG 伺服器會通知機器人：欸！有一則新訊息</li><li>機器人會發一個指令給 TG 伺服器</li><li>TG 伺服器照著指令的需求，回應訊息給你</li></ul><h3 id=機器人接收訊息的兩種模式>機器人接收訊息的兩種模式</h3><p>機器人可以放在伺服器，也可以用客戶端的方式運作</p><p><img src=https://live.staticflickr.com/65535/52309540513_9e586505c1_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ol><li>Webhook<br>以 <code>伺服器</code> 方式被動接收訊息，需要有 IP 位置，通常會放在 <code>網站伺服器(Web Hosting)</code> 上，要自己架設網站伺服器不是件容易的事，所以官方還提供了另一種做法</li><li>Long Polling。<br>以 <code>客戶端</code> 方式主動跟 TG 伺服器要訊息，可以直接 <code>在自己電腦上運作</code>，不需要架(租)伺服器也能讓機器人順利運作，缺點就是電腦要一直開著，當然你也可以使用 <code>雲端服務(IaaS、PaaS、SaaS)</code>。</li></ol><h3 id=機器人發送訊息的三種方式>機器人發送訊息的三種方式</h3><ol><li>HTTP GET</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://api.telegram.org/bot<span class=o>{</span>Token<span class=o>}</span>/<span class=o>{</span>Method<span class=o>}</span>?<span class=o>{</span>Parameter1<span class=o>}={</span>Value1<span class=o>}</span><span class=p>&amp;</span><span class=o>{</span>Parameter2<span class=o>}={</span>Value2<span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>直接以 <code>網址參數</code> 的方式傳送指令，GET 沒有 Body，只傳送 Headers (你可以當作不會傳送檔案過去)，通常是用來取資料用，優點是可以直接用瀏覽器執行，缺點是有 2KB 的限制，雖然不太可能用到這長的指令，但還是比較建議使用 POST。</p><ol start=2><li>HTTP POST</li></ol><p><img src=https://live.staticflickr.com/65535/52309597850_9719e972e0_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;method&#34;</span><span class=p>:</span><span class=s2>&#34;Method&#34;</span><span class=p>,</span><span class=nt>&#34;Parameter1&#34;</span><span class=p>:</span><span class=s2>&#34;Value1&#34;</span><span class=p>,</span><span class=nt>&#34;Parameter2&#34;</span><span class=p>:</span><span class=s2>&#34;Value2&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>POST 是 <code>以 Body 傳送資料(檔案)</code>，程式通常都是以這種方式溝通，網頁裡的表單也經常是以這種方式傳送，資料不會顯示在網址列，可以傳送的資料大小比 GET 大得多：1MB ~ 2GB。</p><ol start=3><li>直接 Print</li></ol><p><img src=https://live.staticflickr.com/65535/52309073396_6f5910c191_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>這個方式 <code>只有在 webhook 模式</code> 下才能使用，因為只有伺服器可以直接回應訊息。</p><hr><h2 id=向-botfather-申請一隻機器人吧>向 <code>@BotFather</code> 申請一隻機器人吧！</h2><h3 id=the-botfather>The BotFather</h3><p><img src=https://live.staticflickr.com/65535/52309629134_eaae2bcbda_o.jpg max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><strong>The Botfather</strong> 這個名字是致敬 1972 年的<strong>美國電影《教父》</strong></p><p>它是機器人，也是機器人的管理者<br>幾乎所有機器人的設定、建立都要透過他<br>用機器人設定機器人聽起來就很有趣，對吧？</p><h3 id=botfather-的功能>@BotFather 的功能</h3><p>私訊 <a class=link href=https://t.me/BotFather target=_blank rel=noopener>@BotFather</a> ，按「開始」後就會顯示出一大堆指令，真是令人眼花撩亂</p><p><img src=https://live.staticflickr.com/65535/52309644450_7cf03fb163_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p><a class=link href=https://core.telegram.org/bots#botfather-commands target=_blank rel=noopener>官方網頁版說明</a></p><p>簡單介紹幾個比較常用的功能：</p><div class=table-wrapper><table><thead><tr><th>指令</th><th>說明</th></tr></thead><tbody><tr><td><span class=focus>/newbot</span></td><td>建立一個新的機器人</td></tr><tr><td><span class=focus>/mybots</span></td><td>列出所有機器人，用按鈕的方式設定機器人，而非指令（這樣可以讓聊天紀錄變得很乾淨，我比較喜歡用這個）</td></tr><tr><td>修改相關</td><td></td></tr><tr><td><span class=focus>/setname</span></td><td>修改顯示名稱</td></tr><tr><td><span class=focus>/setdescription</span></td><td>修改說明</td></tr><tr><td><span class=focus>/setabouttext</span></td><td>修改簡介</td></tr><tr><td><span class=focus>/setuserpic</span></td><td>修改大頭貼</td></tr><tr><td><span class=focus>/setcommands</span></td><td>修改指令選單</td></tr><tr><td><span class=focus>/deletebot</span></td><td>刪除機器人</td></tr><tr><td>設定相關</td><td></td></tr><tr><td><span class=focus>/token</span></td><td>顯示機器人的 token</td></tr><tr><td><span class=focus>/revoke</span></td><td>產生新的 token，舊的會失效</td></tr><tr><td><span class=focus>/setjoingroups</span></td><td>設定是否能被加入群組</td></tr><tr><td><span class=focus>/setprivacy</span></td><td>設定是否能讀取所有聊天室訊息（機器人的訊息除外，機器人不論如何都不會看到機器人的訊息）</td></tr></tbody></table></div><h3 id=建立你的機器人吧>建立你的機器人吧</h3><ol><li>輸入 <span class=focus>/newbot</span> 指令</li></ol><p><img src=https://live.staticflickr.com/65535/52308393647_5334dc4e07_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ol start=2><li>幫機器人取名字</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Alright, a new bot. How are we going to call it? Please choose a name <span class=k>for</span> your bot.
</span></span></code></pre></td></tr></table></div></div><p>這邊它會要你幫你的機器人取一個名字，這個以後能修改，所以隨便取沒差</p><p><img src=https://live.staticflickr.com/65535/52309118926_0d7b61373c_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><ol start=3><li>設定 username</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Good. Now let<span class=err>&#39;</span>s choose a username <span class=k>for</span> your bot. It must end in <span class=sb>`</span>bot<span class=sb>`</span>. Like this, <span class=k>for</span> example: TetrisBot or tetris_bot.
</span></span></code></pre></td></tr></table></div></div><p><span class=focus>⚠️ 注意：設定後就不能修改了，請謹慎思考之後設定，避免反悔時需要請使用者遷移</span></p><p>需要幫你的機器人設定一個 username，必須符合以下規則：</p><ul><li>不需要打 @</li><li>以 a~z 開頭</li><li>以 bot 結尾</li><li>只能使用 a~z、0~9 和底線</li><li>最小長度為 5 個字元</li></ul><p>顯示時會區分大小寫，使用時不區分大小寫（例如設定成 <a class=link href=https://t.me/TetrisBot target=_blank rel=noopener>@TetrisBot</a>，用 <a class=link href=https://t.me/tETrISbOt target=_blank rel=noopener>@tETrISbOt</a> 一樣會指到同一個機器人）</p><hr><p>常見問題：</p><ul><li>不能以數字開頭</li></ul><p><img src=https://live.staticflickr.com/65535/52309644425_f3dc618b46_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Sorry, this username is invalid.
</span></span></code></pre></td></tr></table></div></div><ul><li>不能用 bot 以外的字結尾</li></ul><p><img src=https://live.staticflickr.com/65535/52308393612_b52bb8c813_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Sorry, the username must end in <span class=s1>&#39;bot&#39;</span>. E.g. <span class=s1>&#39;Tetris_bot&#39;</span> or <span class=s1>&#39;Tetrisbot&#39;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>username 已經被別人先用走了</li></ul><p><img src=https://live.staticflickr.com/65535/52309644420_005c3656e4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Sorry, this username is already taken. Please try something different.
</span></span></code></pre></td></tr></table></div></div><hr><p>出現 Done 表示你設定成功了</p><p><img src=https://live.staticflickr.com/65535/52309644405_82eedcfbe9_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=使用你的機器人吧>使用你的機器人吧</h3><blockquote><p>現在你已經可以使用機器人了</p></blockquote><p>按下說明裡的連結(<code>t.me/ironman2021_by_miku3920_bot</code> 點你自己的)，並且點擊「開始」</p><p>然後你就會發現什麼事情都沒發生，因為我們還沒寫機器人的程式嘛</p><p>不過就算不寫程式也可以讓它說話，利用 <code>HTTP GET</code> 方法，與 <a class=link href=https://core.telegram.org/bots/api#sendmessage target=_blank rel=noopener>sendMessage</a> 這個 API</p><p><img src=https://live.staticflickr.com/65535/52309584823_4ab6611c03_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://api.telegram.org/bot<span class=o>{</span>Token<span class=o>}</span>/<span class=o>{</span>Method<span class=o>}</span>?<span class=o>{</span>Parameter1<span class=o>}={</span>Value1<span class=o>}</span><span class=p>&amp;</span><span class=o>{</span>Parameter2<span class=o>}={</span>Value2<span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Token：<span class=focus>1985044907:AAEdySrbzTc8tVdBjfymlfyaBUJGeu7r-v4</span>（你的 bot token）</li><li>Method：sendMessage</li><li>Parameter1：chat_id</li><li>Value1：127355800（你的 uid，可以透過 <a class=link href=https://t.me/userinfobot target=_blank rel=noopener>@userinfobot</a> 取得）</li><li>Parameter2：text</li><li>Value2：Hello,+World!+你好，世界！（空白要用「+」替換）</li></ul><p>組合完會像這個樣子，直接貼到瀏覽器的網址列就能使用囉：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://api.telegram.org/bot1985044907:AAEdySrbzTc8tVdBjfymlfyaBUJGeu7r-v4/sendMessage?chat_id<span class=o>=</span>127355800<span class=p>&amp;</span><span class=nv>text</span><span class=o>=</span>Hello,+World!+你好，世界！
</span></span></code></pre></td></tr></table></div></div><blockquote><p>PS：聊天室的 chat_id，先將你的機器人邀請進入聊天室，再使用此網址取得：<code>https://api.telegram.org/bot${your_bot_token}/getUpdates</code></p></blockquote><hr><p>常見問題：</p><ul><li>Token 打錯</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>401</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Unauthorized&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Method 打錯</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>404</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Not Found&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>chat_id 的值不能為空</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>400</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Bad Request: chat_id is empty&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>chat_id 的值打錯</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>400</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Bad Request: chat not found&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>沒私訊過機器人</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>403</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Forbidden: bot can&#39;t initiate conversation with a user&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>text 的值不能為空</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>false</span><span class=p>,</span><span class=nt>&#34;error_code&#34;</span><span class=p>:</span><span class=mi>400</span><span class=p>,</span><span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Bad Request: message text is empty&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><p>成功的話會返回機器人發送的訊息（json 格式）到網頁上：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;ok&#34;</span><span class=p>:</span><span class=kc>true</span><span class=p>,</span><span class=nt>&#34;result&#34;</span><span class=p>:{</span><span class=nt>&#34;message_id&#34;</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span><span class=nt>&#34;from&#34;</span><span class=p>:{</span><span class=nt>&#34;id&#34;</span><span class=p>:</span><span class=mi>1985044907</span><span class=p>,</span><span class=nt>&#34;is_bot&#34;</span><span class=p>:</span><span class=kc>true</span><span class=p>,</span><span class=nt>&#34;first_name&#34;</span><span class=p>:</span><span class=s2>&#34;2021 iThome\u9435\u4eba\u8cfd&#34;</span><span class=p>,</span><span class=nt>&#34;username&#34;</span><span class=p>:</span><span class=s2>&#34;ironman2021_by_miku3920_bot&#34;</span><span class=p>},</span><span class=nt>&#34;chat&#34;</span><span class=p>:{</span><span class=nt>&#34;id&#34;</span><span class=p>:</span><span class=mi>127355800</span><span class=p>,</span><span class=nt>&#34;first_name&#34;</span><span class=p>:</span><span class=s2>&#34;\u521d\u97f3&#34;</span><span class=p>,</span><span class=nt>&#34;last_name&#34;</span><span class=p>:</span><span class=s2>&#34;\u30df\u30af&#34;</span><span class=p>,</span><span class=nt>&#34;username&#34;</span><span class=p>:</span><span class=s2>&#34;miku3920&#34;</span><span class=p>,</span><span class=nt>&#34;type&#34;</span><span class=p>:</span><span class=s2>&#34;private&#34;</span><span class=p>},</span><span class=nt>&#34;date&#34;</span><span class=p>:</span><span class=mi>1631440402</span><span class=p>,</span><span class=nt>&#34;text&#34;</span><span class=p>:</span><span class=s2>&#34;Hello, World! \u4f60\u597d\uff0c\u4e16\u754c\uff01&#34;</span><span class=p>}}</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://live.staticflickr.com/65535/52308393572_c333ed191d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><hr><h2 id=telegram-機器人的設定>Telegram 機器人的設定</h2><p>輸入 <span class=focus>/mybots</span> 指令後就會出現<strong>機器人列表</strong></p><p><img src=https://live.staticflickr.com/65535/52309668155_7942a178ee_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Choose a bot from the list below:
</span></span></code></pre></td></tr></table></div></div><p>選擇一個你要查看或設定的機器人<br>我之前就有建立過機器人，所以會顯示兩個</p><p><img src=https://live.staticflickr.com/65535/52309652519_56d6f78185_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Here it is: <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot.
</span></span><span class=line><span class=cl>What <span class=k>do</span> you want to <span class=k>do</span> with the bot?
</span></span></code></pre></td></tr></table></div></div><p>點下去後就會出現六個選項，我一個個來講解：</p><h3 id=api-token---查看-token>API Token - 查看 token</h3><p><img src=https://live.staticflickr.com/65535/52309652514_98dd7a3dd6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Here is the token <span class=k>for</span> bot <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1985044907:AAH1kZaEZFHoA6YqB6IFtvbkyOjvcpPOfbQ
</span></span></code></pre></td></tr></table></div></div><p>忘記 token 時可以來這裡查看，或是你想要重置 token</p><ul><li><strong>Revoke current token - 重置 token</strong></li></ul><p><img src=https://live.staticflickr.com/65535/52308416667_233f4fe50a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Token <span class=k>for</span> the bot <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot has been revoked. New token is:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1985044907:AAG3E05XowN2sqy286aplwr6oBc17q0CByg
</span></span></code></pre></td></tr></table></div></div><p>按下重置按鈕後，它就會給你一個新的 token，舊的會立即失效</p><h3 id=edit-bot---修改機器人>Edit Bot - 修改機器人</h3><p><img src=https://live.staticflickr.com/65535/52309607608_61e0f4f0d8_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Edit @ironman2021_by_miku3920_bot info.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Name: <span class=m>2021</span> iThome鐵人賽
</span></span><span class=line><span class=cl>Description: ?
</span></span><span class=line><span class=cl>About: ?
</span></span><span class=line><span class=cl>Botpic: ? no botpic
</span></span><span class=line><span class=cl>Commands: no commands yet
</span></span></code></pre></td></tr></table></div></div><h4 id=edit-name---修改名字>Edit Name - 修改名字</h4><p>按下按鈕後會出現以下訊息</p><p><img src=https://live.staticflickr.com/65535/52309668120_2ee88d5703_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>OK. Send me the new name <span class=k>for</span> your bot.
</span></span></code></pre></td></tr></table></div></div><p>直接傳送新的名稱給它就行了</p><p><img src=https://live.staticflickr.com/65535/52309607598_0300347a88_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Success! Name updated. /help
</span></span></code></pre></td></tr></table></div></div><p>看到這個就是修改成功了</p><h4 id=edit-description---修改說明>Edit Description - 修改說明</h4><p>這個會顯示在聊天室的最上方，用來說明機器人有能些功能，或是如何使用</p><p><img src=https://live.staticflickr.com/65535/52308416582_b18009d3e7_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>OK. Send me the new description <span class=k>for</span> the bot. People will see this description when they open a chat with your bot, in a block titled <span class=s1>&#39;What can this bot do?&#39;</span>.
</span></span></code></pre></td></tr></table></div></div><p>傳送一段訊息給它，可以是<strong>多行</strong>的文字</p><p><img src=https://live.staticflickr.com/65535/52309141676_d0f83633af_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Success! Description updated. /help
</span></span></code></pre></td></tr></table></div></div><p>看到這個就是修改成功了</p><p><img src=https://live.staticflickr.com/65535/52309668070_2475f69d68_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>原本在聊天室上方啥都沒有，現在多了一個訊息框</p><h4 id=edit-about---修改簡介>Edit About - 修改簡介</h4><p>這個會顯示在機器人的個人資訊頁面上</p><p><img src=https://live.staticflickr.com/65535/52308416567_70010be2b0_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>OK. Send me the new <span class=s1>&#39;About&#39;</span> text. People will see this text on the bot<span class=err>&#39;</span>s profile page and it will be sent together with a link to your bot when they share it with someone.
</span></span></code></pre></td></tr></table></div></div><p>傳送一段訊息給它，可以是<strong>多行</strong>的文字</p><p><img src=https://live.staticflickr.com/65535/52309668055_c460ac12f8_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Success! About section updated. /help
</span></span></code></pre></td></tr></table></div></div><p>看到這個就是修改成功了</p><p><img src=https://live.staticflickr.com/65535/52309652359_c26ac0e951_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>原本是只有顯示 <strong>username</strong>，現在多了 <strong>簡介</strong></p><h4 id=edit-botpic---修改大頭貼>Edit Botpic - 修改大頭貼</h4><p><img src=https://live.staticflickr.com/65535/52309668010_321b4295c2_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>OK. Send me the new profile photo <span class=k>for</span> the bot.
</span></span></code></pre></td></tr></table></div></div><p>建議先裁切成正方形（1：1）</p><p><img src=https://live.staticflickr.com/65535/52309607433_9fc765ac03_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Please send me the picture as a <span class=s1>&#39;Photo&#39;</span>, not as a <span class=s1>&#39;File&#39;</span>.
</span></span></code></pre></td></tr></table></div></div><p>這邊要傳送照片，不能傳檔案</p><p><img src=https://live.staticflickr.com/65535/52309652224_7d0f0f6675_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Success! Profile photo updated. /help
</span></span></code></pre></td></tr></table></div></div><p>成功的話，機器人的大頭貼就會更新成剛剛上傳的圖片</p><p><img src=https://live.staticflickr.com/65535/52309667935_3833800a9f_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=edit-commands---修改指令選單>Edit Commands - 修改指令選單</h4><p><img src=https://live.staticflickr.com/65535/52309141546_2e7bf6f4fe_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>OK. Send me a list of commands <span class=k>for</span> your bot. Please use this format:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>command1 - Description
</span></span><span class=line><span class=cl>command2 - Another description
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Send /empty to keep the list empty.
</span></span></code></pre></td></tr></table></div></div><p>要按照它給的格式輸入，不需要打 <span class=focus>/</span></p><p><img src=https://live.staticflickr.com/65535/52308416417_0cb668469d_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Success! Command list updated. /help
</span></span></code></pre></td></tr></table></div></div><p>成功的話，選單中就會出現剛剛設定的指令</p><p><img src=https://live.staticflickr.com/65535/52309141536_fb659e4633_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>如果機器人是在群組使用，建議改成<strong>空的</strong>，避免誤觸<br>群組裡較常使用 <span class=focus>!</span> 開頭的指令，這樣才不會變成藍藍的容易按到<br>在剛剛那邊，按 <span class=focus>/empty</span> 就行了</p><p><img src=https://live.staticflickr.com/65535/52309667915_7418c5e63a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>修改完會變成這樣：</p><p><img src=https://live.staticflickr.com/65535/52309652144_ee7d18aea2_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Edit @ironman2021_by_miku3920_bot info.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Name: <span class=m>2021</span> iThome鐵人賽
</span></span><span class=line><span class=cl>Description: 一些說明文字，功能如下：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1. AAA
</span></span><span class=line><span class=cl>2. BBB
</span></span><span class=line><span class=cl>3. CCC
</span></span><span class=line><span class=cl>About: 鐵人賽展示用機器人 by @miku3920
</span></span><span class=line><span class=cl>鐵人賽展示用機器人 by @miku3920
</span></span><span class=line><span class=cl>鐵人賽展示用機器人 by @miku3920
</span></span><span class=line><span class=cl>Botpic: ? has a botpic
</span></span><span class=line><span class=cl>Commands: no commands yet
</span></span></code></pre></td></tr></table></div></div><h3 id=bot-settings---設定機器人>Bot Settings - 設定機器人</h3><p><img src=https://live.staticflickr.com/65535/52309141511_93a591c7b4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Settings <span class=k>for</span> @ironman2021_by_miku3920_bot.
</span></span></code></pre></td></tr></table></div></div><h4 id=inline-mode---內聯模式內嵌模式>Inline Mode - 內聯模式（內嵌模式）</h4><p>可以讓機器人直接在訊息輸入框使用，不需要將機器人加入群組<br>這個功能夠講一整天了，目前還用不到，我們以後專門找一天來講</p><p><img src=https://live.staticflickr.com/65535/52309607343_e9a1d2a9f8_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=allow-group---是否能被加入群組>Allow Group? - 是否能被加入群組?</h4><p><img src=https://live.staticflickr.com/65535/52308416352_a2ff6614cf_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Groups are currently enabled <span class=k>for</span> bot <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Disabling groups will forbid users to add <span class=m>2021</span> iThome鐵人賽 to groups.
</span></span></code></pre></td></tr></table></div></div><p><strong>enabled(預設)</strong> - 表示機器人<span class=focus>能</span>被別人拉進群組<br>如果你不想讓別人拉你的機器人，可以按 <span class=focus>Turn groups off</span></p><p><img src=https://live.staticflickr.com/65535/52309141491_6af0b5bd5a_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Groups are currently disabled <span class=k>for</span> bot <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Enabling groups will allow users to add <span class=m>2021</span> iThome鐵人賽 to groups.
</span></span></code></pre></td></tr></table></div></div><p><strong>disabled</strong> - 表示機器人<span class=focus>不能</span>被別人拉進群組<br>如果你想讓別人的群組也能使用你的機器人，就按 <span class=focus>Turn groups on</span></p><h4 id=group-privacy---是否能讀取所有聊天室訊息>Group Privacy - 是否能讀取所有聊天室訊息</h4><p><a class=link href=https://core.telegram.org/bots#privacy-mode target=_blank rel=noopener>官方說明</a></p><p><img src=https://live.staticflickr.com/65535/52309651989_610f8406ea_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Privacy mode is enabled <span class=k>for</span> <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot.
</span></span></code></pre></td></tr></table></div></div><p><strong>enabled(預設)</strong> - 表示機器人是成員時<span class=focus>不能</span>讀取群組裡的所有訊息</p><p><img src=https://live.staticflickr.com/65535/52308416267_3ce1c64a42_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>機器人只看的到它的指令和回覆它的訊息</p><p><img src=https://live.staticflickr.com/65535/52309607238_9233ba33c4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>但是如果升級成管理員就沒這限制</p><p><img src=https://live.staticflickr.com/65535/52309141421_4d2c39a6de_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Privacy mode is disabled <span class=k>for</span> <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot.
</span></span></code></pre></td></tr></table></div></div><p><strong>disabled</strong> - 表示機器人就算不是管理員也<span class=focus>能</span>讀取群組裡的所有訊息</p><p><img src=https://live.staticflickr.com/65535/52309667795_265c8ee4c5_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>機器人是成員時就能讀取所有訊息</p><h4 id=payments---付款相關設定>Payments - 付款相關設定</h4><p>台灣不能用，有生之年系列，跳過</p><h4 id=domain---網站登入用>Domain - 網站登入用</h4><p>與機器人較無關，暫時不提</p><h3 id=payments---付款相關設定-1>Payments - 付款相關設定</h3><p><img src=https://live.staticflickr.com/65535/52308416247_b72c5ba288_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>歐付寶、綠界、台灣 pay、街口、悠遊付，不考慮<a class=link href=https://core.telegram.org/bots/payments#supported-payment-providers target=_blank rel=noopener>進駐</a>一下嗎</p><h3 id=transfer-ownership---轉移機器人>Transfer Ownership - 轉移機器人</h3><p><span class=focus>⚠️ 注意：非必要請勿使用！</span></p><p><img src=https://live.staticflickr.com/65535/52309141291_415b0afb19_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h4 id=choose-recipient---選擇使用者>Choose recipient - 選擇使用者</h4><p><img src=https://live.staticflickr.com/65535/52309141281_4be9d0e0d4_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Please share the new owner<span class=err>&#39;</span>s contact or their username.
</span></span></code></pre></td></tr></table></div></div><p>按下按鈕後，它會請你把對方以聯絡人的方式分享給它，或是輸入對方的 username</p><p>常見問題：</p><ul><li>要輸入 @username，不能只輸入 username</li></ul><p><img src=https://live.staticflickr.com/65535/52308416047_00c484eb7f_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Incorrect format. Please make sure to send either a contact or username.
</span></span></code></pre></td></tr></table></div></div><ul><li>不能轉移給頻道、機器人、或是自己</li></ul><p><img src=https://live.staticflickr.com/65535/52309606988_01f07f88bc_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Bot ownership can<span class=err>&#39;</span>t be transferred to channel, another bot or yourself.
</span></span></code></pre></td></tr></table></div></div><ul><li>對方要私訊過機器人，而且不能封鎖機器人</li></ul><p><img src=https://live.staticflickr.com/65535/52309141241_c4fc2c3489_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Oops! Please make sure the new owner has sent at least one message to the bot and didn<span class=err>&#39;</span>t block it.
</span></span></code></pre></td></tr></table></div></div><p>輸入正確的話，就會出現以下訊息：</p><p><img src=https://live.staticflickr.com/65535/52309141191_fa031bc1a6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>You are about to transfer ownership of the bot @ironman2021_by_miku3920_bot to 初音 ミク.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>After this you won<span class=s1>&#39;t be able to control the bot anymore. The new owner will get access to the bot messages and other data – and can even delete the bot completely.
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>Please make sure you don&#39;</span>t violate your users<span class=err>&#39;</span> privacy <span class=o>(</span>consider GDPR and other laws<span class=o>)</span>. If you are sure please press the button below.
</span></span></code></pre></td></tr></table></div></div><p>看到這則訊息代表離成功轉移不遠了</p><h4 id=yes-i-am-sure-proceed---確認轉移>Yes, I am sure, proceed. - 確認轉移</h4><p><img src=https://live.staticflickr.com/65535/52308416002_e3811c9949_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><p>如果你有設定兩步驟驗證的話，這邊會跳出來要你輸入</p><p>常見問題：</p><ul><li>對方擁有的機器人數量已達上限</li></ul><p><img src=https://live.staticflickr.com/65535/52308415987_04ff40e3e6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Oops! has reached the maximum allowed number of bots. Please ask them to delete <span class=o>(</span>or pass to another account<span class=o>)</span> one of their unused bots first.
</span></span></code></pre></td></tr></table></div></div><p>如果對方已經有 20 隻機器人（達到上限），就會出現這個對話框，他請你先叫對方轉移或刪除一些沒在用的機器人，這樣你才可以轉移給對方。</p><p><img src=https://live.staticflickr.com/65535/52308415977_b15b3c5ae6_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>It worked! We hope @ironman2021_by_miku3920_bot will enjoy its new home.
</span></span></code></pre></td></tr></table></div></div><p>如果轉移成功就會出現這則訊息</p><p><img src=https://live.staticflickr.com/65535/52309606933_0e80988d42_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Ownership of the bot @ironman2021_by_miku3920_bot has been transferred to you by 初音 ミク. You can now control the bot using /mybots.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>If you did not request this, you can delete the bot.
</span></span></code></pre></td></tr></table></div></div><h3 id=delete-bot---刪除機器人>Delete Bot - 刪除機器人</h3><p><span class=focus>⚠️ 注意：非必要請勿使用！</span></p><p><img src=https://live.staticflickr.com/65535/52308415872_35feabd1eb_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>You are about to delete your bot <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot. Is that correct?
</span></span></code></pre></td></tr></table></div></div><p>這邊的按鈕順序是隨機的，避免你頭腦不清楚把機器人刪了</p><p><img src=https://live.staticflickr.com/65535/52308415877_babfb07868_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Are you TOTALLY sure you want to delete <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot ?
</span></span></code></pre></td></tr></table></div></div><p>要連續按兩次 Yes 機器人才會被刪掉</p><p><img src=https://live.staticflickr.com/65535/52309140951_866ae715cc_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>You have deleted <span class=m>2021</span> iThome鐵人賽 @ironman2021_by_miku3920_bot.
</span></span></code></pre></td></tr></table></div></div><p>看到這則訊息表示機器人已經刪除，無法復原<br>所有群組裡的這隻機器人都會顯示成 <span class=focus>Deleted Account</span></p><hr><h2 id=bonusdrone-cicd-流程失敗時叫你的-telegram-機器人通知你>Bonus：Drone CI/CD 流程失敗時，叫你的 Telegram 機器人通知你！</h2><h3 id=建立群組並取得群組的-chat_id>建立群組，並取得群組的 chat_id</h3><ol><li>Telegram 建立群組，並將你的 Telegram 機器人拉進群組內(<code>@{your bot username}</code>)。</li><li>透過此 API 取得群組的 <span class=focus>chat_id</span>：</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://api.telegram.org/bot<span class=si>${</span><span class=nv>your</span><span class=p> bot token</span><span class=si>}</span>/getUpdates
</span></span></code></pre></td></tr></table></div></div><p>getUpdates API 會取得 json，找到你剛剛開的群組的 <span class=focus>chat_id</span></p><p><img src=https://live.staticflickr.com/65535/52309248836_52f78bd265_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=透過-drone-pluginhttppluginsdroneio>透過 <a class=link href=http://plugins.drone.io/ target=_blank rel=noopener>Drone Plugin</a></h3><p>從 <a class=link href=http://plugins.drone.io/ target=_blank rel=noopener>Drone Plugin</a> 可以找到很多套件，可以搭配 CI/CD 使用，而我從這找到 <a class=link href=http://plugins.drone.io/appleboy/drone-telegram/ target=_blank rel=noopener>Telegram by appleboy</a> 的套件。</p><p><img src=https://live.staticflickr.com/65535/52309719978_3254d45d05_o.png max-width=100% max-height=100% class=gallery-image loading=lazy></p><h3 id=drone-cicd-補上告警的-step>Drone CI/CD 補上告警的 step。</h3><p>你的 Drone CI/CD step 加上使用 <a class=link href=http://plugins.drone.io/appleboy/drone-telegram/ target=_blank rel=noopener>Telegram by appleboy</a> 叫你的機器人於 pipeline 失敗時於群組內發出告警。</p><blockquote><p>PS：記得將你的 telegram bot token 與群組的 chat_id 加到 Drone Secrets。</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>kind: pipeline
</span></span><span class=line><span class=cl>type: docker
</span></span><span class=line><span class=cl>name: install and deploy
</span></span><span class=line><span class=cl>steps:
</span></span><span class=line><span class=cl>  - name: build
</span></span><span class=line><span class=cl>    image: node:15
</span></span><span class=line><span class=cl>    commands:
</span></span><span class=line><span class=cl>      - node --version
</span></span><span class=line><span class=cl>      - yarn --version
</span></span><span class=line><span class=cl>      # - yarn cache clean -f
</span></span><span class=line><span class=cl>      - yarn install --ignore-engines
</span></span><span class=line><span class=cl>      - yarn run build
</span></span><span class=line><span class=cl>      - ls -al dist/static/
</span></span><span class=line><span class=cl>    when:
</span></span><span class=line><span class=cl>      branch:
</span></span><span class=line><span class=cl>        - master
</span></span><span class=line><span class=cl>      event:
</span></span><span class=line><span class=cl>        - push
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  - name: deploy
</span></span><span class=line><span class=cl>    image: thegeeklab/drone-s3-sync
</span></span><span class=line><span class=cl>    settings:
</span></span><span class=line><span class=cl>      bucket: xxxxxxxxx(你的aws s3 bucket)
</span></span><span class=line><span class=cl>      access_key:
</span></span><span class=line><span class=cl>        from_secret: aws_access_key_id
</span></span><span class=line><span class=cl>      secret_key:
</span></span><span class=line><span class=cl>        from_secret: aws_secret_access_key
</span></span><span class=line><span class=cl>      source: ./dist/
</span></span><span class=line><span class=cl>      target: /admin
</span></span><span class=line><span class=cl>      acl:
</span></span><span class=line><span class=cl>        &#34;*&#34;: public-read
</span></span><span class=line><span class=cl>      region: xxxxxxxxx(你的aws s3 region)
</span></span><span class=line><span class=cl>      delete: true
</span></span><span class=line><span class=cl>      cloudfront_distribution: xxxxxxxxx(你的aws cloudfront distribution)
</span></span><span class=line><span class=cl>    when:
</span></span><span class=line><span class=cl>      branch:
</span></span><span class=line><span class=cl>        - master
</span></span><span class=line><span class=cl>      event:
</span></span><span class=line><span class=cl>        - push
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gi>+  - name: send telegram notification
</span></span></span><span class=line><span class=cl><span class=gi>+    image: appleboy/drone-telegram
</span></span></span><span class=line><span class=cl><span class=gi>+    settings:
</span></span></span><span class=line><span class=cl><span class=gi>+      token:
</span></span></span><span class=line><span class=cl><span class=gi>+        from_secret: telegram_bot_token
</span></span></span><span class=line><span class=cl><span class=gi>+      to:
</span></span></span><span class=line><span class=cl><span class=gi>+        from_secret: telegram_chat_id
</span></span></span><span class=line><span class=cl><span class=gi>+      format: markdown
</span></span></span><span class=line><span class=cl><span class=gi>+      message: &gt;
</span></span></span><span class=line><span class=cl><span class=gi>+        `{{repo.name}}` 於 `{{commit.branch}}` 編譯失敗：#`{{build.number}}`
</span></span></span><span class=line><span class=cl><span class=gi>+    when:
</span></span></span><span class=line><span class=cl><span class=gi>+      status: [failure]
</span></span></span></code></pre></td></tr></table></div></div><ul><li>token： 你的 Telegram 機器人的 token。</li><li>to： chat_id。</li><li>format： 使用 markdown 格式。</li><li>message： 機器人傳的訊息。</li><li>when.status [failure]： 當此 pipeline 失敗時觸發此 step(send telegram notification)，亦可於成功或失敗皆告警：[success, failure]。</li></ul><p><a class=link href=https://plugins.drone.io/plugins/telegram target=_blank rel=noopener>詳細參數可參考 Drone Plugin - appleboy/drone-telegram</a></p><hr></section><footer class=article-footer><section class=article-tags><a href=https://wayne-blog.com/tags/telegram-bot/>telegram bot</a>
<a href=https://wayne-blog.com/tags/drone/>drone</a>
<a href=https://wayne-blog.com/tags/ci/cd/>ci/cd</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-blog-wayne.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Wayne's blog | 偉恩的部落格 | 技術博客</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=https://wayne-blog.com/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script>"serviceWorker"in navigator&&(console.log("Check service worker register?"),navigator.serviceWorker.register("./service-worker.js").then(function(){console.log("service worker registed.")}).catch(function(e){console.log("service worker registed fail. This happened: ",e)}));function toggleBtnScrollTop(){let t=document.documentElement.scrollTop||document.body.scrollTop;const e=document.getElementById("btnScrollTop");if(t){e&&!e.classList.contains("show")&&e.classList.add("show");return}e&&e.classList.contains("show")&&e.classList.remove("show")}window.addEventListener("scroll",toggleBtnScrollTop),document.addEventListener("DOMContentLoaded",toggleBtnScrollTop);function clickToScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}function clickToMessenger(){window.open("//m.me/100278986238046","_blank")}</script><button id=btnScrollTop onclick=clickToScrollTop() title=回到頁頂>
<img src=https://wayne-blog.com/img/top_huf0c1dc16de3f1372c70e7aced5d60e6d_660_30x0_resize_box_3.png alt=scroll-top>
</button>
<button id=btnMessenger onclick=clickToMessenger() title="Facebook Messenger">
<img src=https://wayne-blog.com/img/messenger_hu3f63590c9d474cc4c51a145f9812597b_7669_50x0_resize_box_3.png alt="facebook messenger"></button></body></html>